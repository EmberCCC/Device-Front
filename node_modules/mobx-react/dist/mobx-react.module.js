import{unstable_batchedUpdates as r}from"react-dom";import e,{useState as t,useRef as n,useMemo as o,useEffect as i,useCallback as a,useDebugValue as u,memo as c,forwardRef as f,Component as s,PureComponent as p,Children as l,createContext as d,createElement as y}from"react";import{spy as b,observable as h,computed as v,getDependencyTree as m,Reaction as w,createAtom as O,isObservableArray as g,isObservableObject as j,isObservableMap as x,untracked as P,configure as E}from"mobx";if(!t)throw new Error("mobx-react-lite requires React with Hooks support");if(!b)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");function R(r){var e=n(null);return e.current||(e.current=h(r)),e.current}function k(r,e){return void 0===e&&(e=[]),o(function(){return v(r)},e).get()}var _=function(){};function S(r,e){void 0===e&&(e=[]);var t=n(null),o=n(!1);function a(e){if(o.current)return _;if(!t.current){var n=r();if("function"!=typeof n){var i=new Error("generated disposer must be a function");return console.error(i),_}t.current=n}return function(){t.current&&(t.current(),t.current=null),e&&(o.current=!0)}}return i(function(){return a(!1)},e),a(!0)}var C=!1;function U(){return C}var T=function(){return(T=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}).apply(this,arguments)};function A(r){return r.current?m(r.current):"<unknown>"}var M=[];function $(r,e){if(void 0===e&&(e="observed"),U())return r();var o,c,f,s=(f=function(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var n,o,i=t.call(r),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(r){o={error:r}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return a}(t(0),2)[1],a(function(){f(function(r){return r+1})},[])),p=n(null);if(p.current||(p.current=new w("observer("+e+")",function(){s()})),u(p,A),function(r){i(function(){return r},M)}(function(){p.current.dispose()}),p.current.track(function(){try{o=r()}catch(r){c=r}}),c)throw p.current.dispose(),c;return o}var D={$$typeof:!0,render:!0,compare:!0,type:!0};function q(r){var e=r.children||r.render;return"function"!=typeof e?null:$(e)}function I(r,e,t,n,o){var i="function"==typeof r[e],a="function"==typeof r["children"===e?"render":"children"];return i&&a?new Error("MobX Observer: Do not use children and render in the same time in`"+t):i||a?null:new Error("Invalid prop `"+o+"` of type `"+typeof r[e]+"` supplied to `"+t+"`, expected `function`.")}q.propTypes={children:I,render:I},q.displayName="Observer";var W=0,F={};function N(r){return F[r]||(F[r]=function(r){if("function"==typeof Symbol)return Symbol(r);var e="__$mobx-react "+r+" ("+W+")";return W++,e}(r)),F[r]}function H(r,e){if(X(r,e))return!0;if("object"!=typeof r||null===r||"object"!=typeof e||null===e)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(var o=0;o<t.length;o++)if(!hasOwnProperty.call(e,t[o])||!X(r[t[o]],e[t[o]]))return!1;return!0}function X(r,e){return r===e?0!==r||1/r==1/e:r!=r&&e!=e}var L={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,propTypes:1},Y=!1,z=N("skipRender"),B=N("isForcingUpdate"),G="function"==typeof f&&f(function(r,e){}).$$typeof;function J(r,e,t){Object.hasOwnProperty.call(r,e)?r[e]=t:Object.defineProperty(r,e,{enumerable:!1,configurable:!0,writable:!0,value:t})}function K(r){Y=r,C=r}function Q(r,e){return Y&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==e||!H(this.props,r)}function V(r,e){var t=N("reactProp_"+e+"_valueHolder"),n=N("reactProp_"+e+"_atomHolder");function o(){return this[n]||J(this,n,O("reactive "+e)),this[n]}Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){return o.call(this).reportObserved(),this[t]},set:function(r){this[B]||H(this[t],r)?J(this,t,r):(J(this,t,r),J(this,z,!0),o.call(this).reportChanged(),J(this,z,!1))}})}function Z(r){if(!0===r.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),G&&r.$$typeof===G){var t=r.render;if("function"!=typeof t)throw new Error("render property of ForwardRef was not a function");return f(function(){var r=arguments;return e.createElement(q,null,function(){return t.apply(void 0,r)})})}return"function"!=typeof r||r.prototype&&r.prototype.render||r.isReactClass||s.isPrototypeOf(r)?function(r){var t=r.prototype||r;if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(r.__proto__!==p)if(t.shouldComponentUpdate){if(t.shouldComponentUpdate!==Q)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else t.shouldComponentUpdate=Q;V(t,"props"),V(t,"state");var n=t.render;return t.render=function(){if(!this.baseRender){var r=n.bind(this);this.baseRender=function(){return r()}}return e.createElement(q,null,this.baseRender)},r}(r):function(r,e){if(U())return r;var t,n,o,i=T({forwardRef:!1},void 0),a=r.displayName||r.name,u=function(e,t){return $(function(){return r(e,t)},a)};return t=c(i.forwardRef?f(u):u),n=r,o=t,Object.keys(n).forEach(function(r){n.hasOwnProperty(r)&&!D[r]&&Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(n,r))}),t.displayName=a,t}(r)}var rr={children:!0,key:!0,ref:!0},er=d({}),tr=function(r){function e(e,t){r.call(this,e,t),this.state=Object.assign({},t,nr(e))}return r&&(e.__proto__=r),(e.prototype=Object.create(r&&r.prototype)).constructor=e,e.prototype.render=function(){return y(er.Provider,{value:this.state},l.only(this.props.children))},e.getDerivedStateFromProps=function(r,e){if(!H(e,Object.assign({},e,nr(r))))throw new Error("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children");return e},e}(s);function nr(r){var e={};if(!r)return e;for(var t in r)or(t)&&(e[t]=r[t]);return e}function or(r){return!rr[r]&&"suppressChangedStoreWarning"!==r}function ir(r,t,n,o){var i=function(r,e){var t=r.displayName||r.name||r.constructor&&r.constructor.name||"Component";return e?"inject-with-"+e+"("+t+")":"inject("+t+")"}(t,n),a=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.render=function(){var e=this.props,n=e.forwardRef,o=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&-1===e.indexOf(n)&&(t[n]=r[n]);return t}(e,["forwardRef"]);return Object.assign(o,r(this.context||{},o)||{}),n&&!function(r){return!(r.prototype&&r.prototype.render)}(t)&&(o.ref=this.props.forwardRef),y(t,o)},n}(s);a.contextType=er,o&&(a=Z(a)),a.isMobxInjector=!0;var u,c,f=e.forwardRef(function(r,t){return e.createElement(a,Object.assign({},r,{forwardRef:t}))});return u=t,c=f,Object.keys(u).forEach(function(r){u.hasOwnProperty(r)&&!L[r]&&Object.defineProperty(c,r,Object.getOwnPropertyDescriptor(u,r))}),f.wrappedComponent=t,f.displayName=i,f}function ar(){for(var r,e=[],t=arguments.length;t--;)e[t]=arguments[t];return"function"==typeof arguments[0]?(r=arguments[0],function(e){return ir(r,e,r.name,!0)}):function(r){return ir(function(r){return function(e,t){return r.forEach(function(r){if(!(r in t)){if(!(r in e))throw new Error("MobX injector: Store '"+r+"' is not available! Make sure it is provided by some Provider");t[r]=e[r]}}),t}}(e),r,e.join("-"),!1)}}tr.contextType=er;var ur=N("disposeOnUnmount"),cr=N("originalOnUnmount");function fr(){var r=this;this[cr]&&this[cr](),this[ur]&&(this[ur].forEach(function(e){var t="string"==typeof e?r[e]:e;if(null!=t){if("function"!=typeof t)throw new Error("[mobx-react] disposeOnUnmount only works on functions such as disposers returned by reactions, autorun, etc.");t()}}),this[ur]=[])}function sr(r,e){if(Array.isArray(e))return e.map(function(e){return sr(r,e)});var t=Object.getPrototypeOf(r).constructor||Object.getPrototypeOf(r.constructor),n=Object.getPrototypeOf(r.constructor);if(t!==s&&t!==p&&n!==s&&n!==p)throw new Error("[mobx-react] disposeOnUnmount only supports direct subclasses of React.Component or React.PureComponent.");if("string"!=typeof e&&"function"!=typeof e)throw new Error("[mobx-react] disposeOnUnmount only works if the parameter is either a property key or a function.");var o=!!r[ur];return(r[ur]||(r[ur]=[])).push(e),o||(r.componentWillUnmount&&(r[cr]=r.componentWillUnmount),Object.defineProperty(r,"componentWillUnmount",{get:function(){return fr},set:function(r){this[ur].push(r),this[cr]=void 0},configurable:!1,enumerable:!1})),"string"!=typeof e?e:void 0}function pr(r){function e(e,t,n,o,i,a){for(var u=[],c=arguments.length-6;c-- >0;)u[c]=arguments[c+6];return P(function(){return o=o||"<<anonymous>>",a=a||n,null==t[n]?e?new Error("The "+i+" `"+a+"` is marked as required in `"+o+"`, but its value is `"+(null===t[n]?"null":"undefined")+"`."):null:r.apply(void 0,[t,n,o,i,a].concat(u))})}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}function lr(r){var e=typeof r;return Array.isArray(r)?"array":r instanceof RegExp?"object":function(r,e){return"symbol"===r||"Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol}(e,r)?"symbol":e}function dr(r,e){return pr(function(t,n,o,i,a){return P(function(){if(r&&lr(t[n])===e.toLowerCase())return null;var i;switch(e){case"Array":i=g;break;case"Object":i=j;break;case"Map":i=x;break;default:throw new Error("Unexpected mobxType: "+e)}var u=t[n];if(!i(u)){var c=function(r){var e=lr(r);if("object"===e){if(r instanceof Date)return"date";if(r instanceof RegExp)return"regexp"}return e}(u),f=r?" or javascript `"+e.toLowerCase()+"`":"";return new Error("Invalid prop `"+a+"` of type `"+c+"` supplied to `"+o+"`, expected `mobx.Observable"+e+"`"+f+".")}return null})})}function yr(r,e){return pr(function(t,n,o,i,a){for(var u=[],c=arguments.length-5;c-- >0;)u[c]=arguments[c+5];return P(function(){if("function"!=typeof e)return new Error("Property `"+a+"` of component `"+o+"` has invalid PropType notation.");var c=dr(r,"Array")(t,n,o);if(c instanceof Error)return c;for(var f=t[n],s=0;s<f.length;s++)if((c=e.apply(void 0,[f,s,o,i,a+"["+s+"]"].concat(u)))instanceof Error)return c;return null})})}var br={observableArray:dr(!1,"Array"),observableArrayOf:yr.bind(null,!1),observableMap:dr(!1,"Map"),observableObject:dr(!1,"Object"),arrayOrObservableArray:dr(!0,"Array"),arrayOrObservableArrayOf:yr.bind(null,!0),objectOrObservableObject:dr(!0,"Object")};if(!s)throw new Error("mobx-react requires React to be available");if(!h)throw new Error("mobx-react requires mobx to be available");"function"==typeof r&&E({reactionScheduler:r});export{R as useObservable,k as useComputed,S as useDisposable,$ as useObserver,q as Observer,Z as observer,K as useStaticRendering,tr as Provider,ar as inject,sr as disposeOnUnmount,br as PropTypes};
//# sourceMappingURL=mobx-react.module.js.map
