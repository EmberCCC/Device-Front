'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var React = require('react');
require('antd/es/config-provider/style');
var _ConfigProvider = require('antd/es/config-provider');
var reactDnd = require('react-dnd');
var reactDndHtml5Backend = require('react-dnd-html5-backend');
var zhCN = require('antd/lib/locale/zh_CN');
var FormRender = require('form-render');
var copyTOClipboard = require('copy-text-to-clipboard');
var deepClone = require('clone');
var nanoid = require('nanoid');
require('antd/es/button/style');
var _Button = require('antd/es/button');
require('antd/es/modal/style');
var _Modal = require('antd/es/modal');
require('antd/es/message/style');
var _message = require('antd/es/message');
require('antd/es/input/style');
var _Input = require('antd/es/input');
require('antd/es/tabs/style');
var _Tabs = require('antd/es/tabs');
require('antd/es/slider/style');
var _Slider = require('antd/es/slider');
require('antd/es/input-number/style');
var _InputNumber = require('antd/es/input-number');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);
var _ConfigProvider__default = /*#__PURE__*/_interopDefaultLegacy(_ConfigProvider);
var zhCN__default = /*#__PURE__*/_interopDefaultLegacy(zhCN);
var FormRender__default = /*#__PURE__*/_interopDefaultLegacy(FormRender);
var copyTOClipboard__default = /*#__PURE__*/_interopDefaultLegacy(copyTOClipboard);
var deepClone__default = /*#__PURE__*/_interopDefaultLegacy(deepClone);
var _Button__default = /*#__PURE__*/_interopDefaultLegacy(_Button);
var _Modal__default = /*#__PURE__*/_interopDefaultLegacy(_Modal);
var _message__default = /*#__PURE__*/_interopDefaultLegacy(_message);
var _Input__default = /*#__PURE__*/_interopDefaultLegacy(_Input);
var _Tabs__default = /*#__PURE__*/_interopDefaultLegacy(_Tabs);
var _Slider__default = /*#__PURE__*/_interopDefaultLegacy(_Slider);
var _InputNumber__default = /*#__PURE__*/_interopDefaultLegacy(_InputNumber);

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread2(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {
      _defineProperty(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }

  return target;
}

function _typeof(obj) {
  "@babel/helpers - typeof";

  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) {
    return typeof obj;
  } : function (obj) {
    return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
  }, _typeof(obj);
}

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

function _objectWithoutProperties(source, excluded) {
  if (source == null) return {};

  var target = _objectWithoutPropertiesLoose(source, excluded);

  var key, i;

  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);

    for (i = 0; i < sourceSymbolKeys.length; i++) {
      key = sourceSymbolKeys[i];
      if (excluded.indexOf(key) >= 0) continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
      target[key] = source[key];
    }
  }

  return target;
}

function _slicedToArray(arr, i) {
  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();
}

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}

function _iterableToArrayLimit(arr, i) {
  var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"];

  if (_i == null) return;
  var _arr = [];
  var _n = true;
  var _d = false;

  var _s, _e;

  try {
    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);

      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null) _i["return"]();
    } finally {
      if (_d) throw _e;
    }
  }

  return _arr;
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];

  return arr2;
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

var _excluded = ["propsSchema"],
    _excluded2 = ["schema"],
    _excluded3 = ["onChange", "value", "defaultValue", "schema"];

function stringContains(str, text) {
  return str.indexOf(text) > -1;
}

var isObject = function isObject(a) {
  return stringContains(Object.prototype.toString.call(a), 'Object');
}; // '3' => true, 3 => true, undefined => false

function isLooselyNumber(num) {
  if (typeof num === 'number') return true;

  if (typeof num === 'string') {
    return !Number.isNaN(Number(num));
  }

  return false;
}
function isCssLength(str) {
  if (typeof str !== 'string') return false;
  return str.match(/^([0-9])*(%|px|rem|em)$/i);
} // 深度对比
// 合并propsSchema和UISchema。由于两者的逻辑相关性，合并为一个大schema能简化内部处理

function combineSchema() {
  var propsSchema = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var uiSchema = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var propList = getChildren(propsSchema);
  var newList = propList.map(function (p) {
    var name = p.name;
    var _p$schema = p.schema,
        type = _p$schema.type,
        options = _p$schema.enum,
        properties = _p$schema.properties,
        items = _p$schema.items;
    var isObj = type === 'object' && properties;
    var isArr = type === 'array' && items && !options; // enum + array 代表的多选框，没有sub

    var ui = name && uiSchema[p.name];

    if (!ui) {
      return p;
    } // 如果是list，递归合并items


    if (isArr) {
      var newItems = combineSchema(items, ui.items || {});
      return _objectSpread2(_objectSpread2({}, p), {}, {
        schema: _objectSpread2(_objectSpread2(_objectSpread2({}, p.schema), ui), {}, {
          items: newItems
        })
      });
    } // object递归合并整个schema


    if (isObj) {
      var newSchema = combineSchema(p.schema, ui);
      return _objectSpread2(_objectSpread2({}, p), {}, {
        schema: newSchema
      });
    }

    return _objectSpread2(_objectSpread2({}, p), {}, {
      schema: _objectSpread2(_objectSpread2({}, p.schema), ui)
    });
  });
  var newObj = {};
  newList.forEach(function (s) {
    newObj[s.name] = s.schema;
  });
  var topLevelUi = {};
  Object.keys(uiSchema).forEach(function (key) {
    if (typeof key === 'string' && key.substring(0, 3) === 'ui:') {
      topLevelUi[key] = uiSchema[key];
    }
  });

  if (isEmpty(newObj)) {
    return _objectSpread2(_objectSpread2({}, propsSchema), topLevelUi);
  }

  return _objectSpread2(_objectSpread2(_objectSpread2({}, propsSchema), topLevelUi), {}, {
    properties: newObj
  });
}

function isEmpty(obj) {
  return Object.keys(obj).length === 0;
} // 获得propsSchema的children


function getChildren(schema) {
  if (!schema) return [];
  var properties = schema.properties,
      items = schema.items,
      type = schema.type;

  if (!properties && !items) {
    return [];
  }

  var schemaSubs = {};

  if (type === 'object') {
    schemaSubs = properties;
  }

  if (type === 'array') {
    schemaSubs = items;
  }

  return Object.keys(schemaSubs).map(function (name) {
    return {
      schema: schemaSubs[name],
      name: name
    };
  });
} // 判断schema的值是是否是“函数”
// {
//   parent: '#',
//   schema: ...,
//   children: []
// }

function flattenSchema(schema) {
  var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '#';
  var parent = arguments.length > 2 ? arguments[2] : undefined;
  var result = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

  var _schema = deepClone__default['default'](schema);

  if (!_schema.$id) {
    _schema.$id = name; // 给生成的schema添加一个唯一标识，方便从schema中直接读取
  }

  var children = [];
  var isObj = _schema.type === 'object' && _schema.properties;
  var isList = _schema.type === 'array' && _schema.items && _schema.items.properties;

  if (isObj) {
    Object.entries(_schema.properties).forEach(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
          key = _ref2[0],
          value = _ref2[1];

      var uniqueName = name + '/' + key;
      children.push(uniqueName);
      flattenSchema(value, uniqueName, name, result);
    });
    delete _schema.properties;
  }

  if (isList) {
    Object.entries(_schema.items.properties).forEach(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 2),
          key = _ref4[0],
          value = _ref4[1];

      var uniqueName = name + '/' + key;
      children.push(uniqueName);
      flattenSchema(value, uniqueName, name, result);
    });
    delete _schema.items.properties;
  }

  if (_schema.type) {
    result[name] = {
      parent: parent,
      schema: _schema,
      children: children
    };
  }

  return result;
}
var getKeyFromUniqueId = function getKeyFromUniqueId() {
  var uniqueId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '#';
  var arr = uniqueId.split('/');
  return arr[arr.length - 1];
};
var changeKeyFromUniqueId = function changeKeyFromUniqueId() {
  var uniqueId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '#';
  var key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'something';
  var arr = uniqueId.split('/');

  if (typeof key === 'string' || typeof key === 'number') {
    arr[arr.length - 1] = key;
  }

  return arr.join('/');
}; // final = true 用于最终的导出的输出
// 几种特例：
// 1. 删除时值删除了item，没有删除和parent的关联，也没有删除children，所以要在解析这步来兜住 (所有的解析都是)
// 2. 修改$id的情况, 修改的是schema内的$id, 解析的时候要把schema.$id 作为真正的id (final = true的解析)

function idToSchema(flatten) {
  var id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '#';
  var final = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  var schema = {};
  var _item = flatten[id];
  var item = deepClone__default['default'](_item);

  if (item) {
    schema = _objectSpread2({}, item.schema); // 最终输出去掉 $id

    if (final) {
      schema.$id && delete schema.$id;
    }

    if (item.children.length > 0) {
      item.children.forEach(function (child) {
        var childId = child; // TODO: 这个情况会出现吗？return会有问题吗？

        if (!flatten[child]) {
          return;
        } // 最终输出将所有的 key 值改了


        try {
          if (final) {
            childId = flatten[child].schema.$id;
          }
        } catch (error) {
          console.error(error, 'catch');
        }

        var key = getKeyFromUniqueId(childId);

        if (schema.type === 'object') {
          if (!schema.properties) {
            schema.properties = {};
          }

          schema.properties[key] = idToSchema(flatten, child, final);
        }

        if (schema.type === 'array' && schema.items && schema.items.type === 'object') {
          if (!schema.items.properties) {
            schema.items.properties = {};
          }

          schema.items.properties[key] = idToSchema(flatten, child, final);
        }
      });
    } else {
      if (schema.type === 'object' && !schema.properties) {
        schema.properties = {};
      }

      if (schema.type === 'array' && schema.items && schema.items.type === 'object' && !schema.items.properties) {
        schema.items.properties = {};
      }
    }
  }

  return schema;
}
var copyItem = function copyItem(flatten, $id, getId) {
  var newFlatten = _objectSpread2({}, flatten);

  try {
    var item = flatten[$id];
    var newId = getId($id);
    var siblings = newFlatten[item.parent].children;
    var idx = siblings.findIndex(function (x) {
      return x === $id;
    });
    siblings.splice(idx + 1, 0, newId);
    newFlatten[newId] = deepClone__default['default'](newFlatten[$id]);
    newFlatten[newId].schema.$id = newId;
    return [newFlatten, newId];
  } catch (error) {
    console.error(error, 'catcherror');
    return [flatten, $id];
  }
}; // Left 点击添加 item

var addItem = function addItem(_ref5) {
  var selected = _ref5.selected,
      name = _ref5.name,
      schema = _ref5.schema,
      flatten = _ref5.flatten,
      fixedName = _ref5.fixedName,
      getId = _ref5.getId;

  var _selected = selected || '#';

  var newId; // string第一个是0，说明点击了object、list的里侧

  if (_selected && _selected[0] === '0' || _selected === '#') {
    var _newFlatten = _objectSpread2({}, flatten);

    try {
      var oldId = _selected.substring(1);

      newId = _selected === '#' ? "#/" : "".concat(oldId, "/");

      if (!fixedName) {
        newId += getId(name);
      } else {
        newId += name;
      }

      if (_selected === '#') {
        oldId = '#';
      }

      var siblings = _newFlatten[oldId].children;
      siblings.push(newId);
      var newItem = {
        parent: oldId,
        schema: _objectSpread2(_objectSpread2({}, schema), {}, {
          $id: newId
        }),
        data: undefined,
        children: []
      };
      _newFlatten[newId] = newItem;
    } catch (error) {
      console.error(error, 'catch');
    }

    return {
      newId: newId,
      newFlatten: _newFlatten
    };
  }

  var _name = fixedName ? name : getId(name);

  var idArr = selected.split('/');
  idArr.pop();
  idArr.push(_name);
  newId = idArr.join('/');

  var newFlatten = _objectSpread2({}, flatten);

  try {
    var item = newFlatten[selected];
    var _siblings = newFlatten[item.parent].children;

    var idx = _siblings.findIndex(function (x) {
      return x === selected;
    });

    _siblings.splice(idx + 1, 0, newId);

    var _newItem = {
      parent: item.parent,
      schema: _objectSpread2(_objectSpread2({}, schema), {}, {
        $id: newId
      }),
      data: undefined,
      children: []
    };
    newFlatten[newId] = _newItem;
  } catch (error) {
    console.error(error);
  }

  return {
    newId: newId,
    newFlatten: newFlatten
  };
}; // position 代表 drop 在元素的哪里: 'up' 上 'down' 下 'inside' 内部

var dropItem = function dropItem(_ref6) {
  var dragId = _ref6.dragId,
      dragItem = _ref6.dragItem,
      dropId = _ref6.dropId,
      position = _ref6.position,
      flatten = _ref6.flatten;

  var _position = dropId === '#' ? 'inside' : position;

  var newFlatten = _objectSpread2({}, flatten); // 会动到三块数据，dragItem, dragParent, dropParent. 其中dropParent可能就是dropItem（inside的情况）


  if (dragItem) {
    newFlatten[dragId] = dragItem;
  }

  var _dragItem = dragItem || newFlatten[dragId];

  var dropItem = newFlatten[dropId];
  var dropParent = dropItem;

  if (_position !== 'inside') {
    var parentId = dropItem.parent;
    dropParent = newFlatten[parentId];
  } // TODO: 这块的体验，现在这样兜底了，但是drag起一个元素了，应该让原本变空


  if (dropId.indexOf(dragId) > -1) {
    return [newFlatten, dragId];
  }

  var newId = dragId;

  try {
    var newParentId = dropParent.schema.$id;
    newId = newId.replace(_dragItem.parent, newParentId);
  } catch (error) {} // dragParent 的 children 删除 dragId


  try {
    var dragParent = newFlatten[_dragItem.parent];
    var idx = dragParent.children.indexOf(dragId);

    if (idx > -1 && !dragItem) {
      dragParent.children.splice(idx, 1);
    }
  } catch (error) {
    console.error(error);
  }

  try {
    // dropParent 的 children 添加 dragId
    var newChildren = dropParent.children || []; // 要考虑children为空，inside的情况

    var _idx = newChildren.indexOf(dropId);

    switch (_position) {
      case 'up':
        newChildren.splice(_idx, 0, dragId);
        break;

      case 'down':
        newChildren.splice(_idx + 1, 0, dragId);
        break;

      default:
        // inside 作为 default 情况
        newChildren.push(dragId);
        break;
    }

    dropParent.children = newChildren;
  } catch (error) {
    console.error(error);
  }

  _dragItem.parent = dropParent.$id;
  return [newFlatten, newId];
}; // TODO: 没有考虑list的情况

var dataToFlatten = function dataToFlatten(flatten, data) {
  if (!flatten || !data) return {};
  Object.entries(flatten).forEach(function (_ref7) {
    var _ref8 = _slicedToArray(_ref7, 2),
        id = _ref8[0],
        item = _ref8[1];

    var branchData = getDataById(data, id);
    flatten[id].data = branchData;
  });
  return flatten;
};
var flattenToData = function flattenToData(flatten) {
  var id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '#';

  try {
    var result = flatten[id].data;
    var ids = Object.keys(flatten);
    var childrenIds = ids.filter(function (item) {
      var lengthOfId = id.split('/').length;
      var lengthOfChild = item.split('/').length;
      return item.indexOf(id) > -1 && lengthOfChild > lengthOfId;
    });

    if (childrenIds && childrenIds.length > 0) {
      var type = flatten[id].schema.type;

      if (result === undefined) {
        // TODO: 这个是简化的逻辑，在编辑器模型下，list和object都是object结构
        if (type === 'object') {
          result = {};
        } else if (type === 'array') {
          result = [{}];
        }
      }

      childrenIds.forEach(function (c) {
        var lengthOfId = id.split('/').length;
        var lengthOfChild = c.split('/').length; // 只比他长1，是直属的child

        if (lengthOfChild === lengthOfId + 1) {
          var cData = flattenToData(flatten, c);
          var cKey = getKeyFromUniqueId(c);
          if (cData === undefined) return result;

          if (type === 'array') {
            result[0][cKey] = cData;
          } else {
            result[cKey] = cData;
          }
        }
      });
    }

    return result;
  } catch (error) {
    return undefined;
  }
}; // 例如当前item的id = '#/obj/input'  propName: 'labelWidth' 往上一直找，直到找到第一个不是undefined的值

var getParentProps = function getParentProps(propName, id, flatten) {
  try {
    var item = flatten[id];
    if (item.schema[propName] !== undefined) return item.schema[propName];

    if (item && item.parent) {
      var parentSchema = flatten[item.parent].schema;

      if (parentSchema[propName] !== undefined) {
        return parentSchema[propName];
      } else {
        return getParentProps(propName, item.parent, flatten);
      }
    }
  } catch (error) {
    return undefined;
  }
};
function looseJsonParse(obj) {
  return Function('"use strict";return (' + obj + ')')();
} // 获得 propsSchema 的 children

function getChildren2(schema) {
  if (!schema) return [];
  var properties = schema.properties,
      items = schema.items,
      type = schema.type;

  if (!properties && !items) {
    return [];
  }

  var schemaSubs = {};

  if (type === 'object') {
    schemaSubs = properties;
  }

  if (type === 'array') {
    schemaSubs = items.properties;
  }

  return Object.keys(schemaSubs).map(function (name) {
    return {
      schema: schemaSubs[name],
      name: name
    };
  });
} // 解析函数字符串值
// getDataById(formData, '#/a/b/c')

function getDataById(object, path) {
  path = castPath(path, object);
  var index = 0;
  var length = path.length;

  while (object != null && index < length) {
    var key = toKey(path[index++]);

    if (Array.isArray(object) && _typeof(object[0]) === 'object') {
      object = key ? object[0][key] : object;
    } else {
      object = key ? object[key] : object;
    }
  }

  return index && index == length ? object : undefined;
}

function castPath(value, object) {
  if (Array.isArray(value)) {
    return value;
  }

  return isKey(value, object) ? [value] : value.match(/([^\.\/\[\]#"']+)/g);
}

function toKey(value) {
  if (typeof value === 'string') {
    return value.replace(/^#\/?/, '');
  }

  var result = "".concat(value);
  return result == '0' && 1 / value == -INFINITY ? '-0' : result;
}

var reIsDeepProp = /#\/.+\//;
var reIsPlainProp = /^\w*$/;

function isKey(value, object) {
  if (Array.isArray(value)) {
    return false;
  }

  var type = _typeof(value);

  if (type === 'number' || type === 'boolean' || value == null) {
    return true;
  }

  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object);
}

var oldSchemaToNew = function oldSchemaToNew(schema) {
  if (schema && schema.propsSchema) {
    var propsSchema = schema.propsSchema,
        rest = _objectWithoutProperties(schema, _excluded);

    return _objectSpread2({
      schema: propsSchema
    }, rest);
  }

  if (schema && schema.schema) {
    return schema.schema;
  }

  if (schema && schema.type === 'object') {
    return schema;
  }

  return _objectSpread2({
    type: 'object',
    properties: {}
  }, schema);
};
var newSchemaToOld = function newSchemaToOld(setting) {
  if (setting && setting.schema) {
    var schema = setting.schema,
        rest = _objectWithoutProperties(setting, _excluded2);

    return _objectSpread2({
      propsSchema: schema
    }, rest);
  }

  return setting;
};
var schemaToState = function schemaToState(value) {
  var schema = oldSchemaToNew(value);
  var frProps = Object.keys(schema).reduce(function (rst, cur) {
    if (['type', 'properties'].includes(cur)) return rst;
    return _objectSpread2(_objectSpread2({}, rst), {}, _defineProperty({}, cur, schema[cur]));
  }, {});
  var isNewVersion = !(value && value.propsSchema);
  return {
    schema: schema,
    frProps: frProps,
    formData: schema.formData || {},
    isNewVersion: isNewVersion
  };
};
function defaultGetValueFromEvent(valuePropName) {
  var event = arguments.length <= 1 ? undefined : arguments[1];

  if (event && event.target && valuePropName in event.target) {
    return event.target[valuePropName];
  }

  return event;
}
var transformProps = function transformProps(props) {
  var onChange = props.onChange,
      value = props.value,
      defaultValue = props.defaultValue,
      ownSchema = props.schema,
      rest = _objectWithoutProperties(props, _excluded3);

  var schema = _objectSpread2({}, ownSchema);

  var _ref9 = schema || {},
      trigger = _ref9.trigger,
      valuePropName = _ref9.valuePropName;

  var controlProps = {};
  var _valuePropName = 'value';

  var _value = value === undefined ? defaultValue : value;

  if (valuePropName && typeof valuePropName === 'string') {
    _valuePropName = valuePropName;
    controlProps[valuePropName] = _value;
  } else {
    controlProps.value = _value;
  }

  var _onChange = function _onChange() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var newValue = defaultGetValueFromEvent.apply(void 0, [_valuePropName].concat(args));
    onChange(newValue);
  };

  if (trigger && typeof trigger === 'string') {
    controlProps[trigger] = _onChange;
  } else {
    controlProps.onChange = _onChange;
  } // TODO: 之后 ui:xx 会舍去


  var usefulPropsFromSchema = {
    disabled: schema.disabled || schema['ui:disabled'],
    readOnly: schema.readOnly || schema['ui:readonly'] // hidden: schema.hidden || schema['ui:hidden'],
    // $options: schema.options || schema['ui:options'],

  };

  var _props = _objectSpread2(_objectSpread2(_objectSpread2({}, controlProps), {}, {
    schema: schema
  }, usefulPropsFromSchema), rest);

  return _props;
};
var mergeInOrder = function mergeInOrder() {
  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    args[_key2] = arguments[_key2];
  }

  return args.reduce(function (result, current) {
    if (!current) return result;
    return Object.keys(current).reduce(function (rst, key) {
      if (rst[key]) delete rst[key];
      return _objectSpread2(_objectSpread2({}, rst), {}, _defineProperty({}, key, current[key]));
    }, result);
  }, {});
};
var defaultGetId = function defaultGetId(name) {
  return "".concat(name, "_").concat(nanoid.nanoid(6));
};

var Ctx = /*#__PURE__*/React.createContext(function () {});
var StoreCtx = /*#__PURE__*/React.createContext({});

var useGlobal = function useGlobal() {
  return React.useContext(Ctx);
}; // 组件最顶层传入的所有props

var useStore = function useStore() {
  return React.useContext(StoreCtx);
}; // 类似于 class component 的 setState

var useSet = function useSet(initState) {
  var _useReducer = React.useReducer(function (state, newState) {
    var action = newState;

    if (typeof newState === 'function') {
      action = action(state);
    }

    if (newState.action && newState.payload) {
      action = newState.payload;

      if (typeof action === 'function') {
        action = action(state);
      }
    }

    return _objectSpread2(_objectSpread2({}, state), action);
  }, initState),
      _useReducer2 = _slicedToArray(_useReducer, 2),
      state = _useReducer2[0],
      setState = _useReducer2[1];

  var setStateWithActionName = function setStateWithActionName(state, actionName) {
    setState(state);
  };

  return [state, setStateWithActionName];
};

var transformFrom = function transformFrom(schema) {
  var isObj = schema.type === 'object' && schema.properties;
  var isList = schema.type === 'array' && schema.items && schema.items.properties;
  var hasChildren = isObj || isList;

  if (!hasChildren) {
    if (Array.isArray(schema.enumList)) {
      schema.enum = schema.enumList.filter(function (item) {
        return item.value;
      }).map(function (item) {
        return item.value;
      });
      schema.enumNames = schema.enumList.filter(function (item) {
        return item.value;
      }).map(function (item) {
        return item.label || item.value;
      });
    }

    delete schema.enumList;
  } else {
    var childrenList = getChildren2(schema);
    childrenList.map(function (item) {
      if (isObj) {
        schema.properties[item.name] = transformTo(_objectSpread2({}, item.schema));
      }

      if (isList) {
        schema.items.properties[item.name] = transformTo(_objectSpread2({}, item.schema));
      }
    });
  }

  return schema;
};

var fromSetting = function fromSetting(schema) {
  return transformFrom(_objectSpread2({}, schema));
}; // FR Schema => Setting Schema

var transformTo = function transformTo(schema) {
  var isObj = schema.type === 'object' && schema.properties;
  var isList = schema.type === 'array' && schema.items && schema.items.properties;
  var hasChildren = isObj || isList;

  if (!hasChildren) {
    if (Array.isArray(schema.enum) && Array.isArray(schema.enumNames)) {
      var list = schema.enum.map(function (item, idx) {
        return {
          value: item,
          label: schema.enumNames[idx]
        };
      });
      schema.enumList = list;
      schema.enum;
      schema.enumNames;
    }
  } else {
    var childrenList = getChildren2(schema);
    childrenList.map(function (item) {
      if (isObj) {
        schema.properties[item.name] = transformFrom(_objectSpread2({}, item.schema));
      }

      if (isList) {
        schema.items.properties[item.name] = transformFrom(_objectSpread2({}, item.schema));
      }
    });
  }

  return schema;
};

var toSetting = function toSetting(schema) {
  return transformTo(_objectSpread2({}, schema));
};

function unwrapExports (x) {
	return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;
}

function createCommonjsModule(fn, module) {
	return module = { exports: {} }, fn(module, module.exports), module.exports;
}

var _typeof_1 = createCommonjsModule(function (module) {
function _typeof(obj) {
  "@babel/helpers - typeof";

  return (module.exports = _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) {
    return typeof obj;
  } : function (obj) {
    return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
  }, module.exports.__esModule = true, module.exports["default"] = module.exports), _typeof(obj);
}

module.exports = _typeof, module.exports.__esModule = true, module.exports["default"] = module.exports;
});

unwrapExports(_typeof_1);

var interopRequireWildcard = createCommonjsModule(function (module) {
var _typeof = _typeof_1["default"];

function _getRequireWildcardCache(nodeInterop) {
  if (typeof WeakMap !== "function") return null;
  var cacheBabelInterop = new WeakMap();
  var cacheNodeInterop = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {
    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
  })(nodeInterop);
}

function _interopRequireWildcard(obj, nodeInterop) {
  if (!nodeInterop && obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") {
    return {
      "default": obj
    };
  }

  var cache = _getRequireWildcardCache(nodeInterop);

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj["default"] = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

module.exports = _interopRequireWildcard, module.exports.__esModule = true, module.exports["default"] = module.exports;
});

unwrapExports(interopRequireWildcard);

var interopRequireDefault = createCommonjsModule(function (module) {
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

module.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports["default"] = module.exports;
});

unwrapExports(interopRequireDefault);

var defineProperty = createCommonjsModule(function (module) {
function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

module.exports = _defineProperty, module.exports.__esModule = true, module.exports["default"] = module.exports;
});

unwrapExports(defineProperty);

var objectSpread2 = createCommonjsModule(function (module) {
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread2(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {
      defineProperty(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }

  return target;
}

module.exports = _objectSpread2, module.exports.__esModule = true, module.exports["default"] = module.exports;
});

unwrapExports(objectSpread2);

var PlusCircleOutlined_1 = createCommonjsModule(function (module, exports) {
// This icon file is generated automatically.
Object.defineProperty(exports, "__esModule", { value: true });
var PlusCircleOutlined = { "icon": { "tag": "svg", "attrs": { "viewBox": "64 64 896 896", "focusable": "false" }, "children": [{ "tag": "path", "attrs": { "d": "M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z" } }, { "tag": "path", "attrs": { "d": "M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" } }] }, "name": "plus-circle", "theme": "outlined" };
exports.default = PlusCircleOutlined;
});

unwrapExports(PlusCircleOutlined_1);

var arrayWithHoles = createCommonjsModule(function (module) {
function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}

module.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports["default"] = module.exports;
});

unwrapExports(arrayWithHoles);

var iterableToArrayLimit = createCommonjsModule(function (module) {
function _iterableToArrayLimit(arr, i) {
  var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"];

  if (_i == null) return;
  var _arr = [];
  var _n = true;
  var _d = false;

  var _s, _e;

  try {
    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);

      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null) _i["return"]();
    } finally {
      if (_d) throw _e;
    }
  }

  return _arr;
}

module.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports["default"] = module.exports;
});

unwrapExports(iterableToArrayLimit);

var arrayLikeToArray = createCommonjsModule(function (module) {
function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

module.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports["default"] = module.exports;
});

unwrapExports(arrayLikeToArray);

var unsupportedIterableToArray = createCommonjsModule(function (module) {
function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);
}

module.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports["default"] = module.exports;
});

unwrapExports(unsupportedIterableToArray);

var nonIterableRest = createCommonjsModule(function (module) {
function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

module.exports = _nonIterableRest, module.exports.__esModule = true, module.exports["default"] = module.exports;
});

unwrapExports(nonIterableRest);

var slicedToArray = createCommonjsModule(function (module) {
function _slicedToArray(arr, i) {
  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();
}

module.exports = _slicedToArray, module.exports.__esModule = true, module.exports["default"] = module.exports;
});

unwrapExports(slicedToArray);

var objectWithoutPropertiesLoose = createCommonjsModule(function (module) {
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

module.exports = _objectWithoutPropertiesLoose, module.exports.__esModule = true, module.exports["default"] = module.exports;
});

unwrapExports(objectWithoutPropertiesLoose);

var objectWithoutProperties = createCommonjsModule(function (module) {
function _objectWithoutProperties(source, excluded) {
  if (source == null) return {};
  var target = objectWithoutPropertiesLoose(source, excluded);
  var key, i;

  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);

    for (i = 0; i < sourceSymbolKeys.length; i++) {
      key = sourceSymbolKeys[i];
      if (excluded.indexOf(key) >= 0) continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
      target[key] = source[key];
    }
  }

  return target;
}

module.exports = _objectWithoutProperties, module.exports.__esModule = true, module.exports["default"] = module.exports;
});

unwrapExports(objectWithoutProperties);

var classnames = createCommonjsModule(function (module) {
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/* global define */

(function () {

	var hasOwn = {}.hasOwnProperty;

	function classNames() {
		var classes = [];

		for (var i = 0; i < arguments.length; i++) {
			var arg = arguments[i];
			if (!arg) continue;

			var argType = typeof arg;

			if (argType === 'string' || argType === 'number') {
				classes.push(arg);
			} else if (Array.isArray(arg)) {
				if (arg.length) {
					var inner = classNames.apply(null, arg);
					if (inner) {
						classes.push(inner);
					}
				}
			} else if (argType === 'object') {
				if (arg.toString === Object.prototype.toString) {
					for (var key in arg) {
						if (hasOwn.call(arg, key) && arg[key]) {
							classes.push(key);
						}
					}
				} else {
					classes.push(arg.toString());
				}
			}
		}

		return classes.join(' ');
	}

	if ( module.exports) {
		classNames.default = classNames;
		module.exports = classNames;
	} else {
		window.classNames = classNames;
	}
}());
});

var Context = createCommonjsModule(function (module, exports) {

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;



var IconContext = /*#__PURE__*/(0, React__default['default'].createContext)({});
var _default = IconContext;
exports.default = _default;
});

unwrapExports(Context);

/**
 * Take input from [0, n] and return it as [0, 1]
 * @hidden
 */
function bound01(n, max) {
    if (isOnePointZero(n)) {
        n = '100%';
    }
    var isPercent = isPercentage(n);
    n = max === 360 ? n : Math.min(max, Math.max(0, parseFloat(n)));
    // Automatically convert percentage into number
    if (isPercent) {
        n = parseInt(String(n * max), 10) / 100;
    }
    // Handle floating point rounding errors
    if (Math.abs(n - max) < 0.000001) {
        return 1;
    }
    // Convert into [0, 1] range if it isn't already
    if (max === 360) {
        // If n is a hue given in degrees,
        // wrap around out-of-range values into [0, 360] range
        // then convert into [0, 1].
        n = (n < 0 ? (n % max) + max : n % max) / parseFloat(String(max));
    }
    else {
        // If n not a hue given in degrees
        // Convert into [0, 1] range if it isn't already.
        n = (n % max) / parseFloat(String(max));
    }
    return n;
}
/**
 * Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1
 * <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>
 * @hidden
 */
function isOnePointZero(n) {
    return typeof n === 'string' && n.indexOf('.') !== -1 && parseFloat(n) === 1;
}
/**
 * Check to see if string passed in is a percentage
 * @hidden
 */
function isPercentage(n) {
    return typeof n === 'string' && n.indexOf('%') !== -1;
}
/**
 * Return a valid alpha value [0,1] with all invalid values being set to 1
 * @hidden
 */
function boundAlpha(a) {
    a = parseFloat(a);
    if (isNaN(a) || a < 0 || a > 1) {
        a = 1;
    }
    return a;
}
/**
 * Replace a decimal with it's percentage value
 * @hidden
 */
function convertToPercentage(n) {
    if (n <= 1) {
        return Number(n) * 100 + "%";
    }
    return n;
}
/**
 * Force a hex value to have 2 characters
 * @hidden
 */
function pad2(c) {
    return c.length === 1 ? '0' + c : String(c);
}

// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:
// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>
/**
 * Handle bounds / percentage checking to conform to CSS color spec
 * <http://www.w3.org/TR/css3-color/>
 * *Assumes:* r, g, b in [0, 255] or [0, 1]
 * *Returns:* { r, g, b } in [0, 255]
 */
function rgbToRgb(r, g, b) {
    return {
        r: bound01(r, 255) * 255,
        g: bound01(g, 255) * 255,
        b: bound01(b, 255) * 255,
    };
}
function hue2rgb(p, q, t) {
    if (t < 0) {
        t += 1;
    }
    if (t > 1) {
        t -= 1;
    }
    if (t < 1 / 6) {
        return p + (q - p) * (6 * t);
    }
    if (t < 1 / 2) {
        return q;
    }
    if (t < 2 / 3) {
        return p + (q - p) * (2 / 3 - t) * 6;
    }
    return p;
}
/**
 * Converts an HSL color value to RGB.
 *
 * *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]
 * *Returns:* { r, g, b } in the set [0, 255]
 */
function hslToRgb(h, s, l) {
    var r;
    var g;
    var b;
    h = bound01(h, 360);
    s = bound01(s, 100);
    l = bound01(l, 100);
    if (s === 0) {
        // achromatic
        g = l;
        b = l;
        r = l;
    }
    else {
        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
        var p = 2 * l - q;
        r = hue2rgb(p, q, h + 1 / 3);
        g = hue2rgb(p, q, h);
        b = hue2rgb(p, q, h - 1 / 3);
    }
    return { r: r * 255, g: g * 255, b: b * 255 };
}
/**
 * Converts an RGB color value to HSV
 *
 * *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]
 * *Returns:* { h, s, v } in [0,1]
 */
function rgbToHsv(r, g, b) {
    r = bound01(r, 255);
    g = bound01(g, 255);
    b = bound01(b, 255);
    var max = Math.max(r, g, b);
    var min = Math.min(r, g, b);
    var h = 0;
    var v = max;
    var d = max - min;
    var s = max === 0 ? 0 : d / max;
    if (max === min) {
        h = 0; // achromatic
    }
    else {
        switch (max) {
            case r:
                h = (g - b) / d + (g < b ? 6 : 0);
                break;
            case g:
                h = (b - r) / d + 2;
                break;
            case b:
                h = (r - g) / d + 4;
                break;
        }
        h /= 6;
    }
    return { h: h, s: s, v: v };
}
/**
 * Converts an HSV color value to RGB.
 *
 * *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]
 * *Returns:* { r, g, b } in the set [0, 255]
 */
function hsvToRgb(h, s, v) {
    h = bound01(h, 360) * 6;
    s = bound01(s, 100);
    v = bound01(v, 100);
    var i = Math.floor(h);
    var f = h - i;
    var p = v * (1 - s);
    var q = v * (1 - f * s);
    var t = v * (1 - (1 - f) * s);
    var mod = i % 6;
    var r = [v, q, p, p, t, v][mod];
    var g = [t, v, v, q, p, p][mod];
    var b = [p, p, t, v, v, q][mod];
    return { r: r * 255, g: g * 255, b: b * 255 };
}
/**
 * Converts an RGB color to hex
 *
 * Assumes r, g, and b are contained in the set [0, 255]
 * Returns a 3 or 6 character hex
 */
function rgbToHex(r, g, b, allow3Char) {
    var hex = [
        pad2(Math.round(r).toString(16)),
        pad2(Math.round(g).toString(16)),
        pad2(Math.round(b).toString(16)),
    ];
    // Return a 3 character hex if possible
    if (allow3Char &&
        hex[0].startsWith(hex[0].charAt(1)) &&
        hex[1].startsWith(hex[1].charAt(1)) &&
        hex[2].startsWith(hex[2].charAt(1))) {
        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);
    }
    return hex.join('');
}
/** Converts a hex value to a decimal */
function convertHexToDecimal(h) {
    return parseIntFromHex(h) / 255;
}
/** Parse a base-16 hex value into a base-10 integer */
function parseIntFromHex(val) {
    return parseInt(val, 16);
}

// https://github.com/bahamas10/css-color-names/blob/master/css-color-names.json
/**
 * @hidden
 */
var names = {
    aliceblue: '#f0f8ff',
    antiquewhite: '#faebd7',
    aqua: '#00ffff',
    aquamarine: '#7fffd4',
    azure: '#f0ffff',
    beige: '#f5f5dc',
    bisque: '#ffe4c4',
    black: '#000000',
    blanchedalmond: '#ffebcd',
    blue: '#0000ff',
    blueviolet: '#8a2be2',
    brown: '#a52a2a',
    burlywood: '#deb887',
    cadetblue: '#5f9ea0',
    chartreuse: '#7fff00',
    chocolate: '#d2691e',
    coral: '#ff7f50',
    cornflowerblue: '#6495ed',
    cornsilk: '#fff8dc',
    crimson: '#dc143c',
    cyan: '#00ffff',
    darkblue: '#00008b',
    darkcyan: '#008b8b',
    darkgoldenrod: '#b8860b',
    darkgray: '#a9a9a9',
    darkgreen: '#006400',
    darkgrey: '#a9a9a9',
    darkkhaki: '#bdb76b',
    darkmagenta: '#8b008b',
    darkolivegreen: '#556b2f',
    darkorange: '#ff8c00',
    darkorchid: '#9932cc',
    darkred: '#8b0000',
    darksalmon: '#e9967a',
    darkseagreen: '#8fbc8f',
    darkslateblue: '#483d8b',
    darkslategray: '#2f4f4f',
    darkslategrey: '#2f4f4f',
    darkturquoise: '#00ced1',
    darkviolet: '#9400d3',
    deeppink: '#ff1493',
    deepskyblue: '#00bfff',
    dimgray: '#696969',
    dimgrey: '#696969',
    dodgerblue: '#1e90ff',
    firebrick: '#b22222',
    floralwhite: '#fffaf0',
    forestgreen: '#228b22',
    fuchsia: '#ff00ff',
    gainsboro: '#dcdcdc',
    ghostwhite: '#f8f8ff',
    goldenrod: '#daa520',
    gold: '#ffd700',
    gray: '#808080',
    green: '#008000',
    greenyellow: '#adff2f',
    grey: '#808080',
    honeydew: '#f0fff0',
    hotpink: '#ff69b4',
    indianred: '#cd5c5c',
    indigo: '#4b0082',
    ivory: '#fffff0',
    khaki: '#f0e68c',
    lavenderblush: '#fff0f5',
    lavender: '#e6e6fa',
    lawngreen: '#7cfc00',
    lemonchiffon: '#fffacd',
    lightblue: '#add8e6',
    lightcoral: '#f08080',
    lightcyan: '#e0ffff',
    lightgoldenrodyellow: '#fafad2',
    lightgray: '#d3d3d3',
    lightgreen: '#90ee90',
    lightgrey: '#d3d3d3',
    lightpink: '#ffb6c1',
    lightsalmon: '#ffa07a',
    lightseagreen: '#20b2aa',
    lightskyblue: '#87cefa',
    lightslategray: '#778899',
    lightslategrey: '#778899',
    lightsteelblue: '#b0c4de',
    lightyellow: '#ffffe0',
    lime: '#00ff00',
    limegreen: '#32cd32',
    linen: '#faf0e6',
    magenta: '#ff00ff',
    maroon: '#800000',
    mediumaquamarine: '#66cdaa',
    mediumblue: '#0000cd',
    mediumorchid: '#ba55d3',
    mediumpurple: '#9370db',
    mediumseagreen: '#3cb371',
    mediumslateblue: '#7b68ee',
    mediumspringgreen: '#00fa9a',
    mediumturquoise: '#48d1cc',
    mediumvioletred: '#c71585',
    midnightblue: '#191970',
    mintcream: '#f5fffa',
    mistyrose: '#ffe4e1',
    moccasin: '#ffe4b5',
    navajowhite: '#ffdead',
    navy: '#000080',
    oldlace: '#fdf5e6',
    olive: '#808000',
    olivedrab: '#6b8e23',
    orange: '#ffa500',
    orangered: '#ff4500',
    orchid: '#da70d6',
    palegoldenrod: '#eee8aa',
    palegreen: '#98fb98',
    paleturquoise: '#afeeee',
    palevioletred: '#db7093',
    papayawhip: '#ffefd5',
    peachpuff: '#ffdab9',
    peru: '#cd853f',
    pink: '#ffc0cb',
    plum: '#dda0dd',
    powderblue: '#b0e0e6',
    purple: '#800080',
    rebeccapurple: '#663399',
    red: '#ff0000',
    rosybrown: '#bc8f8f',
    royalblue: '#4169e1',
    saddlebrown: '#8b4513',
    salmon: '#fa8072',
    sandybrown: '#f4a460',
    seagreen: '#2e8b57',
    seashell: '#fff5ee',
    sienna: '#a0522d',
    silver: '#c0c0c0',
    skyblue: '#87ceeb',
    slateblue: '#6a5acd',
    slategray: '#708090',
    slategrey: '#708090',
    snow: '#fffafa',
    springgreen: '#00ff7f',
    steelblue: '#4682b4',
    tan: '#d2b48c',
    teal: '#008080',
    thistle: '#d8bfd8',
    tomato: '#ff6347',
    turquoise: '#40e0d0',
    violet: '#ee82ee',
    wheat: '#f5deb3',
    white: '#ffffff',
    whitesmoke: '#f5f5f5',
    yellow: '#ffff00',
    yellowgreen: '#9acd32',
};

/**
 * Given a string or object, convert that input to RGB
 *
 * Possible string inputs:
 * ```
 * "red"
 * "#f00" or "f00"
 * "#ff0000" or "ff0000"
 * "#ff000000" or "ff000000"
 * "rgb 255 0 0" or "rgb (255, 0, 0)"
 * "rgb 1.0 0 0" or "rgb (1, 0, 0)"
 * "rgba (255, 0, 0, 1)" or "rgba 255, 0, 0, 1"
 * "rgba (1.0, 0, 0, 1)" or "rgba 1.0, 0, 0, 1"
 * "hsl(0, 100%, 50%)" or "hsl 0 100% 50%"
 * "hsla(0, 100%, 50%, 1)" or "hsla 0 100% 50%, 1"
 * "hsv(0, 100%, 100%)" or "hsv 0 100% 100%"
 * ```
 */
function inputToRGB(color) {
    var rgb = { r: 0, g: 0, b: 0 };
    var a = 1;
    var s = null;
    var v = null;
    var l = null;
    var ok = false;
    var format = false;
    if (typeof color === 'string') {
        color = stringInputToObject(color);
    }
    if (typeof color === 'object') {
        if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {
            rgb = rgbToRgb(color.r, color.g, color.b);
            ok = true;
            format = String(color.r).substr(-1) === '%' ? 'prgb' : 'rgb';
        }
        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {
            s = convertToPercentage(color.s);
            v = convertToPercentage(color.v);
            rgb = hsvToRgb(color.h, s, v);
            ok = true;
            format = 'hsv';
        }
        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {
            s = convertToPercentage(color.s);
            l = convertToPercentage(color.l);
            rgb = hslToRgb(color.h, s, l);
            ok = true;
            format = 'hsl';
        }
        if (Object.prototype.hasOwnProperty.call(color, 'a')) {
            a = color.a;
        }
    }
    a = boundAlpha(a);
    return {
        ok: ok,
        format: color.format || format,
        r: Math.min(255, Math.max(rgb.r, 0)),
        g: Math.min(255, Math.max(rgb.g, 0)),
        b: Math.min(255, Math.max(rgb.b, 0)),
        a: a,
    };
}
// <http://www.w3.org/TR/css3-values/#integers>
var CSS_INTEGER = '[-\\+]?\\d+%?';
// <http://www.w3.org/TR/css3-values/#number-value>
var CSS_NUMBER = '[-\\+]?\\d*\\.\\d+%?';
// Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.
var CSS_UNIT = "(?:" + CSS_NUMBER + ")|(?:" + CSS_INTEGER + ")";
// Actual matching.
// Parentheses and commas are optional, but not required.
// Whitespace can take the place of commas or opening paren
var PERMISSIVE_MATCH3 = "[\\s|\\(]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")\\s*\\)?";
var PERMISSIVE_MATCH4 = "[\\s|\\(]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")\\s*\\)?";
var matchers = {
    CSS_UNIT: new RegExp(CSS_UNIT),
    rgb: new RegExp('rgb' + PERMISSIVE_MATCH3),
    rgba: new RegExp('rgba' + PERMISSIVE_MATCH4),
    hsl: new RegExp('hsl' + PERMISSIVE_MATCH3),
    hsla: new RegExp('hsla' + PERMISSIVE_MATCH4),
    hsv: new RegExp('hsv' + PERMISSIVE_MATCH3),
    hsva: new RegExp('hsva' + PERMISSIVE_MATCH4),
    hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
    hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
    hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
    hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
};
/**
 * Permissive string parsing.  Take in a number of formats, and output an object
 * based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`
 */
function stringInputToObject(color) {
    color = color.trim().toLowerCase();
    if (color.length === 0) {
        return false;
    }
    var named = false;
    if (names[color]) {
        color = names[color];
        named = true;
    }
    else if (color === 'transparent') {
        return { r: 0, g: 0, b: 0, a: 0, format: 'name' };
    }
    // Try to match string input using regular expressions.
    // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]
    // Just return an object and let the conversion functions handle that.
    // This way the result will be the same whether the tinycolor is initialized with string or object.
    var match = matchers.rgb.exec(color);
    if (match) {
        return { r: match[1], g: match[2], b: match[3] };
    }
    match = matchers.rgba.exec(color);
    if (match) {
        return { r: match[1], g: match[2], b: match[3], a: match[4] };
    }
    match = matchers.hsl.exec(color);
    if (match) {
        return { h: match[1], s: match[2], l: match[3] };
    }
    match = matchers.hsla.exec(color);
    if (match) {
        return { h: match[1], s: match[2], l: match[3], a: match[4] };
    }
    match = matchers.hsv.exec(color);
    if (match) {
        return { h: match[1], s: match[2], v: match[3] };
    }
    match = matchers.hsva.exec(color);
    if (match) {
        return { h: match[1], s: match[2], v: match[3], a: match[4] };
    }
    match = matchers.hex8.exec(color);
    if (match) {
        return {
            r: parseIntFromHex(match[1]),
            g: parseIntFromHex(match[2]),
            b: parseIntFromHex(match[3]),
            a: convertHexToDecimal(match[4]),
            format: named ? 'name' : 'hex8',
        };
    }
    match = matchers.hex6.exec(color);
    if (match) {
        return {
            r: parseIntFromHex(match[1]),
            g: parseIntFromHex(match[2]),
            b: parseIntFromHex(match[3]),
            format: named ? 'name' : 'hex',
        };
    }
    match = matchers.hex4.exec(color);
    if (match) {
        return {
            r: parseIntFromHex(match[1] + match[1]),
            g: parseIntFromHex(match[2] + match[2]),
            b: parseIntFromHex(match[3] + match[3]),
            a: convertHexToDecimal(match[4] + match[4]),
            format: named ? 'name' : 'hex8',
        };
    }
    match = matchers.hex3.exec(color);
    if (match) {
        return {
            r: parseIntFromHex(match[1] + match[1]),
            g: parseIntFromHex(match[2] + match[2]),
            b: parseIntFromHex(match[3] + match[3]),
            format: named ? 'name' : 'hex',
        };
    }
    return false;
}
/**
 * Check to see if it looks like a CSS unit
 * (see `matchers` above for definition).
 */
function isValidCSSUnit(color) {
    return Boolean(matchers.CSS_UNIT.exec(String(color)));
}

var hueStep = 2; // 色相阶梯

var saturationStep = 0.16; // 饱和度阶梯，浅色部分

var saturationStep2 = 0.05; // 饱和度阶梯，深色部分

var brightnessStep1 = 0.05; // 亮度阶梯，浅色部分

var brightnessStep2 = 0.15; // 亮度阶梯，深色部分

var lightColorCount = 5; // 浅色数量，主色上

var darkColorCount = 4; // 深色数量，主色下
// 暗色主题颜色映射关系表

var darkColorMap = [{
  index: 7,
  opacity: 0.15
}, {
  index: 6,
  opacity: 0.25
}, {
  index: 5,
  opacity: 0.3
}, {
  index: 5,
  opacity: 0.45
}, {
  index: 5,
  opacity: 0.65
}, {
  index: 5,
  opacity: 0.85
}, {
  index: 4,
  opacity: 0.9
}, {
  index: 3,
  opacity: 0.95
}, {
  index: 2,
  opacity: 0.97
}, {
  index: 1,
  opacity: 0.98
}]; // Wrapper function ported from TinyColor.prototype.toHsv
// Keep it here because of `hsv.h * 360`

function toHsv(_ref) {
  var r = _ref.r,
      g = _ref.g,
      b = _ref.b;
  var hsv = rgbToHsv(r, g, b);
  return {
    h: hsv.h * 360,
    s: hsv.s,
    v: hsv.v
  };
} // Wrapper function ported from TinyColor.prototype.toHexString
// Keep it here because of the prefix `#`


function toHex(_ref2) {
  var r = _ref2.r,
      g = _ref2.g,
      b = _ref2.b;
  return "#".concat(rgbToHex(r, g, b, false));
} // Wrapper function ported from TinyColor.prototype.mix, not treeshakable.
// Amount in range [0, 1]
// Assume color1 & color2 has no alpha, since the following src code did so.


function mix(rgb1, rgb2, amount) {
  var p = amount / 100;
  var rgb = {
    r: (rgb2.r - rgb1.r) * p + rgb1.r,
    g: (rgb2.g - rgb1.g) * p + rgb1.g,
    b: (rgb2.b - rgb1.b) * p + rgb1.b
  };
  return rgb;
}

function getHue(hsv, i, light) {
  var hue; // 根据色相不同，色相转向不同

  if (Math.round(hsv.h) >= 60 && Math.round(hsv.h) <= 240) {
    hue = light ? Math.round(hsv.h) - hueStep * i : Math.round(hsv.h) + hueStep * i;
  } else {
    hue = light ? Math.round(hsv.h) + hueStep * i : Math.round(hsv.h) - hueStep * i;
  }

  if (hue < 0) {
    hue += 360;
  } else if (hue >= 360) {
    hue -= 360;
  }

  return hue;
}

function getSaturation(hsv, i, light) {
  // grey color don't change saturation
  if (hsv.h === 0 && hsv.s === 0) {
    return hsv.s;
  }

  var saturation;

  if (light) {
    saturation = hsv.s - saturationStep * i;
  } else if (i === darkColorCount) {
    saturation = hsv.s + saturationStep;
  } else {
    saturation = hsv.s + saturationStep2 * i;
  } // 边界值修正


  if (saturation > 1) {
    saturation = 1;
  } // 第一格的 s 限制在 0.06-0.1 之间


  if (light && i === lightColorCount && saturation > 0.1) {
    saturation = 0.1;
  }

  if (saturation < 0.06) {
    saturation = 0.06;
  }

  return Number(saturation.toFixed(2));
}

function getValue(hsv, i, light) {
  var value;

  if (light) {
    value = hsv.v + brightnessStep1 * i;
  } else {
    value = hsv.v - brightnessStep2 * i;
  }

  if (value > 1) {
    value = 1;
  }

  return Number(value.toFixed(2));
}

function generate(color) {
  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var patterns = [];
  var pColor = inputToRGB(color);

  for (var i = lightColorCount; i > 0; i -= 1) {
    var hsv = toHsv(pColor);
    var colorString = toHex(inputToRGB({
      h: getHue(hsv, i, true),
      s: getSaturation(hsv, i, true),
      v: getValue(hsv, i, true)
    }));
    patterns.push(colorString);
  }

  patterns.push(toHex(pColor));

  for (var _i = 1; _i <= darkColorCount; _i += 1) {
    var _hsv = toHsv(pColor);

    var _colorString = toHex(inputToRGB({
      h: getHue(_hsv, _i),
      s: getSaturation(_hsv, _i),
      v: getValue(_hsv, _i)
    }));

    patterns.push(_colorString);
  } // dark theme patterns


  if (opts.theme === 'dark') {
    return darkColorMap.map(function (_ref3) {
      var index = _ref3.index,
          opacity = _ref3.opacity;
      var darkColorString = toHex(mix(inputToRGB(opts.backgroundColor || '#141414'), inputToRGB(patterns[index]), opacity * 100));
      return darkColorString;
    });
  }

  return patterns;
}

var presetPrimaryColors = {
  red: '#F5222D',
  volcano: '#FA541C',
  orange: '#FA8C16',
  gold: '#FAAD14',
  yellow: '#FADB14',
  lime: '#A0D911',
  green: '#52C41A',
  cyan: '#13C2C2',
  blue: '#1890FF',
  geekblue: '#2F54EB',
  purple: '#722ED1',
  magenta: '#EB2F96',
  grey: '#666666'
};
var presetPalettes = {};
var presetDarkPalettes = {};
Object.keys(presetPrimaryColors).forEach(function (key) {
  presetPalettes[key] = generate(presetPrimaryColors[key]);
  presetPalettes[key].primary = presetPalettes[key][5]; // dark presetPalettes

  presetDarkPalettes[key] = generate(presetPrimaryColors[key], {
    theme: 'dark',
    backgroundColor: '#141414'
  });
  presetDarkPalettes[key].primary = presetDarkPalettes[key][5];
});
var red = presetPalettes.red;
var volcano = presetPalettes.volcano;
var gold = presetPalettes.gold;
var orange = presetPalettes.orange;
var yellow = presetPalettes.yellow;
var lime = presetPalettes.lime;
var green = presetPalettes.green;
var cyan = presetPalettes.cyan;
var blue = presetPalettes.blue;
var geekblue = presetPalettes.geekblue;
var purple = presetPalettes.purple;
var magenta = presetPalettes.magenta;
var grey = presetPalettes.grey;

var index_esm = /*#__PURE__*/Object.freeze({
  __proto__: null,
  blue: blue,
  cyan: cyan,
  geekblue: geekblue,
  generate: generate,
  gold: gold,
  green: green,
  grey: grey,
  lime: lime,
  magenta: magenta,
  orange: orange,
  presetDarkPalettes: presetDarkPalettes,
  presetPalettes: presetPalettes,
  presetPrimaryColors: presetPrimaryColors,
  purple: purple,
  red: red,
  volcano: volcano,
  yellow: yellow
});

var warning_1 = createCommonjsModule(function (module, exports) {

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.call = call;
exports.default = void 0;
exports.note = note;
exports.noteOnce = noteOnce;
exports.resetWarned = resetWarned;
exports.warning = warning;
exports.warningOnce = warningOnce;

/* eslint-disable no-console */
var warned = {};

function warning(valid, message) {
  // Support uglify
  if (process.env.NODE_ENV !== 'production' && !valid && console !== undefined) {
    console.error("Warning: ".concat(message));
  }
}

function note(valid, message) {
  // Support uglify
  if (process.env.NODE_ENV !== 'production' && !valid && console !== undefined) {
    console.warn("Note: ".concat(message));
  }
}

function resetWarned() {
  warned = {};
}

function call(method, valid, message) {
  if (!valid && !warned[message]) {
    method(false, message);
    warned[message] = true;
  }
}

function warningOnce(valid, message) {
  call(warning, valid, message);
}

function noteOnce(valid, message) {
  call(note, valid, message);
}

var _default = warningOnce;
/* eslint-enable */

exports.default = _default;
});

unwrapExports(warning_1);
var warning_2 = warning_1.call;
var warning_3 = warning_1.note;
var warning_4 = warning_1.noteOnce;
var warning_5 = warning_1.resetWarned;
var warning_6 = warning_1.warning;
var warning_7 = warning_1.warningOnce;

var canUseDom_1 = createCommonjsModule(function (module, exports) {

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = canUseDom;

function canUseDom() {
  return !!(typeof window !== 'undefined' && window.document && window.document.createElement);
}
});

unwrapExports(canUseDom_1);

var dynamicCSS = createCommonjsModule(function (module, exports) {



Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.injectCSS = injectCSS;
exports.removeCSS = removeCSS;
exports.updateCSS = updateCSS;

var _canUseDom = interopRequireDefault(canUseDom_1);

var MARK_KEY = "rc-util-key";

function getMark() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
      mark = _ref.mark;

  if (mark) {
    return mark.startsWith('data-') ? mark : "data-".concat(mark);
  }

  return MARK_KEY;
}

function getContainer(option) {
  if (option.attachTo) {
    return option.attachTo;
  }

  var head = document.querySelector('head');
  return head || document.body;
}

function injectCSS(css) {
  var _option$csp;

  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  if (!(0, _canUseDom.default)()) {
    return null;
  }

  var styleNode = document.createElement('style');

  if ((_option$csp = option.csp) === null || _option$csp === void 0 ? void 0 : _option$csp.nonce) {
    var _option$csp2;

    styleNode.nonce = (_option$csp2 = option.csp) === null || _option$csp2 === void 0 ? void 0 : _option$csp2.nonce;
  }

  styleNode.innerHTML = css;
  var container = getContainer(option);
  var firstChild = container.firstChild;

  if (option.prepend && container.prepend) {
    // Use `prepend` first
    container.prepend(styleNode);
  } else if (option.prepend && firstChild) {
    // Fallback to `insertBefore` like IE not support `prepend`
    container.insertBefore(styleNode, firstChild);
  } else {
    container.appendChild(styleNode);
  }

  return styleNode;
}

var containerCache = new Map();

function findExistNode(key) {
  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var container = getContainer(option);
  return Array.from(containerCache.get(container).children).find(function (node) {
    return node.tagName === 'STYLE' && node.getAttribute(getMark(option)) === key;
  });
}

function removeCSS(key) {
  var _existNode$parentNode;

  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var existNode = findExistNode(key, option);
  existNode === null || existNode === void 0 ? void 0 : (_existNode$parentNode = existNode.parentNode) === null || _existNode$parentNode === void 0 ? void 0 : _existNode$parentNode.removeChild(existNode);
}

function updateCSS(css, key) {
  var option = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  var container = getContainer(option); // Get real parent

  if (!containerCache.has(container)) {
    var placeholderStyle = injectCSS('', option);
    var parentNode = placeholderStyle.parentNode;
    containerCache.set(container, parentNode);
    parentNode.removeChild(placeholderStyle);
  }

  var existNode = findExistNode(key, option);

  if (existNode) {
    var _option$csp3, _option$csp4;

    if (((_option$csp3 = option.csp) === null || _option$csp3 === void 0 ? void 0 : _option$csp3.nonce) && existNode.nonce !== ((_option$csp4 = option.csp) === null || _option$csp4 === void 0 ? void 0 : _option$csp4.nonce)) {
      var _option$csp5;

      existNode.nonce = (_option$csp5 = option.csp) === null || _option$csp5 === void 0 ? void 0 : _option$csp5.nonce;
    }

    if (existNode.innerHTML !== css) {
      existNode.innerHTML = css;
    }

    return existNode;
  }

  var newNode = injectCSS(css, option);
  newNode.setAttribute(getMark(option), key);
  return newNode;
}
});

unwrapExports(dynamicCSS);
var dynamicCSS_1 = dynamicCSS.injectCSS;
var dynamicCSS_2 = dynamicCSS.removeCSS;
var dynamicCSS_3 = dynamicCSS.updateCSS;

var utils = createCommonjsModule(function (module, exports) {





Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.warning = warning;
exports.isIconDefinition = isIconDefinition;
exports.normalizeAttrs = normalizeAttrs;
exports.generate = generate;
exports.getSecondaryColor = getSecondaryColor;
exports.normalizeTwoToneColors = normalizeTwoToneColors;
exports.useInsertStyles = exports.iconStyles = exports.svgBaseProps = void 0;

var _objectSpread2 = interopRequireDefault(objectSpread2);

var _typeof2 = interopRequireDefault(_typeof_1);



var _react = interopRequireWildcard(React__default['default']);

var _warning = interopRequireDefault(warning_1);



var _Context = interopRequireDefault(Context);

function warning(valid, message) {
  (0, _warning.default)(valid, "[@ant-design/icons] ".concat(message));
}

function isIconDefinition(target) {
  return (0, _typeof2.default)(target) === 'object' && typeof target.name === 'string' && typeof target.theme === 'string' && ((0, _typeof2.default)(target.icon) === 'object' || typeof target.icon === 'function');
}

function normalizeAttrs() {
  var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  return Object.keys(attrs).reduce(function (acc, key) {
    var val = attrs[key];

    switch (key) {
      case 'class':
        acc.className = val;
        delete acc.class;
        break;

      default:
        acc[key] = val;
    }

    return acc;
  }, {});
}

function generate(node, key, rootProps) {
  if (!rootProps) {
    return /*#__PURE__*/_react.default.createElement(node.tag, (0, _objectSpread2.default)({
      key: key
    }, normalizeAttrs(node.attrs)), (node.children || []).map(function (child, index) {
      return generate(child, "".concat(key, "-").concat(node.tag, "-").concat(index));
    }));
  }

  return /*#__PURE__*/_react.default.createElement(node.tag, (0, _objectSpread2.default)((0, _objectSpread2.default)({
    key: key
  }, normalizeAttrs(node.attrs)), rootProps), (node.children || []).map(function (child, index) {
    return generate(child, "".concat(key, "-").concat(node.tag, "-").concat(index));
  }));
}

function getSecondaryColor(primaryColor) {
  // choose the second color
  return (0, index_esm.generate)(primaryColor)[0];
}

function normalizeTwoToneColors(twoToneColor) {
  if (!twoToneColor) {
    return [];
  }

  return Array.isArray(twoToneColor) ? twoToneColor : [twoToneColor];
} // These props make sure that the SVG behaviours like general text.
// Reference: https://blog.prototypr.io/align-svg-icons-to-text-and-say-goodbye-to-font-icons-d44b3d7b26b4


var svgBaseProps = {
  width: '1em',
  height: '1em',
  fill: 'currentColor',
  'aria-hidden': 'true',
  focusable: 'false'
};
exports.svgBaseProps = svgBaseProps;
var iconStyles = "\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n";
exports.iconStyles = iconStyles;

var useInsertStyles = function useInsertStyles() {
  var styleStr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : iconStyles;

  var _useContext = (0, _react.useContext)(_Context.default),
      csp = _useContext.csp;

  (0, _react.useEffect)(function () {
    (0, dynamicCSS.updateCSS)(styleStr, '@ant-design-icons', {
      prepend: true,
      csp: csp
    });
  }, []);
};

exports.useInsertStyles = useInsertStyles;
});

unwrapExports(utils);
var utils_1 = utils.warning;
var utils_2 = utils.isIconDefinition;
var utils_3 = utils.normalizeAttrs;
var utils_4 = utils.generate;
var utils_5 = utils.getSecondaryColor;
var utils_6 = utils.normalizeTwoToneColors;
var utils_7 = utils.useInsertStyles;
var utils_8 = utils.iconStyles;
var utils_9 = utils.svgBaseProps;

var IconBase_1 = createCommonjsModule(function (module, exports) {



Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _objectWithoutProperties2 = interopRequireDefault(objectWithoutProperties);

var _objectSpread2 = interopRequireDefault(objectSpread2);



var _excluded = ["icon", "className", "onClick", "style", "primaryColor", "secondaryColor"];
var twoToneColorPalette = {
  primaryColor: '#333',
  secondaryColor: '#E6E6E6',
  calculated: false
};

function setTwoToneColors(_ref) {
  var primaryColor = _ref.primaryColor,
      secondaryColor = _ref.secondaryColor;
  twoToneColorPalette.primaryColor = primaryColor;
  twoToneColorPalette.secondaryColor = secondaryColor || (0, utils.getSecondaryColor)(primaryColor);
  twoToneColorPalette.calculated = !!secondaryColor;
}

function getTwoToneColors() {
  return (0, _objectSpread2.default)({}, twoToneColorPalette);
}

var IconBase = function IconBase(props) {
  var icon = props.icon,
      className = props.className,
      onClick = props.onClick,
      style = props.style,
      primaryColor = props.primaryColor,
      secondaryColor = props.secondaryColor,
      restProps = (0, _objectWithoutProperties2.default)(props, _excluded);
  var colors = twoToneColorPalette;

  if (primaryColor) {
    colors = {
      primaryColor: primaryColor,
      secondaryColor: secondaryColor || (0, utils.getSecondaryColor)(primaryColor)
    };
  }

  (0, utils.useInsertStyles)();
  (0, utils.warning)((0, utils.isIconDefinition)(icon), "icon should be icon definiton, but got ".concat(icon));

  if (!(0, utils.isIconDefinition)(icon)) {
    return null;
  }

  var target = icon;

  if (target && typeof target.icon === 'function') {
    target = (0, _objectSpread2.default)((0, _objectSpread2.default)({}, target), {}, {
      icon: target.icon(colors.primaryColor, colors.secondaryColor)
    });
  }

  return (0, utils.generate)(target.icon, "svg-".concat(target.name), (0, _objectSpread2.default)({
    className: className,
    onClick: onClick,
    style: style,
    'data-icon': target.name,
    width: '1em',
    height: '1em',
    fill: 'currentColor',
    'aria-hidden': 'true'
  }, restProps));
};

IconBase.displayName = 'IconReact';
IconBase.getTwoToneColors = getTwoToneColors;
IconBase.setTwoToneColors = setTwoToneColors;
var _default = IconBase;
exports.default = _default;
});

unwrapExports(IconBase_1);

var twoTonePrimaryColor = createCommonjsModule(function (module, exports) {



Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.setTwoToneColor = setTwoToneColor;
exports.getTwoToneColor = getTwoToneColor;

var _slicedToArray2 = interopRequireDefault(slicedToArray);

var _IconBase = interopRequireDefault(IconBase_1);



function setTwoToneColor(twoToneColor) {
  var _normalizeTwoToneColo = (0, utils.normalizeTwoToneColors)(twoToneColor),
      _normalizeTwoToneColo2 = (0, _slicedToArray2.default)(_normalizeTwoToneColo, 2),
      primaryColor = _normalizeTwoToneColo2[0],
      secondaryColor = _normalizeTwoToneColo2[1];

  return _IconBase.default.setTwoToneColors({
    primaryColor: primaryColor,
    secondaryColor: secondaryColor
  });
}

function getTwoToneColor() {
  var colors = _IconBase.default.getTwoToneColors();

  if (!colors.calculated) {
    return colors.primaryColor;
  }

  return [colors.primaryColor, colors.secondaryColor];
}
});

unwrapExports(twoTonePrimaryColor);
var twoTonePrimaryColor_1 = twoTonePrimaryColor.setTwoToneColor;
var twoTonePrimaryColor_2 = twoTonePrimaryColor.getTwoToneColor;

var AntdIcon = createCommonjsModule(function (module, exports) {





Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _objectSpread2 = interopRequireDefault(objectSpread2);

var _slicedToArray2 = interopRequireDefault(slicedToArray);

var _defineProperty2 = interopRequireDefault(defineProperty);

var _objectWithoutProperties2 = interopRequireDefault(objectWithoutProperties);

var React = interopRequireWildcard(React__default['default']);

var _classnames = interopRequireDefault(classnames);

var _Context = interopRequireDefault(Context);

var _IconBase = interopRequireDefault(IconBase_1);





var _excluded = ["className", "icon", "spin", "rotate", "tabIndex", "onClick", "twoToneColor"];
// Initial setting
// should move it to antd main repo?
(0, twoTonePrimaryColor.setTwoToneColor)('#1890ff');
var Icon = /*#__PURE__*/React.forwardRef(function (props, ref) {
  var _classNames;

  var className = props.className,
      icon = props.icon,
      spin = props.spin,
      rotate = props.rotate,
      tabIndex = props.tabIndex,
      onClick = props.onClick,
      twoToneColor = props.twoToneColor,
      restProps = (0, _objectWithoutProperties2.default)(props, _excluded);

  var _React$useContext = React.useContext(_Context.default),
      _React$useContext$pre = _React$useContext.prefixCls,
      prefixCls = _React$useContext$pre === void 0 ? 'anticon' : _React$useContext$pre;

  var classString = (0, _classnames.default)(prefixCls, (_classNames = {}, (0, _defineProperty2.default)(_classNames, "".concat(prefixCls, "-").concat(icon.name), !!icon.name), (0, _defineProperty2.default)(_classNames, "".concat(prefixCls, "-spin"), !!spin || icon.name === 'loading'), _classNames), className);
  var iconTabIndex = tabIndex;

  if (iconTabIndex === undefined && onClick) {
    iconTabIndex = -1;
  }

  var svgStyle = rotate ? {
    msTransform: "rotate(".concat(rotate, "deg)"),
    transform: "rotate(".concat(rotate, "deg)")
  } : undefined;

  var _normalizeTwoToneColo = (0, utils.normalizeTwoToneColors)(twoToneColor),
      _normalizeTwoToneColo2 = (0, _slicedToArray2.default)(_normalizeTwoToneColo, 2),
      primaryColor = _normalizeTwoToneColo2[0],
      secondaryColor = _normalizeTwoToneColo2[1];

  return /*#__PURE__*/React.createElement("span", (0, _objectSpread2.default)((0, _objectSpread2.default)({
    role: "img",
    "aria-label": icon.name
  }, restProps), {}, {
    ref: ref,
    tabIndex: iconTabIndex,
    onClick: onClick,
    className: classString
  }), /*#__PURE__*/React.createElement(_IconBase.default, {
    icon: icon,
    primaryColor: primaryColor,
    secondaryColor: secondaryColor,
    style: svgStyle
  }));
});
Icon.displayName = 'AntdIcon';
Icon.getTwoToneColor = twoTonePrimaryColor.getTwoToneColor;
Icon.setTwoToneColor = twoTonePrimaryColor.setTwoToneColor;
var _default = Icon;
exports.default = _default;
});

unwrapExports(AntdIcon);

var PlusCircleOutlined_1$1 = createCommonjsModule(function (module, exports) {





Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _objectSpread2 = interopRequireDefault(objectSpread2);

var React = interopRequireWildcard(React__default['default']);

var _PlusCircleOutlined = interopRequireDefault(PlusCircleOutlined_1);

var _AntdIcon = interopRequireDefault(AntdIcon);

// GENERATE BY ./scripts/generate.ts
// DON NOT EDIT IT MANUALLY
var PlusCircleOutlined = function PlusCircleOutlined(props, ref) {
  return /*#__PURE__*/React.createElement(_AntdIcon.default, (0, _objectSpread2.default)((0, _objectSpread2.default)({}, props), {}, {
    ref: ref,
    icon: _PlusCircleOutlined.default
  }));
};

PlusCircleOutlined.displayName = 'PlusCircleOutlined';

var _default = /*#__PURE__*/React.forwardRef(PlusCircleOutlined);

exports.default = _default;
});

var _PlusCircleOutlined = unwrapExports(PlusCircleOutlined_1$1);

var DeleteOutlined_1 = createCommonjsModule(function (module, exports) {
// This icon file is generated automatically.
Object.defineProperty(exports, "__esModule", { value: true });
var DeleteOutlined = { "icon": { "tag": "svg", "attrs": { "viewBox": "64 64 896 896", "focusable": "false" }, "children": [{ "tag": "path", "attrs": { "d": "M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z" } }] }, "name": "delete", "theme": "outlined" };
exports.default = DeleteOutlined;
});

unwrapExports(DeleteOutlined_1);

var DeleteOutlined_1$1 = createCommonjsModule(function (module, exports) {





Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _objectSpread2 = interopRequireDefault(objectSpread2);

var React = interopRequireWildcard(React__default['default']);

var _DeleteOutlined = interopRequireDefault(DeleteOutlined_1);

var _AntdIcon = interopRequireDefault(AntdIcon);

// GENERATE BY ./scripts/generate.ts
// DON NOT EDIT IT MANUALLY
var DeleteOutlined = function DeleteOutlined(props, ref) {
  return /*#__PURE__*/React.createElement(_AntdIcon.default, (0, _objectSpread2.default)((0, _objectSpread2.default)({}, props), {}, {
    ref: ref,
    icon: _DeleteOutlined.default
  }));
};

DeleteOutlined.displayName = 'DeleteOutlined';

var _default = /*#__PURE__*/React.forwardRef(DeleteOutlined);

exports.default = _default;
});

var _DeleteOutlined = unwrapExports(DeleteOutlined_1$1);

function list(props) {
  if (!/^#/.test(props.schema.$id)) {
    return /*#__PURE__*/React__default['default'].createElement("div", {
      className: "w-100"
    }, props.children);
  }

  return /*#__PURE__*/React__default['default'].createElement("div", {
    className: "flex flex-column"
  }, /*#__PURE__*/React__default['default'].createElement("div", {
    className: "fr-set w-100 flex flex-column ba pt4 pb2 ph2 relative b--black-10"
  }, props.children, /*#__PURE__*/React__default['default'].createElement(_Button__default['default'], {
    size: "small",
    className: "self-end",
    type: "dashed",
    icon: /*#__PURE__*/React__default['default'].createElement(_DeleteOutlined, null)
  }, "\u5220\u9664")), /*#__PURE__*/React__default['default'].createElement(_Button__default['default'], {
    size: "small",
    className: "self-end",
    icon: /*#__PURE__*/React__default['default'].createElement(_PlusCircleOutlined, null)
  }, "\u6DFB\u52A0"));
}

var DEFAULT_SCHEMA = {
  type: 'object',
  properties: {}
}; // TODO: formData 不存在的时候会报错：can't find # of undefined

function Provider(props, ref) {
  var defaultValue = props.defaultValue,
      canDrag = props.canDrag,
      canDelete = props.canDelete,
      submit = props.submit,
      _transformer = props.transformer,
      extraButtons = props.extraButtons,
      controlButtons = props.controlButtons,
      hideId = props.hideId,
      _props$getId = props.getId,
      getId = _props$getId === void 0 ? defaultGetId : _props$getId,
      settings = props.settings,
      commonSettings = props.commonSettings,
      globalSettings = props.globalSettings,
      _props$widgets = props.widgets,
      widgets = _props$widgets === void 0 ? {} : _props$widgets,
      _props$mapping = props.mapping,
      mapping = _props$mapping === void 0 ? {} : _props$mapping,
      _props$validation = props.validation,
      validation = _props$validation === void 0 ? true : _props$validation,
      children = props.children,
      fieldRender = props.fieldRender,
      fieldWrapperRender = props.fieldWrapperRender,
      elementRender = props.elementRender;

  var transformer = _objectSpread2({
    from: function from(schema) {
      return schema;
    },
    to: function to(schema) {
      return schema;
    },
    fromSetting: fromSetting,
    toSetting: toSetting
  }, _transformer);

  var frwRef = ref || React.useRef();

  var _useSet = useSet({
    formData: {},
    frProps: {},
    // form-render 的全局 props 等
    isNewVersion: true,
    // 用schema字段，还是用propsSchema字段，这是一个问题
    preview: false,
    // preview = false 是编辑模式
    schema: {},
    selected: undefined,
    // 被选中的$id, 如果object/array的内部，以首字母0标识
    settingsForm: null
  }),
      _useSet2 = _slicedToArray(_useSet, 2),
      state = _useSet2[0],
      setState = _useSet2[1];

  var _useState = React.useState([]),
      _useState2 = _slicedToArray(_useState, 2),
      errorFields = _useState2[0],
      setErrorFields = _useState2[1]; // 收口点 propsSchema 到 schema 的转换 (一共3处，其他两个是 importSchema 和 setValue，在 FRWrapper 文件)


  React.useEffect(function () {
    var schema = defaultValue ? transformer.from(defaultValue) : DEFAULT_SCHEMA;
    if (schema) setState(schemaToState(schema));
  }, [defaultValue]);
  var formData = state.formData,
      frProps = state.frProps,
      isNewVersion = state.isNewVersion,
      preview = state.preview,
      schema = state.schema,
      selected = state.selected;

  var onChange = function onChange(data) {
    setState({
      formData: data
    });
    props.onChange && props.onChange(data);
  };

  var onSchemaChange = function onSchemaChange(newSchema) {
    setState({
      schema: newSchema
    });

    if (props.onSchemaChange) {
      setTimeout(function () {
        if (!frwRef.current) return;
        var pureSchema = frwRef.current.getValue();
        props.onSchemaChange(pureSchema);
      }, 0);
    }
  };

  var _mapping = _objectSpread2(_objectSpread2({}, FormRender.mapping), mapping);

  var _widgets = _objectSpread2(_objectSpread2(_objectSpread2({}, FormRender.widgets), widgets), {}, {
    list: list
  });

  var rootState = {
    preview: preview,
    mapping: _mapping,
    widgets: _widgets,
    selected: selected
  };
  var userProps = {
    canDrag: canDrag,
    canDelete: canDelete,
    submit: submit,
    transformer: transformer,
    isNewVersion: isNewVersion,
    extraButtons: extraButtons,
    controlButtons: controlButtons,
    hideId: hideId,
    getId: getId,
    validation: validation,
    settings: settings,
    commonSettings: commonSettings,
    globalSettings: globalSettings
  };
  var _schema = {};

  if (schema) {
    _schema = combineSchema(schema); // TODO: 要不要判断是否都是object
  }

  var flatten = flattenSchema(_schema);
  var flattenWithData = transformer.from(dataToFlatten(flatten, formData));

  var onFlattenChange = function onFlattenChange(newFlatten) {
    var changeSource = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'schema';
    var newSchema = idToSchema(newFlatten);
    var newData = flattenToData(newFlatten); // 判断只有schema变化时才调用，一般需求的用户不需要

    if (changeSource === 'schema') {
      onSchemaChange(newSchema);
    } // schema 变化大都会触发 data 变化


    onChange(newData);
  };

  var onItemChange = function onItemChange(key, value, changeSource) {
    flattenWithData[key] = value;
    onFlattenChange(flattenWithData, changeSource);
  };

  var displaySchema = {};
  var displaySchemaString = '';

  try {
    var _schema2 = _objectSpread2(_objectSpread2({}, idToSchema(flattenWithData, '#', true)), frProps);

    displaySchema = transformer.to(_schema2);

    if (!isNewVersion) {
      displaySchema = newSchemaToOld(displaySchema);
    }

    displaySchemaString = JSON.stringify(displaySchema, null, 2);
  } catch (error) {}

  var getValue = function getValue() {
    return displaySchema;
  };

  var setValue = function setValue(value) {
    try {
      setState(function (state) {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          selected: undefined
        }, schemaToState(transformer.from(value)));
      });
    } catch (error) {
      console.error(error);
    }
  };

  var copyValue = function copyValue() {
    copyTOClipboard__default['default'](displaySchemaString);
  };

  var getErrorFields = function getErrorFields() {
    return errorFields;
  };

  var getSettingsForm = function getSettingsForm() {
    return state.settingsForm;
  };

  React.useImperativeHandle(frwRef, function () {
    return {
      getValue: getValue,
      setValue: setValue,
      copyValue: copyValue,
      getErrorFields: getErrorFields,
      getSettingsForm: getSettingsForm
    };
  }); // TODO: flatten是频繁在变的，应该和其他两个函数分开

  var store = _objectSpread2({
    flatten: flattenWithData,
    // schema + formData = flattenWithData
    onFlattenChange: onFlattenChange,
    // onChange + onSchemaChange = onFlattenChange
    onItemChange: onItemChange,
    // onFlattenChange 里只改一个item的flatten，使用这个方法
    onSchemaChange: onSchemaChange,
    onChange: onChange,
    errorFields: errorFields,
    onItemErrorChange: setErrorFields,
    userProps: userProps,
    frProps: frProps,
    displaySchema: displaySchema,
    displaySchemaString: displaySchemaString,
    fieldRender: fieldRender,
    fieldWrapperRender: fieldWrapperRender,
    elementRender: elementRender
  }, rootState);

  return /*#__PURE__*/React__default['default'].createElement(reactDnd.DndProvider, {
    backend: reactDndHtml5Backend.HTML5Backend,
    context: window
  }, /*#__PURE__*/React__default['default'].createElement(_ConfigProvider__default['default'], {
    locale: zhCN__default['default']
  }, /*#__PURE__*/React__default['default'].createElement(Ctx.Provider, {
    value: setState
  }, /*#__PURE__*/React__default['default'].createElement(StoreCtx.Provider, {
    value: store
  }, children))));
}

var Provider$1 = /*#__PURE__*/React.forwardRef(Provider);

// 只需写配置，方便可扩展
var baseCommonSettings = {
  type: {
    title: '类型',
    type: 'string',
    hidden: '{{true}}'
  },
  widget: {
    title: '组件',
    type: 'string',
    hidden: '{{true}}'
  },
  format: {
    title: '格式',
    type: 'string',
    hidden: '{{true}}'
  }
};
var defaultCommonSettings = {
  $id: {
    title: 'ID',
    description: '字段名称/英文',
    type: 'string',
    widget: 'idInput',
    require: true,
    rules: [{
      pattern: '^#/.+$',
      message: 'ID 必填'
    }]
  },
  title: {
    title: '标题',
    type: 'string',
    widget: 'htmlInput'
  },
  displayType: {
    title: '标题展示模式',
    type: 'string',
    enum: ['row', 'column'],
    enumNames: ['同行', '单独一行'],
    widget: 'radio'
  },
  description: {
    title: '说明',
    type: 'string'
  },
  default: {
    title: '默认值',
    type: 'string'
  },
  required: {
    title: '必填',
    type: 'boolean'
  },
  placeholder: {
    title: '占位符',
    type: 'string'
  },
  bind: {
    title: 'Bind',
    type: 'string'
  },
  min: {
    title: '最小值',
    type: 'number'
  },
  max: {
    title: '最大值',
    type: 'number'
  },
  disabled: {
    title: '禁用',
    type: 'boolean'
  },
  readOnly: {
    title: '只读',
    type: 'boolean'
  },
  hidden: {
    title: '隐藏',
    type: 'boolean'
  },
  readOnlyWidget: {
    title: '只读组件',
    type: 'string'
  },
  width: {
    title: '元素宽度',
    type: 'string',
    widget: 'percentSlider'
  },
  labelWidth: {
    title: '标签宽度',
    description: '默认值120',
    type: 'number',
    widget: 'slider',
    max: 400,
    props: {
      hideNumber: true
    }
  }
}; // widget 用于指定 schema 右侧配置对应的 setting

var elements = [{
  text: '输入框',
  name: 'input',
  schema: {
    title: '输入框',
    type: 'string'
  },
  setting: {
    props: {
      title: '选项',
      type: 'object',
      labelWidth: 80,
      properties: {
        allowClear: {
          title: '是否带清除按钮',
          description: '填写内容后才会出现x哦',
          type: 'boolean'
        },
        addonBefore: {
          title: '前tab',
          type: 'string'
        },
        addonAfter: {
          title: '后tab',
          type: 'string'
        },
        prefix: {
          title: '前缀',
          type: 'string'
        },
        suffix: {
          title: '后缀',
          type: 'string'
        }
      }
    },
    minLength: {
      title: '最短字数',
      type: 'number'
    },
    maxLength: {
      title: '最长字数',
      type: 'number'
    },
    pattern: {
      title: '校验正则表达式',
      type: 'string',
      props: {
        placeholder: '填写正则表达式'
      }
    }
  }
}, {
  text: '大输入框',
  name: 'textarea',
  schema: {
    title: '编辑框',
    type: 'string',
    format: 'textarea'
  },
  setting: {
    props: {
      title: '选项',
      type: 'object',
      labelWidth: 80,
      properties: {
        autoSize: {
          title: '高度自动',
          type: 'boolean'
        },
        rows: {
          title: '指定高度',
          type: 'number'
        }
      }
    },
    minLength: {
      title: '最短字数',
      type: 'number'
    },
    maxLength: {
      title: '最长字数',
      type: 'number'
    },
    pattern: {
      title: '校验正则表达式',
      type: 'string',
      props: {
        placeholder: '填写正则表达式'
      }
    }
  }
}, {
  text: '日期选择',
  name: 'date',
  schema: {
    title: '日期选择',
    type: 'string',
    format: 'date'
  },
  setting: {
    format: {
      title: '格式',
      type: 'string',
      enum: ['dateTime', 'date', 'time'],
      enumNames: ['日期时间', '日期', '时间']
    }
  }
}, {
  text: '时间选择',
  name: 'time',
  show: false,
  schema: {
    title: '时间选择',
    type: 'string',
    format: 'time'
  },
  setting: {
    format: {
      title: '格式',
      type: 'string',
      enum: ['dateTime', 'date', 'time'],
      enumNames: ['日期时间', '日期', '时间']
    }
  }
}, {
  text: '数字输入框',
  name: 'number',
  schema: {
    title: '数字输入框',
    type: 'number'
  },
  setting: {
    default: {
      title: '默认值',
      type: 'number'
    }
  }
}, {
  text: '是否选择',
  name: 'checkbox',
  schema: {
    title: '是否选择',
    type: 'boolean',
    widget: 'checkbox'
  },
  setting: {
    default: {
      title: '是否默认勾选',
      type: 'boolean'
    }
  }
}, {
  text: '是否switch',
  name: 'switch',
  schema: {
    title: '是否选择',
    type: 'boolean',
    widget: 'switch'
  },
  setting: {
    default: {
      title: '是否默认开启',
      type: 'boolean'
    }
  }
}, {
  text: '下拉单选',
  name: 'select',
  schema: {
    title: '单选',
    type: 'string',
    enum: ['a', 'b', 'c'],
    enumNames: ['早', '中', '晚'],
    widget: 'select'
  },
  setting: {
    enumList: {
      title: '选项',
      type: 'array',
      widget: 'simpleList',
      className: 'frg-options-list',
      items: {
        type: 'object',
        properties: {
          value: {
            title: '',
            type: 'string',
            className: 'frg-options-input',
            props: {},
            placeholder: '字段'
          },
          label: {
            title: '',
            type: 'string',
            className: 'frg-options-input',
            props: {},
            placeholder: '名称'
          }
        }
      },
      props: {
        hideMove: true,
        hideCopy: true
      }
    }
  }
}, {
  text: '点击单选',
  name: 'radio',
  schema: {
    title: '单选',
    type: 'string',
    enum: ['a', 'b', 'c'],
    enumNames: ['早', '中', '晚'],
    widget: 'radio'
  },
  setting: {
    enumList: {
      title: '选项',
      type: 'array',
      widget: 'simpleList',
      className: 'frg-options-list',
      items: {
        type: 'object',
        properties: {
          value: {
            title: '',
            type: 'string',
            className: 'frg-options-input',
            props: {},
            placeholder: '字段'
          },
          label: {
            title: '',
            type: 'string',
            className: 'frg-options-input',
            props: {},
            placeholder: '名称'
          }
        }
      },
      props: {
        hideMove: true,
        hideCopy: true
      }
    }
  }
}, {
  text: '下拉多选',
  name: 'multiSelect',
  schema: {
    title: '多选',
    description: '下拉多选',
    type: 'array',
    items: {
      type: 'string'
    },
    enum: ['A', 'B', 'C', 'D'],
    enumNames: ['杭州', '武汉', '湖州', '贵阳'],
    widget: 'multiSelect'
  },
  setting: {
    default: {
      title: '默认值',
      type: 'array',
      widget: 'jsonInput'
    },
    enumList: {
      title: '选项',
      type: 'array',
      widget: 'simpleList',
      className: 'frg-options-list',
      items: {
        type: 'object',
        properties: {
          value: {
            title: '',
            type: 'string',
            className: 'frg-options-input',
            props: {},
            placeholder: '字段'
          },
          label: {
            title: '',
            type: 'string',
            className: 'frg-options-input',
            props: {},
            placeholder: '名称'
          }
        }
      },
      props: {
        hideMove: true,
        hideCopy: true
      }
    }
  }
}, {
  text: '点击多选',
  name: 'checkboxes',
  schema: {
    title: '多选',
    type: 'array',
    widget: 'checkboxes',
    items: {
      type: 'string'
    },
    enum: ['A', 'B', 'C', 'D'],
    enumNames: ['杭州', '武汉', '湖州', '贵阳']
  },
  setting: {
    default: {
      title: '默认值',
      type: 'array',
      widget: 'jsonInput'
    },
    enumList: {
      title: '选项',
      type: 'array',
      widget: 'simpleList',
      className: 'frg-options-list',
      items: {
        type: 'object',
        properties: {
          value: {
            title: '',
            type: 'string',
            className: 'frg-options-input',
            props: {},
            placeholder: '字段'
          },
          label: {
            title: '',
            type: 'string',
            className: 'frg-options-input',
            props: {},
            placeholder: '名称'
          }
        }
      },
      props: {
        hideMove: true,
        hideCopy: true
      }
    }
  }
}, {
  text: 'HTML',
  name: 'html',
  schema: {
    title: 'HTML',
    type: 'string',
    widget: 'html'
  },
  setting: {
    props: {
      type: 'object',
      properties: {
        value: {
          title: '展示内容',
          type: 'string'
        }
      }
    }
  }
}];
var advancedElements = [{
  text: '日期范围',
  name: 'dateRange',
  schema: {
    title: '日期范围',
    type: 'range',
    format: 'dateTime',
    props: {
      placeholder: ['开始时间', '结束时间']
    }
  },
  setting: {
    format: {
      title: '类型',
      type: 'string',
      enum: ['dateTime', 'date'],
      enumNames: ['日期时间', '日期']
    }
  }
}, {
  text: '数字（slider）',
  name: 'slider',
  schema: {
    title: '带滑动条',
    type: 'number',
    widget: 'slider'
  },
  setting: {
    default: {
      title: '默认值',
      type: 'number'
    }
  }
}, {
  text: '图片展示',
  name: 'image',
  schema: {
    title: '图片展示',
    type: 'string',
    format: 'image'
  },
  setting: {}
}, {
  text: '颜色选择',
  name: 'color',
  schema: {
    title: '颜色选择',
    type: 'string',
    format: 'color'
  },
  setting: {}
}];
var layouts = [{
  text: '对象',
  name: 'object',
  schema: {
    title: '对象',
    type: 'object',
    properties: {}
  },
  setting: {}
}, {
  text: '常规列表',
  name: 'list',
  schema: {
    title: '数组',
    type: 'array',
    items: {
      type: 'object',
      properties: {}
    }
  },
  setting: {
    default: {
      title: '默认值',
      type: 'array',
      widget: 'jsonInput'
    },
    items: {
      type: 'object',
      hidden: '{{true}}'
    },
    min: {
      title: '最小长度',
      type: 'number'
    },
    max: {
      title: '最大长度',
      type: 'number'
    },
    props: {
      title: '选项',
      type: 'object',
      properties: {
        foldable: {
          title: '是否可折叠',
          type: 'boolean'
        },
        hideDelete: {
          title: '隐藏删除按钮',
          type: 'string'
        },
        hideAdd: {
          title: '隐藏新增/复制按钮',
          type: 'string'
        }
      }
    }
  }
}, {
  text: '简单列表',
  name: 'simpleList',
  schema: {
    title: '数组',
    type: 'array',
    widget: 'simpleList',
    items: {
      type: 'object',
      properties: {}
    }
  },
  setting: {
    default: {
      title: '默认值',
      type: 'array',
      widget: 'jsonInput'
    },
    items: {
      type: 'object',
      hidden: '{{true}}'
    },
    min: {
      title: '最小长度',
      type: 'number'
    },
    max: {
      title: '最大长度',
      type: 'number'
    },
    props: {
      title: '选项',
      type: 'object',
      properties: {
        foldable: {
          title: '是否可折叠',
          type: 'boolean'
        },
        hideTitle: {
          title: '隐藏标题',
          type: 'boolean'
        },
        hideDelete: {
          title: '隐藏删除按钮',
          type: 'string'
        },
        hideAdd: {
          title: '隐藏新增/复制按钮',
          type: 'string'
        }
      }
    }
  }
}, {
  text: '表格列表',
  name: 'list2',
  schema: {
    title: '数组',
    type: 'array',
    widget: 'list2',
    items: {
      type: 'object',
      properties: {}
    }
  },
  setting: {
    default: {
      title: '默认值',
      type: 'array',
      widget: 'jsonInput'
    },
    items: {
      type: 'object',
      hidden: '{{true}}'
    },
    min: {
      title: '最小长度',
      type: 'number'
    },
    max: {
      title: '最大长度',
      type: 'number'
    },
    props: {
      title: '选项',
      type: 'object',
      properties: {
        foldable: {
          title: '是否可折叠',
          type: 'boolean'
        },
        hideDelete: {
          title: '隐藏删除按钮',
          type: 'string'
        },
        hideAdd: {
          title: '隐藏新增/复制按钮',
          type: 'string'
        }
      }
    }
  }
}, {
  text: '复杂表格列表',
  name: 'drawerList',
  schema: {
    title: '数组',
    type: 'array',
    widget: 'drawerList',
    items: {
      type: 'object',
      properties: {}
    }
  },
  setting: {
    default: {
      title: '默认值',
      type: 'array',
      widget: 'jsonInput'
    },
    items: {
      type: 'object',
      hidden: '{{true}}'
    },
    min: {
      title: '最小长度',
      type: 'number'
    },
    max: {
      title: '最大长度',
      type: 'number'
    },
    props: {
      title: '选项',
      type: 'object',
      properties: {
        foldable: {
          title: '是否可折叠',
          type: 'boolean'
        },
        hideDelete: {
          title: '隐藏删除按钮',
          type: 'string'
        },
        hideAdd: {
          title: '隐藏新增/复制按钮',
          type: 'string'
        }
      }
    }
  }
}];
var saves = [{
  text: '复杂结构样例',
  name: 'something',
  schema: {
    title: '对象',
    description: '这是一个对象类型',
    type: 'object',
    properties: {
      inputName: {
        title: '简单输入框',
        type: 'string'
      },
      selectName: {
        title: '单选',
        type: 'string',
        enum: ['a', 'b', 'c'],
        enumNames: ['早', '中', '晚']
      },
      dateName: {
        title: '时间选择',
        type: 'string',
        format: 'date'
      },
      listName: {
        title: '对象数组',
        description: '对象数组嵌套功能',
        type: 'array',
        items: {
          type: 'object',
          properties: {
            rangeName: {
              title: '日期/时间范围',
              type: 'range',
              format: 'date',
              props: {
                placeholder: ['开始日期', '结束日期']
              }
            }
          }
        }
      }
    }
  }
}];
var defaultSettings = [{
  title: '基础组件',
  widgets: elements,
  show: true,
  useCommon: true // TODO: 是否将common

}, {
  title: '高级组件',
  widgets: advancedElements
}, {
  title: '布局组件',
  widgets: layouts
}, {
  title: '模板',
  widgets: saves
}];
var defaultGlobalSettings = {
  type: 'object',
  properties: {
    column: {
      title: '整体布局',
      type: 'number',
      enum: [1, 2, 3],
      enumNames: ['一行一列', '一行二列', '一行三列'],
      props: {
        placeholder: '默认一行一列'
      }
    },
    labelWidth: {
      title: '标签宽度',
      type: 'number',
      widget: 'slider',
      max: 300,
      default: 120,
      props: {
        hideNumber: true
      }
    },
    displayType: {
      title: '标签展示模式',
      type: 'string',
      default: 'row',
      enum: ['row', 'column'],
      enumNames: ['同行', '单独一行'],
      widget: 'radio'
    }
  }
};

function styleInject(css, ref) {
  if ( ref === void 0 ) ref = {};
  var insertAt = ref.insertAt;

  if (!css || typeof document === 'undefined') { return; }

  var head = document.head || document.getElementsByTagName('head')[0];
  var style = document.createElement('style');
  style.type = 'text/css';

  if (insertAt === 'top') {
    if (head.firstChild) {
      head.insertBefore(style, head.firstChild);
    } else {
      head.appendChild(style);
    }
  } else {
    head.appendChild(style);
  }

  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    style.appendChild(document.createTextNode(css));
  }
}

var css_248z = ".left-item {\n  width: 7.2rem;\n  height: 2.2rem;\n  margin: 4px;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #333;\n  background-color: #f5f7fa;\n}\n.left-item:hover {\n  border: 1px dashed #ddd;\n  color: #409eff;\n  border: 1px dashed #409eff;\n}\n";
styleInject(css_248z);

var Element = function Element(_ref) {
  var text = _ref.text,
      name = _ref.name,
      schema = _ref.schema,
      icon = _ref.icon,
      fixedName = _ref.fixedName;
  var setGlobal = useGlobal();

  var _useStore = useStore(),
      selected = _useStore.selected,
      flatten = _useStore.flatten,
      errorFields = _useStore.errorFields,
      userProps = _useStore.userProps,
      onFlattenChange = _useStore.onFlattenChange,
      elementRender = _useStore.elementRender;

  var getId = userProps.getId;

  var _useDrag = reactDnd.useDrag({
    type: 'box',
    item: {
      dragItem: {
        parent: '#',
        schema: schema,
        children: []
      },
      $id: fixedName ? "#/".concat(name) : "#/".concat(getId(name))
    },
    collect: function collect(monitor) {
      return {
        isDragging: monitor.isDragging()
      };
    }
  }),
      _useDrag2 = _slicedToArray(_useDrag, 2),
      isDragging = _useDrag2[0].isDragging,
      dragRef = _useDrag2[1];

  var handleElementClick = /*#__PURE__*/function () {
    var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
      var _addItem, newId, newFlatten;

      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              if (!(errorFields === null || errorFields === void 0 ? void 0 : errorFields.length)) {
                _context.next = 2;
                break;
              }

              return _context.abrupt("return");

            case 2:
              if (!(selected && !flatten[selected])) {
                _context.next = 5;
                break;
              }

              setGlobal({
                selected: '#'
              });
              return _context.abrupt("return");

            case 5:
              _addItem = addItem({
                selected: selected,
                name: name,
                schema: schema,
                flatten: flatten,
                fixedName: fixedName,
                getId: getId
              }), newId = _addItem.newId, newFlatten = _addItem.newFlatten;
              onFlattenChange(newFlatten);
              setGlobal({
                selected: newId
              });

            case 8:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));

    return function handleElementClick() {
      return _ref2.apply(this, arguments);
    };
  }();

  var widgetProps = {
    text: text,
    icon: icon,
    onClick: handleElementClick
  };
  var originNode = /*#__PURE__*/React__default['default'].createElement(WidgetUI, widgetProps);
  return /*#__PURE__*/React__default['default'].createElement("div", {
    ref: dragRef
  }, elementRender ? elementRender(schema, widgetProps, originNode) : originNode);
};

var WidgetUI = function WidgetUI(_ref3) {
  var onClick = _ref3.onClick,
      text = _ref3.text,
      icon = _ref3.icon;
  return /*#__PURE__*/React__default['default'].createElement("li", {
    className: "left-item",
    onClick: onClick
  }, icon, text);
};

var css_248z$1 = ".left-layout {\n  flex-shrink: 0;\n  padding: 16px 0 0 8px;\n  overflow-y: auto;\n  height: 100%;\n}\n.left-layout ul {\n  display: flex;\n  flex-wrap: wrap;\n  align-content: flex-start;\n}\n";
styleInject(css_248z$1);

var Sidebar = function Sidebar(props) {
  var _useStore = useStore(),
      _useStore$userProps = _useStore.userProps,
      userProps = _useStore$userProps === void 0 ? {} : _useStore$userProps;

  var settings = userProps.settings;

  var _settings = Array.isArray(settings) ? settings : defaultSettings;

  return /*#__PURE__*/React__default['default'].createElement("div", {
    className: "left-layout w5-l w4"
  }, Array.isArray(_settings) ? _settings.map(function (item, idx) {
    if (item && item.show === false) {
      return null;
    }

    return /*#__PURE__*/React__default['default'].createElement("div", {
      key: idx
    }, /*#__PURE__*/React__default['default'].createElement("p", {
      className: "f6 b"
    }, item.title), /*#__PURE__*/React__default['default'].createElement("ul", {
      className: "pl0"
    }, Array.isArray(item.widgets) ? item.widgets.filter(function (item) {
      return item.show !== false;
    }).map(function (widget, idx) {
      return /*#__PURE__*/React__default['default'].createElement(Element, _extends({
        key: idx.toString()
      }, props, widget));
    }) : /*#__PURE__*/React__default['default'].createElement("div", null, "\u6B64\u5904\u914D\u7F6E\u6709\u8BEF")));
  }) : /*#__PURE__*/React__default['default'].createElement("div", null, "\u914D\u7F6E\u9519\u8BEF\uFF1ASetting\u4E0D\u662F\u6570\u7EC4"));
};

var RenderChildren = function RenderChildren(_ref) {
  var _ref$children = _ref.children,
      children = _ref$children === void 0 ? [] : _ref$children,
      preview = _ref.preview;
  return /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, children.map(function (child, i) {
    var FRProps = {
      id: child,
      preview: preview
    };
    return /*#__PURE__*/React__default['default'].createElement(FR, _extends({
      key: i.toString()
    }, FRProps));
  }));
};

function getWidgetName(schema, _mapping) {
  var type = schema.type,
      format = schema.format,
      enums = schema.enum,
      readonly = schema.readonly; // 如果已经注明了渲染widget，那最好

  if (schema['widget']) {
    return schema['widget'];
  }

  var list = [];

  if (readonly) {
    list.push("".concat(type, "?readonly"));
    list.push('*?readonly');
  }

  if (enums) {
    list.push("".concat(type, "?enum")); // array 默认使用list，array?enum 默认使用checkboxes，*?enum 默认使用select

    list.push('*?enum');
  }

  if (format) {
    list.push("".concat(type, ":").concat(format));
  }

  list.push(type); // 放在最后兜底，其他都不match时使用type默认的组件

  var found = '';
  list.some(function (item) {
    found = _mapping[item];
    return !!found;
  });
  return found;
}

var RenderField = function RenderField(_ref) {
  var $id = _ref.$id,
      item = _ref.item,
      labelClass = _ref.labelClass,
      contentClass = _ref.contentClass,
      isComplex = _ref.isComplex,
      children = _ref.children;
  var schema = item.schema,
      data = item.data;

  var _useStore = useStore(),
      onItemChange = _useStore.onItemChange,
      flatten = _useStore.flatten,
      widgets = _useStore.widgets,
      mapping = _useStore.mapping,
      _useStore$frProps = _useStore.frProps,
      frProps = _useStore$frProps === void 0 ? {} : _useStore$frProps,
      fieldRender = _useStore.fieldRender;

  var labelWidth = frProps.labelWidth,
      displayType = frProps.displayType,
      showValidate = frProps.showValidate;
  var title = schema.title,
      description = schema.description,
      required = schema.required;
  var widgetName = getWidgetName(schema, mapping);
  var customWidget = schema['widget'];

  if (customWidget && widgets[customWidget]) {
    widgetName = customWidget;
  }

  var Widget = widgets[widgetName]; // 如果不存在，比如有外部的自定义组件名称，使用默认展示组件

  if (!Widget) {
    var defaultSchema = _objectSpread2({}, schema);

    delete defaultSchema['widget'];
    widgetName = getWidgetName(defaultSchema, mapping);
    Widget = widgets[widgetName] || 'input';
  } // 真正有效的label宽度需要从现在所在item开始一直往上回溯（设计成了继承关系），找到的第一个有值的 labelWidth


  var effectiveLabelWidth = getParentProps('labelWidth', $id, flatten) || labelWidth;

  var _labelWidth = isLooselyNumber(effectiveLabelWidth) ? Number(effectiveLabelWidth) : isCssLength(effectiveLabelWidth) ? effectiveLabelWidth : 110; // 默认是 110px 的长度


  var labelStyle = {
    width: _labelWidth
  };

  if (widgetName === 'checkbox') {
    labelStyle = {
      flexGrow: 1
    };
  } else if (isComplex || displayType === 'column') {
    labelStyle = {
      flexGrow: 1
    };
  }

  var onChange = function onChange(value) {
    var newItem = _objectSpread2({}, item);

    if (item.schema.type === 'boolean' && item.schema.widget === 'checkbox') {
      newItem.data = !value;
    } else {
      newItem.data = value;
    }

    onItemChange($id, newItem, 'data');
  };

  var contentStyle = {};

  if (widgetName === 'checkbox' && displayType === 'row') {
    contentStyle.marginLeft = effectiveLabelWidth;
  } // TODO: useMemo
  // 改为直接使用form-render内部自带组件后不需要再包一层options


  var usefulWidgetProps = transformProps(_objectSpread2({
    value: data || schema.default,
    checked: data,
    disabled: schema.disabled,
    readOnly: schema.readOnly,
    format: schema.format,
    onChange: onChange,
    schema: schema
  }, schema['props']));
  var originNode = /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, schema.title ? /*#__PURE__*/React__default['default'].createElement("div", {
    className: labelClass,
    style: labelStyle
  }, /*#__PURE__*/React__default['default'].createElement("label", {
    className: "fr-label-title ".concat(widgetName === 'checkbox' || displayType === 'column' ? 'no-colon' : '') // checkbox不带冒号
    ,
    title: title
  }, required && /*#__PURE__*/React__default['default'].createElement("span", {
    className: "fr-label-required"
  }, " *"), /*#__PURE__*/React__default['default'].createElement("span", {
    className: "".concat(isComplex ? 'b' : '', " ").concat(displayType === 'column' ? 'flex-none' : '')
  }, /*#__PURE__*/React__default['default'].createElement("span", {
    dangerouslySetInnerHTML: {
      __html: title
    }
  })), description && /*#__PURE__*/React__default['default'].createElement("span", {
    className: "fr-desc ml2"
  }, "(\xA0", description, "\xA0)"), displayType !== 'row' && showValidate && /*#__PURE__*/React__default['default'].createElement("span", {
    className: "fr-validate"
  }, "validation"))) : null, /*#__PURE__*/React__default['default'].createElement("div", {
    className: contentClass,
    style: contentStyle
  }, /*#__PURE__*/React__default['default'].createElement(React.Suspense, {
    fallback: /*#__PURE__*/React__default['default'].createElement("div", null)
  }, /*#__PURE__*/React__default['default'].createElement(Widget, usefulWidgetProps, children || null))));
  if (!fieldRender) return originNode;
  return fieldRender(schema, usefulWidgetProps, children, originNode);
};

var CopyOutlined_1 = createCommonjsModule(function (module, exports) {
// This icon file is generated automatically.
Object.defineProperty(exports, "__esModule", { value: true });
var CopyOutlined = { "icon": { "tag": "svg", "attrs": { "viewBox": "64 64 896 896", "focusable": "false" }, "children": [{ "tag": "path", "attrs": { "d": "M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z" } }] }, "name": "copy", "theme": "outlined" };
exports.default = CopyOutlined;
});

unwrapExports(CopyOutlined_1);

var CopyOutlined_1$1 = createCommonjsModule(function (module, exports) {





Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _objectSpread2 = interopRequireDefault(objectSpread2);

var React = interopRequireWildcard(React__default['default']);

var _CopyOutlined = interopRequireDefault(CopyOutlined_1);

var _AntdIcon = interopRequireDefault(AntdIcon);

// GENERATE BY ./scripts/generate.ts
// DON NOT EDIT IT MANUALLY
var CopyOutlined = function CopyOutlined(props, ref) {
  return /*#__PURE__*/React.createElement(_AntdIcon.default, (0, _objectSpread2.default)((0, _objectSpread2.default)({}, props), {}, {
    ref: ref,
    icon: _CopyOutlined.default
  }));
};

CopyOutlined.displayName = 'CopyOutlined';

var _default = /*#__PURE__*/React.forwardRef(CopyOutlined);

exports.default = _default;
});

var _CopyOutlined = unwrapExports(CopyOutlined_1$1);

var DragOutlined_1 = createCommonjsModule(function (module, exports) {
// This icon file is generated automatically.
Object.defineProperty(exports, "__esModule", { value: true });
var DragOutlined = { "icon": { "tag": "svg", "attrs": { "viewBox": "64 64 896 896", "focusable": "false" }, "children": [{ "tag": "path", "attrs": { "d": "M909.3 506.3L781.7 405.6a7.23 7.23 0 00-11.7 5.7V476H548V254h64.8c6 0 9.4-7 5.7-11.7L517.7 114.7a7.14 7.14 0 00-11.3 0L405.6 242.3a7.23 7.23 0 005.7 11.7H476v222H254v-64.8c0-6-7-9.4-11.7-5.7L114.7 506.3a7.14 7.14 0 000 11.3l127.5 100.8c4.7 3.7 11.7.4 11.7-5.7V548h222v222h-64.8c-6 0-9.4 7-5.7 11.7l100.8 127.5c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7.4-11.7-5.7-11.7H548V548h222v64.8c0 6 7 9.4 11.7 5.7l127.5-100.8a7.3 7.3 0 00.1-11.4z" } }] }, "name": "drag", "theme": "outlined" };
exports.default = DragOutlined;
});

unwrapExports(DragOutlined_1);

var DragOutlined_1$1 = createCommonjsModule(function (module, exports) {





Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _objectSpread2 = interopRequireDefault(objectSpread2);

var React = interopRequireWildcard(React__default['default']);

var _DragOutlined = interopRequireDefault(DragOutlined_1);

var _AntdIcon = interopRequireDefault(AntdIcon);

// GENERATE BY ./scripts/generate.ts
// DON NOT EDIT IT MANUALLY
var DragOutlined = function DragOutlined(props, ref) {
  return /*#__PURE__*/React.createElement(_AntdIcon.default, (0, _objectSpread2.default)((0, _objectSpread2.default)({}, props), {}, {
    ref: ref,
    icon: _DragOutlined.default
  }));
};

DragOutlined.displayName = 'DragOutlined';

var _default = /*#__PURE__*/React.forwardRef(DragOutlined);

exports.default = _default;
});

var _DragOutlined = unwrapExports(DragOutlined_1$1);

var css_248z$2 = ".field-wrapper {\n  padding: 20px 8px 0 8px;\n  border: 1px dashed #bbb;\n  margin: 0 0 8px 0;\n}\n.dnd-container > .field-wrapper {\n  margin: 0;\n}\n.fr-generator-container .dnd-container > .field-wrapper > .fr-field {\n  margin: 0;\n}\n.pointer-move {\n  position: absolute;\n  top: -2px;\n  left: -2px;\n  height: 24px;\n  width: 24px;\n  color: #fff;\n  background-color: #409eff;\n  cursor: move;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.pointer-wrapper {\n  position: absolute;\n  z-index: 20;\n  bottom: -2px;\n  right: -2px;\n  height: 24px;\n  border-top-left-radius: 8px;\n  background: #409eff;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 4px;\n}\n.pointer {\n  color: #fff;\n  padding: 0 4px;\n}\n";
styleInject(css_248z$2);

function Wrapper(_ref) {
  var $id = _ref.$id,
      item = _ref.item,
      _ref$inside = _ref.inside,
      inside = _ref$inside === void 0 ? false : _ref$inside,
      children = _ref.children,
      style = _ref.style;

  var _useState = React.useState(),
      _useState2 = _slicedToArray(_useState, 2),
      position = _useState2[0],
      setPosition = _useState2[1];

  var _useStore = useStore(),
      flatten = _useStore.flatten,
      onFlattenChange = _useStore.onFlattenChange,
      selected = _useStore.selected,
      userProps = _useStore.userProps,
      errorFields = _useStore.errorFields,
      fieldWrapperRender = _useStore.fieldWrapperRender;

  var controlButtons = userProps.controlButtons,
      _userProps$canDrag = userProps.canDrag,
      _canDrag = _userProps$canDrag === void 0 ? true : _userProps$canDrag,
      _userProps$canDelete = userProps.canDelete,
      canDelete = _userProps$canDelete === void 0 ? true : _userProps$canDelete,
      hideId = userProps.hideId,
      getId = userProps.getId;

  var setGlobal = useGlobal();
  var schema = item.schema;
  var type = schema.type;
  var boxRef = React.useRef(null);

  var _useDrag = reactDnd.useDrag({
    type: 'box',
    item: {
      $id: inside ? 0 + $id : $id
    },
    canDrag: function canDrag() {
      return typeof _canDrag === 'function' ? _canDrag(schema) : _canDrag;
    },
    collect: function collect(monitor) {
      return {
        isDragging: monitor.isDragging()
      };
    }
  }),
      _useDrag2 = _slicedToArray(_useDrag, 3),
      isDragging = _useDrag2[0].isDragging,
      dragRef = _useDrag2[1],
      dragPreview = _useDrag2[2];

  var _useDrop = reactDnd.useDrop({
    accept: 'box',
    drop: function () {
      var _drop = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(item, monitor) {
        var didDrop, _dropItem, _dropItem2, newFlatten, newId;

        return regeneratorRuntime.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                // 如果 children 已经作为了 drop target，不处理
                didDrop = monitor.didDrop();

                if (!(didDrop || (errorFields === null || errorFields === void 0 ? void 0 : errorFields.length))) {
                  _context.next = 3;
                  break;
                }

                return _context.abrupt("return");

              case 3:
                _dropItem = dropItem({
                  dragId: item.$id,
                  // 内部拖拽用dragId
                  dragItem: item.dragItem,
                  // 从左边栏过来的，用dragItem
                  dropId: $id,
                  position: position,
                  flatten: flatten
                }), _dropItem2 = _slicedToArray(_dropItem, 2), newFlatten = _dropItem2[0], newId = _dropItem2[1];
                onFlattenChange(newFlatten);
                setGlobal({
                  selected: newId
                });

              case 6:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      function drop(_x, _x2) {
        return _drop.apply(this, arguments);
      }

      return drop;
    }(),
    hover: function hover(item, monitor) {
      // 只检查被hover的最小元素
      var didHover = monitor.isOver({
        shallow: true
      });

      if (didHover) {
        // Determine rectangle on screen
        var hoverBoundingRect = boxRef.current && boxRef.current.getBoundingClientRect(); // Get vertical middle

        // Get vertical middle
        var hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2; // Determine mouse position
        // const clientOffset = monitor.getClientOffset();

        // Determine mouse position
        // const clientOffset = monitor.getClientOffset();
        var dragOffset = monitor.getSourceClientOffset(); // Get pixels to the top

        // Get pixels to the top
        var hoverClientY = dragOffset.y - hoverBoundingRect.top; // Only perform the move when the mouse has crossed half of the items height
        // When dragging downwards, only move when the cursor is below 50%
        // When dragging upwards, only move when the cursor is above 50%
        // Dragging downwards

        // Only perform the move when the mouse has crossed half of the items height
        // When dragging downwards, only move when the cursor is below 50%
        // When dragging upwards, only move when the cursor is above 50%
        // Dragging downwards
        if (inside) {
          setPosition('inside');
        } else {
          if (hoverClientY <= hoverMiddleY) {
            setPosition('up');
          } // Dragging upwards


          // Dragging upwards
          if (hoverClientY > hoverMiddleY) {
            setPosition('down');
          }
        }
      }
    },
    collect: function collect(monitor) {
      return {
        isOver: monitor.isOver({
          shallow: true
        }),
        canDrop: monitor.canDrop()
      };
    }
  }),
      _useDrop2 = _slicedToArray(_useDrop, 2),
      _useDrop2$ = _useDrop2[0],
      canDrop = _useDrop2$.canDrop,
      isOver = _useDrop2$.isOver,
      dropRef = _useDrop2[1];

  var isActive = canDrop && isOver;
  dragPreview(dropRef(boxRef));

  var handleClick = /*#__PURE__*/function () {
    var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(e) {
      var _id;

      return regeneratorRuntime.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              e.stopPropagation();

              if (!(errorFields === null || errorFields === void 0 ? void 0 : errorFields.length)) {
                _context2.next = 3;
                break;
              }

              return _context2.abrupt("return");

            case 3:
              _id = inside ? '0' + $id : $id;
              setGlobal({
                selected: _id
              });

            case 5:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function handleClick(_x3) {
      return _ref2.apply(this, arguments);
    };
  }();

  var deleteItem = /*#__PURE__*/function () {
    var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(e) {
      var newFlatten, newSelect, parent, siblings, idx, _canDelete;

      return regeneratorRuntime.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              e.stopPropagation();
              newFlatten = _objectSpread2({}, flatten);
              newSelect = '#'; // 计算删除后新被选中的元素：
              // 1. 如果是第一个，选第二个
              // 2. 如果不是第一，选它前一个
              // 3. 如果同级元素没了，选parent

              try {
                parent = newFlatten[$id].parent;
                siblings = newFlatten[parent].children;
                idx = siblings.indexOf($id);

                if (idx > 0) {
                  newSelect = siblings[idx - 1];
                } else {
                  newSelect = siblings[1] || parent;
                }
              } catch (error) {
                console.error(error, 'catch');
              }

              _canDelete = canDelete;

              if (!(typeof canDelete === 'function')) {
                _context3.next = 9;
                break;
              }

              _context3.next = 8;
              return Promise.resolve(canDelete(newFlatten[$id].schema));

            case 8:
              _canDelete = _context3.sent;

            case 9:
              if (_canDelete) {
                _context3.next = 11;
                break;
              }

              return _context3.abrupt("return");

            case 11:
              delete newFlatten[$id];
              onFlattenChange(newFlatten);
              setGlobal({
                selected: newSelect
              });

            case 14:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function deleteItem(_x4) {
      return _ref3.apply(this, arguments);
    };
  }();

  var handleItemCopy = function handleItemCopy(e) {
    e.stopPropagation();
    if (errorFields === null || errorFields === void 0 ? void 0 : errorFields.length) return;

    var _copyItem = copyItem(flatten, $id, getId),
        _copyItem2 = _slicedToArray(_copyItem, 2),
        newFlatten = _copyItem2[0],
        newId = _copyItem2[1];

    onFlattenChange(newFlatten);
    setGlobal({
      selected: newId
    });
  }; // 一些computed


  var isSelected = selected === $id && !inside;

  if (selected && selected[0] === '0') {
    isSelected = selected.substring(1) === $id && inside;
  }

  var overwriteStyle = {
    backgroundColor: '#fff',
    opacity: isDragging ? 0 : 1
  };

  if (inside) {
    overwriteStyle = _objectSpread2(_objectSpread2({}, overwriteStyle), {}, {
      borderColor: '#777',
      // marginLeft: 12,
      padding: '12px 12px 0',
      backgroundColor: '#f6f5f6'
    });
  } else if ($id === '#') {
    overwriteStyle = _objectSpread2(_objectSpread2({}, overwriteStyle), {}, {
      borderColor: '#777',
      padding: 12,
      height: '100%',
      overflow: 'auto',
      backgroundColor: '#f6f5f6'
    });
  } else if (type === 'object') {
    overwriteStyle = _objectSpread2(_objectSpread2({}, overwriteStyle), {}, {
      paddingTop: 12
    });
  }

  if (isActive) {
    if (inside) {
      overwriteStyle = _objectSpread2(_objectSpread2({}, overwriteStyle), {}, {
        boxShadow: '0 -3px 0 red'
      });
    } else if (position === 'up') {
      overwriteStyle = _objectSpread2(_objectSpread2({}, overwriteStyle), {}, {
        boxShadow: '0 -3px 0 red'
      });
    } else if (position === 'down') {
      overwriteStyle = _objectSpread2(_objectSpread2({}, overwriteStyle), {}, {
        boxShadow: '0 3px 0 red'
      });
    }
  }

  if (isSelected) {
    overwriteStyle = _objectSpread2(_objectSpread2({}, overwriteStyle), {}, {
      outline: '2px solid #409eff',
      borderColor: '#fff',
      zIndex: 1
    });
  }

  if (style && _typeof(style) === 'object') {
    overwriteStyle = _objectSpread2(_objectSpread2({}, overwriteStyle), style);
  }

  if ($id === '#' && inside) return children; // 展示的id

  var shownId = getKeyFromUniqueId(schema.$id); // 操作按钮

  var _controlButtons = Array.isArray(controlButtons) ? controlButtons : [true, true];

  var _showDefaultBtns = _controlButtons.filter(function (item) {
    return ['boolean', 'function'].includes(_typeof(item));
  }).map(function (item) {
    if (typeof item === 'boolean') return item;
    return item(schema);
  });

  var _extraBtns = _controlButtons.filter(function (item) {
    return isObject(item) && (item.text || item.children);
  });

  var _showDefaultBtns$conc = _showDefaultBtns.concat(_extraBtns).filter(Boolean),
      _numOfBtns = _showDefaultBtns$conc.length;

  var hasDuplicateId = Object.keys(flatten).map(function (key) {
    return flatten[key].schema.$id;
  }).filter(function (key) {
    return key === schema.$id;
  }).length > 1;
  var originNode = /*#__PURE__*/React__default['default'].createElement("div", {
    ref: boxRef,
    style: overwriteStyle,
    className: "field-wrapper ".concat($id !== '#' && isSelected ? 'selected-field-wrapper' : '', " relative w-100"),
    onClick: handleClick
  }, children, /*#__PURE__*/React__default['default'].createElement("div", {
    className: "absolute top-0 right-1 f7"
  }, !inside && $id !== '#' && !hideId && /*#__PURE__*/React__default['default'].createElement("span", {
    className: hasDuplicateId ? 'red' : 'blue'
  }, shownId), schema.hidden && /*#__PURE__*/React__default['default'].createElement("span", {
    style: {
      color: '#666',
      marginLeft: '6px'
    }
  }, "[hidden]")), !inside && $id !== '#' && isSelected && /*#__PURE__*/React__default['default'].createElement("div", {
    className: "pointer-move",
    ref: dragRef
  }, /*#__PURE__*/React__default['default'].createElement(_DragOutlined, null)), !inside && $id !== '#' && isSelected && _numOfBtns > 0 && /*#__PURE__*/React__default['default'].createElement("div", {
    className: "pointer-wrapper"
  }, _showDefaultBtns[0] !== false && /*#__PURE__*/React__default['default'].createElement("div", {
    className: "pointer",
    onClick: deleteItem
  }, /*#__PURE__*/React__default['default'].createElement(_DeleteOutlined, null)), _showDefaultBtns[1] !== false && /*#__PURE__*/React__default['default'].createElement("div", {
    className: "pointer",
    onClick: handleItemCopy
  }, /*#__PURE__*/React__default['default'].createElement(_CopyOutlined, null)), _extraBtns.map(function (item, idx) {
    return /*#__PURE__*/React__default['default'].createElement("div", {
      key: idx.toString(),
      className: "pointer",
      onClick: function onClick(e) {
        return item.onClick && item.onClick(e, schema);
      }
    }, item.text || item.children);
  })));
  if (!fieldWrapperRender) return originNode;
  return fieldWrapperRender(schema, isSelected, children, originNode);
}

var PreviewFR = function PreviewFR(_ref) {
  var schema = _ref.schema,
      data = _ref.data;
  var form = FormRender.useForm();

  var _useStore = useStore(),
      flatten = _useStore.flatten,
      widgets = _useStore.widgets,
      mapping = _useStore.mapping,
      userProps = _useStore.userProps,
      onFlattenChange = _useStore.onFlattenChange;

  var renderSchema = userProps.transformer.to(schema);
  React.useEffect(function () {
    form.setValues(data);
  }, []);
  return /*#__PURE__*/React__default['default'].createElement(FormRender__default['default'], {
    schema: renderSchema,
    form: form,
    widgets: widgets,
    mapping: mapping,
    watch: {
      '#': function _(formData) {
        onFlattenChange(dataToFlatten(flatten, formData), 'data');
      }
    }
  });
};

var FR = function FR(_ref2) {
  var _ref2$id = _ref2.id,
      id = _ref2$id === void 0 ? '#' : _ref2$id,
      preview = _ref2.preview,
      displaySchema = _ref2.displaySchema;

  var _useStore2 = useStore(),
      flatten = _useStore2.flatten,
      _useStore2$frProps = _useStore2.frProps,
      frProps = _useStore2$frProps === void 0 ? {} : _useStore2$frProps;

  if (preview) {
    var data = flattenToData(flatten);
    return /*#__PURE__*/React__default['default'].createElement(PreviewFR, {
      schema: displaySchema,
      data: data
    });
  }

  var column = frProps.column;
  var item = flatten[id];
  if (!item) return null;
  var schema = item.schema;
  var displayType = schema.displayType || frProps.displayType;
  var isObj = schema.type === 'object';
  var isList = schema.type === 'array' && schema.enum === undefined && !!schema.items;
  var isComplex = isObj || isList;
  var width = schema['width'];
  var containerClass = "fr-field w-100 ".concat(isComplex ? 'fr-field-complex' : '', " ").concat(schema.className || '');
  var labelClass = 'fr-label mb2';
  var contentClass = 'fr-content';
  var columnStyle = {};

  if (!isComplex && width) {
    columnStyle = {
      width: width,
      paddingRight: '12px'
    };
  } else if (!isComplex && column > 1) {
    columnStyle = {
      width: "calc(100% /".concat(column, ")"),
      paddingRight: '12px'
    };
  }

  switch (schema.type) {
    case 'object':
      if (schema.title) {
        containerClass += ' ba b--black-20 pt4 pr3 pb2 relative mt3 mb4'; // object的margin bottom由内部元素撑起

        labelClass += ' fr-label-object bg-white absolute ph2 top-upper left-1'; // fr-label-object 无默认style，只是占位用于使用者样式覆盖
      }

      containerClass += ' fr-field-object'; // object的margin bottom由内部元素撑起

      if (schema.title) {
        contentClass += ' ml3'; // 缩进
      }

      break;

    case 'array':
      if (isList) {
        labelClass += ' mt2 mb3';
      }

      break;

    case 'boolean':
      if (schema['widget'] !== 'switch') {
        if (schema.title) {
          labelClass += ' ml2';
          labelClass = labelClass.replace('mb2', 'mb0');
        }

        contentClass += ' flex items-center'; // checkbox高度短，需要居中对齐

        containerClass += ' flex items-center flex-row-reverse justify-end';
      }

      break;

    default:
      if (displayType === 'row') {
        labelClass = labelClass.replace('mb2', 'mb0');
      }

  } // 横排时


  var isCheckBox = schema.type === 'boolean' && schema['widget'] !== 'switch';

  if (displayType === 'row' && !isComplex && !isCheckBox) {
    containerClass += ' flex items-center';
    labelClass += ' flex-shrink-0 fr-label-row';
    labelClass = labelClass.replace('mb2', 'mb0');
    contentClass += ' flex-grow-1 relative';
  } // 横排的checkbox


  if (displayType === 'row' && isCheckBox) {
    contentClass += ' flex justify-end pr2';
  }

  var fieldProps = {
    $id: id,
    item: item,
    labelClass: labelClass,
    contentClass: contentClass,
    isComplex: isComplex
  };
  var childrenElement = item.children && item.children.length > 0 ? /*#__PURE__*/React__default['default'].createElement("ul", {
    className: "flex flex-wrap pl0"
  }, /*#__PURE__*/React__default['default'].createElement(RenderChildren, {
    children: item.children
  })) : null;
  var isEmpty = Object.keys(flatten).length < 2; // 只有一个根元素 # 的情况

  if (isEmpty) {
    return /*#__PURE__*/React__default['default'].createElement(Wrapper, {
      style: columnStyle,
      $id: id,
      item: item
    }, /*#__PURE__*/React__default['default'].createElement("div", {
      className: "".concat(containerClass, " h-100 f4 black-40 flex items-center justify-center")
    }, "\u70B9\u51FB/\u62D6\u62FD\u5DE6\u4FA7\u680F\u7684\u7EC4\u4EF6\u8FDB\u884C\u6DFB\u52A0"));
  }

  return /*#__PURE__*/React__default['default'].createElement(Wrapper, {
    style: columnStyle,
    $id: id,
    item: item
  }, /*#__PURE__*/React__default['default'].createElement("div", {
    className: containerClass
  }, /*#__PURE__*/React__default['default'].createElement(RenderField, fieldProps, (isObj || isList) && /*#__PURE__*/React__default['default'].createElement(Wrapper, {
    $id: id,
    item: item,
    inside: true
  }, childrenElement || /*#__PURE__*/React__default['default'].createElement("div", {
    className: "h2"
  })))));
};

var TextArea = _Input__default['default'].TextArea;

var Canvas = function Canvas(_ref) {
  var onSelect = _ref.onSelect;
  var setGlobal = useGlobal();

  var _useStore = useStore(),
      userProps = _useStore.userProps,
      displaySchema = _useStore.displaySchema,
      displaySchemaString = _useStore.displaySchemaString,
      selected = _useStore.selected,
      flatten = _useStore.flatten,
      onChange = _useStore.onChange,
      onSchemaChange = _useStore.onSchemaChange;

  var _useSet = useSet({
    preview: false,
    showModal: false,
    showModal2: false,
    schemaForImport: ''
  }),
      _useSet2 = _slicedToArray(_useSet, 2),
      local = _useSet2[0],
      setState = _useSet2[1];

  var preview = local.preview;
  var transformer = userProps.transformer,
      _userProps$extraButto = userProps.extraButtons,
      extraButtons = _userProps$extraButto === void 0 ? [] : _userProps$extraButto;

  var toggleModal = function toggleModal() {
    return setState({
      showModal: !local.showModal
    });
  };

  var toggleModal2 = function toggleModal2() {
    return setState({
      showModal2: !local.showModal2
    });
  };

  var onTextareaChange = function onTextareaChange(e) {
    setState({
      schemaForImport: e.target.value
    });
  };

  var importSchema = function importSchema() {
    try {
      var value = transformer.from(looseJsonParse(local.schemaForImport));
      setGlobal(function () {
        return _objectSpread2({
          selected: undefined
        }, schemaToState(value));
      });
      onChange(value.formData || {});
      onSchemaChange(value);
    } catch (error) {
      console.error(error, 'catch');

      _message__default['default'].info('格式不对哦，请重新尝试'); // 可以加个格式哪里不对的提示

    }

    toggleModal2();
  };

  var copySchema = function copySchema() {
    copyTOClipboard__default['default'](displaySchemaString);

    _message__default['default'].info('复制成功');

    toggleModal();
  };

  var clearSchema = function clearSchema() {
    var schema = {
      type: 'object',
      properties: {}
    };
    setGlobal({
      schema: schema,
      formData: {},
      selected: undefined
    });
    onChange({});
    onSchemaChange(schema);
  };

  React.useEffect(function () {
    if (!onSelect) return;
    onSelect(idToSchema(flatten, selected));
  }, [selected]);

  var _extraButtons = Array.isArray(extraButtons) ? extraButtons : [];

  var _showDefaultBtns = _extraButtons.filter(function (item) {
    return !isObject(item);
  });

  var _extraBtns = _extraButtons.filter(function (item) {
    return isObject(item);
  });

  var getDefaultBtnText = function getDefaultBtnText(text, defaultText, index) {
    if (typeof index === 'number') {
      if (Array.isArray(text)) return text[index];
      return defaultText[index];
    }

    if (typeof text === 'string') return text;
    return defaultText;
  };

  return /*#__PURE__*/React__default['default'].createElement("div", {
    className: "mid-layout pr2"
  }, /*#__PURE__*/React__default['default'].createElement("div", {
    className: "mv2 mh1"
  }, _showDefaultBtns[0] !== false && /*#__PURE__*/React__default['default'].createElement(_Button__default['default'], {
    className: "mr2 mb1",
    onClick: function onClick() {
      setState({
        preview: !preview
      });
      setGlobal({
        selected: '#'
      });
    }
  }, getDefaultBtnText(_showDefaultBtns[0], ['开始编辑', '最终展示'], Number(!preview))), _showDefaultBtns[1] !== false && /*#__PURE__*/React__default['default'].createElement(_Button__default['default'], {
    className: "mr2",
    onClick: clearSchema
  }, getDefaultBtnText(_showDefaultBtns[1], '清空')), _showDefaultBtns[2] !== false && /*#__PURE__*/React__default['default'].createElement(_Button__default['default'], {
    className: "mr2",
    onClick: toggleModal2
  }, getDefaultBtnText(_showDefaultBtns[2], '导入')), _showDefaultBtns[3] !== false && /*#__PURE__*/React__default['default'].createElement(_Button__default['default'], {
    type: "primary",
    className: "mr2",
    onClick: toggleModal
  }, getDefaultBtnText(_showDefaultBtns[3], '导出schema')), _extraBtns.map(function (item, idx) {
    return /*#__PURE__*/React__default['default'].createElement(_Button__default['default'], _extends({
      key: idx.toString(),
      className: "mr2"
    }, item), item.text || item.children);
  })), /*#__PURE__*/React__default['default'].createElement("div", {
    className: "dnd-container ".concat(preview ? 'preview' : 'edit')
  }, /*#__PURE__*/React__default['default'].createElement("div", {
    style: {
      height: preview ? 33 : 0
    }
  }), /*#__PURE__*/React__default['default'].createElement(FR, {
    preview: preview,
    displaySchema: displaySchema
  })), /*#__PURE__*/React__default['default'].createElement(_Modal__default['default'], {
    visible: local.showModal,
    onOk: copySchema,
    onCancel: toggleModal,
    okText: "\u590D\u5236",
    cancelText: "\u53D6\u6D88"
  }, /*#__PURE__*/React__default['default'].createElement("div", {
    className: "mt3"
  }, /*#__PURE__*/React__default['default'].createElement(TextArea, {
    style: {
      fontSize: 12
    },
    value: displaySchemaString,
    autoSize: {
      minRows: 10,
      maxRows: 30
    }
  }))), /*#__PURE__*/React__default['default'].createElement(_Modal__default['default'], {
    visible: local.showModal2,
    okText: "\u5BFC\u5165",
    cancelText: "\u53D6\u6D88",
    onOk: importSchema,
    onCancel: toggleModal2
  }, /*#__PURE__*/React__default['default'].createElement("div", {
    className: "mt3"
  }, /*#__PURE__*/React__default['default'].createElement(TextArea, {
    style: {
      fontSize: 12
    },
    value: local.schemaForImport,
    placeholder: "\u8D34\u5165\u9700\u8981\u5BFC\u5165\u7684schema\uFF0C\u6A21\u6837\u53EF\u70B9\u51FB\u5BFC\u51FAschema\u53C2\u8003",
    onChange: onTextareaChange,
    autoSize: {
      minRows: 10,
      maxRows: 30
    }
  }))));
};

var RightOutlined_1 = createCommonjsModule(function (module, exports) {
// This icon file is generated automatically.
Object.defineProperty(exports, "__esModule", { value: true });
var RightOutlined = { "icon": { "tag": "svg", "attrs": { "viewBox": "64 64 896 896", "focusable": "false" }, "children": [{ "tag": "path", "attrs": { "d": "M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z" } }] }, "name": "right", "theme": "outlined" };
exports.default = RightOutlined;
});

unwrapExports(RightOutlined_1);

var RightOutlined_1$1 = createCommonjsModule(function (module, exports) {





Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _objectSpread2 = interopRequireDefault(objectSpread2);

var React = interopRequireWildcard(React__default['default']);

var _RightOutlined = interopRequireDefault(RightOutlined_1);

var _AntdIcon = interopRequireDefault(AntdIcon);

// GENERATE BY ./scripts/generate.ts
// DON NOT EDIT IT MANUALLY
var RightOutlined = function RightOutlined(props, ref) {
  return /*#__PURE__*/React.createElement(_AntdIcon.default, (0, _objectSpread2.default)((0, _objectSpread2.default)({}, props), {}, {
    ref: ref,
    icon: _RightOutlined.default
  }));
};

RightOutlined.displayName = 'RightOutlined';

var _default = /*#__PURE__*/React.forwardRef(RightOutlined);

exports.default = _default;
});

var _RightOutlined = unwrapExports(RightOutlined_1$1);

function IdInput(_ref) {
  var onChange = _ref.onChange,
      value = _ref.value,
      disabled = _ref.disabled,
      readonly = _ref.readonly,
      options = _ref.options;

  var handleChange = function handleChange(e) {
    try {
      var newId = changeKeyFromUniqueId(value, e.target.value);
      onChange(newId);
    } catch (error) {}
  };

  return /*#__PURE__*/React__default['default'].createElement(_Input__default['default'], _extends({
    disabled: disabled || readonly
  }, options, {
    onChange: handleChange,
    value: getKeyFromUniqueId(value)
  }));
}

function HtmlInput(_ref) {
  var value = _ref.value,
      disabled = _ref.disabled,
      readonly = _ref.readonly,
      options = _ref.options,
      onChange = _ref.onChange;

  var handleChange = function handleChange(e) {
    var newVal = e.target.value;
    onChange(newVal && newVal.replace(/on(.*?=)/g, 'no$1'));
  };

  return /*#__PURE__*/React__default['default'].createElement(_Input__default['default'], _extends({
    disabled: disabled || readonly
  }, options, {
    onChange: handleChange,
    value: value && value.replace(/no(.*?=)/g, 'on$1')
  }));
}

function jsonInput(_ref) {
  var onChange = _ref.onChange,
      value = _ref.value,
      disabled = _ref.disabled,
      readonly = _ref.readonly,
      options = _ref.options;

  var handleChange = function handleChange(e) {
    try {
      onChange(JSON.parse(e.target.value));
    } catch (_unused) {
      onChange(e.target.value);
    }
  };

  var inputValue = typeof value === 'string' ? value : JSON.stringify(value);
  return /*#__PURE__*/React__default['default'].createElement(_Input__default['default'], _extends({
    disabled: disabled || readonly
  }, options, {
    onChange: handleChange,
    value: inputValue
  }));
}

var PercentSlider = function PercentSlider(p) {
  var style = p.invalid ? {
    borderColor: '#f5222d'
  } : {};
  var _p$schema = p.schema,
      max = _p$schema.max,
      min = _p$schema.min,
      step = _p$schema.step;
  var setting = {};

  if (max || max === 0) {
    setting = {
      max: max
    };
  }

  if (min || min === 0) {
    setting = _objectSpread2(_objectSpread2({}, setting), {}, {
      min: min
    });
  }

  if (step) {
    setting = _objectSpread2(_objectSpread2({}, setting), {}, {
      step: step
    });
  }

  var hideNumber = false;

  if (p.options && p.options.hideNumber) {
    hideNumber = true;
  }

  var isPercent = function isPercent(string) {
    return typeof string === 'string' && string.endsWith('%');
  };

  var numberValue = 100;

  if (isPercent(p.value)) {
    try {
      numberValue = Number(p.value.split('%')[0]);
      if (Number.isNaN(numberValue)) numberValue = 100;
    } catch (error) {}
  }

  var handleChange = function handleChange(newNumber) {
    var a = newNumber + '%';
    p.onChange(a);
  };

  var renderNumber = p.readonly ? /*#__PURE__*/React__default['default'].createElement("span", {
    style: {
      width: '80px'
    }
  }, p.value === ( '') ? '-' : p.value + '%') : /*#__PURE__*/React__default['default'].createElement(_InputNumber__default['default'], _extends({}, p.options, setting, {
    style: _objectSpread2({
      width: '80px'
    }, style),
    value: numberValue,
    disabled: p.disabled,
    onChange: handleChange,
    formatter: function formatter(value) {
      return "".concat(value, "%");
    },
    parser: function parser(value) {
      return value.replace('%', '');
    }
  }));
  return /*#__PURE__*/React__default['default'].createElement("div", {
    className: "fr-slider"
  }, /*#__PURE__*/React__default['default'].createElement(_Slider__default['default'], _extends({
    style: {
      flexGrow: 1,
      marginRight: hideNumber ? 0 : 12
    }
  }, setting, {
    onChange: handleChange,
    max: 100,
    tipFormatter: function tipFormatter(v) {
      return v + '%';
    },
    value: numberValue || 100,
    disabled: p.disabled || p.readonly
  })), hideNumber ? null : renderNumber);
};

var frgWidgets = /*#__PURE__*/Object.freeze({
  __proto__: null,
  idInput: IdInput,
  htmlInput: HtmlInput,
  jsonInput: jsonInput,
  percentSlider: PercentSlider
});

function ItemSettings(_ref) {
  var widgets = _ref.widgets;
  var setGlobal = useGlobal();
  var form = FormRender.useForm();

  var _useStore = useStore(),
      selected = _useStore.selected,
      flatten = _useStore.flatten,
      onItemChange = _useStore.onItemChange,
      onItemErrorChange = _useStore.onItemErrorChange,
      _useStore$userProps = _useStore.userProps,
      userProps = _useStore$userProps === void 0 ? {} : _useStore$userProps,
      globalWidgets = _useStore.widgets,
      globalMapping = _useStore.mapping;

  var settings = userProps.settings,
      commonSettings = userProps.commonSettings,
      hideId = userProps.hideId,
      validation = userProps.validation,
      transformer = userProps.transformer;

  var _useState = React.useState({}),
      _useState2 = _slicedToArray(_useState, 2),
      settingSchema = _useState2[0],
      setSettingSchema = _useState2[1];

  var _widgets = _objectSpread2(_objectSpread2({}, globalWidgets), frgWidgets);

  var getWidgetList = function getWidgetList(settings, commonSettings) {
    return settings.reduce(function (widgetList, setting) {
      if (!Array.isArray(setting.widgets)) return widgetList;
      var basicWidgets = setting.widgets.map(function (item) {
        var baseItemSettings = {};

        if (item.schema.type === 'array' && item.schema.items) {
          baseItemSettings.items = {
            type: 'object',
            hidden: '{{true}}'
          };
        }

        return _objectSpread2(_objectSpread2({}, item), {}, {
          widget: item.widget || item.schema.widget || getWidgetName(item.schema, globalMapping),
          setting: mergeInOrder(baseCommonSettings, commonSettings, baseItemSettings, item.setting)
        });
      });
      return [].concat(_toConsumableArray(widgetList), _toConsumableArray(basicWidgets));
    }, []);
  };

  var onDataChange = function onDataChange(value) {
    try {
      var item = flatten[selected];
      if (!item || selected === '#') return;

      if (item && item.schema) {
        onItemChange(selected, _objectSpread2(_objectSpread2({}, item), {}, {
          schema: transformer.fromSetting(value)
        }), 'schema');
      }
    } catch (error) {
      console.error(error, 'catch');
    }
  };

  React.useEffect(function () {
    // setting 该显示什么的计算，要把选中组件的 schema 和它对应的 widgets 的整体 schema 进行拼接
    try {
      var item = flatten[selected];
      if (!item || selected === '#') return; // 算 widgetList

      var _settings = Array.isArray(settings) ? [].concat(_toConsumableArray(settings), [{
        widgets: [].concat(_toConsumableArray(elements), _toConsumableArray(advancedElements), _toConsumableArray(layouts))
      }]) // TODO: 不是最优解
      : defaultSettings;

      var _commonSettings = isObject(commonSettings) ? commonSettings : defaultCommonSettings;

      var widgetList = getWidgetList(_settings, _commonSettings);
      var widgetName = getWidgetName(item.schema, globalMapping);
      var element = widgetList.find(function (e) {
        return e.widget === widgetName;
      }) || {}; // 有可能会没有找到

      var properties = _objectSpread2({}, element.setting);

      if (hideId) delete properties.$id;
      setTimeout(function () {
        setSettingSchema({
          type: 'object',
          displayType: 'column',
          properties: properties
        });
        var value = transformer.toSetting(item.schema);
        form.setValues(value);
        onDataChange(form.getValues());
        validation && form.submit();
      }, 0);
    } catch (error) {
      console.error(error);
    }
  }, [selected]);
  React.useEffect(function () {
    validation && onItemErrorChange(form === null || form === void 0 ? void 0 : form.errorFields);
  }, [validation, form === null || form === void 0 ? void 0 : form.errorFields]);
  React.useEffect(function () {
    setGlobal({
      settingsForm: form
    });
  }, []);
  return /*#__PURE__*/React__default['default'].createElement("div", {
    style: {
      paddingRight: 24
    }
  }, /*#__PURE__*/React__default['default'].createElement(FormRender__default['default'], {
    form: form,
    schema: settingSchema,
    widgets: _objectSpread2(_objectSpread2({}, _widgets), widgets),
    watch: {
      '#': function _(v) {
        return setTimeout(function () {
          return onDataChange(v);
        }, 0);
      }
    }
  }));
}

function GlobalSettings(_ref) {
  var widgets = _ref.widgets;
  var form = FormRender.useForm();

  var _useState = React.useState(false),
      _useState2 = _slicedToArray(_useState, 2),
      innerUpdate = _useState2[0],
      setInnerUpdate = _useState2[1];

  var _useStore = useStore(),
      globalWidgets = _useStore.widgets,
      frProps = _useStore.frProps,
      _useStore$userProps = _useStore.userProps,
      userProps = _useStore$userProps === void 0 ? {} : _useStore$userProps;

  var setGlobal = useGlobal();
  var globalSettings = userProps.globalSettings || defaultGlobalSettings;

  var onDataChange = function onDataChange(value) {
    setInnerUpdate(!!Object.keys(value).length);
    setGlobal({
      frProps: value
    });
  };

  React.useEffect(function () {
    if (innerUpdate) {
      setInnerUpdate(false);
    } else {
      form.setValues(frProps);
    }
  }, [frProps]);
  React.useEffect(function () {
    setGlobal({
      settingsForm: form
    });
  }, []);
  return /*#__PURE__*/React__default['default'].createElement("div", {
    style: {
      paddingRight: 24
    }
  }, /*#__PURE__*/React__default['default'].createElement(FormRender__default['default'], {
    form: form,
    schema: globalSettings,
    watch: {
      '#': function _(v) {
        return onDataChange(v);
      }
    },
    widgets: _objectSpread2(_objectSpread2({}, globalWidgets), widgets)
  }));
}

var css_248z$3 = ".fr-generator-container .right-layout {\n  flex-shrink: 0;\n  width: 8rem;\n  padding-top: 24px;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n@media screen and (min-width: 60em) {\n  .fr-generator-container .right-layout {\n    width: 16rem;\n  }\n}\n";
styleInject(css_248z$3);

var TabPane = _Tabs__default['default'].TabPane;
function Settings(_ref) {
  var widgets = _ref.widgets;

  var _useSet = useSet({
    tabsKey: 'globalSettings',
    showRight: true,
    showItemSettings: false
  }),
      _useSet2 = _slicedToArray(_useSet, 2),
      state = _useSet2[0],
      setState = _useSet2[1];

  var _useStore = useStore(),
      selected = _useStore.selected;

  var tabsKey = state.tabsKey,
      showRight = state.showRight,
      showItemSettings = state.showItemSettings;

  var toggleRight = function toggleRight() {
    return setState({
      showRight: !showRight
    });
  };

  var ToggleIcon = function ToggleIcon() {
    return /*#__PURE__*/React__default['default'].createElement("div", {
      className: "absolute top-0 left-0 pointer",
      style: {
        height: 30,
        width: 30,
        padding: '8px 0 0 8px'
      },
      onClick: toggleRight
    }, /*#__PURE__*/React__default['default'].createElement(_RightOutlined, {
      className: "f5"
    }));
  };

  var HideRightArrow = function HideRightArrow() {
    return /*#__PURE__*/React__default['default'].createElement("div", {
      className: "absolute right-0 top-0 h2 flex-center",
      style: {
        width: 40,
        transform: 'rotate(180deg)'
      }
    }, /*#__PURE__*/React__default['default'].createElement(ToggleIcon, null));
  }; // 如果没有选中任何item，或者是选中了根节点，object、list的内部，显示placeholder


  React.useEffect(function () {
    if (selected && selected[0] === '0' || selected === '#' || !selected) {
      setState({
        tabsKey: 'globalSettings',
        showItemSettings: false
      });
    } else {
      setState({
        tabsKey: 'itemSettings',
        showItemSettings: true
      });
    }
  }, [selected]);
  return showRight ? /*#__PURE__*/React__default['default'].createElement("div", {
    className: "right-layout relative pl2"
  }, /*#__PURE__*/React__default['default'].createElement(ToggleIcon, null), /*#__PURE__*/React__default['default'].createElement(_Tabs__default['default'], {
    activeKey: tabsKey,
    onChange: function onChange(key) {
      return setState({
        tabsKey: key
      });
    }
  }, showItemSettings && /*#__PURE__*/React__default['default'].createElement(TabPane, {
    tab: "\u7EC4\u4EF6\u914D\u7F6E",
    key: "itemSettings"
  }, /*#__PURE__*/React__default['default'].createElement(ItemSettings, {
    widgets: widgets
  })), /*#__PURE__*/React__default['default'].createElement(TabPane, {
    tab: "\u8868\u5355\u914D\u7F6E",
    key: "globalSettings"
  }, /*#__PURE__*/React__default['default'].createElement(GlobalSettings, {
    widgets: widgets
  })))) : /*#__PURE__*/React__default['default'].createElement(HideRightArrow, null);
}

var css_248z$4 = ".fr-generator-container {\n  /* Resets */\n  /*\n   This will set table to full width and then\n   all cells will be equal width\n */\n  /* 1. Fix for Chrome 44 bug.\n  * https://code.google.com/p/chromium/issues/detail?id=506893 */\n  /* Height Percentages - Based off of height of parent */\n  /* Screen Height Percentage */\n  /* String Properties */\n  /* Max Width Percentages */\n  /* Max Width Scale */\n  /* Max Width String Properties */\n  /* .link:hover { color: #3e71f7; font-size: 14px; } */\n}\n.fr-generator-container .outline {\n  outline: 1px solid;\n}\n.fr-generator-container .outline-transparent {\n  outline: 1px solid transparent;\n}\n.fr-generator-container .outline-0 {\n  outline: 0;\n}\n.fr-generator-container .ba {\n  border-style: solid;\n  border-width: 1px;\n}\n.fr-generator-container .bt {\n  border-top-style: solid;\n  border-top-width: 1px;\n}\n.fr-generator-container .br {\n  border-right-style: solid;\n  border-right-width: 1px;\n}\n.fr-generator-container .bb {\n  border-bottom-style: solid;\n  border-bottom-width: 1px;\n}\n.fr-generator-container .bl {\n  border-left-style: solid;\n  border-left-width: 1px;\n}\n.fr-generator-container .bn {\n  border-style: none;\n  border-width: 0;\n}\n.fr-generator-container .br0 {\n  border-radius: 0;\n}\n.fr-generator-container .br1 {\n  border-radius: 0.125rem;\n}\n.fr-generator-container .br2 {\n  border-radius: 0.25rem;\n}\n.fr-generator-container .br3 {\n  border-radius: 0.5rem;\n}\n.fr-generator-container .br4 {\n  border-radius: 1rem;\n}\n.fr-generator-container .br-100 {\n  border-radius: 100%;\n}\n.fr-generator-container .br-pill {\n  border-radius: 9999px;\n}\n.fr-generator-container .br--bottom {\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n}\n.fr-generator-container .br--top {\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n}\n.fr-generator-container .br--right {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.fr-generator-container .br--left {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n.fr-generator-container .b--dotted {\n  border-style: dotted;\n}\n.fr-generator-container .b--dashed {\n  border-style: dashed;\n}\n.fr-generator-container .b--solid {\n  border-style: solid;\n}\n.fr-generator-container .b--none {\n  border-style: none;\n}\n.fr-generator-container .b--black-10 {\n  border-color: rgba(0, 0, 0, 0.1);\n}\n.fr-generator-container .b--black-20 {\n  border-color: rgba(0, 0, 0, 0.2);\n}\n.fr-generator-container .b--black-30 {\n  border-color: rgba(0, 0, 0, 0.3);\n}\n.fr-generator-container .black-40 {\n  color: rgba(0, 0, 0, 0.4);\n}\n.fr-generator-container .f4 {\n  font-size: 1.25rem;\n}\n.fr-generator-container .bw0 {\n  border-width: 0;\n}\n.fr-generator-container .bw1 {\n  border-width: 0.125rem;\n}\n.fr-generator-container .bw2 {\n  border-width: 0.25rem;\n}\n.fr-generator-container .bw3 {\n  border-width: 0.5rem;\n}\n.fr-generator-container .bw4 {\n  border-width: 1rem;\n}\n.fr-generator-container .bw5 {\n  border-width: 2rem;\n}\n.fr-generator-container .bt-0 {\n  border-top-width: 0;\n}\n.fr-generator-container .br-0 {\n  border-right-width: 0;\n}\n.fr-generator-container .bb-0 {\n  border-bottom-width: 0;\n}\n.fr-generator-container .bl-0 {\n  border-left-width: 0;\n}\n.fr-generator-container .shadow-1 {\n  box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.2);\n}\n.fr-generator-container .shadow-2 {\n  box-shadow: 0 0 8px 2px rgba(0, 0, 0, 0.2);\n}\n.fr-generator-container .shadow-3 {\n  box-shadow: 2px 2px 4px 2px rgba(0, 0, 0, 0.2);\n}\n.fr-generator-container .shadow-4 {\n  box-shadow: 2px 2px 8px 0 rgba(0, 0, 0, 0.2);\n}\n.fr-generator-container .shadow-5 {\n  box-shadow: 4px 4px 8px 0 rgba(0, 0, 0, 0.2);\n}\n.fr-generator-container .top-0 {\n  top: 0;\n}\n.fr-generator-container .right-0 {\n  right: 0;\n}\n.fr-generator-container .bottom-0 {\n  bottom: 0;\n}\n.fr-generator-container .left-0 {\n  left: 0;\n}\n.fr-generator-container .top-1 {\n  top: 1rem;\n}\n.fr-generator-container .right-1 {\n  right: 1rem;\n}\n.fr-generator-container .bottom-1 {\n  bottom: 1rem;\n}\n.fr-generator-container .left-1 {\n  left: 1rem;\n}\n.fr-generator-container .top-2 {\n  top: 2rem;\n}\n.fr-generator-container .right-2 {\n  right: 2rem;\n}\n.fr-generator-container .bottom-2 {\n  bottom: 2rem;\n}\n.fr-generator-container .left-2 {\n  left: 2rem;\n}\n.fr-generator-container .top--1 {\n  top: -1rem;\n}\n.fr-generator-container .right--1 {\n  right: -1rem;\n}\n.fr-generator-container .bottom--1 {\n  bottom: -1rem;\n}\n.fr-generator-container .left--1 {\n  left: -1rem;\n}\n.fr-generator-container .top--2 {\n  top: -2rem;\n}\n.fr-generator-container .right--2 {\n  right: -2rem;\n}\n.fr-generator-container .bottom--2 {\n  bottom: -2rem;\n}\n.fr-generator-container .left--2 {\n  left: -2rem;\n}\n.fr-generator-container .absolute--fill {\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.fr-generator-container .dn {\n  display: none;\n}\n.fr-generator-container .di {\n  display: inline;\n}\n.fr-generator-container .db {\n  display: block;\n}\n.fr-generator-container .dib {\n  display: inline-block;\n}\n.fr-generator-container .dit {\n  display: inline-table;\n}\n.fr-generator-container .dt {\n  display: table;\n}\n.fr-generator-container .dtc {\n  display: table-cell;\n}\n.fr-generator-container .dt-row {\n  display: table-row;\n}\n.fr-generator-container .dt-row-group {\n  display: table-row-group;\n}\n.fr-generator-container .dt-column {\n  display: table-column;\n}\n.fr-generator-container .dt-column-group {\n  display: table-column-group;\n}\n.fr-generator-container .dt--fixed {\n  table-layout: fixed;\n  width: 100%;\n}\n.fr-generator-container .flex {\n  display: flex;\n}\n.fr-generator-container .inline-flex {\n  display: inline-flex;\n}\n.fr-generator-container .flex-auto {\n  flex: 1 1 auto;\n  min-width: 0;\n  /* 1 */\n  min-height: 0;\n  /* 1 */\n}\n.fr-generator-container .flex-none {\n  flex: none;\n}\n.fr-generator-container .flex-column {\n  flex-direction: column;\n}\n.fr-generator-container .flex-row {\n  flex-direction: row;\n}\n.fr-generator-container .flex-wrap {\n  flex-wrap: wrap;\n}\n.fr-generator-container .flex-nowrap {\n  flex-wrap: nowrap;\n}\n.fr-generator-container .flex-wrap-reverse {\n  flex-wrap: wrap-reverse;\n}\n.fr-generator-container .flex-column-reverse {\n  flex-direction: column-reverse;\n}\n.fr-generator-container .flex-row-reverse {\n  flex-direction: row-reverse;\n}\n.fr-generator-container .items-start {\n  align-items: flex-start;\n}\n.fr-generator-container .items-end {\n  align-items: flex-end;\n}\n.fr-generator-container .items-center {\n  align-items: center;\n}\n.fr-generator-container .items-baseline {\n  align-items: baseline;\n}\n.fr-generator-container .items-stretch {\n  align-items: stretch;\n}\n.fr-generator-container .self-start {\n  align-self: flex-start;\n}\n.fr-generator-container .self-end {\n  align-self: flex-end;\n}\n.fr-generator-container .self-center {\n  align-self: center;\n}\n.fr-generator-container .self-baseline {\n  align-self: baseline;\n}\n.fr-generator-container .self-stretch {\n  align-self: stretch;\n}\n.fr-generator-container .justify-start {\n  justify-content: flex-start;\n}\n.fr-generator-container .justify-end {\n  justify-content: flex-end;\n}\n.fr-generator-container .justify-center {\n  justify-content: center;\n}\n.fr-generator-container .justify-between {\n  justify-content: space-between;\n}\n.fr-generator-container .justify-around {\n  justify-content: space-around;\n}\n.fr-generator-container .content-start {\n  align-content: flex-start;\n}\n.fr-generator-container .content-end {\n  align-content: flex-end;\n}\n.fr-generator-container .content-center {\n  align-content: center;\n}\n.fr-generator-container .content-between {\n  align-content: space-between;\n}\n.fr-generator-container .content-around {\n  align-content: space-around;\n}\n.fr-generator-container .content-stretch {\n  align-content: stretch;\n}\n.fr-generator-container .order-0 {\n  order: 0;\n}\n.fr-generator-container .order-1 {\n  order: 1;\n}\n.fr-generator-container .order-2 {\n  order: 2;\n}\n.fr-generator-container .order-3 {\n  order: 3;\n}\n.fr-generator-container .order-4 {\n  order: 4;\n}\n.fr-generator-container .order-5 {\n  order: 5;\n}\n.fr-generator-container .order-6 {\n  order: 6;\n}\n.fr-generator-container .order-7 {\n  order: 7;\n}\n.fr-generator-container .order-8 {\n  order: 8;\n}\n.fr-generator-container .order-last {\n  order: 99999;\n}\n.fr-generator-container .flex-grow-0 {\n  flex-grow: 0;\n}\n.fr-generator-container .flex-grow-1 {\n  flex-grow: 1;\n}\n.fr-generator-container .flex-shrink-0 {\n  flex-shrink: 0;\n}\n.fr-generator-container .flex-shrink-1 {\n  flex-shrink: 1;\n}\n.fr-generator-container .fw1 {\n  font-weight: 100;\n}\n.fr-generator-container .fw2 {\n  font-weight: 200;\n}\n.fr-generator-container .fw3 {\n  font-weight: 300;\n}\n.fr-generator-container .fw4 {\n  font-weight: 400;\n}\n.fr-generator-container .fw5 {\n  font-weight: 500;\n}\n.fr-generator-container .fw6 {\n  font-weight: 600;\n}\n.fr-generator-container .fw7 {\n  font-weight: 700;\n}\n.fr-generator-container .fw8 {\n  font-weight: 800;\n}\n.fr-generator-container .fw9 {\n  font-weight: 900;\n}\n.fr-generator-container .h1 {\n  height: 1rem;\n}\n.fr-generator-container .h2 {\n  height: 2rem;\n}\n.fr-generator-container .h3 {\n  height: 4rem;\n}\n.fr-generator-container .h4 {\n  height: 8rem;\n}\n.fr-generator-container .h5 {\n  height: 16rem;\n}\n.fr-generator-container .h-25 {\n  height: 25%;\n}\n.fr-generator-container .h-50 {\n  height: 50%;\n}\n.fr-generator-container .h-75 {\n  height: 75%;\n}\n.fr-generator-container .h-100 {\n  height: 100%;\n}\n.fr-generator-container .min-h-100 {\n  min-height: 100%;\n}\n.fr-generator-container .vh-25 {\n  height: 25vh;\n}\n.fr-generator-container .vh-50 {\n  height: 50vh;\n}\n.fr-generator-container .vh-75 {\n  height: 75vh;\n}\n.fr-generator-container .vh-100 {\n  height: 100vh;\n}\n.fr-generator-container .min-vh-100 {\n  min-height: 100vh;\n}\n.fr-generator-container .h-auto {\n  height: auto;\n}\n.fr-generator-container .h-inherit {\n  height: inherit;\n}\n.fr-generator-container .tracked {\n  letter-spacing: 0.1em;\n}\n.fr-generator-container .tracked-tight {\n  letter-spacing: -0.05em;\n}\n.fr-generator-container .tracked-mega {\n  letter-spacing: 0.25em;\n}\n.fr-generator-container .lh-solid {\n  line-height: 1;\n}\n.fr-generator-container .lh-title {\n  line-height: 1.25;\n}\n.fr-generator-container .lh-copy {\n  line-height: 1.5;\n}\n.fr-generator-container .mw-100 {\n  max-width: 100%;\n}\n.fr-generator-container .mw1 {\n  max-width: 1rem;\n}\n.fr-generator-container .mw2 {\n  max-width: 2rem;\n}\n.fr-generator-container .mw3 {\n  max-width: 4rem;\n}\n.fr-generator-container .mw4 {\n  max-width: 8rem;\n}\n.fr-generator-container .mw5 {\n  max-width: 16rem;\n}\n.fr-generator-container .mw6 {\n  max-width: 32rem;\n}\n.fr-generator-container .mw7 {\n  max-width: 48rem;\n}\n.fr-generator-container .mw8 {\n  max-width: 64rem;\n}\n.fr-generator-container .mw9 {\n  max-width: 96rem;\n}\n.fr-generator-container .mw-none {\n  max-width: none;\n}\n.fr-generator-container .w1 {\n  width: 1rem;\n}\n.fr-generator-container .w2 {\n  width: 2rem;\n}\n.fr-generator-container .w3 {\n  width: 4rem;\n}\n.fr-generator-container .w4 {\n  width: 8rem;\n}\n.fr-generator-container .w5 {\n  width: 16rem;\n}\n.fr-generator-container .w-10 {\n  width: 10%;\n}\n.fr-generator-container .w-20 {\n  width: 20%;\n}\n.fr-generator-container .w-25 {\n  width: 25%;\n}\n.fr-generator-container .w-30 {\n  width: 30%;\n}\n.fr-generator-container .w-33 {\n  width: 33%;\n}\n.fr-generator-container .w-34 {\n  width: 34%;\n}\n.fr-generator-container .w-40 {\n  width: 40%;\n}\n.fr-generator-container .w-50 {\n  width: 50%;\n}\n.fr-generator-container .w-60 {\n  width: 60%;\n}\n.fr-generator-container .w-70 {\n  width: 70%;\n}\n.fr-generator-container .w-75 {\n  width: 75%;\n}\n.fr-generator-container .w-80 {\n  width: 80%;\n}\n.fr-generator-container .w-90 {\n  width: 90%;\n}\n.fr-generator-container .w-100 {\n  width: 100%;\n}\n.fr-generator-container .w-third {\n  width: calc(100% / 3);\n}\n.fr-generator-container .w-two-thirds {\n  width: calc(100% / 1.5);\n}\n.fr-generator-container .w-auto {\n  width: auto;\n}\n.fr-generator-container .tl {\n  text-align: left;\n}\n.fr-generator-container .tr {\n  text-align: right;\n}\n.fr-generator-container .tc {\n  text-align: center;\n}\n.fr-generator-container .tj {\n  text-align: justify;\n}\n.fr-generator-container .overflow-visible {\n  overflow: visible;\n}\n.fr-generator-container .overflow-hidden {\n  overflow: hidden;\n}\n.fr-generator-container .overflow-scroll {\n  overflow: scroll;\n}\n.fr-generator-container .overflow-auto {\n  overflow: auto;\n}\n.fr-generator-container .overflow-x-visible {\n  overflow-x: visible;\n}\n.fr-generator-container .overflow-x-hidden {\n  overflow-x: hidden;\n}\n.fr-generator-container .overflow-x-scroll {\n  overflow-x: scroll;\n}\n.fr-generator-container .overflow-x-auto {\n  overflow-x: auto;\n}\n.fr-generator-container .overflow-y-visible {\n  overflow-y: visible;\n}\n.fr-generator-container .overflow-y-hidden {\n  overflow-y: hidden;\n}\n.fr-generator-container .overflow-y-scroll {\n  overflow-y: scroll;\n}\n.fr-generator-container .overflow-y-auto {\n  overflow-y: auto;\n}\n.fr-generator-container .static {\n  position: static;\n}\n.fr-generator-container .relative {\n  position: relative;\n}\n.fr-generator-container .absolute {\n  position: absolute;\n}\n.fr-generator-container .fixed {\n  position: fixed;\n}\n.fr-generator-container .o-100 {\n  opacity: 1;\n}\n.fr-generator-container .o-90 {\n  opacity: 0.9;\n}\n.fr-generator-container .o-80 {\n  opacity: 0.8;\n}\n.fr-generator-container .o-70 {\n  opacity: 0.7;\n}\n.fr-generator-container .o-60 {\n  opacity: 0.6;\n}\n.fr-generator-container .o-50 {\n  opacity: 0.5;\n}\n.fr-generator-container .o-40 {\n  opacity: 0.4;\n}\n.fr-generator-container .o-30 {\n  opacity: 0.3;\n}\n.fr-generator-container .o-20 {\n  opacity: 0.2;\n}\n.fr-generator-container .o-10 {\n  opacity: 0.1;\n}\n.fr-generator-container .o-05 {\n  opacity: 0.05;\n}\n.fr-generator-container .o-025 {\n  opacity: 0.025;\n}\n.fr-generator-container .o-0 {\n  opacity: 0;\n}\n.fr-generator-container .pa0 {\n  padding: 0;\n}\n.fr-generator-container .pa1 {\n  padding: 0.25rem;\n}\n.fr-generator-container .pa2 {\n  padding: 0.5rem;\n}\n.fr-generator-container .pa3 {\n  padding: 1rem;\n}\n.fr-generator-container .pa4 {\n  padding: 2rem;\n}\n.fr-generator-container .pa5 {\n  padding: 4rem;\n}\n.fr-generator-container .pa6 {\n  padding: 8rem;\n}\n.fr-generator-container .pa7 {\n  padding: 16rem;\n}\n.fr-generator-container .pl0 {\n  padding-left: 0;\n}\n.fr-generator-container .pl1 {\n  padding-left: 0.25rem;\n}\n.fr-generator-container .pl2 {\n  padding-left: 0.5rem;\n}\n.fr-generator-container .pl3 {\n  padding-left: 1rem;\n}\n.fr-generator-container .pl4 {\n  padding-left: 2rem;\n}\n.fr-generator-container .pl5 {\n  padding-left: 4rem;\n}\n.fr-generator-container .pl6 {\n  padding-left: 8rem;\n}\n.fr-generator-container .pl7 {\n  padding-left: 16rem;\n}\n.fr-generator-container .pr0 {\n  padding-right: 0;\n}\n.fr-generator-container .pr1 {\n  padding-right: 0.25rem;\n}\n.fr-generator-container .pr2 {\n  padding-right: 0.5rem;\n}\n.fr-generator-container .pr3 {\n  padding-right: 1rem;\n}\n.fr-generator-container .pr4 {\n  padding-right: 2rem;\n}\n.fr-generator-container .pr5 {\n  padding-right: 4rem;\n}\n.fr-generator-container .pr6 {\n  padding-right: 8rem;\n}\n.fr-generator-container .pr7 {\n  padding-right: 16rem;\n}\n.fr-generator-container .pb0 {\n  padding-bottom: 0;\n}\n.fr-generator-container .pb1 {\n  padding-bottom: 0.25rem;\n}\n.fr-generator-container .pb2 {\n  padding-bottom: 0.5rem;\n}\n.fr-generator-container .pb3 {\n  padding-bottom: 1rem;\n}\n.fr-generator-container .pb4 {\n  padding-bottom: 2rem;\n}\n.fr-generator-container .pb5 {\n  padding-bottom: 4rem;\n}\n.fr-generator-container .pb6 {\n  padding-bottom: 8rem;\n}\n.fr-generator-container .pb7 {\n  padding-bottom: 16rem;\n}\n.fr-generator-container .pt0 {\n  padding-top: 0;\n}\n.fr-generator-container .pt1 {\n  padding-top: 0.25rem;\n}\n.fr-generator-container .pt2 {\n  padding-top: 0.5rem;\n}\n.fr-generator-container .pt3 {\n  padding-top: 1rem;\n}\n.fr-generator-container .pt4 {\n  padding-top: 2rem;\n}\n.fr-generator-container .pt5 {\n  padding-top: 4rem;\n}\n.fr-generator-container .pt6 {\n  padding-top: 8rem;\n}\n.fr-generator-container .pt7 {\n  padding-top: 16rem;\n}\n.fr-generator-container .pv0 {\n  padding-top: 0;\n  padding-bottom: 0;\n}\n.fr-generator-container .pv1 {\n  padding-top: 0.25rem;\n  padding-bottom: 0.25rem;\n}\n.fr-generator-container .pv2 {\n  padding-top: 0.5rem;\n  padding-bottom: 0.5rem;\n}\n.fr-generator-container .pv3 {\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n}\n.fr-generator-container .pv4 {\n  padding-top: 2rem;\n  padding-bottom: 2rem;\n}\n.fr-generator-container .pv5 {\n  padding-top: 4rem;\n  padding-bottom: 4rem;\n}\n.fr-generator-container .pv6 {\n  padding-top: 8rem;\n  padding-bottom: 8rem;\n}\n.fr-generator-container .pv7 {\n  padding-top: 16rem;\n  padding-bottom: 16rem;\n}\n.fr-generator-container .ph0 {\n  padding-left: 0;\n  padding-right: 0;\n}\n.fr-generator-container .ph1 {\n  padding-left: 0.25rem;\n  padding-right: 0.25rem;\n}\n.fr-generator-container .ph2 {\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n}\n.fr-generator-container .ph3 {\n  padding-left: 1rem;\n  padding-right: 1rem;\n}\n.fr-generator-container .ph4 {\n  padding-left: 2rem;\n  padding-right: 2rem;\n}\n.fr-generator-container .ph5 {\n  padding-left: 4rem;\n  padding-right: 4rem;\n}\n.fr-generator-container .ph6 {\n  padding-left: 8rem;\n  padding-right: 8rem;\n}\n.fr-generator-container .ph7 {\n  padding-left: 16rem;\n  padding-right: 16rem;\n}\n.fr-generator-container .ma1 {\n  margin: 0.25rem;\n}\n.fr-generator-container .ma2 {\n  margin: 0.5rem;\n}\n.fr-generator-container .ma3 {\n  margin: 1rem;\n}\n.fr-generator-container .ma4 {\n  margin: 2rem;\n}\n.fr-generator-container .ma5 {\n  margin: 4rem;\n}\n.fr-generator-container .ma6 {\n  margin: 8rem;\n}\n.fr-generator-container .ma7 {\n  margin: 16rem;\n}\n.fr-generator-container .ma0 {\n  margin: 0;\n}\n.fr-generator-container .ml1 {\n  margin-left: 0.25rem;\n}\n.fr-generator-container .ml2 {\n  margin-left: 0.5rem;\n}\n.fr-generator-container .ml3 {\n  margin-left: 1rem;\n}\n.fr-generator-container .ml4 {\n  margin-left: 2rem;\n}\n.fr-generator-container .ml5 {\n  margin-left: 4rem;\n}\n.fr-generator-container .ml6 {\n  margin-left: 8rem;\n}\n.fr-generator-container .ml7 {\n  margin-left: 16rem;\n}\n.fr-generator-container .ml0 {\n  margin-left: 0;\n}\n.fr-generator-container .mr1 {\n  margin-right: 0.25rem;\n}\n.fr-generator-container .mr2 {\n  margin-right: 0.5rem;\n}\n.fr-generator-container .mr3 {\n  margin-right: 1rem;\n}\n.fr-generator-container .mr4 {\n  margin-right: 2rem;\n}\n.fr-generator-container .mr5 {\n  margin-right: 4rem;\n}\n.fr-generator-container .mr6 {\n  margin-right: 8rem;\n}\n.fr-generator-container .mr7 {\n  margin-right: 16rem;\n}\n.fr-generator-container .mr0 {\n  margin-right: 0;\n}\n.fr-generator-container .mb1 {\n  margin-bottom: 0.25rem;\n}\n.fr-generator-container .mb2 {\n  margin-bottom: 0.5rem;\n}\n.fr-generator-container .mb3 {\n  margin-bottom: 1rem;\n}\n.fr-generator-container .mb4 {\n  margin-bottom: 2rem;\n}\n.fr-generator-container .mb5 {\n  margin-bottom: 4rem;\n}\n.fr-generator-container .mb6 {\n  margin-bottom: 8rem;\n}\n.fr-generator-container .mb7 {\n  margin-bottom: 16rem;\n}\n.fr-generator-container .mb0 {\n  margin-bottom: 0;\n}\n.fr-generator-container .mt1 {\n  margin-top: 0.25rem;\n}\n.fr-generator-container .mt2 {\n  margin-top: 0.5rem;\n}\n.fr-generator-container .mt3 {\n  margin-top: 1rem;\n}\n.fr-generator-container .mt4 {\n  margin-top: 2rem;\n}\n.fr-generator-container .mt5 {\n  margin-top: 4rem;\n}\n.fr-generator-container .mt6 {\n  margin-top: 8rem;\n}\n.fr-generator-container .mt7 {\n  margin-top: 16rem;\n}\n.fr-generator-container .mt0 {\n  margin-top: 0;\n}\n.fr-generator-container .mv1 {\n  margin-top: 0.25rem;\n  margin-bottom: 0.25rem;\n}\n.fr-generator-container .mv2 {\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n.fr-generator-container .mv3 {\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n}\n.fr-generator-container .mv4 {\n  margin-top: 2rem;\n  margin-bottom: 2rem;\n}\n.fr-generator-container .mv5 {\n  margin-top: 4rem;\n  margin-bottom: 4rem;\n}\n.fr-generator-container .mv6 {\n  margin-top: 8rem;\n  margin-bottom: 8rem;\n}\n.fr-generator-container .mv7 {\n  margin-top: 16rem;\n  margin-bottom: 16rem;\n}\n.fr-generator-container .mv0 {\n  margin-top: 0;\n  margin-bottom: 0;\n}\n.fr-generator-container .mh1 {\n  margin-left: 0.25rem;\n  margin-right: 0.25rem;\n}\n.fr-generator-container .mh2 {\n  margin-left: 0.5rem;\n  margin-right: 0.5rem;\n}\n.fr-generator-container .mh3 {\n  margin-left: 1rem;\n  margin-right: 1rem;\n}\n.fr-generator-container .mh4 {\n  margin-left: 2rem;\n  margin-right: 2rem;\n}\n.fr-generator-container .mh5 {\n  margin-left: 4rem;\n  margin-right: 4rem;\n}\n.fr-generator-container .mh6 {\n  margin-left: 8rem;\n  margin-right: 8rem;\n}\n.fr-generator-container .mh7 {\n  margin-left: 16rem;\n  margin-right: 16rem;\n}\n.fr-generator-container .mh0 {\n  margin-left: 0;\n  margin-right: 0;\n}\n.fr-generator-container .red {\n  color: red;\n}\n.fr-generator-container .blue {\n  color: #357edd;\n}\n.fr-generator-container .f7 {\n  font-size: 0.75rem;\n}\n.fr-generator-container .debug * {\n  outline: 1px solid gold;\n}\n.fr-generator-container .debug-white * {\n  outline: 1px solid white;\n}\n.fr-generator-container .debug-black * {\n  outline: 1px solid black;\n}\n.fr-generator-container .debug-grid {\n  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAFElEQVR4AWPAC97/9x0eCsAEPgwAVLshdpENIxcAAAAASUVORK5CYII=) repeat top left;\n}\n.fr-generator-container .truncate {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.fr-generator-container .bg-white {\n  background-color: #fff;\n}\n.fr-generator-container .pointer:hover {\n  cursor: pointer;\n}\n.fr-generator-container .link {\n  color: #1890ff;\n  font-size: 14px;\n}\n.fr-generator-container .link:hover {\n  color: #40a9ff;\n  font-size: 14px;\n}\n@media screen and (min-width: 60em) {\n  .fr-generator-container .w5-l {\n    width: 16rem;\n  }\n}\n/*\n  用于原有样式的覆盖\n */\n.fr-generator-container {\n  display: flex;\n  overflow: hidden;\n  height: 100%;\n  min-height: 30vh;\n  position: relative;\n}\n.fr-generator-container .mid-layout {\n  padding: 0 8px;\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  flex-shrink: 1;\n  /* height: 100%; */\n  overflow: hidden;\n  border-left: 1px solid #e0e0e0;\n  border-right: 1px solid #e0e0e0;\n}\n.fr-generator-container .flex-center {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.fr-generator-container .dnd-container {\n  flex-grow: 1;\n  overflow-y: auto;\n}\n.fr-generator-container .ant-tabs.ant-tabs-top {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n.fr-generator-container .ant-tabs-content-holder {\n  flex-grow: 1;\n}\n.fr-generator-container .ant-tabs-content.ant-tabs-content-top {\n  height: 100%;\n}\n.fr-generator-container .ant-tabs-tabpane.ant-tabs-tabpane-active {\n  height: 100%;\n  overflow-y: auto;\n}\n.fr-generator-container .dnd-container.edit {\n  /* Row */\n  /* 自定义类 */\n  /* 组件内部样式*/\n  /* 其他样式 */\n}\n.fr-generator-container .dnd-container.edit .top-upper {\n  top: -12px;\n}\n.fr-generator-container .dnd-container.edit .fr-set {\n  padding: 12px 14px 12px 12px;\n  margin-bottom: 12px;\n  border-radius: 4px;\n}\n.fr-generator-container .dnd-container.edit .fr-field {\n  margin-bottom: 24px;\n}\n.fr-generator-container .dnd-container.edit .fr-label {\n  display: block;\n}\n.fr-generator-container .dnd-container.edit .fr-label-title {\n  display: inline-flex;\n  color: #333;\n  font-size: 14px;\n  min-height: 22px;\n  /* \"\"的标签页占位 */\n  line-height: 22px;\n}\n.fr-generator-container .dnd-container.edit .fr-label-required {\n  margin: 1px 4px 0 0;\n  color: #f5222d;\n  font-size: 14px;\n  font-family: SimSun, sans-serif;\n}\n.fr-generator-container .dnd-container.edit .fr-label-title::after {\n  content: ':';\n  position: relative;\n  top: -0.5px;\n  margin: 0 10px 0 2px;\n}\n.fr-generator-container .dnd-container.edit .fr-label-title.no-colon::after {\n  content: '';\n  margin: 0;\n}\n.fr-generator-container .dnd-container.edit .fr-label-object .fr-label-title {\n  font-size: 16px;\n  color: #222;\n}\n.fr-generator-container .dnd-container.edit .fr-desc {\n  margin-top: 3px;\n  font-size: 12px;\n  word-break: break-all;\n  color: #888;\n}\n.fr-generator-container .dnd-container.edit .fr-validate {\n  margin-left: 12px;\n  font-size: 12px;\n  word-break: break-all;\n  color: #f5222d;\n}\n.fr-generator-container .dnd-container.edit .fr-validate-row {\n  margin: 3px 0 0 0;\n}\n.fr-generator-container .dnd-container.edit .fr-label-row {\n  text-align: right;\n  flex-shrink: 0;\n}\n.fr-generator-container .dnd-container.edit .fr-field-row .fr-content {\n  flex: 1;\n  position: relative;\n}\n.fr-generator-container .dnd-container.edit .fr-field-row .fr-tooltip-icon {\n  margin: 3px 2px 0 0;\n}\n.fr-generator-container .dnd-container.edit .hover-b--black-20:hover {\n  border-color: rgba(0, 0, 0, 0.3);\n}\n.fr-generator-container .dnd-container.edit .pt44 {\n  padding-top: 46px;\n}\n.fr-generator-container .dnd-container.edit .pv12 {\n  padding-top: 12px;\n  padding-bottom: 12px;\n}\n.fr-generator-container .dnd-container.edit .fr-color-picker {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  color: #666;\n}\n.fr-generator-container .dnd-container.edit .fr-color-picker .rc-color-picker-trigger {\n  margin-right: 12px;\n  height: 30px;\n  width: 60px;\n  border: 1px solid #e5e5e5;\n}\n.fr-generator-container .dnd-container.edit .fr-color-picker > p {\n  margin: 0;\n  font-size: 14px;\n  line-height: 28px;\n}\n.fr-generator-container .dnd-container.edit .fr-color-picker .rc-color-picker-wrap {\n  display: flex;\n}\n.fr-generator-container .dnd-container.edit .next-input,\n.fr-generator-container .dnd-container.edit .next-number-picker {\n  width: 100%;\n}\n.fr-generator-container .dnd-container.edit .upload-img {\n  max-width: 200px;\n  max-height: 200px;\n  margin-right: 24px;\n}\n.fr-generator-container .dnd-container.edit .fr-preview-image {\n  width: 160px;\n}\n.fr-generator-container .dnd-container.edit .fr-preview {\n  position: relative;\n  cursor: pointer;\n}\n.fr-generator-container .dnd-container.edit .fr-upload-mod,\n.fr-generator-container .dnd-container.edit .fr-upload-file {\n  display: flex;\n}\n.fr-generator-container .dnd-container.edit .fr-upload-mod {\n  align-items: center;\n}\n.fr-generator-container .dnd-container.edit .fr-upload-mod .fr-upload-preview {\n  margin: 0 12px;\n}\n.fr-generator-container .dnd-container.edit .fr-upload-file .ant-upload-list-item {\n  margin: 5px 0 0 8px;\n}\n.fr-generator-container .dnd-container.edit .fr-upload-file .ant-upload-list-item-name {\n  margin-right: 6px;\n}\n.fr-generator-container .dnd-container.edit .fr-upload-file .ant-upload-list-item-info {\n  cursor: pointer;\n}\n.fr-generator-container .dnd-container.edit .fr-upload-file .next-upload-list-text .next-upload-list-item-done,\n.fr-generator-container .dnd-container.edit .fr-upload-file .next-upload-list-text .next-upload-list-item .next-icon {\n  height: 28px;\n  line-height: 28px;\n  margin-left: 12px;\n}\n.fr-generator-container .dnd-container.edit .fr-upload-file .next-upload-list-item-name-wrap {\n  margin-top: -4px;\n}\n.fr-generator-container .dnd-container.edit .fr-sort-help-class {\n  background: #fff;\n}\n.fr-generator-container .dnd-container.edit .fold-icon.fold-icon-active {\n  transform: rotate(0deg);\n}\n.fr-generator-container .dnd-container.edit .fold-icon {\n  transform: rotate(-90deg);\n  transition: transform 0.24s;\n  cursor: pointer;\n  position: relative;\n}\n.fr-generator-container .dnd-container.edit .fold-icon::after {\n  content: '';\n  position: absolute;\n  top: -20px;\n  right: -10px;\n  bottom: -5px;\n  left: -20px;\n}\n.fr-generator-container .dnd-container.edit .fr-tooltip-toggle {\n  cursor: pointer;\n  position: relative;\n}\n.fr-generator-container .dnd-container.edit .fr-tooltip-toggle:hover .fr-tooltip-container {\n  opacity: 1;\n  visibility: visible;\n}\n.fr-generator-container .dnd-container.edit .fr-tooltip-icon {\n  height: 14px;\n  width: 14px;\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAEnUlEQVR42u1bS0iUURT+zd4Y9KDosSihNhYUaBE9YKpFDKKOOmOLahtJ2SoxA2fUdUoQJK5qU0ib6LlxUYJpkY0LE3tQZkU7y7A0e1jnA4Of8pz//5373/+BF44Oc+/c853v3nOf5xpup0QiMZ9kD8mxeDzeTHKXPveSvKXP3+j/GP1/h++QhzIoW1ZWthu/NYKYysvLN5EhKZJ7ZMQEye8ZyjjJfZIk6vS10YWFhcvI4FoC2wfwLkkf6aiBLt8YHovFNhCoFnRlgNQkY9BJbrLeS9uzqFueYAzXJV9ITgKLVsvBPCnuAAifSIe23kBd7zApHHUI8D3JBfptFUlialbYSJIDweep7+Iog7L4jUMdn4HNzeksmxRcdgColyRZWlq6NQOd21AH6rKrFxiBVanxxcXFS6jSdpsAHtLYUODC1FqAum0S0Q7Mqlp+ESlO2zD8DUmJBhcsgS4bJDwBdhUKb1ko+kll6qLR6AJDU4IuuAZ0W2C7kWnrJy1a/QONvjsNjxLp32VjsEzO1OcOkoJJoeJuGuBWGB4nYCCcD4RGmiSJOm35PIup7kokEplr+CQBCzAJeEeJqC22V3jE2IBQWVd+fv48w2cJmAhbp4C7H7bZaf1KoZJBbET8vCEDRgF/pdXGZim1/ifGl344WtTIJJ//B+ggts+K6t4BrAwBH2GjNKo2CuxVqzJeGLDqFemoFnQ0sq0vDHyP4D+KwI1ILqZqpyqsGmFjznStX8tNIzQlbjYUJasVnCo9wAzsjE1npyPgFQPqJvKDRYC8ioWt/200BFD7FRMwIu0nFBNwgNMFm80Fz0mAFIOqVz4IyoS/ZvQ1mQv1MYBqkO8GCSDXTDRjvAoCznAHrH/X0qu4FqE99Voj2AkErOPsg+3w/wqmwDMjHAkkPGdsPITMBqb7t4SFANjCjTkgoI0ZJY+Hwnp5f9MGdtIMOxF35n1ZXDrG38fYmDa48zWcs4eFANxesUtv+jPMZC4PCwE4NWL0DRvcehkHjyEhACdGCxl9vwBwggEyxw0wXhCAOANG34TsAi4k37kA/RliMnND1ANyGX1DGAMe89Og+uSjaRDSAwKucgeIYSEAcQzc8T4ISDGZrSFygVaml6dAQILJfBEiAl4yy/0KZK6WtsMBJwD+v0bcDk/tlp4yveB0cAmQj8hhs7lQE1NoIAQEPGdsazZ3k+3SoahOAvQfisoDBeR2QAmArjvcsbi2i5FMQ+Ay0Jvn6GIE10VWV2MBIiALmKWrMfFylJsRgkIAsAp1NojX47hCZn74HdfjficAAzp3PY6rf9g4GyBhw3/6Axoi0yW48IDtcQwBRVIUOHaQfguSAiYpvB42Od1Cxiz8s5tkpdfGAwOwSFhhy0xXUnV+DpSEbmCwwFiXKcPXbYTKpnSHykIndFsYf01JsDRJTxCDpUGU7nB5SKcfwuWLiooWK38wQXLJwcOFtIoHE/Bh5v6SE2DMdvNN4BE3nszQ93szfTJDclTbU7lAP5pSGIxY5eWzOdL/lXrkKW6Fp7M3XPTi4SR0zz6dnX087fOEq2k8hTc/nydJm57Pj3v5fP4PSqRR6oYkTaUAAAAASUVORK5CYII=');\n  background-size: cover;\n  display: block;\n  margin: 4px 0 0 4px;\n}\n.fr-generator-container .dnd-container.edit .fr-tooltip-container {\n  position: absolute;\n  width: 160px;\n  left: 50%;\n  white-space: initial !important;\n  bottom: 30px;\n  text-align: center;\n  background: #2b222a;\n  padding: 4px;\n  margin-left: -77px;\n  border-radius: 4px;\n  color: #efefef;\n  font-size: 13px;\n  cursor: auto;\n  z-index: 99999;\n  transition: all 0.5s ease;\n  opacity: 0;\n  visibility: hidden;\n  word-wrap: break-word;\n}\n.fr-generator-container .dnd-container.edit .fr-tooltip-triangle {\n  position: absolute;\n  left: 50%;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid #2b222a;\n  transition: all 0.5s ease;\n  content: ' ';\n  font-size: 0;\n  line-height: 0;\n  margin-left: -5px;\n  width: 0;\n  bottom: -5px;\n}\n.fr-generator-container .dnd-container.edit .fr-tooltip-toggle::before,\n.fr-generator-container .dnd-container.edit .fr-tooltip-toggle::after {\n  color: #efefef;\n  font-size: 13px;\n  opacity: 0;\n  pointer-events: none;\n  text-align: center;\n}\n.fr-generator-container .dnd-container.edit .fr-tooltip-toggle:focus::before,\n.fr-generator-container .dnd-container.edit .fr-tooltip-toggle:focus::after,\n.fr-generator-container .dnd-container.edit .fr-tooltip-toggle:hover::before,\n.fr-generator-container .dnd-container.edit .fr-tooltip-toggle:hover::after {\n  opacity: 1;\n  transition: all 0.75s ease;\n}\n.fr-generator-container .dnd-container.edit .fr-slider {\n  display: flex;\n  width: 100%;\n  align-items: center;\n}\n.fr-generator-container .dnd-container.edit .fr-map {\n  display: flex;\n  flex-wrap: wrap;\n}\n.frg-options-list .fr-list-1 .fr-field.fr-field-object {\n  flex: 1;\n}\n.frg-options-list .fr-list-1 .fr-field.fr-field-inline > div:first-child {\n  display: none;\n}\n.frg-options-list .frg-options-input:first-child {\n  margin-right: 6px;\n}\n.frg-options-list .frg-options-input .fr-content.fr-content-inline {\n  max-width: 96px;\n  min-width: 96px;\n}\n";
styleInject(css_248z$4);

var _excluded$1 = ["fixedName", "settingsWidgets", "onCanvasSelect"];
var Generator = /*#__PURE__*/React.forwardRef(function (_ref, ref) {
  var fixedName = _ref.fixedName,
      settingsWidgets = _ref.settingsWidgets,
      onCanvasSelect = _ref.onCanvasSelect,
      props = _objectWithoutProperties(_ref, _excluded$1);

  return /*#__PURE__*/React__default['default'].createElement(Provider$1, _extends({
    ref: ref
  }, props), /*#__PURE__*/React__default['default'].createElement("div", {
    className: "fr-generator-container"
  }, /*#__PURE__*/React__default['default'].createElement(Sidebar, {
    fixedName: fixedName
  }), /*#__PURE__*/React__default['default'].createElement(Canvas, {
    onSelect: onCanvasSelect
  }), /*#__PURE__*/React__default['default'].createElement(Settings, {
    widgets: settingsWidgets
  })));
});
Generator.Provider = Provider$1;
Generator.Sidebar = Sidebar;
Generator.Canvas = Canvas;
Generator.Settings = Settings;

exports.default = Generator;
exports.defaultCommonSettings = defaultCommonSettings;
exports.defaultGlobalSettings = defaultGlobalSettings;
exports.defaultSettings = defaultSettings;
exports.fromSetting = fromSetting;
exports.toSetting = toSetting;
