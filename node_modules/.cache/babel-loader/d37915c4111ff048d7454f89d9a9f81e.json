{"ast":null,"code":"import \"antd/lib/radio/style\";\nimport _Radio from \"antd/lib/radio\";\nimport \"antd/lib/popover/style\";\nimport _Popover from \"antd/lib/popover\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport _toConsumableArray from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\components\\\\GlobalTabel2\\\\sortLayout.js\";\n\n/*\r\n * @Author: EmberCCC 1810888456@qq.com\r\n * @Date: 2022-07-08 06:52:37\r\n * @LastEditors: EmberCCC 1810888456@qq.com\r\n * @LastEditTime: 2022-07-08 10:33:00\r\n * @FilePath: \\bl-device-manage-test\\src\\components\\GlobalTabel2\\sortLayout.js\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n */\nimport { DeleteOutlined, UnorderedListOutlined } from '@ant-design/icons';\nimport { toJS } from 'mobx';\nimport { inject, observer } from 'mobx-react';\nimport React, { useEffect, useState } from 'react';\nimport stores from 'stores';\nimport './index.css';\nvar SortLayout = observer(function (_ref) {\n  var TableStore = _ref.TableStore;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      sortList = _useState2[0],\n      setSortList = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      menu = _useState4[0],\n      setMenu = _useState4[1];\n\n  var handleAdd = function handleAdd(item) {\n    var iSort = _toConsumableArray(sortList);\n\n    iSort.push({\n      'fieldInfo': toJS(item),\n      'type': 'up'\n    });\n    setSortList(iSort);\n    console.log(sortList);\n  };\n\n  useEffect(function () {\n    setMenu( /*#__PURE__*/React.createElement(\"div\", {\n      className: \"columns_list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }, TableStore.columns.map(function (item, index) {\n      if (sortList.some(function (sort_item) {\n        return sort_item['key'] == item['key'];\n      })) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"columns_item\",\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 34\n          },\n          __self: this\n        }, item['title']);\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"columns_item item_uncheck\",\n          onClick: function onClick() {\n            return handleAdd(item);\n          },\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        }, item['title']);\n      }\n    })));\n  }, [sortList]); // useEffect(() => {\n  //     console.log(toJS(TableStore.columns));\n  // }, [])\n\n  var handleClick = function handleClick() {\n    console.log('add');\n  };\n\n  var handleChange = function handleChange(e, item, index) {\n    var iItem = {\n      'fieldInfo': toJS(item['fieldInfo']),\n      'type': e.target.value\n    };\n\n    var iSortList = _toConsumableArray(sortList);\n\n    iSortList.splice(index, 1, iItem);\n    setSortList(iSortList);\n    console.log(iSortList);\n  };\n\n  var handleSort = function handleSort() {\n    console.log(toJS(TableStore.dataSource));\n    console.log(sortList);\n  };\n\n  var handleDel = function handleDel(index) {\n    var iSortList = _toConsumableArray(sortList);\n\n    iSortList.splice(index, 1);\n    setSortList(iSortList);\n    console.log(iSortList);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sort_layout\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(_Popover, {\n    content: menu,\n    trigger: \"click\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sort_add\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(_Button, {\n    onClick: handleClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"+\\u6DFB\\u52A0\\u6392\\u5E8F\\u89C4\\u5219\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sort_list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, sortList.map(function (item, index) {\n    console.log(item['type']);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list_item\",\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list_item_title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, item['fieldInfo']['title']), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list_item_check\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, /*#__PURE__*/React.createElement(_Radio.Group, {\n      onChange: function onChange(e) {\n        return handleChange(e, item, index);\n      },\n      defaultValue: item['type'],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, /*#__PURE__*/React.createElement(_Radio.Button, {\n      value: \"up\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"\\u5347\\u5E8F\"), /*#__PURE__*/React.createElement(_Radio.Button, {\n      value: \"down\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"\\u964D\\u5E8F\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list_item_del\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, /*#__PURE__*/React.createElement(UnorderedListOutlined, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), /*#__PURE__*/React.createElement(DeleteOutlined, {\n      onClick: function onClick() {\n        handleDel(index);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    })));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sort_btn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(_Button, {\n    type: \"primary\",\n    onClick: handleSort,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, \"\\u6392\\u5E8F\")));\n});\nexport default inject(function (stores) {\n  return {\n    TableStore: stores.TableStore\n  };\n})(SortLayout);","map":{"version":3,"names":["DeleteOutlined","UnorderedListOutlined","toJS","inject","observer","React","useEffect","useState","stores","SortLayout","TableStore","sortList","setSortList","menu","setMenu","handleAdd","item","iSort","push","console","log","columns","map","index","some","sort_item","handleClick","handleChange","e","iItem","target","value","iSortList","splice","handleSort","dataSource","handleDel"],"sources":["F:/documents/bl-device-manage-test/src/components/GlobalTabel2/sortLayout.js"],"sourcesContent":["/*\r\n * @Author: EmberCCC 1810888456@qq.com\r\n * @Date: 2022-07-08 06:52:37\r\n * @LastEditors: EmberCCC 1810888456@qq.com\r\n * @LastEditTime: 2022-07-08 10:33:00\r\n * @FilePath: \\bl-device-manage-test\\src\\components\\GlobalTabel2\\sortLayout.js\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n */\r\nimport { DeleteOutlined, UnorderedListOutlined } from '@ant-design/icons'\r\nimport { Button, Popover, Radio } from 'antd'\r\nimport { toJS } from 'mobx'\r\nimport { inject, observer } from 'mobx-react'\r\nimport React, { useEffect, useState } from 'react'\r\nimport stores from 'stores'\r\nimport './index.css'\r\nconst SortLayout = observer(({ TableStore }) => {\r\n    const [sortList, setSortList] = useState([]);\r\n    const [menu, setMenu] = useState(null)\r\n\r\n    const handleAdd = (item) => {\r\n        let iSort = [...sortList];\r\n        iSort.push({ 'fieldInfo': toJS(item), 'type': 'up' })\r\n        setSortList(iSort)\r\n        console.log(sortList);\r\n    }\r\n    useEffect(() => {\r\n        setMenu(\r\n            (\r\n                <div className='columns_list'>\r\n                    {\r\n                        TableStore.columns.map((item, index) => {\r\n                            if (sortList.some(sort_item => sort_item['key'] == item['key'])) {\r\n                                return (\r\n                                    <div className=\"columns_item\" key={index}>\r\n                                        {item['title']}\r\n                                    </div>\r\n                                )\r\n                            } else {\r\n                                return (\r\n                                    <div className=\"columns_item item_uncheck\" onClick={() => handleAdd(item)} key={index}>\r\n                                        {item['title']}\r\n                                    </div>\r\n                                )\r\n                            }\r\n                        })\r\n                    }\r\n                </div>\r\n            )\r\n        )\r\n    }, [sortList])\r\n    // useEffect(() => {\r\n    //     console.log(toJS(TableStore.columns));\r\n    // }, [])\r\n    const handleClick = () => {\r\n        console.log('add');\r\n    }\r\n    const handleChange = (e, item, index) => {\r\n        const iItem = { 'fieldInfo': toJS(item['fieldInfo']), 'type': e.target.value }\r\n        let iSortList = [...sortList]\r\n        iSortList.splice(index,1,iItem);\r\n        setSortList(iSortList)\r\n        console.log(iSortList);\r\n    }\r\n    const handleSort = () => {\r\n        console.log(toJS(TableStore.dataSource));\r\n        console.log(sortList);\r\n    }\r\n    const handleDel = (index) => {\r\n        let iSortList = [...sortList]\r\n        iSortList.splice(index,1)\r\n        setSortList(iSortList);\r\n        console.log(iSortList);\r\n    }\r\n    return (\r\n        <div className='sort_layout'>\r\n            <Popover content={menu} trigger='click'>\r\n                <div className='sort_add'>\r\n                    <Button onClick={handleClick}>+添加排序规则</Button>\r\n                </div>\r\n            </Popover>\r\n            <div className='sort_list'>\r\n                {\r\n                    sortList.map((item, index) => {\r\n                        console.log(item['type']);\r\n                        return (\r\n                            <div className='list_item' key={index}>\r\n                                <div className='list_item_title'>\r\n                                    {item['fieldInfo']['title']}\r\n                                </div>\r\n                                <div className='list_item_check'>\r\n                                    <Radio.Group onChange={(e) => handleChange(e, item, index)} defaultValue={item['type']}>\r\n                                        <Radio.Button value=\"up\">升序</Radio.Button>\r\n                                        <Radio.Button value=\"down\">降序</Radio.Button>\r\n                                    </Radio.Group>\r\n                                </div>\r\n                                <div className='list_item_del'>\r\n                                    <UnorderedListOutlined />\r\n                                    <DeleteOutlined onClick={() => {handleDel(index)}}/>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n            <div className='sort_btn'>\r\n                <Button type='primary' onClick={handleSort}>排序</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n})\r\n\r\n\r\nexport default inject((stores) => ({ TableStore: stores.TableStore }))(SortLayout);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}