{"ast":null,"code":"import \"antd/lib/radio/style\";\nimport _Radio from \"antd/lib/radio\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport _defineProperty from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport _classCallCheck from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/src/layouts/WorkManage/cell/Table.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport GlobalList from 'components/GlobalList';\nimport AddModal from './AddModal';\nimport { setWorkColumns } from '../methods';\nimport { initSearchQuery } from 'utils/dataTools';\nimport { withRouter } from 'react-router-dom';\nvar DefineTable = (_dec = inject('WorkStore', 'DeviceDefineStore'), withRouter(_class = _dec(_class = observer(_class = (_temp = /*#__PURE__*/function (_Component) {\n  _inherits(DefineTable, _Component);\n\n  var _super = _createSuper(DefineTable);\n\n  function DefineTable(props) {\n    var _this;\n\n    _classCallCheck(this, DefineTable);\n\n    _this = _super.call(this, props);\n\n    _this.onSubmitSolute = function () {\n      var record = _this.state.submitRecord,\n          workStatus = '';\n      var data = {\n        id: record.id,\n        workStatus: workStatus,\n        deviceId: _this.store.currentMain.deviceId\n      };\n\n      if (record.maintainType === 4) {\n        if (!_this.state.reason || _this.state.isSolute.toString() == 1 && !_this.state.solution) {\n          _message.warn('请填写相关内容');\n        } else {\n          data.reason = _this.state.reason;\n          data.solution = _this.state.solution;\n          data.workStatus = _this.state.isSolute == 1 ? 5 : 6;\n\n          _this.store.saveWork(_objectSpread({}, data));\n\n          _this.onClose();\n        }\n      } else {\n        data.workStatus = 5;\n\n        _this.store.saveWork(_objectSpread({}, data));\n\n        _this.onClose();\n      }\n    };\n\n    _this.handleWorkStatus = function (record, type) {\n      _this.store.currentMain = record;\n      var content = '',\n          workStatus = '',\n          width = 416;\n\n      switch (type) {\n        case 'receive':\n          content = '确定接收该工单？';\n          workStatus = 2;\n          break;\n\n        case 'refuse':\n          content = '确定拒绝该工单？';\n          workStatus = 3;\n          break;\n\n        case 'submit':\n          _this.state.submitVisible = true;\n          _this.state.submitRecord = record;\n          break;\n\n        case 'over':\n          content = '确定完结该工单？';\n          workStatus = 8;\n          break;\n\n        default:\n          break;\n      }\n\n      if (!_this.state.submitVisible) {\n        _Modal.confirm({\n          title: '提示',\n          content: content,\n          width: width,\n          okText: '确定',\n          cancelText: '取消',\n          onOk: function onOk() {\n            var data = {\n              id: record.id,\n              workStatus: workStatus,\n              deviceId: _this.store.currentMain.deviceId\n            };\n\n            _this.store.saveWork(_objectSpread({}, data));\n          }\n        });\n      }\n\n      _this.setState({});\n    };\n\n    _this.handleIsSoluteChange = function (e) {\n      _this.setState({\n        isSolute: e.target.value\n      });\n    };\n\n    _this.handleOverInput = function (text, e) {\n      _this.setState(_defineProperty({}, text, e.target.value));\n    };\n\n    _this.handleDistribute = function (record) {\n      _this.store.currentMain = record;\n      _this.store.workerName = record.workerName;\n\n      _this.store.getCountByWorkerId({\n        workerId: record.workerId\n      });\n\n      _this.setState({\n        visible: true\n      }, function () {\n        _this.props.DeviceDefineStore.getUsersByRoles();\n      });\n    };\n\n    _this.handleDetail = function (record) {\n      _this.store.currentMain = record;\n      _this.store.isDaily = true;\n    };\n\n    _this.onClose = function () {\n      _this.setState({\n        visible: false,\n        submitVisible: false\n      });\n    };\n\n    _this.handleVisible = function () {\n      _this.store.visible = !_this.store.visible;\n    };\n\n    _this.handleSubmit = function (values) {\n      var currentMain = _this.store.currentMain;\n\n      var params = _objectSpread({}, values, {}, currentMain);\n\n      _this.store.saveType(params);\n\n      _this.handleVisible();\n    };\n\n    _this.store = _this.props.WorkStore;\n    _this.state = {\n      visible: false,\n      selectedRowKeys: [],\n      fileVisible: false,\n      reason: '',\n      solution: '',\n      isSolute: 1,\n      submitVisible: false,\n      submitRecord: {}\n    };\n    return _this;\n  }\n\n  _createClass(DefineTable, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$store = this.store,\n          isLoading = _this$store.isLoading,\n          workList = _this$store.workList,\n          workPage = _this$store.workPage,\n          workCols = _this$store.workCols;\n      var rowSelection = {\n        selectedRowKeys: this.store.selectedRowKeys,\n        onChange: this.props.handleSelect\n      };\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(GlobalList, {\n        table: {\n          rowKey: 'id',\n          columns: setWorkColumns({\n            cols: workCols,\n            handleDistribute: this.handleDistribute,\n            handleDetail: this.handleDetail,\n            handleReceive: this.handleWorkStatus,\n            handleOver: this.handleWorkStatus,\n            handleRecall: this.handleDistribute,\n            handleSubmit: this.handleWorkStatus,\n            handleRefuse: this.handleWorkStatus\n          }),\n          dataSource: workList,\n          pagination: _objectSpread({}, workPage, {\n            onChange: function onChange(pageIndex, pageSize) {\n              _this2.store.getWork({\n                pageIndex: pageIndex,\n                pageSize: pageSize\n              });\n            }\n          }),\n          loading: isLoading,\n          rowSelection: rowSelection\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 5\n        }\n      }), this.state.visible && /*#__PURE__*/React.createElement(AddModal, {\n        visible: this.state.visible,\n        onClose: this.onClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 28\n        }\n      }), this.state.submitVisible && /*#__PURE__*/React.createElement(_Modal, {\n        width: this.state.submitRecord.maintainType === 4 ? 600 : 416,\n        title: \"\\u63D0\\u793A\",\n        visible: this.state.submitVisible,\n        okText: \"\\u63D0\\u4EA4\",\n        cancelText: \"\\u53D6\\u6D88\",\n        onCancel: this.onClose,\n        onOk: this.onSubmitSolute,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 34\n        }\n      }, this.state.submitRecord.maintainType === 4 ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 53\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          fontSize: 14,\n          fontWeight: 600\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 9\n        }\n      }, \"\\u8BF7\\u586B\\u5199\\u5DE5\\u5355\\u5B8C\\u6210\\u5185\\u5BB9\"), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          margin: '10px 0'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          color: '#F04864'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 10\n        }\n      }, \"*\"), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 10\n        }\n      }, \"\\u6545\\u969C\\u539F\\u56E0\\uFF1A\"), /*#__PURE__*/React.createElement(_Input, {\n        style: {\n          width: '80%'\n        },\n        placeholder: \"\\u8BF7\\u8F93\\u5165\",\n        onChange: this.handleOverInput.bind(this, 'reason'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 10\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          color: '#F04864'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 10\n        }\n      }, \"*\"), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 10\n        }\n      }, \"\\u662F\\u5426\\u89E3\\u51B3\\uFF1A\"), /*#__PURE__*/React.createElement(_Radio.Group, {\n        defaultValue: 1,\n        onChange: this.handleIsSoluteChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 10\n        }\n      }, /*#__PURE__*/React.createElement(_Radio, {\n        value: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }\n      }, \"\\u662F\"), /*#__PURE__*/React.createElement(_Radio, {\n        value: 0,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }\n      }, \"\\u5426\"))), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          color: '#F04864'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 10\n        }\n      }, \"*\"), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 10\n        }\n      }, this.state.isSolute.toString() === '1' ? '解决方案：' : '备注问题：'), /*#__PURE__*/React.createElement(_Input, {\n        style: {\n          width: '80%',\n          margin: '10px 0'\n        },\n        placeholder: \"\\u8BF7\\u8F93\\u5165\",\n        onChange: this.handleOverInput.bind(this, 'solution'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 10\n        }\n      }))) : '确定提交该工单?'));\n    }\n  }]);\n\n  return DefineTable;\n}(Component), _temp)) || _class) || _class) || _class);\nexport default DefineTable;","map":{"version":3,"sources":["/Users/shoen/Desktop/设备运维前端/bl-device-manage/src/layouts/WorkManage/cell/Table.js"],"names":["React","Component","inject","observer","GlobalList","AddModal","setWorkColumns","initSearchQuery","withRouter","DefineTable","props","onSubmitSolute","record","state","submitRecord","workStatus","data","id","deviceId","store","currentMain","maintainType","reason","isSolute","toString","solution","warn","saveWork","onClose","handleWorkStatus","type","content","width","submitVisible","confirm","title","okText","cancelText","onOk","setState","handleIsSoluteChange","e","target","value","handleOverInput","text","handleDistribute","workerName","getCountByWorkerId","workerId","visible","DeviceDefineStore","getUsersByRoles","handleDetail","isDaily","handleVisible","handleSubmit","values","params","saveType","WorkStore","selectedRowKeys","fileVisible","isLoading","workList","workPage","workCols","rowSelection","onChange","handleSelect","rowKey","columns","cols","handleReceive","handleOver","handleRecall","handleRefuse","dataSource","pagination","pageIndex","pageSize","getWork","loading","fontSize","fontWeight","margin","color","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport GlobalList from 'components/GlobalList';\nimport AddModal from './AddModal'\nimport { setWorkColumns, } from '../methods';\nimport { Modal, Input, Radio, message } from 'antd';\nimport { initSearchQuery } from 'utils/dataTools';\nimport { withRouter } from 'react-router-dom'\n\n@withRouter\n@inject('WorkStore', 'DeviceDefineStore')\n@observer\nclass DefineTable extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.store = this.props.WorkStore;\n\t\tthis.state = {\n\t\t\tvisible: false,\n\t\t\tselectedRowKeys: [],\n\t\t\tfileVisible: false,\n\t\t\treason: '',\n\t\t\tsolution: '',\n\t\t\tisSolute: 1,\n\t\t\tsubmitVisible: false,\n\t\t\tsubmitRecord: {}\n\t\t}\n\t}\n\trender() {\n\t\tconst {\n\t\t\tisLoading, workList, workPage, workCols,\n\t\t} = this.store;\n\t\tconst rowSelection = {\n\t\t\tselectedRowKeys: this.store.selectedRowKeys,\n\t\t\tonChange: this.props.handleSelect\n\t\t};\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<GlobalList\n\t\t\t\t\ttable={{\n\t\t\t\t\t\trowKey: 'id',\n\t\t\t\t\t\tcolumns: setWorkColumns({\n\t\t\t\t\t\t\tcols:workCols,\n\t\t\t\t\t\t\thandleDistribute: this.handleDistribute, handleDetail: this.handleDetail,\n\t\t\t\t\t\t\thandleReceive: this.handleWorkStatus, handleOver: this.handleWorkStatus,\n\t\t\t\t\t\t\thandleRecall: this.handleDistribute, handleSubmit: this.handleWorkStatus, handleRefuse: this.handleWorkStatus\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tdataSource: workList,\n\t\t\t\t\t\tpagination: {\n\t\t\t\t\t\t\t...workPage,\n\t\t\t\t\t\t\tonChange: (pageIndex, pageSize) => {\n\t\t\t\t\t\t\t\tthis.store.getWork({\n\t\t\t\t\t\t\t\t\tpageIndex,\n\t\t\t\t\t\t\t\t\tpageSize,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tloading: isLoading,\n\t\t\t\t\t\trowSelection,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t{\n\t\t\t\t\tthis.state.visible && <AddModal\n\t\t\t\t\t\tvisible={this.state.visible}\n\t\t\t\t\t\tonClose={this.onClose}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tthis.state.submitVisible && <Modal\n\t\t\t\t\t\twidth={this.state.submitRecord.maintainType === 4 ? 600 : 416}\n\t\t\t\t\t\ttitle='提示'\n\t\t\t\t\t\tvisible={this.state.submitVisible}\n\t\t\t\t\t\tokText='提交'\n\t\t\t\t\t\tcancelText='取消'\n\t\t\t\t\t\tonCancel={this.onClose}\n\t\t\t\t\t\tonOk={this.onSubmitSolute}\n\t\t\t\t\t>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.state.submitRecord.maintainType === 4 ? <div>\n\t\t\t\t\t\t\t\t<div style={{ fontSize: 14, fontWeight: 600 }}>请填写工单完成内容</div>\n\t\t\t\t\t\t\t\t<div style={{ margin: '10px 0' }}>\n\t\t\t\t\t\t\t\t\t<span style={{ color: '#F04864' }}>*</span>\n\t\t\t\t\t\t\t\t\t<span>故障原因：</span>\n\t\t\t\t\t\t\t\t\t<Input style={{ width: '80%' }} placeholder='请输入' onChange={this.handleOverInput.bind(this, 'reason')} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span style={{ color: '#F04864' }}>*</span>\n\t\t\t\t\t\t\t\t\t<span>是否解决：</span>\n\t\t\t\t\t\t\t\t\t<Radio.Group defaultValue={1} onChange={this.handleIsSoluteChange}>\n\t\t\t\t\t\t\t\t\t\t<Radio value={1}>是</Radio>\n\t\t\t\t\t\t\t\t\t\t<Radio value={0}>否</Radio>\n\t\t\t\t\t\t\t\t\t</Radio.Group>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span style={{ color: '#F04864' }}>*</span>\n\t\t\t\t\t\t\t\t\t<span>{this.state.isSolute.toString() === '1' ? '解决方案：' : '备注问题：'}</span>\n\t\t\t\t\t\t\t\t\t<Input style={{ width: '80%', margin: '10px 0' }} placeholder='请输入' onChange={this.handleOverInput.bind(this, 'solution')} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div> : '确定提交该工单?'\n\t\t\t\t\t\t}\n\t\t\t\t\t</Modal>\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n\tonSubmitSolute = () => {\n\t\tlet record = this.state.submitRecord, workStatus = '';\n\t\tlet data = {\n\t\t\tid: record.id, workStatus: workStatus, deviceId: this.store.currentMain.deviceId,\n\t\t};\n\t\tif (record.maintainType === 4) {\n\t\t\tif (!this.state.reason || (this.state.isSolute.toString() == 1 && !this.state.solution)) {\n\t\t\t\tmessage.warn('请填写相关内容')\n\t\t\t} else {\n\t\t\t\tdata.reason = this.state.reason;\n\t\t\t\tdata.solution = this.state.solution;\n\t\t\t\tdata.workStatus = this.state.isSolute == 1 ? 5 : 6;\n\t\t\t\tthis.store.saveWork({\n\t\t\t\t\t...data\n\t\t\t\t})\n\t\t\t\tthis.onClose()\n\t\t\t}\n\t\t} else {\n\t\t\tdata.workStatus = 5;\n\t\t\tthis.store.saveWork({\n\t\t\t\t...data\n\t\t\t})\n\t\t\tthis.onClose()\n\t\t}\n\t}\n\thandleWorkStatus = (record, type) => {\n\t\tthis.store.currentMain = record;\n\t\tlet content = '', workStatus = '', width = 416;\n\t\tswitch (type) {\n\t\t\tcase 'receive':\n\t\t\t\tcontent = '确定接收该工单？';\n\t\t\t\tworkStatus = 2;\n\t\t\t\tbreak;\n\t\t\tcase 'refuse': content = '确定拒绝该工单？'; workStatus = 3;\n\t\t\t\tbreak;\n\t\t\tcase 'submit': this.state.submitVisible = true; this.state.submitRecord = record;\n\t\t\t\tbreak;\n\t\t\tcase 'over': content = '确定完结该工单？'; workStatus = 8;\n\t\t\t\tbreak;\n\t\t\tdefault: break;\n\t\t}\n\t\tif (!this.state.submitVisible) {\n\t\t\tModal.confirm({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent,\n\t\t\t\twidth,\n\t\t\t\tokText: '确定',\n\t\t\t\tcancelText: '取消',\n\t\t\t\tonOk: () => {\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\tid: record.id, workStatus: workStatus, deviceId: this.store.currentMain.deviceId,\n\t\t\t\t\t};\n\t\t\t\t\tthis.store.saveWork({\n\t\t\t\t\t\t...data\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\tthis.setState({})\n\t}\n\thandleIsSoluteChange = e => {\n\t\tthis.setState({\n\t\t\tisSolute: e.target.value\n\t\t})\n\t}\n\thandleOverInput = (text, e) => {\n\t\tthis.setState({\n\t\t\t[text]: e.target.value\n\t\t})\n\t}\n\thandleDistribute = record => {\n\t\tthis.store.currentMain = record;\n\t\tthis.store.workerName=record.workerName\n\t\tthis.store.getCountByWorkerId({ workerId: record.workerId })\n\n\t\tthis.setState({\n\t\t\tvisible: true\n\t\t}, () => {\n\t\t\tthis.props.DeviceDefineStore.getUsersByRoles();\n\t\t});\n\t};\n\thandleDetail = record => {\n\t\tthis.store.currentMain = record;\n\t\tthis.store.isDaily = true;\n\t}\n\tonClose = () => {\n\t\tthis.setState({\n\t\t\tvisible: false,\n\t\t\tsubmitVisible: false\n\t\t})\n\t}\n\t/* modal - operate */\n\thandleVisible = () => {\n\t\tthis.store.visible = !this.store.visible;\n\t};\n\t/* 弹窗提交操作 */\n\thandleSubmit = values => {\n\t\tconst { currentMain } = this.store;\n\t\tlet params = {\n\t\t\t...values,\n\t\t\t...currentMain\n\t\t}\n\t\tthis.store.saveType(params);\n\t\tthis.handleVisible();\n\t};\n}\nexport default DefineTable;\n"]},"metadata":{},"sourceType":"module"}