{"ast":null,"code":"import \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport _defineProperty from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\components\\\\GlobalModal\\\\index.js\";\nvar _excluded = [\"children\", \"title\", \"width\", \"bodyStyle\", \"style\", \"maskStyle\", \"className\", \"okText\", \"cancelText\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/**\n * @author zyn on 0513\n * @description 实现弹窗的拖拽、最大化、还原、关闭\n * @basic-params 基本实现参数可参照antd组件库Modal API\n * @param {Boolean} maxmin -是否支持最大化 - 默认值 false;\n * @param {Boolean} dragable -是否支持拖拽 - 默认值 false;\n * @param {String || ReactNode} children - Modal组件添加的content内容 - 默认 null\n */\nimport React, { Component } from 'react';\nimport classnames from 'classnames';\nimport { isEmpty } from 'lodash'; // import './index.less';\n\nvar GlobalModal = /*#__PURE__*/function (_Component) {\n  _inherits(GlobalModal, _Component);\n\n  var _super = _createSuper(GlobalModal);\n\n  function GlobalModal() {\n    var _this;\n\n    _classCallCheck(this, GlobalModal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      isFullScreen: false,\n      isMouseMove: false,\n      rootWidth: 0,\n      rootHeight: 0,\n      top: 0,\n      left: 0\n    };\n\n    _this.onFullScreen = function () {\n      //启动最大最小化模式\n      var content = document.getElementById('home_content');\n\n      _this.setState({\n        isFullScreen: !_this.state.isFullScreen,\n        rootHeight: content.offsetHeight,\n        rootWidth: content.offsetWidth,\n        top: 100,\n        isMouseMove: false\n      });\n    };\n\n    _this.onMouseDown = function (event) {\n      var et = event || window.event;\n      et.persist();\n      var oModal = document.getElementsByClassName('ant-modal')[0],\n          oMenu = document.getElementsByClassName('ant-sider-menu-content')[0],\n          oHeader = document.getElementsByClassName('header_layout')[0],\n          oCrumbs = document.getElementsByClassName('crumb_layout')[0];\n      var oContent = document.getElementById('home_content'),\n          oCmarginWidth = parseFloat(oContent.style.marginLeft) + parseFloat(oContent.style.marginRight),\n          oCmarginHeight = parseFloat(oContent.style.marginTop) + parseFloat(oContent.style.marginBottom);\n      var diffX = et.clientX - oModal.offsetLeft,\n          diffY = et.clientY - oModal.offsetTop;\n\n      document.onmousemove = function (e) {\n        var ev = e || window.event;\n        var minL = ev.clientX - diffX,\n            minT = ev.clientY - diffY;\n        var maxL = document.documentElement.clientWidth - oModal.offsetWidth - oMenu.offsetWidth - oCmarginWidth,\n            maxT = document.documentElement.clientHeight - oModal.offsetHeight - oHeader.offsetHeight - oCrumbs.offsetHeight - oCmarginHeight;\n        minL <= 0 && (minL = 0);\n        minT <= 0 && (minT = 0);\n        minL >= maxL && (minL = maxL);\n        minT >= maxT && (minT = maxT);\n\n        _this.setState({\n          left: minL,\n          top: minT,\n          isMouseMove: true\n        });\n\n        return false;\n      };\n\n      document.onmouseup = function () {\n        document.onmousemove = null;\n        document.onmouseup = null;\n        _this.releaseCapture && _this.releaseCapture();\n      };\n\n      _this.setCapture && _this.setCapture();\n      return false;\n    };\n\n    return _this;\n  }\n\n  _createClass(GlobalModal, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          title = _this$props.title,\n          width = _this$props.width,\n          bodyStyle = _this$props.bodyStyle,\n          style = _this$props.style,\n          maskStyle = _this$props.maskStyle,\n          className = _this$props.className,\n          okText = _this$props.okText,\n          cancelText = _this$props.cancelText,\n          otherProps = _objectWithoutProperties(_this$props, _excluded);\n\n      var dragable = !isEmpty(this.props.dragable) ? this.props.dragable : true; // const maxmin = !isEmpty(this.props.maxmin) ? this.props.maxmin : true;\n\n      var curBodyStyle = _objectSpread({\n        height: this.state.isFullScreen && this.state.rootHeight - 110 + 'px'\n      }, bodyStyle);\n\n      var wholeStyle = _objectSpread({\n        top: this.state.isFullScreen ? '0' : this.state.top + 'px',\n        left: !this.state.isFullScreen && dragable && this.state.left + 'px',\n        margin: this.state.isMouseMove && dragable && '0',\n        paddingBottom: (this.state.isFullScreen || dragable) && '0'\n      }, otherProps.style);\n\n      return /*#__PURE__*/React.createElement(_Modal, Object.assign({\n        wrapClassName: classnames({\n          'global-modal-zyn': true\n        }),\n        title: /*#__PURE__*/React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }, title) // getContainer={\n        //   ()=>document.getElementById('home_content')\n        // }\n\n      }, otherProps, {\n        style: _objectSpread({}, wholeStyle),\n        bodyStyle: _objectSpread({}, curBodyStyle) // maskStyle={{position: 'absolute',...maskStyle}}\n        ,\n        width: this.state.isFullScreen ? this.state.rootWidth + 'px' : width || '520px',\n        destroyOnClose: true,\n        okText: okText || '确定',\n        cancelText: cancelText || '取消',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }), children);\n    }\n    /* 启动最大最小化模式 */\n\n    /* 启动组件实现可拉伸窗口功能 : 八个方向的拉伸 */\n\n    /* 后续更新 */\n\n  }]);\n\n  return GlobalModal;\n}(Component);\n\nexport { GlobalModal as default };","map":{"version":3,"names":["React","Component","classnames","isEmpty","GlobalModal","state","isFullScreen","isMouseMove","rootWidth","rootHeight","top","left","onFullScreen","content","document","getElementById","setState","offsetHeight","offsetWidth","onMouseDown","event","et","window","persist","oModal","getElementsByClassName","oMenu","oHeader","oCrumbs","oContent","oCmarginWidth","parseFloat","style","marginLeft","marginRight","oCmarginHeight","marginTop","marginBottom","diffX","clientX","offsetLeft","diffY","clientY","offsetTop","onmousemove","e","ev","minL","minT","maxL","documentElement","clientWidth","maxT","clientHeight","onmouseup","releaseCapture","setCapture","props","children","title","width","bodyStyle","maskStyle","className","okText","cancelText","otherProps","dragable","curBodyStyle","height","wholeStyle","margin","paddingBottom"],"sources":["F:/documents/bl-device-manage-test/src/components/GlobalModal/index.js"],"sourcesContent":["/**\n * @author zyn on 0513\n * @description 实现弹窗的拖拽、最大化、还原、关闭\n * @basic-params 基本实现参数可参照antd组件库Modal API\n * @param {Boolean} maxmin -是否支持最大化 - 默认值 false;\n * @param {Boolean} dragable -是否支持拖拽 - 默认值 false;\n * @param {String || ReactNode} children - Modal组件添加的content内容 - 默认 null\n */\nimport React, { Component } from 'react';\nimport { Modal, } from 'antd';\nimport classnames from 'classnames';\nimport { isEmpty } from 'lodash';\n// import './index.less';\n\nexport default class GlobalModal extends Component {\n  state = {\n    isFullScreen: false,\n    isMouseMove: false,\n    rootWidth: 0,\n    rootHeight: 0,\n    top: 0,\n    left: 0,\n  };\n  render() {\n    const { children, title, width, bodyStyle, style, maskStyle, className, okText, cancelText, ...otherProps } = this.props;\n    const dragable = !isEmpty(this.props.dragable) ? this.props.dragable : true;\n    // const maxmin = !isEmpty(this.props.maxmin) ? this.props.maxmin : true;\n    const curBodyStyle = {\n      height: this.state.isFullScreen && this.state.rootHeight - 110 + 'px',\n      ...bodyStyle,\n    };\n    const wholeStyle = {\n      top: this.state.isFullScreen ? '0' : this.state.top + 'px',\n      left: !this.state.isFullScreen && dragable && this.state.left + 'px',\n      margin: this.state.isMouseMove && dragable && '0',\n      paddingBottom: (this.state.isFullScreen || dragable) && '0',\n      ...otherProps.style\n    }\n    return <Modal\n      wrapClassName={\n        classnames({\n          'global-modal-zyn': true,\n        })\n      }\n      title={<div>\n        {title}\n      </div>}\n      // getContainer={\n      //   ()=>document.getElementById('home_content')\n      // }\n      {...otherProps}\n      style={{ ...wholeStyle }}\n      bodyStyle={{ ...curBodyStyle }}\n      // maskStyle={{position: 'absolute',...maskStyle}}\n      width={this.state.isFullScreen ? this.state.rootWidth + 'px' : (width || '520px')}\n      destroyOnClose={true}\n      okText={okText || '确定'}\n      cancelText={cancelText || '取消'}\n    >\n      {children}\n    </Modal>;\n  }\n  /* 启动最大最小化模式 */\n  onFullScreen = () => { //启动最大最小化模式\n    let content = document.getElementById('home_content');\n    this.setState({\n      isFullScreen: !this.state.isFullScreen,\n      rootHeight: content.offsetHeight,\n      rootWidth: content.offsetWidth,\n      top: 100,\n      isMouseMove: false\n    });\n  }\n  /* 启动组件拖拽功能 */\n  onMouseDown = (event) => {\n    let et = event || window.event;\n    et.persist();\n    let oModal = document.getElementsByClassName('ant-modal')[0],\n      oMenu = document.getElementsByClassName('ant-sider-menu-content')[0],\n      oHeader = document.getElementsByClassName('header_layout')[0],\n      oCrumbs = document.getElementsByClassName('crumb_layout')[0];\n    let oContent = document.getElementById('home_content'),\n      oCmarginWidth = parseFloat(oContent.style.marginLeft) + parseFloat(oContent.style.marginRight),\n      oCmarginHeight = parseFloat(oContent.style.marginTop) + parseFloat(oContent.style.marginBottom);\n    let diffX = et.clientX - oModal.offsetLeft, diffY = et.clientY - oModal.offsetTop;\n    document.onmousemove = (e) => {\n      let ev = e || window.event;\n      let minL = ev.clientX - diffX, minT = ev.clientY - diffY;\n      let maxL = document.documentElement.clientWidth - oModal.offsetWidth - oMenu.offsetWidth - oCmarginWidth,\n        maxT = document.documentElement.clientHeight - oModal.offsetHeight - oHeader.offsetHeight - oCrumbs.offsetHeight - oCmarginHeight;\n      minL <= 0 && (minL = 0);\n      minT <= 0 && (minT = 0);\n      minL >= maxL && (minL = maxL);\n      minT >= maxT && (minT = maxT);\n      this.setState({\n        left: minL, top: minT,\n        isMouseMove: true\n      });\n      return false;\n    }\n    document.onmouseup = () => {\n      document.onmousemove = null;\n      document.onmouseup = null;\n      this.releaseCapture && this.releaseCapture();\n    };\n    this.setCapture && this.setCapture();\n    return false;\n  }\n\n  /* 启动组件实现可拉伸窗口功能 : 八个方向的拉伸 */\n  /* 后续更新 */\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}