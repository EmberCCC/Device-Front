{"ast":null,"code":"import \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/icon/style\";\nimport _Icon from \"antd/lib/icon\";\nimport \"antd/lib/popover/style\";\nimport _Popover from \"antd/lib/popover\";\nimport _extends from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/extends\";\nimport \"antd/lib/tag/style\";\nimport _Tag from \"antd/lib/tag\";\nimport _initializerDefineProperty from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _classCallCheck from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _applyDecoratedDescriptor from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper\";\n\nvar _class,\n    _descriptor,\n    _temp,\n    _jsxFileName = \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/src/components/Category/index.js\";\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\n * @Author: zhangliang\n * @Date: 2019-05-22 11:10:38\n * @Last Modified by: zhangliang\n * @Last Modified time: 2019-06-22 10:53:30\n * description:\n * 1.title:{String}传入的分类名称\n * 2.content:{Array}传入所有的标签内容\n * 3.onClick:点击标签时所调用的方法,父组件通过接参可以获取到点击的对象\n * 4.PopoTitle：气泡内的标题和key,例如PopoTitle = [{ 'title': '仓库名称', \"key\": 'name' }, { 'title': '仓库状态', \"key\": 'status' }]\n * 5.PopoVisible:是否显示气泡,默认false\n * 6.keyname:需要显示成标签的字段名\n * 7.defaultActiveKey:首次渲染需求的\n * 具体参考WarehouseManage.js\n */\nimport React, { Component } from 'react';\n// import { oberver } from 'mobx-react';\nimport { observable, action } from 'mobx';\nimport { isEmpty } from \"lodash\";\nimport './index.less';\nvar Category = (_class = (_temp = /*#__PURE__*/function (_Component) {\n  _inherits(Category, _Component);\n\n  var _super = _createSuper(Category);\n\n  _createClass(Category, [{\n    key: \"changeValue\",\n    value: function changeValue(value) {\n      this.popoValue = value;\n    }\n  }]);\n\n  function Category(props) {\n    var _this;\n\n    _classCallCheck(this, Category);\n\n    _this = _super.call(this, props);\n\n    _initializerDefineProperty(_this, \"popoValue\", _descriptor, _assertThisInitialized(_this));\n\n    _this.handleChange = function (tag, checked) {\n      var selectedTags = _this.state.selectedTags;\n\n      if (_this.state.onToggle) {\n        _this.setState({\n          selectedTags: [tag]\n        }, function () {\n          if (_this.props.onClick) {\n            _this.props.onClick(tag);\n          }\n        });\n      } else {\n        var nextSelectedTags = checked ? [tag] : selectedTags.filter(function (t) {\n          return t !== tag;\n        }); //多选\n\n        _this.setState({\n          selectedTags: nextSelectedTags\n        }, function () {\n          // console.log(this.state.selectedTags)\n          if (_this.props.onClick) {\n            _this.props.onClick(tag);\n          }\n        });\n      } // this.selectedTags = [tag]\n\n    };\n\n    _this.handleMove = function (tag, checked) {\n      // console.log(this.state.selectedTags, 11)\n      _this.changeValue(tag);\n\n      _this.setState({\n        popoContent: /*#__PURE__*/React.createElement(\"div\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 27\n          }\n        }, _this.props.PopoTitle && _this.props.PopoTitle.map(function (item, index) {\n          return (\n            /*#__PURE__*/\n            // console.log(item, index, this.state.popoValue[item['key']])\n            React.createElement(\"div\", {\n              key: index,\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 21\n              }\n            }, \" \", item['title'], \": \", _this.popoValue[item['key']])\n          );\n        }))\n      });\n    };\n\n    _this.spreadAll = function () {\n      _this.setState({\n        maskHeight: _this.categoryContent.current.offsetHeight + 'px',\n        isSpread: false\n      });\n    };\n\n    _this.hideAll = function () {\n      _this.setState({\n        maskHeight: '32px',\n        isSpread: true\n      });\n    };\n\n    _this.state = {\n      selectedTags: !isEmpty(_this.props.defaultActiveKey) ? [_this.props.defaultActiveKey] : [],\n      //激活状态的标签\n      maskHeight: \"32px\",\n      //遮罩层高度，用于遮住换行的标签，实现展开收起效果\n      isSpread: true,\n      //切换显示展开和收起\n      popoValue: {},\n      //气泡中的value\n      popoContent: \"\",\n      //气泡中的内容\n      onToggle: _this.props.notoggle || false\n    };\n    return _this;\n  } //选中标签\n\n\n  _createClass(Category, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var CheckableTag = _Tag.CheckableTag;\n      var selectedTags = this.state.selectedTags;\n      var tagsFromServer = this.props.content ? this.props.content : [];\n      var keyName = this.props.keyName ? this.props.keyName : \"\";\n      var PopoVisible = this.props.PopoVisible ? this.props.PopoVisible : false;\n\n      var otherProps = _extends({}, this.props);\n\n      this.categoryContent = React.createRef();\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"categoryLayout\",\n        style: {\n          height: this.state.maskHeight,\n          overflow: 'hidden'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(_Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(_Col, {\n        className: \"category-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"category-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }\n      }, this.props.title, \":\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"category-content\",\n        ref: this.categoryContent,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }\n      }, \" \", tagsFromServer.map(function (tag, index) {\n        return /*#__PURE__*/React.createElement(CheckableTag, Object.assign({\n          className: \"category-tag\"\n        }, otherProps, {\n          key: tag[keyName],\n          checked: selectedTags.indexOf(tag) > -1,\n          onMouseEnter: function onMouseEnter(checked) {\n            return _this2.handleMove(tag, checked);\n          },\n          onChange: function onChange(checked) {\n            return _this2.handleChange(tag, checked);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }\n        }), PopoVisible ? /*#__PURE__*/React.createElement(_Popover, {\n          content: _this2.state.popoContent,\n          trigger: \"hover\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 44\n          }\n        }, tag[keyName]) : /*#__PURE__*/React.createElement(\"span\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 42\n          }\n        }, tag[keyName]));\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"category-spread\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }\n      }, this.state.isSpread && /*#__PURE__*/React.createElement(\"span\", {\n        onClick: this.spreadAll,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 52\n        }\n      }, \"\\u5C55\\u5F00\", /*#__PURE__*/React.createElement(_Icon, {\n        type: \"down\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 85\n        }\n      })), !this.state.isSpread && /*#__PURE__*/React.createElement(\"span\", {\n        onClick: this.hideAll,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 53\n        }\n      }, \"\\u6536\\u8D77\", /*#__PURE__*/React.createElement(_Icon, {\n        type: \"up\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 84\n        }\n      }))))));\n    } //展开\n    // componentDidUpdate(a, b) {\n    //     console.log(a, b)\n    // }\n\n  }]);\n\n  return Category;\n}(Component), _temp), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"popoValue\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {};\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"changeValue\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"changeValue\"), _class.prototype)), _class);\nexport default Category;","map":{"version":3,"sources":["/Users/shoen/Desktop/设备运维前端/bl-device-manage/src/components/Category/index.js"],"names":["React","Component","observable","action","isEmpty","Category","value","popoValue","props","handleChange","tag","checked","selectedTags","state","onToggle","setState","onClick","nextSelectedTags","filter","t","handleMove","changeValue","popoContent","PopoTitle","map","item","index","spreadAll","maskHeight","categoryContent","current","offsetHeight","isSpread","hideAll","defaultActiveKey","notoggle","CheckableTag","tagsFromServer","content","keyName","PopoVisible","otherProps","createRef","height","overflow","title","indexOf"],"mappings":"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","sourcesContent":["/*\n * @Author: zhangliang\n * @Date: 2019-05-22 11:10:38\n * @Last Modified by: zhangliang\n * @Last Modified time: 2019-06-22 10:53:30\n * description:\n * 1.title:{String}传入的分类名称\n * 2.content:{Array}传入所有的标签内容\n * 3.onClick:点击标签时所调用的方法,父组件通过接参可以获取到点击的对象\n * 4.PopoTitle：气泡内的标题和key,例如PopoTitle = [{ 'title': '仓库名称', \"key\": 'name' }, { 'title': '仓库状态', \"key\": 'status' }]\n * 5.PopoVisible:是否显示气泡,默认false\n * 6.keyname:需要显示成标签的字段名\n * 7.defaultActiveKey:首次渲染需求的\n * 具体参考WarehouseManage.js\n */\nimport React, { Component } from 'react';\nimport { Row, Col, Tag, Icon, Popover } from 'antd';\n// import { oberver } from 'mobx-react';\nimport { observable, action, } from 'mobx';\nimport { isEmpty } from \"lodash\";\nimport './index.less'\nclass Category extends Component {\n    @observable popoValue = {};\n    @action changeValue(value) {\n        this.popoValue = value;\n    }\n    constructor(props) {\n        super(props)\n        this.state = {\n            selectedTags: !isEmpty(this.props.defaultActiveKey) ? [this.props.defaultActiveKey] : [],//激活状态的标签\n            maskHeight: \"32px\",//遮罩层高度，用于遮住换行的标签，实现展开收起效果\n            isSpread: true,//切换显示展开和收起\n            popoValue: {},//气泡中的value\n            popoContent: \"\",//气泡中的内容\n            onToggle: this.props.notoggle || false\n        }\n    }\n    //选中标签\n    handleChange = (tag, checked) => {\n        const { selectedTags } = this.state;\n        if (this.state.onToggle) {\n            this.setState({ selectedTags: [tag] }, () => {\n                if (this.props.onClick) {\n                    this.props.onClick(tag)\n                }\n            });\n        } else {\n            const nextSelectedTags = checked ? [tag] : selectedTags.filter(t => t !== tag);//多选\n            this.setState({ selectedTags: nextSelectedTags }, () => {\n                // console.log(this.state.selectedTags)\n                if (this.props.onClick) {\n                    this.props.onClick(tag)\n                }\n            });\n        }\n\n        // this.selectedTags = [tag]\n\n    }\n    //滑入标签\n    handleMove = (tag, checked) => {\n        // console.log(this.state.selectedTags, 11)\n        this.changeValue(tag);\n        this.setState({\n            popoContent: (<div>{\n                this.props.PopoTitle && this.props.PopoTitle.map((item, index) => (\n                    // console.log(item, index, this.state.popoValue[item['key']])\n                    <div key={index}> {item['title']}: {this.popoValue[item['key']]}</div>\n                )\n                )\n            }</div>)\n        });\n    }\n    render() {\n        const CheckableTag = Tag.CheckableTag;\n        const { selectedTags } = this.state;\n        const tagsFromServer = this.props.content ? this.props.content : []\n        const keyName = this.props.keyName ? this.props.keyName : \"\"\n        const PopoVisible = this.props.PopoVisible ? this.props.PopoVisible : false\n        const { ...otherProps } = this.props;\n\n        this.categoryContent = React.createRef()\n        return <div className='categoryLayout' style={{ height: (this.state.maskHeight), overflow: 'hidden' }}>\n            <Row>\n                <Col className='category-box'>\n                    <div className='category-title'>{this.props.title}:</div>\n                    <div className='category-content' ref={this.categoryContent}> {tagsFromServer.map((tag, index) => (\n                        <CheckableTag\n                            className='category-tag'\n                            {...otherProps}\n                            key={tag[keyName]}\n                            checked={selectedTags.indexOf(tag) > -1}\n                            onMouseEnter={checked => this.handleMove(tag, checked)}\n                            onChange={checked => this.handleChange(tag, checked)}\n                        >\n                            {/* {console.log(toJS(selectedTags),selectedTags.indexOf(tag) > -1)} */}\n                            {PopoVisible ? <Popover content={this.state.popoContent} trigger=\"hover\">\n                                {tag[keyName]}\n                            </Popover> : <span>{tag[keyName]}</span>}\n                        </CheckableTag>\n                    ))}</div>\n                    <div className='category-spread' >\n                        {\n                            this.state.isSpread && <span onClick={this.spreadAll}>展开<Icon type=\"down\" /></span>\n                        }\n                        {\n                            !this.state.isSpread && <span onClick={this.hideAll}>收起<Icon type=\"up\" /></span>\n                        }\n                    </div>\n                </Col>\n            </Row>\n        </div>\n    }\n    //展开\n    spreadAll = () => {\n        this.setState({\n            maskHeight: this.categoryContent.current.offsetHeight + 'px',\n            isSpread: false\n        })\n    }\n    //收起\n    hideAll = () => {\n        this.setState({\n            maskHeight: '32px',\n            isSpread: true\n        })\n    }\n    // componentDidUpdate(a, b) {\n    //     console.log(a, b)\n    // }\n}\nexport default Category;"]},"metadata":{},"sourceType":"module"}