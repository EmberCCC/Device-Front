{"ast":null,"code":"import \"antd/lib/empty/style\";\nimport _Empty from \"antd/lib/empty\";\nimport _classCallCheck from \"D:\\\\GGdownload\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\GGdownload\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\GGdownload\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\GGdownload\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\GGdownload\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport \"antd/lib/tabs/style\";\nimport _Tabs from \"antd/lib/tabs\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"D:\\\\GGdownload\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\src\\\\layouts\\\\WorkManage\\\\index.js\";\n\nimport React from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { toJS } from 'mobx';\nimport ListPage from './ListPage';\nimport HistoryPage from './HistoryPage';\nimport OperatePage from './OperatePage';\nimport WorkDaily from './WorkDaily';\nimport { isEmpty } from 'lodash';\nimport { work_ChildrenMenu } from 'constants/configs';\nimport './index.less';\nimport { initSearchQuery } from 'utils/dataTools';\nvar TabPane = _Tabs.TabPane;\nvar WorkPage = (_dec = inject('WorkStore', 'DeviceDefineStore'), _dec(_class = observer(_class = (_temp =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(WorkPage, _React$Component);\n\n  function WorkPage(props) {\n    var _this;\n\n    _classCallCheck(this, WorkPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WorkPage).call(this, props));\n\n    _this.onStepChange = function (step) {\n      _this.store.current = step;\n      _this.store.searchCondition = {};\n\n      _this.props.history.push({\n        search: '?tab=' + step\n      });\n\n      _this.store.getWork({});\n    };\n\n    _this.store = _this.props.WorkStore;\n    _this.state = {\n      workTabList: []\n    };\n    return _this;\n  }\n\n  _createClass(WorkPage, [{\n    key: \"render\",\n    value: function render() {\n      var _toJS = toJS(this.store),\n          current = _toJS.current,\n          workerAuth = _toJS.workerAuth;\n\n      return React.createElement(\"div\", {\n        className: \"define-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27\n        },\n        __self: this\n      }, !workerAuth.admin && !workerAuth.repair ? React.createElement(_Empty, {\n        style: {\n          marginTop: '100px'\n        },\n        image: \"https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original\",\n        imageStyle: {\n          height: 100\n        },\n        description: React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36\n          },\n          __self: this\n        }, \"\\u60A8\\u6CA1\\u6709\\u5F53\\u524D\\u83DC\\u5355\\u7684\\u6743\\u9650\\uFF0C\\u8BF7\\u8054\\u7CFB\\u7CFB\\u7EDF\\u7BA1\\u7406\\u5458\\u7533\\u8BF7\\u3002\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }) : !this.store.isDaily ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, React.createElement(_Tabs, {\n        activeKey: \"\".concat(current),\n        onChange: this.onStepChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, React.createElement(TabPane, {\n        tab: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"iconfont icon-task1 icon-spacing\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }), \"\\u5F85\\u529E\\u4EFB\\u52A1\"),\n        key: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }), React.createElement(TabPane, {\n        tab: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"iconfont icon-mission icon-spacing\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }), \"\\u5DE5\\u5355\\u660E\\u7EC6\"),\n        key: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }), React.createElement(TabPane, {\n        tab: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"iconfont icon-list icon-spacing\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }), \"\\u5DE5\\u5355\\u62A5\\u544A\"),\n        key: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"tab-content-bg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, current === '1' ? React.createElement(OperatePage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }) : current === '2' ? React.createElement(ListPage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }) : React.createElement(HistoryPage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }))) : React.createElement(WorkDaily, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.store.current = '1';\n      this.store.isDaily = false;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var query = {};\n\n      if (this.props.location.search) {\n        query = initSearchQuery(this.props.location.search);\n      }\n\n      this.store.getWorkAuth().then(function () {\n        var workTabList = !isEmpty(_this2.store.workerAuth) ? _this2.store.workerAuth.admin ? work_ChildrenMenu : work_ChildrenMenu.splice(1) : work_ChildrenMenu;\n\n        _this2.setState({\n          workTabList: workTabList\n        });\n\n        if (_this2.store.workerAuth.admin) {\n          _this2.store.current = '1';\n        } else {\n          _this2.store.current = '2';\n        }\n\n        if (_this2.props.location.search) {\n          _this2.store.current = query.tab;\n\n          if (query.workNo) {\n            _this2.store.searchCondition = {\n              workNo: query.workNo\n            };\n          }\n        }\n\n        if (query.workNo) {\n          _this2.props.history.push({\n            search: '?tab=' + _this2.store.current + '&workNo=' + query.workNo\n          });\n\n          _this2.store.getWork({\n            workNo: query.workNo\n          });\n        } else {\n          _this2.props.history.push({\n            search: '?tab=' + _this2.store.current\n          });\n\n          _this2.store.getWork({});\n        }\n      });\n      this.props.DeviceDefineStore.getSelectType();\n      this.props.DeviceDefineStore.getUsersByRoles();\n    }\n  }]);\n\n  return WorkPage;\n}(React.Component), _temp)) || _class) || _class);\nexport default WorkPage;","map":{"version":3,"sources":["D:\\GGdownload\\设备运维前端\\bl-device-manage\\src\\layouts\\WorkManage\\index.js"],"names":["React","inject","observer","toJS","ListPage","HistoryPage","OperatePage","WorkDaily","isEmpty","work_ChildrenMenu","initSearchQuery","TabPane","WorkPage","props","onStepChange","step","store","current","searchCondition","history","push","search","getWork","WorkStore","state","workTabList","workerAuth","admin","repair","marginTop","height","isDaily","query","location","getWorkAuth","then","splice","setState","tab","workNo","DeviceDefineStore","getSelectType","getUsersByRoles","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { inject,observer } from 'mobx-react'\nimport { toJS } from 'mobx'\nimport { Tabs,Empty } from 'antd'\nimport ListPage from './ListPage'\nimport HistoryPage from './HistoryPage'\nimport OperatePage from './OperatePage'\nimport WorkDaily from './WorkDaily';\nimport { isEmpty } from 'lodash';\nimport { work_ChildrenMenu } from 'constants/configs';\nimport './index.less'\nimport { initSearchQuery } from 'utils/dataTools';\n\nconst { TabPane } = Tabs;\n@inject('WorkStore','DeviceDefineStore')\n@observer\nclass WorkPage extends React.Component{\n  constructor(props){\n    super(props)\n    this.store = this.props.WorkStore;\n    this.state = {\n      workTabList:[]\n    }\n  }\n  render(){\n    const { current,workerAuth } = toJS(this.store);\n    return <div className='define-container'>\n      {\n        !workerAuth.admin && !workerAuth.repair ? <Empty\n          style={{marginTop:'100px'}}\n          image=\"https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original\"\n          imageStyle={{\n            height: 100,\n          }}\n          description={\n            <span>\n              您没有当前菜单的权限，请联系系统管理员申请。\n            </span>\n          }\n\n        /> : (!this.store.isDaily ? <React.Fragment>\n\n          <Tabs activeKey={`${current}`} onChange={this.onStepChange}>\n             <TabPane tab={<div><i className=\"iconfont icon-task1 icon-spacing\"></i>待办任务</div>} key=\"1\" />\n             <TabPane tab={<div><i className=\"iconfont icon-mission icon-spacing\"></i>工单明细</div>} key=\"2\" />\n             <TabPane tab={<div><i className=\"iconfont icon-list icon-spacing\"></i>工单报告</div>} key=\"3\" />\n          </Tabs>\n\n           {/* \n          <Tabs activeKey={`${current}`} onChange={this.onStepChange}>\n            {\n              this.state.workTabList.map(item=>{\n                return <TabPane key={item.id}  tab={item.name}>\n                \n                </TabPane>\n              })\n            }\n          </Tabs>\n          */}\n          <div className=\"tab-content-bg\">\n          { current === '1' ? <OperatePage /> : current === '2' ? <ListPage /> : <HistoryPage /> }\n          </div>\n        </React.Fragment> : <WorkDaily />)\n      }\n    </div>;\n  }\n  onStepChange = (step) => {\n    this.store.current = step;\n    this.store.searchCondition = {}\n    this.props.history.push({search:'?tab='+step})\n    this.store.getWork({})\n  }\n  componentWillUnmount(){\n    this.store.current = '1';\n    this.store.isDaily = false;\n  }\n  componentDidMount(){\n    let query = {}\n    if(this.props.location.search){\n      query = initSearchQuery(this.props.location.search)\n    }\n    this.store.getWorkAuth().then(()=>{\n      const workTabList = !isEmpty(this.store.workerAuth) ? (this.store.workerAuth.admin ? work_ChildrenMenu : work_ChildrenMenu.splice(1)) : work_ChildrenMenu;\n      this.setState({\n        workTabList\n      })\n      if(this.store.workerAuth.admin){\n        this.store.current = '1'\n      }else{\n        this.store.current = '2'\n      }\n      if(this.props.location.search){\n        this.store.current = query.tab;\n        if(query.workNo){\n          this.store.searchCondition = {\n            workNo : query.workNo\n          };\n        }\n      }\n      if(query.workNo){\n        this.props.history.push({search:'?tab='+this.store.current+'&workNo='+query.workNo})\n        this.store.getWork({workNo:query.workNo})\n      }else{\n        this.props.history.push({search:'?tab='+this.store.current})\n        this.store.getWork({});\n      }\n    });\n    this.props.DeviceDefineStore.getSelectType()\n\t\tthis.props.DeviceDefineStore.getUsersByRoles()\n  }\n\n}\n\nexport default WorkPage"]},"metadata":{},"sourceType":"module"}