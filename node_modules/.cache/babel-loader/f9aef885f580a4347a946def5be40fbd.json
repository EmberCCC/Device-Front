{"ast":null,"code":"import \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/tag/style\";\nimport _Tag from \"antd/lib/tag\";\nimport \"antd/lib/menu/style\";\nimport _Menu from \"antd/lib/menu\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport _objectSpread from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/layout/style\";\nimport _Layout from \"antd/lib/layout\";\nvar _jsxFileName = \"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\layouts\\\\TableEdit\\\\index.js\";\n\n/*\r\n * @Author: your name\r\n * @Date: 2022-03-22 09:57:59\r\n * @LastEditTime: 2022-04-10 18:29:44\r\n * @LastEditors: Please set LastEditors\r\n * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n * @FilePath: \\bl-device-manage\\src\\layouts\\TableEdit\\index.js\r\n */\nimport React, { useEffect, useState } from 'react';\n// Default SortableJS\nimport Sortable from 'react-sortablejs';\nimport _ from 'lodash';\nimport uniqueId from 'lodash/uniqueId';\nimport update from 'immutability-helper';\nimport { indexToArray, getItem, setInfo, isPath, getCloneItem, itemRemove, itemAdd, changeObj } from '../../utils/loashTools';\nimport { formItemData, GlobalComponent } from './config';\nimport EditableTable from './EditableTable/index';\nimport './index.css';\nimport { NavLink } from 'react-router-dom';\nimport { MenuObj } from 'constants/configs';\nimport { toJS } from 'mobx';\nimport { checkCurrentMenu, isDataExist } from 'utils/dataTools';\nimport * as services from '../../services/home';\nimport { typeName } from 'constants/status_constant';\nvar Header = _Layout.Header,\n    Sider = _Layout.Sider,\n    Content = _Layout.Content;\nvar Option = _Select.Option;\nvar sortableOption = {\n  animation: 20,\n  fallbackOnBody: true,\n  swapThreshold: 0.65,\n  group: {\n    name: 'formItem',\n    pull: true,\n    put: true\n  }\n};\n\nfunction EditPage(props) {\n  var _useState = useState(Array),\n      _useState2 = _slicedToArray(_useState, 2),\n      itemData = _useState2[0],\n      setItemData = _useState2[1]; // 组件数据\n\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isShowModal = _useState4[0],\n      setIsShowModal = _useState4[1]; // 弹框是否显示\n\n\n  var _useState5 = useState(String),\n      _useState6 = _slicedToArray(_useState5, 2),\n      curItemKey = _useState6[0],\n      setCurItemKey = _useState6[1]; // 当前选中组件的Key\n\n\n  var _useState7 = useState(String),\n      _useState8 = _slicedToArray(_useState7, 2),\n      curItemName = _useState8[0],\n      setCurItemName = _useState8[1]; // 当前选中组件的Name\n\n\n  var _useState9 = useState(String),\n      _useState10 = _slicedToArray(_useState9, 2),\n      curItemType = _useState10[0],\n      setCurItemType = _useState10[1]; // 当前选中组件的Type\n\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      isChoose = _useState12[0],\n      setIsChoose = _useState12[1]; // 组件是否处于选中状态\n\n\n  var columns = props.location.state.item;\n  var secondFormId = props.location.state.secondFormId;\n  var actionId = props.location.state.selectedKeys[0];\n  var menuObj = toJS(MenuObj.leafMenuModels);\n  var current = checkCurrentMenu({\n    menuObj: menuObj,\n    actionId: actionId\n  });\n  var firstFormId = current.currentMenu[0].id;\n  itemDataForMe = [];\n\n  var handleSubmit = function handleSubmit() {};\n\n  var handlePreview = function handlePreview() {\n    console.log('itemData:' + JSON.stringify(itemData));\n    setIsChoose(false);\n    setIsShowModal(true);\n  };\n\n  var handleLabelChange = function handleLabelChange(e) {\n    var val = e.target.value;\n    columns[0].properties[curItemKey].name = val;\n    setItemData(changeField());\n    console.log(itemData);\n    setCurItemName(val); // itemData[curItemKey].label = val;\n  };\n\n  var handleDel = function handleDel() {\n    var newTreeData = itemRemove(curItemKey, itemData);\n    setCurItemKey('');\n    setCurItemName('');\n    setCurItemType('');\n    setItemData(_toConsumableArray(newTreeData));\n    columns = itemData;\n  };\n\n  var sortableChoose = function sortableChoose(e) {\n    setIsChoose(true);\n    var curKey = e.item.getAttribute('data-id');\n    var curName = e.item.firstChild.innerText;\n    var curType = e.item.getAttribute('type');\n    setCurItemKey(curKey);\n    setCurItemName(curName);\n    setCurItemType(curType);\n  }; // 拖拽的添加方法\n\n\n  var sortableAdd = function sortableAdd(e) {\n    // 组件名或路径\n    var nameOrIndex = e.clone.getAttribute('data-id'); // 父节点路径\n\n    var parentPath = e.path[1].getAttribute('data-id'); // 拖拽元素的目标路径\n\n    var newIndex = e.newIndex; // 新路径 为根节点时直接使用index\n\n    var newPath = parentPath ? \"\".concat(parentPath, \"-\").concat(newIndex) : newIndex; // 判断是否为路径 路径执行移动，非路径为新增\n\n    if (isPath(nameOrIndex)) {\n      // 旧的路径index\n      var oldIndex = nameOrIndex; // 克隆要移动的元素\n\n      var dragItem = getCloneItem(oldIndex, itemDataForMe); // 比较路径的上下位置 先执行靠下的数据 再执行靠上数据\n\n      if (indexToArray(oldIndex) > indexToArray(newPath)) {\n        // 删除元素 获得新数据\n        var newTreeData = itemRemove(oldIndex, itemDataForMe); // 添加拖拽元素\n\n        newTreeData = itemAdd(newPath, newTreeData, dragItem); // 更新视图\n\n        columns = [];\n        itemDataForMe.map(function (element, index) {\n          columns.push(changeObj(firstFormId, 0, element, index));\n        });\n        console.log(itemDataForMe);\n        return;\n      } // 添加拖拽元素\n\n\n      var newData = itemAdd(newPath, itemDataForMe, dragItem); // 删除元素 获得新数据\n\n      newData = itemRemove(oldIndex, newData);\n      itemDataForMe = itemData;\n      columns = [];\n      itemDataForMe.map(function (element, index) {\n        columns.push(changeObj(firstFormId, 0, element, index));\n      });\n      console.log(itemDataForMe);\n      return;\n    } // 新增流程 创建元素 => 插入元素 => 更新视图\n\n\n    var id = nameOrIndex;\n\n    var newItem = _.cloneDeep(formItemData.find(function (item) {\n      return item.name === id;\n    })); // 为容器或者弹框时增加子元素\n\n\n    if (newItem.name === 'Containers') {\n      var ComponentsInfo = _.cloneDeep(GlobalComponent[newItem.name]); // 判断是否包含默认数据\n\n\n      newItem.children = [ComponentsInfo];\n    }\n\n    var Data = itemAdd(newPath, itemDataForMe, newItem);\n    columns = [];\n    itemDataForMe.map(function (element, index) {\n      columns.push(changeObj(firstFormId, 0, element, index));\n    });\n    console.log(itemDataForMe);\n    setItemData(function (itemDataForMe) {\n      console.log(itemDataForMe);\n      var newArr = itemDataForMe;\n      console.log(newArr);\n      return newArr;\n    });\n    console.log(itemDataForMe);\n  }; // 拖拽的排序方法\n\n\n  var sortableUpdate = function sortableUpdate(e) {\n    // 交换数组\n    var newIndex = e.newIndex,\n        oldIndex = e.oldIndex; // 父节点路径\n\n    var parentPath = e.path[1].getAttribute('data-id'); // 父元素 根节点时直接调用data\n\n    var parent = parentPath ? getItem(parentPath, itemDataForMe) : itemDataForMe; // 当前拖拽元素\n\n    var dragItem = parent[oldIndex]; // 更新后的父节点\n\n    parent = update(parent, {\n      $splice: [[oldIndex, 1], [newIndex, 0, dragItem]]\n    }); // 最新的数据 根节点时直接调用data\n\n    var Data = parentPath ? setInfo(parentPath, itemDataForMe, parent) : parent; // 调用父组件更新方法\n\n    console.log(columns);\n    console.log(itemDataForMe);\n    columns = [];\n    itemDataForMe.map(function (element, index) {\n      columns.push(changeObj(firstFormId, 0, element, index));\n    });\n  }; //转换为所需对象\n\n\n  var changeField = function changeField() {\n    var obj = [];\n\n    if (columns.length != 0) {\n      var itemData1 = columns.filter(function (txt) {\n        return txt.secondFormId == secondFormId;\n      });\n      toJS(itemData1);\n      var properties = {};\n      properties = toJS(itemData1[0].properties);\n      properties.forEach(function (element) {\n        if (element.propertyId != undefined) {\n          var ele = {};\n          ele.label = element.name;\n          ele.attr = element.others;\n          ele.propertyId = element.propertyId;\n          ele.name = typeName[element.typeId];\n          obj.push(ele);\n        }\n\n        obj.push(element);\n      });\n    }\n\n    itemDataForMe = obj;\n    return obj;\n  }; // 递归函数\n\n\n  var loop = function loop(arr, index) {\n    console.log(itemDataForMe);\n    arr = changeField();\n    return arr.map(function (item, i) {\n      var indexs = index === '' ? String(i) : \"\".concat(index, \"-\").concat(i);\n\n      if (item) {\n        if (item.children) {\n          return React.createElement(\"div\", Object.assign({}, item.attr, {\n            \"data-id\": indexs,\n            key: indexs,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 223\n            },\n            __self: this\n          }), React.createElement(Sortable, {\n            key: uniqueId(),\n            style: {\n              minHeight: 100,\n              margin: 10\n            },\n            ref: function ref(c) {\n              return c && c.sortable;\n            },\n            options: _objectSpread({}, sortableOption, {\n              onUpdate: function onUpdate(e) {\n                return sortableUpdate(e);\n              },\n              onAdd: function onAdd(e) {\n                return sortableAdd(e);\n              },\n              onChoose: function onChoose(e) {\n                return sortableChoose(e);\n              },\n              onSort: function onSort(e) {\n                return setIsChoose(false);\n              }\n            }),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 224\n            },\n            __self: this\n          }, loop(item.children, indexs)));\n        }\n\n        var ComponentInfo = GlobalComponent[item.name];\n        return React.createElement(\"div\", {\n          \"data-id\": indexs,\n          key: indexs,\n          type: item.name,\n          className: \"formItemStyle\",\n          style: isChoose && indexs === curItemKey ? {\n            border: '1px solid #FF3333'\n          } : {},\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243\n          },\n          __self: this\n        }, item.name !== 'Divider' && React.createElement(\"div\", {\n          className: \"formItemLabel\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 252\n          },\n          __self: this\n        }, isChoose ? indexs === curItemKey ? curItemName : item.label : item.label), renderDiffComponents(item, indexs, ComponentInfo));\n      } else {\n        return null;\n      }\n    });\n  };\n\n  var renderDiffComponents = function renderDiffComponents(item, indexs, ComponentInfo) {\n    switch (item.name) {\n      case 'Divider':\n        return React.createElement(ComponentInfo, Object.assign({\n          key: indexs\n        }, item.attr, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269\n          },\n          __self: this\n        }));\n\n      case 'Select':\n        return React.createElement(ComponentInfo, {\n          key: indexs,\n          defaultValue: item.attr.value,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272\n          },\n          __self: this\n        }, item.attr.options.map(function (subItem) {\n          return React.createElement(Option, {\n            key: subItem.key,\n            value: subItem.value + '',\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 274\n            },\n            __self: this\n          }, subItem.label);\n        }));\n\n      default:\n        return React.createElement(ComponentInfo, Object.assign({\n          key: indexs\n        }, item.attr, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 279\n          },\n          __self: this\n        }));\n    }\n  };\n\n  var getDataSource = function getDataSource(options) {\n    itemData[curItemKey].attr.options = _toConsumableArray(options);\n    setItemData(_toConsumableArray(itemData));\n  };\n\n  var save = function save(params) {\n    _Modal.confirm({\n      title: '提示',\n      content: '是否修改该表单',\n      okText: '确认',\n      cancelText: '取消',\n      onOk: function onOk() {\n        try {\n          var res = services.putRequest(services.requestList.updataField, params);\n          console.log(params);\n\n          if (isDataExist(res)) {\n            _message.success('修改成功');\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      },\n      onCancel: function onCancel() {\n        console.log('Cancel');\n      }\n    });\n  };\n\n  var saveForm = function saveForm() {\n    var text = [];\n    itemData.map(function (element, index) {\n      text.push(changeObj(firstFormId, 0, element, index));\n    });\n    console.log(text);\n    save(text);\n  };\n\n  return React.createElement(_Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323\n    },\n    __self: this\n  }, React.createElement(Header, {\n    className: \"header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324\n    },\n    __self: this\n  }, React.createElement(NavLink, {\n    to: \"/basic\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325\n    },\n    __self: this\n  }, React.createElement(_Button, {\n    type: \"dashed\",\n    class: \"backButton\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325\n    },\n    __self: this\n  }, \"Back\")), React.createElement(_Menu, {\n    theme: \"light\",\n    mode: \"horizontal\",\n    defaultSelectedKeys: ['2'],\n    justify: \"center\",\n    class: \"headerMenu\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326\n    },\n    __self: this\n  }, React.createElement(_Menu.Item, {\n    key: \"1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327\n    },\n    __self: this\n  }, \"nav 1\"), React.createElement(_Menu.Item, {\n    key: \"2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328\n    },\n    __self: this\n  }, \"nav 2\"), React.createElement(_Menu.Item, {\n    key: \"3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329\n    },\n    __self: this\n  }, \"nav 3\")), React.createElement(_Button, {\n    onClick: saveForm,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331\n    },\n    __self: this\n  }, \"\\u4FDD\\u5B58\")), React.createElement(_Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333\n    },\n    __self: this\n  }, React.createElement(Sider, {\n    width: '15%',\n    style: {\n      height: '100%',\n      borderLeft: 10,\n      minHeight: 840,\n      marginTop: 20,\n      textAlign: 'center'\n    },\n    theme: \"light\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"textHead\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335\n    },\n    __self: this\n  }, \"\\u7EC4\\u4EF6\\u5217\\u8868\"), React.createElement(Sortable, {\n    options: {\n      group: {\n        name: 'formItem',\n        pull: 'clone',\n        put: false\n      },\n      sort: false\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336\n    },\n    __self: this\n  }, formItemData.map(function (item) {\n    return React.createElement(\"div\", {\n      \"data-id\": item.name,\n      key: item.name,\n      style: {\n        marginTop: 10\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }, React.createElement(_Tag, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }, item.label + '-' + item.name));\n  }))), React.createElement(_Layout, {\n    style: {\n      padding: '0 24px 24px',\n      marginTop: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359\n    },\n    __self: this\n  }, React.createElement(Content, {\n    className: \"site-layout-background\",\n    style: {\n      padding: 24,\n      margin: 0,\n      minHeight: 300\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360\n    },\n    __self: this\n  }, React.createElement(Sortable, {\n    className: \"formContent\",\n    ref: function ref(c) {\n      return c && c.sortable;\n    },\n    options: _objectSpread({}, sortableOption, {\n      onUpdate: function onUpdate(e) {\n        return sortableUpdate(e);\n      },\n      onAdd: function onAdd(e) {\n        return sortableAdd(e);\n      },\n      onChoose: function onChoose(e) {\n        return sortableChoose(e);\n      },\n      onSort: function onSort(e) {\n        return setIsChoose(false);\n      }\n    }),\n    key: uniqueId(),\n    style: {\n      minHeight: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368\n    },\n    __self: this\n  }, loop(itemData, ''))), React.createElement(Sider, {\n    theme: \"light\",\n    width: '20%',\n    style: {\n      textAlign: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"textHead\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385\n    },\n    __self: this\n  }, \"\\u5B57\\u6BB5\\u8BBE\\u7F6E\"), React.createElement(_Form, {\n    className: \"itemForm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386\n    },\n    __self: this\n  }, React.createElement(_Form.Item, {\n    label: \"\\u7EC4\\u4EF6Key\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387\n    },\n    __self: this\n  }, React.createElement(_Input, {\n    value: curItemKey,\n    disabled: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388\n    },\n    __self: this\n  })), React.createElement(_Form.Item, {\n    label: \"\\u6807\\u7B7E\\u540D\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390\n    },\n    __self: this\n  }, React.createElement(_Input, {\n    value: curItemName,\n    disabled: !isChoose,\n    onChange: handleLabelChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391\n    },\n    __self: this\n  })), ['CheckboxGroup', 'RadioGroup', 'Select'].includes(curItemType) && React.createElement(EditableTable, {\n    getDataSource: getDataSource,\n    curItemKey: curItemKey,\n    options: itemData[curItemKey].attr.options,\n    disabled: !isChoose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395\n    },\n    __self: this\n  })), React.createElement(_Button, {\n    className: \"delBtn\",\n    onClick: handleDel,\n    disabled: !isChoose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403\n    },\n    __self: this\n  }, \"\\u5220\\u9664\")))));\n}\n\nexport default EditPage;","map":{"version":3,"sources":["F:\\documents\\bl-device-manage-test\\src\\layouts\\TableEdit\\index.js"],"names":["React","useEffect","useState","Sortable","_","uniqueId","update","indexToArray","getItem","setInfo","isPath","getCloneItem","itemRemove","itemAdd","changeObj","formItemData","GlobalComponent","EditableTable","NavLink","MenuObj","toJS","checkCurrentMenu","isDataExist","services","typeName","Header","Sider","Content","Option","sortableOption","animation","fallbackOnBody","swapThreshold","group","name","pull","put","EditPage","props","Array","itemData","setItemData","isShowModal","setIsShowModal","String","curItemKey","setCurItemKey","curItemName","setCurItemName","curItemType","setCurItemType","isChoose","setIsChoose","columns","location","state","item","secondFormId","actionId","selectedKeys","menuObj","leafMenuModels","current","firstFormId","currentMenu","id","itemDataForMe","handleSubmit","handlePreview","console","log","JSON","stringify","handleLabelChange","e","val","target","value","properties","changeField","handleDel","newTreeData","sortableChoose","curKey","getAttribute","curName","firstChild","innerText","curType","sortableAdd","nameOrIndex","clone","parentPath","path","newIndex","newPath","oldIndex","dragItem","map","element","index","push","newData","newItem","cloneDeep","find","ComponentsInfo","children","Data","newArr","sortableUpdate","parent","$splice","obj","length","itemData1","filter","txt","forEach","propertyId","undefined","ele","label","attr","others","typeId","loop","arr","i","indexs","minHeight","margin","c","sortable","onUpdate","onAdd","onChoose","onSort","ComponentInfo","border","renderDiffComponents","options","subItem","key","getDataSource","save","params","confirm","title","content","okText","cancelText","onOk","res","putRequest","requestList","updataField","success","error","onCancel","saveForm","text","height","borderLeft","marginTop","textAlign","sort","padding","includes"],"mappings":"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","sourcesContent":["/*\r\n * @Author: your name\r\n * @Date: 2022-03-22 09:57:59\r\n * @LastEditTime: 2022-04-10 18:29:44\r\n * @LastEditors: Please set LastEditors\r\n * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n * @FilePath: \\bl-device-manage\\src\\layouts\\TableEdit\\index.js\r\n */\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Tag, Layout, Button, Modal, message, Form, Input, Select, Menu } from 'antd';\r\n// Default SortableJS\r\nimport Sortable from 'react-sortablejs';\r\nimport _ from 'lodash';\r\nimport uniqueId from 'lodash/uniqueId';\r\nimport update from 'immutability-helper';\r\nimport { indexToArray, getItem, setInfo, isPath, getCloneItem, itemRemove, itemAdd, changeObj } from '../../utils/loashTools';\r\nimport { formItemData, GlobalComponent } from './config';\r\nimport EditableTable from './EditableTable/index';\r\nimport './index.css'\r\nimport { NavLink } from 'react-router-dom';\r\nimport { MenuObj } from 'constants/configs';\r\nimport { toJS } from 'mobx';\r\nimport { checkCurrentMenu, isDataExist } from 'utils/dataTools';\r\nimport * as services from '../../services/home';\r\nimport { typeName } from 'constants/status_constant';\r\n\r\n\r\nconst { Header, Sider, Content } = Layout;\r\nconst { Option } = Select;\r\nconst sortableOption = {\r\n  animation: 20,\r\n  fallbackOnBody: true,\r\n  swapThreshold: 0.65,\r\n  group: {\r\n    name: 'formItem',\r\n    pull: true,\r\n    put: true,\r\n  },\r\n};\r\n\r\n\r\nfunction EditPage(props) {\r\n\r\n  const [itemData, setItemData] = useState(Array);                  // 组件数据\r\n  const [isShowModal, setIsShowModal] = useState(false);            // 弹框是否显示\r\n  const [curItemKey, setCurItemKey] = useState(String);             // 当前选中组件的Key\r\n  const [curItemName, setCurItemName] = useState(String);           // 当前选中组件的Name\r\n  const [curItemType, setCurItemType] = useState(String);           // 当前选中组件的Type\r\n  const [isChoose, setIsChoose] = useState(false);                  // 组件是否处于选中状态\r\n  let columns = props.location.state.item\r\n  let secondFormId = props.location.state.secondFormId\r\n  let actionId = props.location.state.selectedKeys[0];\r\n  let menuObj = toJS(MenuObj.leafMenuModels);\r\n  let current = checkCurrentMenu({ menuObj, actionId });\r\n  let firstFormId = current.currentMenu[0].id;\r\n  itemDataForMe = []\r\n\r\n  const handleSubmit = () => {\r\n\r\n  };\r\n\r\n  const handlePreview = () => {\r\n    console.log('itemData:' + JSON.stringify(itemData))\r\n    setIsChoose(false)\r\n    setIsShowModal(true)\r\n  };\r\n\r\n  const handleLabelChange = (e) => {\r\n    const val = e.target.value;\r\n    columns[0].properties[curItemKey].name = val\r\n    setItemData(changeField())\r\n    console.log(itemData);\r\n    setCurItemName(val);\r\n    // itemData[curItemKey].label = val;\r\n  }\r\n\r\n  const handleDel = () => {\r\n    let newTreeData = itemRemove(curItemKey, itemData);\r\n    setCurItemKey('');\r\n    setCurItemName('');\r\n    setCurItemType('');\r\n    setItemData([...newTreeData])\r\n    columns = itemData\r\n  }\r\n\r\n  const sortableChoose = (e) => {\r\n    setIsChoose(true);\r\n    const curKey = e.item.getAttribute('data-id');\r\n    const curName = e.item.firstChild.innerText;\r\n    const curType = e.item.getAttribute('type');\r\n    setCurItemKey(curKey);\r\n    setCurItemName(curName);\r\n    setCurItemType(curType)\r\n  };\r\n\r\n  // 拖拽的添加方法\r\n  const sortableAdd = e => {\r\n    // 组件名或路径\r\n    const nameOrIndex = e.clone.getAttribute('data-id');\r\n    // 父节点路径\r\n    const parentPath = e.path[1].getAttribute('data-id');\r\n    // 拖拽元素的目标路径\r\n    const { newIndex } = e;\r\n    // 新路径 为根节点时直接使用index\r\n    const newPath = parentPath ? `${parentPath}-${newIndex}` : newIndex;\r\n    // 判断是否为路径 路径执行移动，非路径为新增\r\n    if (isPath(nameOrIndex)) {\r\n      // 旧的路径index\r\n      const oldIndex = nameOrIndex;\r\n      // 克隆要移动的元素\r\n      const dragItem = getCloneItem(oldIndex, itemDataForMe)\r\n      // 比较路径的上下位置 先执行靠下的数据 再执行靠上数据\r\n      if (indexToArray(oldIndex) > indexToArray(newPath)) {\r\n        // 删除元素 获得新数据\r\n        let newTreeData = itemRemove(oldIndex, itemDataForMe);\r\n        // 添加拖拽元素\r\n        newTreeData = itemAdd(newPath, newTreeData, dragItem)\r\n        // 更新视图\r\n        columns = []\r\n        itemDataForMe.map((element, index) => {\r\n          columns.push(changeObj(firstFormId, 0, element, index))\r\n        });\r\n        console.log(itemDataForMe);\r\n        return\r\n      }\r\n      // 添加拖拽元素\r\n      let newData = itemAdd(newPath, itemDataForMe, dragItem)\r\n      // 删除元素 获得新数据\r\n      newData = itemRemove(oldIndex, newData);\r\n      itemDataForMe = itemData\r\n      columns = []\r\n      itemDataForMe.map((element, index) => {\r\n        columns.push(changeObj(firstFormId, 0, element, index))\r\n      });\r\n      console.log(itemDataForMe);\r\n      return\r\n    }\r\n\r\n    // 新增流程 创建元素 => 插入元素 => 更新视图\r\n    const id = nameOrIndex\r\n    const newItem = _.cloneDeep(formItemData.find(item => (item.name === id)))\r\n    // 为容器或者弹框时增加子元素\r\n    if (newItem.name === 'Containers') {\r\n      const ComponentsInfo = _.cloneDeep(GlobalComponent[newItem.name])\r\n      // 判断是否包含默认数据\r\n      newItem.children = [ComponentsInfo]\r\n    }\r\n    let Data = itemAdd(newPath, itemDataForMe, newItem)\r\n    columns = []\r\n    itemDataForMe.map((element, index) => {\r\n      columns.push(changeObj(firstFormId, 0, element, index))\r\n    });\r\n    console.log(itemDataForMe);\r\n    setItemData(itemDataForMe => {\r\n      console.log(itemDataForMe);\r\n      let newArr = itemDataForMe\r\n      console.log(newArr);\r\n      return newArr\r\n    })\r\n    console.log(itemDataForMe);\r\n  };\r\n\r\n  // 拖拽的排序方法\r\n  const sortableUpdate = e => {\r\n    // 交换数组\r\n    const { newIndex, oldIndex } = e;\r\n    // 父节点路径\r\n    const parentPath = e.path[1].getAttribute('data-id');\r\n    // 父元素 根节点时直接调用data\r\n    let parent = parentPath ? getItem(parentPath, itemDataForMe) : itemDataForMe;\r\n    // 当前拖拽元素\r\n    const dragItem = parent[oldIndex];\r\n    // 更新后的父节点\r\n    parent = update(parent, {\r\n      $splice: [[oldIndex, 1], [newIndex, 0, dragItem]],\r\n    });\r\n    // 最新的数据 根节点时直接调用data\r\n    const Data = parentPath ? setInfo(parentPath, itemDataForMe, parent) : parent\r\n    // 调用父组件更新方法\r\n    console.log(columns);\r\n    console.log(itemDataForMe);\r\n    columns = []\r\n    itemDataForMe.map((element, index) => {\r\n      columns.push(changeObj(firstFormId, 0, element, index))\r\n    });\r\n  };\r\n  //转换为所需对象\r\n  const changeField = () => {\r\n    let obj = []\r\n    if (columns.length != 0) {\r\n      let itemData1 = columns.filter(function (txt) {\r\n        return txt.secondFormId == secondFormId\r\n      })\r\n      toJS(itemData1)\r\n      let properties = {}\r\n      properties = toJS(itemData1[0].properties)\r\n      properties.forEach(element => {\r\n        if (element.propertyId != undefined) {\r\n          let ele = {}\r\n          ele.label = element.name\r\n          ele.attr = element.others\r\n          ele.propertyId = element.propertyId\r\n          ele.name = typeName[element.typeId]\r\n          obj.push(ele)\r\n        }\r\n        obj.push(element)\r\n      });\r\n    }\r\n    itemDataForMe = obj\r\n    return obj\r\n  }\r\n  // 递归函数\r\n  const loop = (arr, index) => {\r\n    console.log(itemDataForMe);\r\n    arr = changeField()\r\n    return (\r\n      arr.map((item, i) => {\r\n        const indexs = index === '' ? String(i) : `${index}-${i}`;\r\n        if (item) {\r\n          if (item.children) {\r\n            return (\r\n              <div {...item.attr} data-id={indexs} key={indexs}>\r\n                <Sortable\r\n                  key={uniqueId()}\r\n                  style={{ minHeight: 100, margin: 10 }}\r\n                  ref={c => c && c.sortable}\r\n                  options={{\r\n                    ...sortableOption,\r\n                    onUpdate: e => sortableUpdate(e),\r\n                    onAdd: e => sortableAdd(e),\r\n                    onChoose: e => sortableChoose(e),\r\n                    onSort: e => setIsChoose(false),\r\n                  }}\r\n                >\r\n                  {loop(item.children, indexs)}\r\n                </Sortable>\r\n              </div>\r\n            )\r\n          }\r\n          const ComponentInfo = GlobalComponent[item.name]\r\n          return (\r\n            <div\r\n              data-id={indexs}\r\n              key={indexs}\r\n              type={item.name}\r\n              className='formItemStyle'\r\n              style={(isChoose && indexs === curItemKey) ? { border: '1px solid #FF3333' } : {}}\r\n            >\r\n              {\r\n                item.name !== 'Divider' &&\r\n                <div className='formItemLabel'>{isChoose ? (indexs === curItemKey ? curItemName : item.label) : item.label}</div>\r\n              }\r\n              {\r\n                renderDiffComponents(item, indexs, ComponentInfo)\r\n              }\r\n            </div>\r\n          )\r\n        } else {\r\n          return null\r\n        }\r\n      })\r\n    )\r\n  };\r\n\r\n  const renderDiffComponents = (item, indexs, ComponentInfo) => {\r\n    switch (item.name) {\r\n      case 'Divider':\r\n        return <ComponentInfo key={indexs} {...item.attr}></ComponentInfo>\r\n      case 'Select':\r\n        return (\r\n          <ComponentInfo key={indexs} defaultValue={item.attr.value}>\r\n            {\r\n              item.attr.options.map(subItem => <Option key={subItem.key} value={subItem.value + ''}>{subItem.label}</Option>)\r\n            }\r\n          </ComponentInfo>\r\n        )\r\n      default:\r\n        return <ComponentInfo key={indexs} {...item.attr} />\r\n    }\r\n  }\r\n\r\n  const getDataSource = (options) => {\r\n    itemData[curItemKey].attr.options = [...options];\r\n    setItemData([...itemData])\r\n  }\r\n\r\n  const save = (params) => {\r\n    Modal.confirm({\r\n      title: '提示',\r\n      content: '是否修改该表单',\r\n      okText: '确认',\r\n      cancelText: '取消',\r\n      onOk() {\r\n        try {\r\n          let res = services.putRequest(services.requestList.updataField, params);\r\n          console.log(params);\r\n          if (isDataExist(res)) {\r\n            message.success('修改成功')\r\n          }\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n\r\n      },\r\n      onCancel() {\r\n        console.log('Cancel');\r\n      },\r\n    });\r\n\r\n  }\r\n\r\n  const saveForm = () => {\r\n    let text = []\r\n    itemData.map((element, index) => {\r\n      text.push(changeObj(firstFormId, 0, element, index))\r\n    });\r\n    console.log(text);\r\n    save(text)\r\n\r\n  }\r\n  return (\r\n    <Layout>\r\n      <Header className=\"header\">\r\n        <NavLink to='/basic'><Button type='dashed' class='backButton'>Back</Button></NavLink>\r\n        <Menu theme=\"light\" mode=\"horizontal\" defaultSelectedKeys={['2']} justify='center' class='headerMenu'>\r\n          <Menu.Item key=\"1\">nav 1</Menu.Item>\r\n          <Menu.Item key=\"2\">nav 2</Menu.Item>\r\n          <Menu.Item key=\"3\">nav 3</Menu.Item>\r\n        </Menu>\r\n        <Button onClick={saveForm}>保存</Button>\r\n      </Header>\r\n      <Layout>\r\n        <Sider width={'15%'} style={{ height: '100%', borderLeft: 10, minHeight: 840, marginTop: 20, textAlign: 'center' }} theme='light'>\r\n          <h3 className='textHead'>组件列表</h3>\r\n          <Sortable\r\n            options={{\r\n              group: {\r\n                name: 'formItem',\r\n                pull: 'clone',\r\n                put: false,\r\n              },\r\n              sort: false,\r\n            }}\r\n          >\r\n            {\r\n              formItemData.map(item => (\r\n                <div\r\n                  data-id={item.name}\r\n                  key={item.name}\r\n                  style={{ marginTop: 10 }}\r\n                >\r\n                  <Tag>{item.label + '-' + item.name}</Tag>\r\n                </div>\r\n              ))\r\n            }\r\n          </Sortable>\r\n        </Sider>\r\n        <Layout style={{ padding: '0 24px 24px', marginTop: 20 }}>\r\n          <Content\r\n            className=\"site-layout-background\"\r\n            style={{\r\n              padding: 24,\r\n              margin: 0,\r\n              minHeight: 300,\r\n            }}\r\n          >\r\n            <Sortable\r\n              className='formContent'\r\n              ref={c => c && c.sortable}\r\n              options={{\r\n                ...sortableOption,\r\n                onUpdate: e => sortableUpdate(e),\r\n                onAdd: e => sortableAdd(e),\r\n                onChoose: e => sortableChoose(e),\r\n                onSort: e => setIsChoose(false),\r\n              }}\r\n              key={uniqueId()}\r\n              style={{ minHeight: '100%' }}\r\n            >\r\n              {loop(itemData, '')}\r\n            </Sortable>\r\n          </Content>\r\n          <Sider theme='light' width={'20%'} style={{ textAlign: 'center' }}>\r\n            <h3 className='textHead'>字段设置</h3>\r\n            <Form className='itemForm'>\r\n              <Form.Item label=\"组件Key\">\r\n                <Input value={curItemKey} disabled />\r\n              </Form.Item>\r\n              <Form.Item label=\"标签名\">\r\n                <Input value={curItemName} disabled={!isChoose} onChange={handleLabelChange} />\r\n              </Form.Item>\r\n              {\r\n                ['CheckboxGroup', 'RadioGroup', 'Select'].includes(curItemType) &&\r\n                <EditableTable\r\n                  getDataSource={getDataSource}\r\n                  curItemKey={curItemKey}\r\n                  options={itemData[curItemKey].attr.options}\r\n                  disabled={!isChoose}\r\n                />\r\n              }\r\n            </Form>\r\n            <Button className='delBtn' onClick={handleDel} disabled={!isChoose}>删除</Button>\r\n          </Sider>\r\n        </Layout>\r\n      </Layout>\r\n    </Layout>\r\n  );\r\n\r\n}\r\n\r\nexport default EditPage;"]},"metadata":{},"sourceType":"module"}