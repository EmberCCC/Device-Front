{"ast":null,"code":"import \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/switch/style\";\nimport _Switch from \"antd/lib/switch\";\nimport _toConsumableArray from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\layouts\\\\FormEdit\\\\self_item\\\\mul_tag.js\";\nvar _excluded = [\"FormStore\", \"value\", \"onChange\"];\n\n/*\r\n * @Author: EmberCCC 1810888456@qq.com\r\n * @Date: 2022-07-17 11:56:33\r\n * @LastEditors: EmberCCC 1810888456@qq.com\r\n * @LastEditTime: 2022-07-19 02:26:31\r\n * @FilePath: \\bl-device-manage-test\\src\\layouts\\FormEdit\\self_item\\mul_tag.js\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n */\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport { inject, observer } from \"mobx-react\";\nimport React, { useEffect, useState } from \"react\";\nimport './index.css';\nvar Mul_Tag = observer(function (_ref) {\n  var FormStore = _ref.FormStore,\n      value = _ref.value,\n      onChange = _ref.onChange,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var addons = rest.addons;\n\n  var _useState = useState(FormStore.subFormList),\n      _useState2 = _slicedToArray(_useState, 2),\n      tagList = _useState2[0],\n      setTagList = _useState2[1];\n\n  useEffect(function () {\n    console.log(rest);\n  }, []);\n\n  var handleChange = function handleChange(checked) {\n    console.log(checked);\n\n    if (checked == true) {\n      var list = [{\n        name: '标签一',\n        fields: []\n      }, {\n        name: '标签二',\n        fields: []\n      }, {\n        name: '标签三',\n        fields: []\n      }];\n      FormStore.setValue('subFormList', list);\n      setTagList(list);\n      onChange(list);\n    } else {\n      FormStore.setValue('subFormList', []);\n      setTagList([]);\n      onChange([]);\n    }\n  };\n\n  var titleChange = function titleChange(value, index) {\n    var iList = _toConsumableArray(tagList);\n\n    console.log(FormStore.subFormList[index + 1]['fields']);\n    console.log(FormStore.subFormList);\n    var iObj = {\n      name: value,\n      'fields': FormStore.subFormList[index + 1]['fields']\n    };\n    iList.splice(index, 1, iObj);\n    setTagList(iList);\n    onChange(iList);\n    FormStore.setValue('subFormList', iList);\n  };\n\n  var handleAdd = function handleAdd() {\n    var iObj = {\n      name: '标签页',\n      'fields': []\n    };\n\n    var iList = _toConsumableArray(tagList);\n\n    iList.push(iObj);\n    setTagList(iList);\n    onChange(iList);\n    FormStore.setValue('subFormList', iList);\n  };\n\n  var handleDel = function handleDel(index) {\n    var iList = _toConsumableArray(tagList);\n\n    iList.splice(index, 1);\n    setTagList(iList);\n    onChange(iList);\n    FormStore.setValue('subFormList', iList);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"total_tags\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tags_title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"\\u591A\\u6807\\u7B7E\\u663E\\u793A\"), /*#__PURE__*/React.createElement(_Switch, {\n    onChange: handleChange,\n    style: {\n      width: '20px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"\\u591A\\u6807\\u7B7E\\u663E\\u793A\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"all_tags\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, tagList.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"one_tag\",\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, /*#__PURE__*/React.createElement(_Input, {\n      defaultValue: item['name'],\n      className: \"one_title\",\n      onChange: function onChange(e) {\n        return titleChange(e.target.value, index);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }), tagList.length > 2 ? /*#__PURE__*/React.createElement(DeleteOutlined, {\n      onClick: function onClick() {\n        return handleDel(index);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }) : /*#__PURE__*/React.createElement(DeleteOutlined, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }));\n  })), tagList.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"add_tag\",\n    onClick: handleAdd,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"+\\u6DFB\\u52A0\\u6807\\u7B7E\\u9875\"));\n});\nexport default inject(function (stores) {\n  return {\n    FormStore: stores.FormStore\n  };\n})(Mul_Tag);","map":{"version":3,"names":["DeleteOutlined","inject","observer","React","useEffect","useState","Mul_Tag","FormStore","value","onChange","rest","addons","subFormList","tagList","setTagList","console","log","handleChange","checked","list","name","fields","setValue","titleChange","index","iList","iObj","splice","handleAdd","push","handleDel","width","map","item","e","target","length","stores"],"sources":["F:/documents/bl-device-manage-test/src/layouts/FormEdit/self_item/mul_tag.js"],"sourcesContent":["/*\r\n * @Author: EmberCCC 1810888456@qq.com\r\n * @Date: 2022-07-17 11:56:33\r\n * @LastEditors: EmberCCC 1810888456@qq.com\r\n * @LastEditTime: 2022-07-19 02:26:31\r\n * @FilePath: \\bl-device-manage-test\\src\\layouts\\FormEdit\\self_item\\mul_tag.js\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n */\r\nimport { DeleteOutlined } from \"@ant-design/icons\";\r\nimport { Input, Switch } from \"antd\";\r\nimport { inject, observer } from \"mobx-react\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport './index.css'\r\nconst Mul_Tag = observer(({ FormStore, value, onChange, ...rest }) => {\r\n    const { addons } = rest\r\n    const [tagList, setTagList] = useState(FormStore.subFormList)\r\n    useEffect(() => {\r\n        console.log(rest);\r\n    }, [])\r\n    const handleChange = (checked) => {\r\n        console.log(checked);\r\n        if (checked == true) {\r\n            let list = [{ name: '标签一', fields: [] }, { name: '标签二', fields: [] }, { name: '标签三', fields: [] }]\r\n            FormStore.setValue('subFormList', list);\r\n            setTagList(list)\r\n            onChange(list);\r\n        } else {\r\n            FormStore.setValue('subFormList', []);\r\n            setTagList([])\r\n            onChange([]);\r\n        }\r\n    }\r\n    const titleChange = (value, index) => {\r\n        let iList = [...tagList]\r\n        console.log(FormStore.subFormList[index + 1]['fields']);\r\n        console.log(FormStore.subFormList);\r\n        let iObj = { name: value, 'fields': FormStore.subFormList[index + 1]['fields'] }\r\n        iList.splice(index, 1, iObj)\r\n        setTagList(iList)\r\n        onChange(iList);\r\n        FormStore.setValue('subFormList', iList);\r\n\r\n    }\r\n    const handleAdd = () => {\r\n        let iObj = { name: '标签页', 'fields': [] }\r\n        let iList = [...tagList]\r\n        iList.push(iObj)\r\n        setTagList(iList)\r\n        onChange(iList);\r\n        FormStore.setValue('subFormList', iList);\r\n\r\n    }\r\n    const handleDel = (index) => {\r\n        let iList = [...tagList]\r\n        iList.splice(index, 1)\r\n        setTagList(iList)\r\n        onChange(iList);\r\n        FormStore.setValue('subFormList', iList);\r\n\r\n    }\r\n    return (\r\n        <div className=\"total_tags\">\r\n            <div className=\"tags_title\">\r\n                <div>多标签显示</div>\r\n                <Switch onChange={handleChange} style={{ width: '20px' }}>多标签显示</Switch>\r\n            </div>\r\n\r\n            <div className=\"all_tags\">\r\n                {tagList.map((item, index) => {\r\n                    return (\r\n                        <div className=\"one_tag\" key={index}>\r\n                            <Input defaultValue={item['name']} className=\"one_title\" onChange={(e) => titleChange(e.target.value, index)} />\r\n                            {\r\n                                tagList.length > 2 ? (\r\n                                    <DeleteOutlined onClick={() => handleDel(index)} />\r\n                                ) : (\r\n                                    <DeleteOutlined />\r\n                                )\r\n                            }\r\n                        </div>\r\n                    )\r\n                })}\r\n            </div>\r\n            {\r\n                tagList.length > 0 && (\r\n                    <div className=\"add_tag\" onClick={handleAdd}>\r\n                        +添加标签页\r\n                    </div>\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n})\r\nexport default inject((stores) => ({ FormStore: stores.FormStore }))(Mul_Tag)"],"mappings":"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"},"metadata":{},"sourceType":"module"}