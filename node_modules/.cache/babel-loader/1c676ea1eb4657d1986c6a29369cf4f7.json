{"ast":null,"code":"import \"antd/lib/radio/style\";\nimport _Radio from \"antd/lib/radio\";\nimport \"antd/lib/popover/style\";\nimport _Popover from \"antd/lib/popover\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport _toConsumableArray from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\components\\\\GlobalTabel2\\\\sortLayout.js\";\n\n/*\r\n * @Author: EmberCCC 1810888456@qq.com\r\n * @Date: 2022-07-08 06:52:37\r\n * @LastEditors: EmberCCC 1810888456@qq.com\r\n * @LastEditTime: 2022-07-08 15:35:35\r\n * @FilePath: \\bl-device-manage-test\\src\\components\\GlobalTabel2\\sortLayout.js\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n */\nimport { DeleteOutlined, UnorderedListOutlined } from '@ant-design/icons';\nimport { toJS } from 'mobx';\nimport { inject, observer } from 'mobx-react';\nimport React, { useEffect, useImperativeHandle, useState } from 'react';\nimport stores from 'stores';\nimport './index.css';\nvar SortLayout = observer(function (_ref) {\n  var TableStore = _ref.TableStore,\n      HomeStore = _ref.HomeStore,\n      cRef = _ref.cRef;\n\n  var _useState = useState(JSON.parse(sessionStorage.getItem('sort_' + HomeStore.firstFormId)) || []),\n      _useState2 = _slicedToArray(_useState, 2),\n      sortList = _useState2[0],\n      setSortList = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      menu = _useState4[0],\n      setMenu = _useState4[1];\n\n  useImperativeHandle(cRef, function () {\n    return {\n      setSort: function setSort() {\n        setSortList(JSON.parse(sessionStorage.getItem('sort_' + HomeStore.firstFormId)) || []);\n      }\n    };\n  });\n\n  var handleAdd = function handleAdd(item) {\n    var iSort = _toConsumableArray(sortList);\n\n    iSort.push({\n      'fieldInfo': toJS(item),\n      'type': 'up'\n    });\n    setSortList(iSort);\n    console.log(sortList);\n  };\n\n  useEffect(function () {\n    setMenu( /*#__PURE__*/React.createElement(\"div\", {\n      className: \"columns_list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    }, TableStore.columns.map(function (item, index) {\n      if (sortList.some(function (sort_item) {\n        return sort_item['fieldInfo']['key'] == item['key'];\n      })) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"columns_item\",\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        }, item['title']);\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"columns_item item_uncheck\",\n          onClick: function onClick() {\n            return handleAdd(item);\n          },\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, item['title']);\n      }\n    })));\n  }, [sortList]);\n\n  var handleChange = function handleChange(e, item, index) {\n    var iItem = {\n      'fieldInfo': toJS(item['fieldInfo']),\n      'type': e.target.value\n    };\n\n    var iSortList = _toConsumableArray(sortList);\n\n    iSortList.splice(index, 1, iItem);\n    setSortList(iSortList);\n    console.log(iSortList);\n  };\n\n  var handleSort = function handleSort() {\n    console.log(toJS(TableStore.dataSource));\n    sessionStorage.setItem(\"sort_\" + HomeStore.firstFormId, JSON.stringify(sortList));\n    TableStore.getSortDataSource(HomeStore.firstFormId);\n  };\n\n  var handleDel = function handleDel(index) {\n    var iSortList = _toConsumableArray(sortList);\n\n    iSortList.splice(index, 1);\n    setSortList(iSortList);\n    console.log(iSortList);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sort_layout\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(_Popover, {\n    content: menu,\n    trigger: \"click\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sort_add\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(_Button, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"+\\u6DFB\\u52A0\\u6392\\u5E8F\\u89C4\\u5219\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sort_list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, sortList.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list_item\",\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list_item_title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, item['fieldInfo']['title']), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list_item_check\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, /*#__PURE__*/React.createElement(_Radio.Group, {\n      onChange: function onChange(e) {\n        return handleChange(e, item, index);\n      },\n      defaultValue: item['type'],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, /*#__PURE__*/React.createElement(_Radio.Button, {\n      value: \"up\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"\\u5347\\u5E8F\"), /*#__PURE__*/React.createElement(_Radio.Button, {\n      value: \"down\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"\\u964D\\u5E8F\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list_item_del\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, /*#__PURE__*/React.createElement(UnorderedListOutlined, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), /*#__PURE__*/React.createElement(DeleteOutlined, {\n      onClick: function onClick() {\n        handleDel(index);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    })));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sort_btn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(_Button, {\n    type: \"primary\",\n    onClick: handleSort,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"\\u6392\\u5E8F\")));\n});\nexport default inject(function (stores) {\n  return {\n    TableStore: stores.TableStore,\n    HomeStore: stores.HomeStore\n  };\n})(SortLayout);","map":{"version":3,"names":["DeleteOutlined","UnorderedListOutlined","toJS","inject","observer","React","useEffect","useImperativeHandle","useState","stores","SortLayout","TableStore","HomeStore","cRef","JSON","parse","sessionStorage","getItem","firstFormId","sortList","setSortList","menu","setMenu","setSort","handleAdd","item","iSort","push","console","log","columns","map","index","some","sort_item","handleChange","e","iItem","target","value","iSortList","splice","handleSort","dataSource","setItem","stringify","getSortDataSource","handleDel","cursor"],"sources":["F:/documents/bl-device-manage-test/src/components/GlobalTabel2/sortLayout.js"],"sourcesContent":["/*\r\n * @Author: EmberCCC 1810888456@qq.com\r\n * @Date: 2022-07-08 06:52:37\r\n * @LastEditors: EmberCCC 1810888456@qq.com\r\n * @LastEditTime: 2022-07-08 15:35:35\r\n * @FilePath: \\bl-device-manage-test\\src\\components\\GlobalTabel2\\sortLayout.js\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n */\r\nimport { DeleteOutlined, UnorderedListOutlined } from '@ant-design/icons'\r\nimport { Button, Popover, Radio } from 'antd'\r\nimport { toJS } from 'mobx'\r\nimport { inject, observer } from 'mobx-react'\r\nimport React, { useEffect, useImperativeHandle, useState } from 'react'\r\nimport stores from 'stores'\r\nimport './index.css'\r\nconst SortLayout = observer(({ TableStore ,HomeStore,cRef}) => {\r\n    const [sortList, setSortList] = useState(JSON.parse(sessionStorage.getItem('sort_'+HomeStore.firstFormId)) || []);\r\n    const [menu, setMenu] = useState(null)\r\n    useImperativeHandle(cRef,() => ({\r\n        setSort: () => {\r\n            setSortList(JSON.parse(sessionStorage.getItem('sort_'+HomeStore.firstFormId)) || [])\r\n        }\r\n    }))\r\n    const handleAdd = (item) => {\r\n        let iSort = [...sortList];\r\n        iSort.push({ 'fieldInfo': toJS(item), 'type': 'up' })\r\n        setSortList(iSort)\r\n        console.log(sortList);\r\n    }\r\n    useEffect(() => {\r\n        setMenu(\r\n            (\r\n                <div className='columns_list'>\r\n                    {\r\n                        TableStore.columns.map((item, index) => {\r\n                            if (sortList.some(sort_item => sort_item['fieldInfo']['key'] == item['key'])) {\r\n                                return (\r\n                                    <div className=\"columns_item\" key={index}>\r\n                                        {item['title']}\r\n                                    </div>\r\n                                )\r\n                            } else {\r\n                                return (\r\n                                    <div className=\"columns_item item_uncheck\" onClick={() => handleAdd(item)} key={index}>\r\n                                        {item['title']}\r\n                                    </div>\r\n                                )\r\n                            }\r\n                        })\r\n                    }\r\n                </div>\r\n            )\r\n        )\r\n    }, [sortList])\r\n    const handleChange = (e, item, index) => {\r\n        const iItem = { 'fieldInfo': toJS(item['fieldInfo']), 'type': e.target.value }\r\n        let iSortList = [...sortList]\r\n        iSortList.splice(index,1,iItem);\r\n        setSortList(iSortList)\r\n        console.log(iSortList);\r\n    }\r\n    const handleSort = () => {\r\n        console.log(toJS(TableStore.dataSource));\r\n        sessionStorage.setItem(\"sort_\"+HomeStore.firstFormId,JSON.stringify(sortList))\r\n        TableStore.getSortDataSource(HomeStore.firstFormId);\r\n    }\r\n    const handleDel = (index) => {\r\n        let iSortList = [...sortList]\r\n        iSortList.splice(index,1)\r\n        setSortList(iSortList);\r\n        console.log(iSortList);\r\n    }\r\n    return (\r\n        <div className='sort_layout'>\r\n            <Popover content={menu} trigger='click'>\r\n                <div className='sort_add'>\r\n                    <Button>+添加排序规则</Button>\r\n                </div>\r\n            </Popover>\r\n            <div className='sort_list'>\r\n                {   \r\n                    \r\n                    sortList.map((item, index) => {\r\n                        return (\r\n                            <div className='list_item' key={index}>\r\n                                <div className='list_item_title'>\r\n                                    {item['fieldInfo']['title']}\r\n                                </div>\r\n                                <div className='list_item_check'>\r\n                                    <Radio.Group onChange={(e) => handleChange(e, item, index)} defaultValue={item['type']}>\r\n                                        <Radio.Button value=\"up\">升序</Radio.Button>\r\n                                        <Radio.Button value=\"down\">降序</Radio.Button>\r\n                                    </Radio.Group>\r\n                                </div>\r\n                                <div className='list_item_del'>\r\n                                    <UnorderedListOutlined />\r\n                                    <DeleteOutlined onClick={() => {handleDel(index)}} style={{cursor:'pointer'}}/>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n            <div className='sort_btn'>\r\n                <Button type='primary' onClick={handleSort}>排序</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n})\r\n\r\n\r\nexport default inject((stores) => ({ TableStore: stores.TableStore ,HomeStore:stores.HomeStore}))(SortLayout);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}