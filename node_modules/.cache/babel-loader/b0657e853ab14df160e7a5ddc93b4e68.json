{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport _toConsumableArray from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport \"antd/lib/tabs/style\";\nimport _Tabs from \"antd/lib/tabs\";\nimport _classCallCheck from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/layout/style\";\nimport _Layout from \"antd/lib/layout\";\n\nvar _dec,\n    _class,\n    _jsxFileName = \"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\layouts\\\\TableEdit\\\\index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/*\r\n * @Author: your name\r\n * @Date: 2022-03-22 09:57:59\r\n * @LastEditTime: 2022-06-27 01:23:03\r\n * @LastEditors: EmberCCC 1810888456@qq.com\r\n * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n * @FilePath: \\bl-device-manage\\src\\layouts\\TableEdit\\index.js\r\n */\nimport React, { Component } from 'react';\nimport { EditOutlined } from '@ant-design/icons'; // Default SortableJS\n\nimport Sortable from 'react-sortablejs';\nimport _ from 'lodash';\nimport uniqueId from 'lodash/uniqueId';\nimport update from 'immutability-helper';\nimport { indexToArray, getItem, setInfo, isPath, getCloneItem, itemRemove, itemAdd, changeObj } from '../../utils/loashTools';\nimport { formItemData, GlobalComponent } from './config';\nimport EditableTable from './EditableTable/index';\nimport './index.css';\nimport { toJS } from 'mobx';\nimport * as services from '../../services/home';\nimport { typeName } from 'constants/status_constant';\nimport { inject, observer } from 'mobx-react';\nvar Header = _Layout.Header,\n    Sider = _Layout.Sider,\n    Content = _Layout.Content;\nvar Option = _Select.Option;\nvar sortableOption = {\n  animation: 20,\n  fallbackOnBody: true,\n  swapThreshold: 0.65,\n  group: {\n    name: 'formItem',\n    pull: true,\n    put: true\n  }\n};\nvar EditPage = (_dec = inject('HomeStore'), _dec(_class = observer(_class = /*#__PURE__*/function (_Component) {\n  _inherits(EditPage, _Component);\n\n  var _super = _createSuper(EditPage);\n\n  function EditPage() {\n    var _this;\n\n    _classCallCheck(this, EditPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      totalObj: [],\n      newObj: [],\n      curItemKey: '',\n      curItemName: '',\n      curItemType: '',\n      curItemMention: '',\n      curItemDescripe: '',\n      isChoose: false\n    };\n    return _this;\n  }\n\n  _createClass(EditPage, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props$HomeStore = this.props.HomeStore,\n          firstFormId = _this$props$HomeStore.firstFormId,\n          secondFormId = _this$props$HomeStore.secondFormId; // 组件数据\n\n      var TabPane = _Tabs.TabPane;\n      var obj = this.state.newObj;\n\n      var handleLabelChange = function handleLabelChange(e) {\n        var val = e.target.value;\n\n        _this2.setState({\n          curItemName: val\n        });\n\n        obj[_this2.state.curItemKey].label = val;\n\n        _this2.setState({\n          newObj: obj\n        });\n      };\n\n      var handleMentionChange = function handleMentionChange(e) {\n        var val = e.target.value;\n\n        _this2.setState({\n          curItemMention: val\n        });\n\n        obj[_this2.state.curItemKey].attr.placeholder = val;\n\n        _this2.setState({\n          newObj: obj\n        });\n      };\n\n      var handleDescripeChange = function handleDescripeChange(e) {\n        var val = e.target.value;\n\n        _this2.setState({\n          curItemDescripe: val\n        });\n\n        obj[_this2.state.curItemKey].attr.descripe = val;\n\n        _this2.setState({\n          newObj: obj\n        });\n      };\n\n      var handleDel = function handleDel() {\n        var newTreeData = itemRemove(_this2.state.curItemKey, obj);\n\n        _this2.setState({\n          curItemKey: '',\n          curItemName: '',\n          curItemType: '',\n          curDescripe: ''\n        });\n\n        _this2.setState({\n          newObj: newTreeData\n        });\n      };\n\n      var sortableChoose = function sortableChoose(e) {\n        _this2.setState({\n          isChoose: true\n        });\n\n        var curKey = e.item.getAttribute('data-id');\n        var curName = e.item.firstChild.innerText;\n        var curType = e.item.getAttribute('type');\n        var curMention = e.item.getAttribute('mention');\n        var curDescripe = e.item.getAttribute('descripe');\n\n        _this2.setState({\n          curItemKey: curKey,\n          curItemName: curName,\n          curItemType: curType,\n          curItemMention: curMention,\n          curItemDescripe: curDescripe\n        });\n      }; // 拖拽的添加方法\n\n\n      var sortableAdd = function sortableAdd(e) {\n        // 组件名或路径\n        var nameOrIndex = e.clone.getAttribute('data-id'); // 父节点路径\n\n        var parentPath = e.path[1].getAttribute('data-id'); // 拖拽元素的目标路径\n\n        var newIndex = e.newIndex; // 新路径 为根节点时直接使用index\n\n        var newPath = parentPath ? \"\".concat(parentPath, \"-\").concat(newIndex) : newIndex; // 判断是否为路径 路径执行移动，非路径为新增\n\n        if (isPath(nameOrIndex)) {\n          // 旧的路径index\n          var oldIndex = nameOrIndex; // 克隆要移动的元素\n\n          var dragItem = getCloneItem(oldIndex, _this2.state.newObj); // 比较路径的上下位置 先执行靠下的数据 再执行靠上数据\n\n          if (indexToArray(oldIndex) > indexToArray(newPath)) {\n            // 删除元素 获得新数据\n            var newTreeData = itemRemove(oldIndex, _this2.state.newObj); // 添加拖拽元素\n\n            newTreeData = itemAdd(newPath, newTreeData, dragItem); // 更新视图\n\n            _this2.setState({\n              newObj: newTreeData\n            });\n\n            return;\n          } // 添加拖拽元素\n\n\n          var newData = itemAdd(newPath, _this2.state.newObj, dragItem); // 删除元素 获得新数据\n\n          newData = itemRemove(oldIndex, newData);\n\n          _this2.setState({\n            newObj: newData\n          });\n\n          return;\n        } // 新增流程 创建元素 => 插入元素 => 更新视图\n\n\n        var id = nameOrIndex;\n\n        var newItem = _.cloneDeep(formItemData.find(function (item) {\n          return item.name === id;\n        })); // 为容器或者弹框时增加子元素\n\n\n        if (newItem.name === 'Containers') {\n          var ComponentsInfo = _.cloneDeep(GlobalComponent[newItem.name]); // 判断是否包含默认数据\n\n\n          newItem.children = [ComponentsInfo];\n        }\n\n        var Data = itemAdd(newPath, _this2.state.newObj, newItem);\n\n        _this2.setState({\n          newObj: Data\n        });\n\n        obj = _this2.state.newObj;\n      }; // 拖拽的排序方法\n\n\n      var sortableUpdate = function sortableUpdate(e) {\n        console.log(obj); // 交换数组\n\n        var newIndex = e.newIndex,\n            oldIndex = e.oldIndex; // 父节点路径\n\n        var parentPath = e.path[1].getAttribute('data-id'); // 父元素 根节点时直接调用data\n\n        var parent = parentPath ? getItem(parentPath, _this2.state.newObj) : _this2.state.newObj; // 当前拖拽元素\n\n        var dragItem = parent[oldIndex]; // 更新后的父节点\n\n        parent = update(parent, {\n          $splice: [[oldIndex, 1], [newIndex, 0, dragItem]]\n        }); // 最新的数据 根节点时直接调用data\n\n        var Data = parentPath ? setInfo(parentPath, _this2.state.newObj, parent) : parent; // 调用父组件更新方法\n\n        _this2.setState({\n          newObj: Data\n        });\n      }; // 递归函数\n\n\n      var loop = function loop(arr, index) {\n        return arr.map(function (item, i) {\n          var indexs = index === '' ? String(i) : \"\".concat(index, \"-\").concat(i);\n\n          if (item) {\n            if (item.children) {\n              return /*#__PURE__*/React.createElement(\"div\", Object.assign({}, item.attr, {\n                \"data-id\": indexs,\n                key: indexs,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 210\n                },\n                __self: this\n              }), /*#__PURE__*/React.createElement(Sortable, {\n                key: uniqueId(),\n                style: {\n                  minHeight: 100,\n                  margin: 10\n                },\n                ref: function ref(c) {\n                  return c && c.sortable;\n                },\n                options: _objectSpread(_objectSpread({}, sortableOption), {}, {\n                  onUpdate: function onUpdate(e) {\n                    return sortableUpdate(e);\n                  },\n                  onAdd: function onAdd(e) {\n                    return sortableAdd(e);\n                  },\n                  onChoose: function onChoose(e) {\n                    return sortableChoose(e);\n                  },\n                  onSort: function onSort(e) {\n                    return _this2.setState({\n                      isChoose: false\n                    });\n                  }\n                }),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 211\n                },\n                __self: this\n              }, loop(item.children, indexs)));\n            }\n\n            var ComponentInfo = GlobalComponent[item.name];\n            return /*#__PURE__*/React.createElement(\"div\", {\n              \"data-id\": indexs,\n              key: indexs,\n              type: item.name,\n              mention: item.attr.placeholder ? item.attr.placeholder : '',\n              className: \"formItemStyle\",\n              style: _this2.state.isChoose && indexs === _this2.state.curItemKey ? {\n                border: '1px solid blue',\n                borderRadius: '5px'\n              } : {},\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 232\n              },\n              __self: this\n            }, item.name !== 'Divider' && /*#__PURE__*/React.createElement(\"div\", {\n              className: \"formItemLabel\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 242\n              },\n              __self: this\n            }, _this2.state.isChoose ? indexs === _this2.state.curItemKey ? _this2.state.curItemName : item.label : item.label), item.attr.descripe && /*#__PURE__*/React.createElement(\"div\", {\n              className: \"formItemDescripe\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 246\n              },\n              __self: this\n            }, item.attr.descripe), renderDiffComponents(item, indexs, ComponentInfo));\n          } else {\n            return null;\n          }\n        });\n      };\n\n      var renderDiffComponents = function renderDiffComponents(item, indexs, ComponentInfo) {\n        switch (item.name) {\n          case 'Divider':\n            return /*#__PURE__*/React.createElement(ComponentInfo, Object.assign({\n              key: indexs\n            }, item.attr, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 263\n              },\n              __self: this\n            }));\n\n          case 'Select':\n            return /*#__PURE__*/React.createElement(ComponentInfo, {\n              key: indexs,\n              defaultValue: item.attr.value,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 266\n              },\n              __self: this\n            }, item.attr.options.map(function (subItem) {\n              return /*#__PURE__*/React.createElement(Option, {\n                key: subItem.key,\n                value: subItem.value + '',\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 268\n                },\n                __self: this\n              }, subItem.label);\n            }));\n\n          default:\n            return /*#__PURE__*/React.createElement(ComponentInfo, Object.assign({\n              key: indexs\n            }, item.attr, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 273\n              },\n              __self: this\n            }));\n        }\n      };\n\n      var getDataSource = function getDataSource(options) {\n        obj[_this2.state.curItemKey].attr.options = _toConsumableArray(options);\n\n        _this2.setState({\n          newObj: obj\n        });\n      };\n\n      var save = function save(params) {\n        console.log(params);\n\n        _Modal.confirm({\n          title: '提示',\n          content: '是否修改该表单',\n          okText: '确认',\n          cancelText: '取消',\n          onOk: function onOk() {\n            try {\n              var res = services.putRequest(services.requestList.updataField, params);\n\n              _message.success('修改成功');\n            } catch (error) {\n              console.log(error);\n            }\n          },\n          onCancel: function onCancel() {\n            console.log(params);\n            console.log('Cancel');\n          }\n        });\n      };\n\n      var saveForm = function saveForm() {\n        var test = _this2.state.totalObj.filter(function (item) {\n          return item.secondFormId != secondFormId;\n        });\n\n        _this2.state.newObj.map(function (item, index) {\n          item.secondFormId = secondFormId;\n          item.order = (index + 1).toString();\n          test.push(item);\n        });\n\n        _this2.setState({\n          totalObj: test\n        });\n\n        var arr = test;\n        var text = [];\n        arr.map(function (element) {\n          text.push(changeObj(firstFormId, element));\n        });\n        console.log(text);\n        save(text);\n      };\n\n      var changeTabs = function changeTabs(e) {\n        var test = _this2.state.totalObj.filter(function (item) {\n          return item.secondFormId != secondFormId;\n        });\n\n        _this2.state.newObj.map(function (item, index) {\n          item.secondFormId = secondFormId;\n          item.order = (index + 1).toString();\n          test.push(item);\n        });\n\n        var arr = [];\n        arr = _this2.state.totalObj.filter(function (item) {\n          return item.secondFormId == Number(e);\n        });\n\n        _this2.setState({\n          totalObj: test,\n          newObj: arr\n        });\n\n        _this2.props.HomeStore.changeSecondFormId(Number(e));\n      };\n\n      var addForm = function addForm() {\n        var newForm = {};\n        newForm.secondFormId = _this2.props.HomeStore.itemDataT.length;\n\n        _this2.props.HomeStore.itemDataT.push(newForm);\n\n        console.log(_this2.props.HomeStore.itemDataT);\n        console.log(_this2.state.totalObj);\n      };\n\n      return /*#__PURE__*/React.createElement(_Layout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }, /*#__PURE__*/React.createElement(Header, {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }, \"\\u65B0\\u624B\\u5F15\\u5BFC\"), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: saveForm,\n        className: \"save-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }, \"\\u4FDD\\u5B58\")), /*#__PURE__*/React.createElement(_Layout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }, /*#__PURE__*/React.createElement(Sider, {\n        width: '15%',\n        style: {\n          height: '100%',\n          borderLeft: 10,\n          minHeight: 840,\n          marginTop: 20,\n          textAlign: 'center'\n        },\n        theme: \"light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"itemHead\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }, \"\\u57FA\\u7840\\u5B57\\u6BB5\"), /*#__PURE__*/React.createElement(Sortable, {\n        options: {\n          group: {\n            name: 'formItem',\n            pull: 'clone',\n            put: false\n          },\n          sort: false\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365\n        },\n        __self: this\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form_total\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375\n        },\n        __self: this\n      }, formItemData.map(function (item) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form_item\",\n          \"data-id\": item.name,\n          key: item.name,\n          style: {\n            marginTop: 10\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 378\n          },\n          __self: this\n        }, item.label);\n      })))), /*#__PURE__*/React.createElement(_Layout, {\n        style: {\n          padding: '0 24px 24px',\n          marginTop: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391\n        },\n        __self: this\n      }, /*#__PURE__*/React.createElement(Content, {\n        className: \"site-layout-background\",\n        style: {\n          padding: 24,\n          margin: 0,\n          minHeight: 300\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }, this.props.HomeStore.itemDataT.length > 1 && /*#__PURE__*/React.createElement(_Tabs, {\n        activeKey: this.props.HomeStore.secondFormId.toString(),\n        onChange: changeTabs,\n        type: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401\n        },\n        __self: this\n      }, this.props.HomeStore.itemDataT.map(function (item, index) {\n        return /*#__PURE__*/React.createElement(TabPane, {\n          tab: /*#__PURE__*/React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 403\n            },\n            __self: this\n          }, /*#__PURE__*/React.createElement(EditOutlined, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 403\n            },\n            __self: this\n          }), item.secondFormId + 1),\n          key: index.toString(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 403\n          },\n          __self: this\n        });\n      })), /*#__PURE__*/React.createElement(Sortable, {\n        className: \"formContent\",\n        ref: function ref(c) {\n          return c && c.sortable;\n        },\n        options: _objectSpread(_objectSpread({}, sortableOption), {}, {\n          onUpdate: function onUpdate(e) {\n            return sortableUpdate(e);\n          },\n          onAdd: function onAdd(e) {\n            return sortableAdd(e);\n          },\n          onChoose: function onChoose(e) {\n            return sortableChoose(e);\n          },\n          onSort: function onSort(e) {\n            return _this2.setState({\n              isChoose: false\n            });\n          }\n        }),\n        key: uniqueId(),\n        style: {\n          minHeight: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408\n        },\n        __self: this\n      }, loop(this.state.newObj, ''))), /*#__PURE__*/React.createElement(Sider, {\n        theme: \"light\",\n        width: '20%',\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427\n        },\n        __self: this\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        className: \"textHead\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428\n        },\n        __self: this\n      }, \"\\u5B57\\u6BB5\\u5C5E\\u6027\"), /*#__PURE__*/React.createElement(_Form, {\n        className: \"itemForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 429\n        },\n        __self: this\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u6807\\u7B7E\\u540D\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430\n        },\n        __self: this\n      }, /*#__PURE__*/React.createElement(_Input, {\n        value: this.state.curItemName,\n        disabled: !this.state.isChoose,\n        onChange: handleLabelChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431\n        },\n        __self: this\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u63D0\\u793A\\u6587\\u5B57\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433\n        },\n        __self: this\n      }, /*#__PURE__*/React.createElement(_Input, {\n        value: this.state.curItemMention,\n        disabled: !this.state.isChoose,\n        onChange: handleMentionChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 434\n        },\n        __self: this\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u63CF\\u8FF0\\u4FE1\\u606F\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436\n        },\n        __self: this\n      }, /*#__PURE__*/React.createElement(_Input, {\n        value: this.state.curItemDescripe,\n        disabled: !this.state.isChoose,\n        onChange: handleDescripeChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437\n        },\n        __self: this\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u683C\\u5F0F\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439\n        },\n        __self: this\n      }, /*#__PURE__*/React.createElement(_Input, {\n        disabled: !this.state.isChoose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440\n        },\n        __self: this\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u9ED8\\u8BA4\\u503C\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442\n        },\n        __self: this\n      }, /*#__PURE__*/React.createElement(_Input, {\n        disabled: !this.state.isChoose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 443\n        },\n        __self: this\n      })), ['CheckboxGroup', 'RadioGroup', 'Select'].includes(this.state.curItemType) && /*#__PURE__*/React.createElement(EditableTable, {\n        getDataSource: getDataSource,\n        curItemKey: this.state.curItemKey,\n        options: this.state.newObj[this.state.curItemKey].attr.options,\n        disabled: !this.state.isChoose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447\n        },\n        __self: this\n      })), /*#__PURE__*/React.createElement(_Button, {\n        onClick: handleDel,\n        disabled: !this.state.isChoose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 455\n        },\n        __self: this\n      }, \"\\u5220\\u9664\"), /*#__PURE__*/React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456\n        },\n        __self: this\n      }), /*#__PURE__*/React.createElement(_Button, {\n        onClick: addForm,\n        style: {\n          margin: '5px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457\n        },\n        __self: this\n      }, \"\\u6DFB\\u52A0\\u5B50\\u8868\\u5355\")))));\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this$props$HomeStore2 = this.props.HomeStore,\n          secondFormId = _this$props$HomeStore2.secondFormId,\n          firstFormId = _this$props$HomeStore2.firstFormId;\n      var params = {};\n      params.firstFormId = firstFormId; // this.props.HomeStore.queryField(params)\n\n      var arr = [];\n      var newArr = [];\n\n      if (this.props.HomeStore.itemDataT.length != 0) {\n        this.props.HomeStore.itemDataT.map(function (item, index) {\n          var order = 1;\n\n          if (item.properties != undefined && item.properties.length != 0) {\n            item.properties.map(function (txt) {\n              var ele = {};\n              ele.secondFormId = toJS(item.secondFormId);\n              ele.label = txt.name;\n              ele.attr = toJS(txt.others);\n              ele.propertyId = txt.propertyId || \"\";\n              ele.name = typeName[txt.typeId];\n              ele.order = (order++).toString();\n              arr.push(ele);\n\n              if (ele.secondFormId == secondFormId) {\n                newArr.push(ele);\n              }\n            });\n          }\n        });\n      }\n\n      this.setState({\n        newObj: newArr,\n        totalObj: toJS(arr)\n      });\n    }\n  }]);\n\n  return EditPage;\n}(Component)) || _class) || _class);\nexport default EditPage;","map":{"version":3,"names":["React","Component","EditOutlined","Sortable","_","uniqueId","update","indexToArray","getItem","setInfo","isPath","getCloneItem","itemRemove","itemAdd","changeObj","formItemData","GlobalComponent","EditableTable","toJS","services","typeName","inject","observer","Header","Sider","Content","Option","sortableOption","animation","fallbackOnBody","swapThreshold","group","name","pull","put","EditPage","state","totalObj","newObj","curItemKey","curItemName","curItemType","curItemMention","curItemDescripe","isChoose","props","HomeStore","firstFormId","secondFormId","TabPane","obj","handleLabelChange","e","val","target","value","setState","label","handleMentionChange","attr","placeholder","handleDescripeChange","descripe","handleDel","newTreeData","curDescripe","sortableChoose","curKey","item","getAttribute","curName","firstChild","innerText","curType","curMention","sortableAdd","nameOrIndex","clone","parentPath","path","newIndex","newPath","oldIndex","dragItem","newData","id","newItem","cloneDeep","find","ComponentsInfo","children","Data","sortableUpdate","console","log","parent","$splice","loop","arr","index","map","i","indexs","String","minHeight","margin","c","sortable","onUpdate","onAdd","onChoose","onSort","ComponentInfo","border","borderRadius","renderDiffComponents","options","subItem","key","getDataSource","save","params","confirm","title","content","okText","cancelText","onOk","res","putRequest","requestList","updataField","success","error","onCancel","saveForm","test","filter","order","toString","push","text","element","changeTabs","Number","changeSecondFormId","addForm","newForm","itemDataT","length","height","borderLeft","marginTop","textAlign","sort","padding","includes","newArr","properties","undefined","txt","ele","others","propertyId","typeId"],"sources":["F:/documents/bl-device-manage-test/src/layouts/TableEdit/index.js"],"sourcesContent":["/*\r\n * @Author: your name\r\n * @Date: 2022-03-22 09:57:59\r\n * @LastEditTime: 2022-06-27 01:23:03\r\n * @LastEditors: EmberCCC 1810888456@qq.com\r\n * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n * @FilePath: \\bl-device-manage\\src\\layouts\\TableEdit\\index.js\r\n */\r\n\r\nimport React, { Component } from 'react';\r\nimport { Tag, Layout, Button, Modal, message, Form, Input, Select, Tabs } from 'antd';\r\nimport { EditOutlined } from '@ant-design/icons';\r\n// Default SortableJS\r\nimport Sortable from 'react-sortablejs';\r\nimport _ from 'lodash';\r\nimport uniqueId from 'lodash/uniqueId';\r\nimport update from 'immutability-helper';\r\nimport { indexToArray, getItem, setInfo, isPath, getCloneItem, itemRemove, itemAdd, changeObj } from '../../utils/loashTools';\r\nimport { formItemData, GlobalComponent } from './config';\r\nimport EditableTable from './EditableTable/index';\r\nimport './index.css'\r\nimport { toJS } from 'mobx';\r\nimport * as services from '../../services/home';\r\nimport { typeName } from 'constants/status_constant';\r\nimport { inject, observer } from 'mobx-react';\r\n\r\n\r\nconst { Header, Sider, Content } = Layout;\r\nconst { Option } = Select;\r\nconst sortableOption = {\r\n  animation: 20,\r\n  fallbackOnBody: true,\r\n  swapThreshold: 0.65,\r\n  group: {\r\n    name: 'formItem',\r\n    pull: true,\r\n    put: true,\r\n  },\r\n};\r\n\r\n\r\n@inject('HomeStore')\r\n@observer\r\nclass EditPage extends Component {\r\n  state = {\r\n    totalObj: [],\r\n    newObj: [],\r\n    curItemKey: '',\r\n    curItemName: '',\r\n    curItemType: '',\r\n    curItemMention: '',\r\n    curItemDescripe: '',\r\n    isChoose: false\r\n  }\r\n  render() {\r\n    const { firstFormId, secondFormId } = this.props.HomeStore;                  // 组件数据\r\n    const { TabPane } = Tabs;\r\n    let obj = this.state.newObj\r\n\r\n    const handleLabelChange = (e) => {\r\n      const val = e.target.value;\r\n      this.setState({\r\n        curItemName: val\r\n      })\r\n      obj[this.state.curItemKey].label = val;\r\n      this.setState({\r\n        newObj: obj\r\n      })\r\n    }\r\n\r\n    const handleMentionChange = (e) => {\r\n      const val = e.target.value;\r\n      this.setState({\r\n        curItemMention: val\r\n      })\r\n      obj[this.state.curItemKey].attr.placeholder = val;\r\n      this.setState({\r\n        newObj: obj\r\n      })\r\n    }\r\n\r\n    const handleDescripeChange = (e) => {\r\n      const val = e.target.value;\r\n      this.setState({\r\n        curItemDescripe: val\r\n      })\r\n      obj[this.state.curItemKey].attr.descripe = val;\r\n      this.setState({\r\n        newObj: obj\r\n      })\r\n    }\r\n\r\n    const handleDel = () => {\r\n      let newTreeData = itemRemove(this.state.curItemKey, obj);\r\n      this.setState({\r\n        curItemKey: '',\r\n        curItemName: '',\r\n        curItemType: '',\r\n        curDescripe: ''\r\n      })\r\n      this.setState({\r\n        newObj: newTreeData\r\n      })\r\n    }\r\n\r\n    const sortableChoose = (e) => {\r\n      this.setState({\r\n        isChoose: true\r\n      })\r\n      const curKey = e.item.getAttribute('data-id');\r\n      const curName = e.item.firstChild.innerText;\r\n      const curType = e.item.getAttribute('type');\r\n      const curMention = e.item.getAttribute('mention');\r\n      const curDescripe = e.item.getAttribute('descripe');\r\n      this.setState({\r\n        curItemKey: curKey,\r\n        curItemName: curName,\r\n        curItemType: curType,\r\n        curItemMention: curMention,\r\n        curItemDescripe: curDescripe\r\n      })\r\n    };\r\n\r\n    // 拖拽的添加方法\r\n    const sortableAdd = e => {\r\n      // 组件名或路径\r\n      const nameOrIndex = e.clone.getAttribute('data-id');\r\n      // 父节点路径\r\n      const parentPath = e.path[1].getAttribute('data-id');\r\n      // 拖拽元素的目标路径\r\n      const { newIndex } = e;\r\n      // 新路径 为根节点时直接使用index\r\n      const newPath = parentPath ? `${parentPath}-${newIndex}` : newIndex;\r\n      // 判断是否为路径 路径执行移动，非路径为新增\r\n      if (isPath(nameOrIndex)) {\r\n        // 旧的路径index\r\n        const oldIndex = nameOrIndex;\r\n        // 克隆要移动的元素\r\n        const dragItem = getCloneItem(oldIndex, this.state.newObj)\r\n        // 比较路径的上下位置 先执行靠下的数据 再执行靠上数据\r\n        if (indexToArray(oldIndex) > indexToArray(newPath)) {\r\n          // 删除元素 获得新数据\r\n          let newTreeData = itemRemove(oldIndex, this.state.newObj);\r\n          // 添加拖拽元素\r\n          newTreeData = itemAdd(newPath, newTreeData, dragItem)\r\n          // 更新视图\r\n          this.setState({\r\n            newObj: newTreeData\r\n          })\r\n          return\r\n        }\r\n        // 添加拖拽元素\r\n        let newData = itemAdd(newPath, this.state.newObj, dragItem)\r\n        // 删除元素 获得新数据\r\n        newData = itemRemove(oldIndex, newData);\r\n        this.setState({\r\n          newObj: newData\r\n        })\r\n        return\r\n      }\r\n\r\n      // 新增流程 创建元素 => 插入元素 => 更新视图\r\n      const id = nameOrIndex\r\n      const newItem = _.cloneDeep(formItemData.find(item => (item.name === id)))\r\n      // 为容器或者弹框时增加子元素\r\n      if (newItem.name === 'Containers') {\r\n        const ComponentsInfo = _.cloneDeep(GlobalComponent[newItem.name])\r\n        // 判断是否包含默认数据\r\n        newItem.children = [ComponentsInfo]\r\n      }\r\n      let Data = itemAdd(newPath, this.state.newObj, newItem)\r\n      this.setState({\r\n        newObj: Data\r\n      })\r\n      obj = this.state.newObj\r\n    };\r\n\r\n    // 拖拽的排序方法\r\n    const sortableUpdate = e => {\r\n      console.log(obj);\r\n      // 交换数组\r\n      const { newIndex, oldIndex } = e;\r\n      // 父节点路径\r\n      const parentPath = e.path[1].getAttribute('data-id');\r\n      // 父元素 根节点时直接调用data\r\n      let parent = parentPath ? getItem(parentPath, this.state.newObj) : this.state.newObj;\r\n      // 当前拖拽元素\r\n      const dragItem = parent[oldIndex];\r\n      // 更新后的父节点\r\n      parent = update(parent, {\r\n        $splice: [[oldIndex, 1], [newIndex, 0, dragItem]],\r\n      });\r\n      // 最新的数据 根节点时直接调用data\r\n      const Data = parentPath ? setInfo(parentPath, this.state.newObj, parent) : parent\r\n      // 调用父组件更新方法\r\n      this.setState({\r\n        newObj: Data\r\n      })\r\n    };\r\n\r\n\r\n    // 递归函数\r\n    const loop = (arr, index) => {\r\n      return (\r\n        arr.map((item, i) => {\r\n          const indexs = index === '' ? String(i) : `${index}-${i}`;\r\n          if (item) {\r\n            if (item.children) {\r\n              return (\r\n                <div {...item.attr} data-id={indexs} key={indexs}>\r\n                  <Sortable\r\n                    key={uniqueId()}\r\n                    style={{ minHeight: 100, margin: 10 }}\r\n                    ref={c => c && c.sortable}\r\n                    options={{\r\n                      ...sortableOption,\r\n                      onUpdate: e => sortableUpdate(e),\r\n                      onAdd: e => sortableAdd(e),\r\n                      onChoose: e => sortableChoose(e),\r\n                      onSort: e => this.setState({\r\n                        isChoose: false\r\n                      }),\r\n                    }}\r\n                  >\r\n                    {loop(item.children, indexs)}\r\n                  </Sortable>\r\n                </div>\r\n              )\r\n            }\r\n            const ComponentInfo = GlobalComponent[item.name]\r\n            return (\r\n              <div\r\n                data-id={indexs}\r\n                key={indexs}\r\n                type={item.name}\r\n                mention={item.attr.placeholder ? item.attr.placeholder : ''}\r\n                className='formItemStyle'\r\n                style={(this.state.isChoose && indexs === this.state.curItemKey) ? { border: '1px solid blue', borderRadius: '5px' } : {}}\r\n              >\r\n                {\r\n                  item.name !== 'Divider' &&\r\n                  <div className='formItemLabel'>{this.state.isChoose ? (indexs === this.state.curItemKey ? this.state.curItemName : item.label) : item.label}</div>\r\n                }\r\n                {\r\n                  item.attr.descripe &&\r\n                  <div className='formItemDescripe'>{item.attr.descripe}</div>\r\n                }\r\n                {\r\n                  renderDiffComponents(item, indexs, ComponentInfo)\r\n                }\r\n              </div>\r\n            )\r\n          } else {\r\n            return null\r\n          }\r\n        })\r\n      )\r\n    };\r\n\r\n    const renderDiffComponents = (item, indexs, ComponentInfo) => {\r\n      switch (item.name) {\r\n        case 'Divider':\r\n          return <ComponentInfo key={indexs} {...item.attr}></ComponentInfo>\r\n        case 'Select':\r\n          return (\r\n            <ComponentInfo key={indexs} defaultValue={item.attr.value}>\r\n              {\r\n                item.attr.options.map(subItem => <Option key={subItem.key} value={subItem.value + ''}>{subItem.label}</Option>)\r\n              }\r\n            </ComponentInfo>\r\n          )\r\n        default:\r\n          return <ComponentInfo key={indexs} {...item.attr} />\r\n      }\r\n    }\r\n\r\n    const getDataSource = (options) => {\r\n      obj[this.state.curItemKey].attr.options = [...options];\r\n      this.setState({\r\n        newObj: obj\r\n      })\r\n    }\r\n\r\n    const save = (params) => {\r\n      console.log(params);\r\n      Modal.confirm({\r\n        title: '提示',\r\n        content: '是否修改该表单',\r\n        okText: '确认',\r\n        cancelText: '取消',\r\n        onOk() {\r\n          try {\r\n            let res = services.putRequest(services.requestList.updataField, params);\r\n            message.success('修改成功')\r\n          } catch (error) {\r\n            console.log(error);\r\n          }\r\n\r\n        },\r\n        onCancel() {\r\n          console.log(params);\r\n          console.log('Cancel');\r\n        },\r\n      });\r\n\r\n    }\r\n\r\n    const saveForm = () => {\r\n      let test = this.state.totalObj.filter((item) => {\r\n        return item.secondFormId != secondFormId\r\n      })\r\n      this.state.newObj.map((item, index) => {\r\n        item.secondFormId = secondFormId\r\n        item.order = (index + 1).toString()\r\n        test.push(item)\r\n      })\r\n      this.setState({\r\n        totalObj: test\r\n      })\r\n      let arr = test\r\n      let text = []\r\n      arr.map((element) => {\r\n        text.push(changeObj(firstFormId, element))\r\n      });\r\n      console.log(text);\r\n      save(text)\r\n    }\r\n\r\n    const changeTabs = (e) => {\r\n      let test = this.state.totalObj.filter((item) => {\r\n        return item.secondFormId != secondFormId\r\n      })\r\n      this.state.newObj.map((item, index) => {\r\n        item.secondFormId = secondFormId\r\n        item.order = (index + 1).toString()\r\n        test.push(item)\r\n      })\r\n      let arr = []\r\n      arr = this.state.totalObj.filter((item) => {\r\n        return item.secondFormId == Number(e)\r\n      })\r\n      this.setState({\r\n        totalObj: test,\r\n        newObj: arr\r\n      })\r\n      this.props.HomeStore.changeSecondFormId(Number(e))\r\n    }\r\n\r\n    const addForm = () => {\r\n      let newForm = {}\r\n      newForm.secondFormId = this.props.HomeStore.itemDataT.length;\r\n      this.props.HomeStore.itemDataT.push(newForm);\r\n      console.log(this.props.HomeStore.itemDataT);\r\n      console.log(this.state.totalObj);\r\n    }\r\n    return (\r\n      <Layout>\r\n        <Header className=\"header\">\r\n          <a>新手引导</a>\r\n          <button onClick={saveForm} className='save-btn'>保存</button>\r\n        </Header>\r\n        <Layout>\r\n          <Sider width={'15%'} style={{ height: '100%', borderLeft: 10, minHeight: 840, marginTop: 20, textAlign: 'center' }} theme='light'>\r\n            <p className='itemHead'>基础字段</p>\r\n            <Sortable\r\n              options={{\r\n                group: {\r\n                  name: 'formItem',\r\n                  pull: 'clone',\r\n                  put: false,\r\n                },\r\n                sort: false,\r\n              }}\r\n            >\r\n              <div className='form_total'>\r\n                {\r\n                  formItemData.map(item => (\r\n                    <div\r\n                      className='form_item'\r\n                      data-id={item.name}\r\n                      key={item.name}\r\n                      style={{ marginTop: 10 }}\r\n                    >\r\n                      {item.label}\r\n                    </div>\r\n                  ))\r\n                }\r\n              </div>\r\n            </Sortable>\r\n          </Sider>\r\n          <Layout style={{ padding: '0 24px 24px', marginTop: 20 }}>\r\n            <Content\r\n              className=\"site-layout-background\"\r\n              style={{\r\n                padding: 24,\r\n                margin: 0,\r\n                minHeight: 300,\r\n              }}\r\n            >\r\n              {\r\n                this.props.HomeStore.itemDataT.length > 1 && <Tabs activeKey={this.props.HomeStore.secondFormId.toString()} onChange={changeTabs} type='card'>\r\n                  {this.props.HomeStore.itemDataT.map((item, index) => {\r\n                    return <TabPane tab={<div><EditOutlined />{item.secondFormId + 1}</div>} key={(index).toString()} />\r\n                  })}\r\n                </Tabs>\r\n              }\r\n\r\n              <Sortable\r\n                className='formContent'\r\n                ref={c => c && c.sortable}\r\n                options={{\r\n                  ...sortableOption,\r\n                  onUpdate: e => sortableUpdate(e),\r\n                  onAdd: e => sortableAdd(e),\r\n                  onChoose: e => sortableChoose(e),\r\n                  onSort: e => this.setState({\r\n                    isChoose: false\r\n                  }),\r\n                }}\r\n                key={uniqueId()}\r\n                style={{ minHeight: '100%' }}\r\n              >\r\n\r\n                {loop(this.state.newObj, '')}\r\n              </Sortable>\r\n            </Content>\r\n            <Sider theme='light' width={'20%'} style={{ textAlign: 'center' }}>\r\n              <h3 className='textHead'>字段属性</h3>\r\n              <Form className='itemForm'>\r\n                <Form.Item label=\"标签名\">\r\n                  <Input value={this.state.curItemName} disabled={!this.state.isChoose} onChange={handleLabelChange} />\r\n                </Form.Item>\r\n                <Form.Item label=\"提示文字\">\r\n                  <Input value={this.state.curItemMention} disabled={!this.state.isChoose} onChange={handleMentionChange} />\r\n                </Form.Item>\r\n                <Form.Item label=\"描述信息\">\r\n                  <Input value={this.state.curItemDescripe} disabled={!this.state.isChoose} onChange={handleDescripeChange} />\r\n                </Form.Item>\r\n                <Form.Item label=\"格式\">\r\n                  <Input disabled={!this.state.isChoose} />\r\n                </Form.Item>\r\n                <Form.Item label=\"默认值\">\r\n                  <Input disabled={!this.state.isChoose} />\r\n                </Form.Item>\r\n                {\r\n                  ['CheckboxGroup', 'RadioGroup', 'Select'].includes(this.state.curItemType) &&\r\n                  <EditableTable\r\n                    getDataSource={getDataSource}\r\n                    curItemKey={this.state.curItemKey}\r\n                    options={this.state.newObj[this.state.curItemKey].attr.options}\r\n                    disabled={!this.state.isChoose}\r\n                  />\r\n                }\r\n              </Form>\r\n              <Button onClick={handleDel} disabled={!this.state.isChoose}>删除</Button>\r\n              <br />\r\n              <Button onClick={addForm} style={{ margin: '5px' }}>添加子表单</Button>\r\n            </Sider>\r\n          </Layout>\r\n        </Layout>\r\n      </Layout>\r\n    );\r\n\r\n  }\r\n\r\n  componentWillMount() {\r\n    const { secondFormId, firstFormId } = this.props.HomeStore;\r\n    let params = {};\r\n    params.firstFormId = firstFormId;\r\n    // this.props.HomeStore.queryField(params)\r\n    let arr = []\r\n    let newArr = []\r\n    if (this.props.HomeStore.itemDataT.length != 0) {\r\n      this.props.HomeStore.itemDataT.map((item, index) => {\r\n        let order = 1;\r\n        if (item.properties != undefined && item.properties.length != 0) {\r\n          item.properties.map((txt) => {\r\n            let ele = {}\r\n            ele.secondFormId = toJS(item.secondFormId)\r\n            ele.label = txt.name\r\n            ele.attr = toJS(txt.others)\r\n            ele.propertyId = txt.propertyId || \"\"\r\n            ele.name = typeName[txt.typeId]\r\n            ele.order = (order++).toString();\r\n            arr.push(ele)\r\n            if (ele.secondFormId == secondFormId) {\r\n              newArr.push(ele)\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n    this.setState({\r\n      newObj: newArr,\r\n      totalObj: toJS(arr)\r\n    })\r\n  }\r\n}\r\n\r\nexport default EditPage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}