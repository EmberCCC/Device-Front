{"ast":null,"code":"import \"antd/lib/upload/style\";\nimport _Upload from \"antd/lib/upload\";\nimport \"antd/lib/icon/style\";\nimport _Icon from \"antd/lib/icon\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/divider/style\";\nimport _Divider from \"antd/lib/divider\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport _defineProperty from \"C:\\\\Users\\\\Misaki\\\\Desktop\\\\kda\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport _classCallCheck from \"C:\\\\Users\\\\Misaki\\\\Desktop\\\\kda\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Misaki\\\\Desktop\\\\kda\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\Misaki\\\\Desktop\\\\kda\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Misaki\\\\Desktop\\\\kda\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Misaki\\\\Desktop\\\\kda\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"C:\\\\Users\\\\Misaki\\\\Desktop\\\\kda\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\src\\\\layouts\\\\BasicManage\\\\DefinePage\\\\DeviceDefine\\\\FileModal.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { setDeviceFileColumns, setFileType } from '../../cell/methods';\nvar Option = _Select.Option;\nvar formItemLayout = {\n  labelCol: {\n    span: 4\n  },\n  wrapperCol: {\n    span: 12\n  }\n};\nvar FileModal = (_dec = inject('DeviceDefineStore'), _dec(_class = observer(_class = (_temp = /*#__PURE__*/function (_Component) {\n  _inherits(FileModal, _Component);\n\n  var _super = _createSuper(FileModal);\n\n  function FileModal(props) {\n    var _this;\n\n    _classCallCheck(this, FileModal);\n\n    _this = _super.call(this, props);\n\n    _this.onTypeChange = function (value) {\n      _this.store.getSelectModel({\n        typeId: value\n      });\n    };\n\n    _this.onModelChange = function (value) {\n      _this.setState({\n        modelId: value\n      });\n    };\n\n    _this.handleFileAdd = function () {\n      _this.setState({\n        visible: true\n      });\n    };\n\n    _this.beforeUpload = function (file, fileList) {\n      _this.setState({\n        fileName: file.name\n      });\n    };\n\n    _this.handleFileExport = function (record) {\n      window.open(\"/manage/base/file/download?fileType=\".concat(record.fileType, \"&type=\").concat(record.innertype, \"&businessId=\").concat(record.businessId, \"&businessType=1\")); // this.store.downloadFile({\n      // \tmodelId:record.modelId,\n      // \ttype:record.type\n      // })\n    };\n\n    _this.handleFileDel = function (_ref) {\n      var type = _ref.type,\n          value = _ref.value;\n\n      if (type === 'batch') {\n        if (_this.state.selectedRowKeys.length < 1) {\n          _Modal.warn({\n            title: '提示',\n            content: '请选择需要删除的文件'\n          });\n        } else {\n          _Modal.confirm({\n            title: '提示',\n            content: '确定删除选中的' + _this.state.selectedRowKeys.length + '条文件内容？',\n            okText: '确定',\n            cancelText: '取消',\n            onOk: function onOk() {\n              _this.store.delFile({\n                ids: _this.state.selectedRowKeys\n              }, 'batch');\n            }\n          });\n        }\n      } else {\n        _Modal.confirm({\n          title: '提示',\n          content: '确定删除当前文件内容？',\n          okText: '确定',\n          cancelText: '取消',\n          onOk: function onOk() {\n            _this.store.delFile({\n              id: value\n            }, 'single').then(function () {\n              var currentMain = _this.store.currentMain; //当前model\n\n              _this.store.getDeviceFileList({\n                businessType: 1,\n                id: currentMain.id\n              });\n            });\n          }\n        });\n      }\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        visible: !_this.state.visible\n      });\n\n      var currentMain = _this.store.currentMain; //当前model\n\n      _this.store.getDeviceFileList({\n        businessType: 1,\n        id: currentMain.id\n      });\n    };\n\n    _this.handleFileSelect = function (selectedRowKeys) {\n      _this.setState({\n        selectedRowKeys: selectedRowKeys\n      });\n    };\n\n    _this.handleVisible = function () {\n      _this.store.visible = !_this.store.visible;\n    };\n\n    _this.handleSubmit = function (values) {\n      var currentMain = _this.store.currentMain;\n\n      var params = _objectSpread({}, values, {}, currentMain);\n\n      _this.store.saveType(params);\n\n      _this.handleVisible();\n    };\n\n    _this.handleEdit = function (record) {\n      _this.store.status = 'edit';\n      _this.store.currentMain = record;\n\n      _this.handleVisible();\n    };\n\n    _this.store = _this.props.DeviceDefineStore;\n    _this.state = {\n      visible: false,\n      selectedRowKeys: [],\n      modelId: 0,\n      fileName: ''\n    };\n    return _this;\n  }\n\n  _createClass(FileModal, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$store = this.store,\n          fileList = _this$store.fileList,\n          isLoading = _this$store.isLoading,\n          selectModel = _this$store.selectModel,\n          selectType = _this$store.selectType,\n          currentMain = _this$store.currentMain;\n      var rowSelection = {\n        selectedRowKeys: this.props.selectedRowKeys,\n        onChange: this.props.handleSelect\n      };\n      var onClose = this.props.onClose;\n\n      var uploadConfig = function uploadConfig(id) {\n        return {\n          name: 'file',\n          showUploadList: false,\n          action: '/manage/base/file/fileUpload',\n          headers: {\n            token: sessionStorage.getItem('selfToken')\n          },\n          multiple: true,\n          data: {\n            businessId: currentMain.id,\n            businessType: 1,\n            fileType: 1,\n            type: id\n          },\n          beforeUpload: _this2.beforeUpload,\n          onChange: function onChange(info) {\n            if (info.file.status !== 'uploading') {\n              console.log(info.file, info.fileList);\n            }\n\n            if (info.file.status === 'done') {\n              _message.success(\"\".concat(info.file.name, \" \\u4E0A\\u4F20\\u6210\\u529F\"));\n            } else if (info.file.status === 'error') {\n              _message.error(\"\".concat(info.file.name, \" \\u4E0A\\u4F20\\u5931\\u8D25\"));\n            }\n          }\n        };\n      };\n\n      return /*#__PURE__*/React.createElement(_Modal, {\n        title: '查看知识库详情',\n        visible: this.props.visible,\n        footer: /*#__PURE__*/React.createElement(_Button, {\n          type: \"primary\",\n          onClick: onClose,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 6\n          }\n        }, \"\\u5173\\u95ED\"),\n        onCancel: this.props.onClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          marginBottom: '10px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(_Button, {\n        type: \"primary\",\n        onClick: this.handleFileAdd,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 6\n        }\n      }, \"\\u65B0\\u589E\")), /*#__PURE__*/React.createElement(_Table, {\n        size: \"small\",\n        rowSelection: rowSelection,\n        dataSource: fileList,\n        columns: setDeviceFileColumns({\n          handleFileExport: this.handleFileExport,\n          handleFileDel: this.handleFileDel\n        }),\n        isLoading: isLoading,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 5\n        }\n      }), this.state.visible && /*#__PURE__*/React.createElement(_Modal, {\n        title: \"\\u65B0\\u589E\\u6587\\u6863\",\n        visible: this.state.visible,\n        onCancel: this.handleClose,\n        onOk: this.handleClose,\n        okText: \"\\u786E\\u5B9A\",\n        cancelText: \"\\u53D6\\u6D88\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, Object.assign({}, formItemLayout, {\n        label: \"\\u8BBE\\u5907\\u7C7B\\u578B\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 8\n        }\n      }), /*#__PURE__*/React.createElement(_Select, {\n        placeholder: \"\\u9009\\u62E9\\u8BBE\\u5907\\u7C7B\\u578B\",\n        style: {\n          width: 250\n        },\n        showSearch: true,\n        onChange: this.onTypeChange,\n        optionFilterProp: \"children\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 9\n        }\n      }, selectType.length > 0 && selectType.map(function (item) {\n        return /*#__PURE__*/React.createElement(Option, {\n          value: item.id,\n          key: item.id,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 11\n          }\n        }, item.id, \"_\", item.typeName);\n      }))), /*#__PURE__*/React.createElement(_Form.Item, Object.assign({}, formItemLayout, {\n        label: \"\\u8BBE\\u5907\\u578B\\u53F7\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 8\n        }\n      }), /*#__PURE__*/React.createElement(_Select, {\n        placeholder: \"\\u9009\\u62E9\\u8BBE\\u5907\\u578B\\u53F7\",\n        style: {\n          width: 250\n        },\n        showSearch: true,\n        onChange: this.onModelChange,\n        optionFilterProp: \"children\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 9\n        }\n      }, selectModel.length > 0 && selectModel.map(function (item) {\n        return /*#__PURE__*/React.createElement(Option, {\n          value: item.id,\n          key: item.id,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 12\n          }\n        }, item.modelName);\n      })))), /*#__PURE__*/React.createElement(_Divider, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 7\n        }\n      }), /*#__PURE__*/React.createElement(\"ul\", {\n        style: {\n          marginTop: '10px',\n          paddingLeft: '0'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 7\n        }\n      }, setFileType().map(function (item) {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: item.id,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 10\n          }\n        }, /*#__PURE__*/React.createElement(_Form.Item, Object.assign({}, formItemLayout, {\n          label: \"\\u6587\\u6863\\u7C7B\\u578B\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(_Input, {\n          placeholder: \"\\u586B\\u5199\",\n          style: {\n            width: '200px'\n          },\n          value: item.typeName,\n          disabled: true,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 12\n          }\n        })), /*#__PURE__*/React.createElement(_Form.Item, Object.assign({}, formItemLayout, {\n          label: \"\\u8BBE\\u5907\\u6587\\u6863\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(_Upload, Object.assign({}, uploadConfig(item.id), {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 12\n          }\n        }), /*#__PURE__*/React.createElement(_Button, {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(_Icon, {\n          type: \"upload\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 14\n          }\n        }), \" \\u9009\\u62E9\\u6587\\u4EF6\")), /*#__PURE__*/React.createElement(\"span\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 12\n          }\n        }, \"\\u6587\\u4EF6\\u540D\\u79F0\")));\n      }))));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var currentMain = this.store.currentMain; //当前model\n\n      this.store.getDeviceFileList({\n        businessType: 1,\n        id: currentMain.id\n      });\n      this.store.getSelectType({});\n    }\n  }]);\n\n  return FileModal;\n}(Component), _temp)) || _class) || _class);\nexport default FileModal;","map":{"version":3,"sources":["C:/Users/Misaki/Desktop/kda/设备运维前端/bl-device-manage/src/layouts/BasicManage/DefinePage/DeviceDefine/FileModal.js"],"names":["React","Component","inject","observer","setDeviceFileColumns","setFileType","Option","formItemLayout","labelCol","span","wrapperCol","FileModal","props","onTypeChange","value","store","getSelectModel","typeId","onModelChange","setState","modelId","handleFileAdd","visible","beforeUpload","file","fileList","fileName","name","handleFileExport","record","window","open","fileType","innertype","businessId","handleFileDel","type","state","selectedRowKeys","length","warn","title","content","confirm","okText","cancelText","onOk","delFile","ids","id","then","currentMain","getDeviceFileList","businessType","handleClose","handleFileSelect","handleVisible","handleSubmit","values","params","saveType","handleEdit","status","DeviceDefineStore","isLoading","selectModel","selectType","rowSelection","onChange","handleSelect","onClose","uploadConfig","showUploadList","action","headers","token","sessionStorage","getItem","multiple","data","info","console","log","success","error","marginBottom","width","map","item","typeName","modelName","marginTop","paddingLeft","getSelectType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport {\n\tModal,\n\tTable,\n\tButton,\n\tSelect,\n\tForm,\n\tInput,\n\tUpload,\n\tIcon,\n\tmessage,\n\tDivider\n} from 'antd';\nimport { setDeviceFileColumns, setFileType } from '../../cell/methods';\nconst { Option } = Select;\nconst formItemLayout = {\n\tlabelCol: { span: 4 },\n\twrapperCol: { span: 12 }\n};\n@inject('DeviceDefineStore')\n@observer\nclass FileModal extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.store = this.props.DeviceDefineStore;\n\t\tthis.state = {\n\t\t\tvisible: false,\n\t\t\tselectedRowKeys: [],\n\t\t\tmodelId: 0,\n\t\t\tfileName: ''\n\t\t};\n\t}\n\trender() {\n\t\tconst { fileList, isLoading, selectModel, selectType, currentMain } = this.store;\n\t\tconst rowSelection = {\n\t\t\tselectedRowKeys: this.props.selectedRowKeys,\n\t\t\tonChange: this.props.handleSelect\n\t\t};\n\t\tconst { onClose } = this.props;\n\t\tconst uploadConfig = (id) => {\n\t\t\treturn {\n\t\t\t\tname: 'file',\n\t\t\t\tshowUploadList: false,\n\t\t\t\taction: '/manage/base/file/fileUpload',\n\t\t\t\theaders: {\n\t\t\t\t\ttoken: sessionStorage.getItem('selfToken'),\n\t\t\t\t},\n\t\t\t\tmultiple: true,\n\t\t\t\tdata: {\n\t\t\t\t\tbusinessId: currentMain.id,\n\t\t\t\t\tbusinessType: 1,\n\t\t\t\t\tfileType: 1,\n\t\t\t\t\ttype: id,\n\t\t\t\t},\n\t\t\t\tbeforeUpload: this.beforeUpload,\n\t\t\t\tonChange(info) {\n\t\t\t\t\tif (info.file.status !== 'uploading') {\n\t\t\t\t\t\tconsole.log(info.file, info.fileList);\n\t\t\t\t\t}\n\t\t\t\t\tif (info.file.status === 'done') {\n\t\t\t\t\t\tmessage.success(`${info.file.name} 上传成功`);\n\t\t\t\t\t} else if (info.file.status === 'error') {\n\t\t\t\t\t\tmessage.error(`${info.file.name} 上传失败`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\ttitle={'查看知识库详情'}\n\t\t\t\tvisible={this.props.visible}\n\t\t\t\tfooter={\n\t\t\t\t\t<Button type='primary' onClick={onClose}>\n\t\t\t\t\t\t关闭\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t\tonCancel={this.props.onClose}\n\t\t\t>\n\t\t\t\t<div style={{ marginBottom: '10px' }}>\n\t\t\t\t\t<Button type='primary' onClick={this.handleFileAdd}>\n\t\t\t\t\t\t新增\n\t\t\t\t\t</Button>\n\t\t\t\t\t{/* <Button onClick={this.handleFileAdd}>删除</Button> */}\n\t\t\t\t</div>\n\t\t\t\t<Table\n\t\t\t\t\tsize='small'\n\t\t\t\t\trowSelection={rowSelection}\n\t\t\t\t\tdataSource={fileList}\n\t\t\t\t\tcolumns={setDeviceFileColumns({\n\t\t\t\t\t\thandleFileExport: this.handleFileExport,\n\t\t\t\t\t\thandleFileDel: this.handleFileDel\n\t\t\t\t\t})}\n\t\t\t\t\tisLoading={isLoading}\n\t\t\t\t/>\n\t\t\t\t{this.state.visible && (\n\t\t\t\t\t<Modal\n\t\t\t\t\t\ttitle='新增文档'\n\t\t\t\t\t\tvisible={this.state.visible}\n\t\t\t\t\t\tonCancel={this.handleClose}\n\t\t\t\t\t\tonOk={this.handleClose}\n\t\t\t\t\t\tokText='确定'\n\t\t\t\t\t\tcancelText='取消'\n\t\t\t\t\t>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Form.Item {...formItemLayout} label='设备类型'>\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\tplaceholder='选择设备类型'\n\t\t\t\t\t\t\t\t\tstyle={{ width: 250 }}\n\t\t\t\t\t\t\t\t\tshowSearch\n\t\t\t\t\t\t\t\t\tonChange={this.onTypeChange}\n\t\t\t\t\t\t\t\t\toptionFilterProp='children'\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{selectType.length > 0 && selectType.map(item => (\n\t\t\t\t\t\t\t\t\t\t<Option value={item.id} key={item.id}>\n\t\t\t\t\t\t\t\t\t\t\t{item.id}_{item.typeName}\n\t\t\t\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t<Form.Item {...formItemLayout} label='设备型号'>\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\tplaceholder='选择设备型号'\n\t\t\t\t\t\t\t\t\tstyle={{ width: 250 }}\n\t\t\t\t\t\t\t\t\tshowSearch\n\t\t\t\t\t\t\t\t\tonChange={this.onModelChange}\n\t\t\t\t\t\t\t\t\toptionFilterProp='children'\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{selectModel.length > 0 &&\n\t\t\t\t\t\t\t\t\t\tselectModel.map(item => (\n\t\t\t\t\t\t\t\t\t\t\t<Option value={item.id} key={item.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t{item.modelName}\n\t\t\t\t\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<ul style={{ marginTop: '10px', paddingLeft: '0' }}>\n\t\t\t\t\t\t\t{setFileType().map(item => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<li key={item.id}>\n\t\t\t\t\t\t\t\t\t\t<Form.Item {...formItemLayout} label='文档类型'>\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='填写'\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: '200px' }}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={item.typeName}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t\t<Form.Item {...formItemLayout} label='设备文档'>\n\t\t\t\t\t\t\t\t\t\t\t<Upload {...uploadConfig(item.id)}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon type='upload' /> 选择文件\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t\t\t\t\t</Upload>\n\t\t\t\t\t\t\t\t\t\t\t<span>文件名称</span>\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</Modal>\n\t\t\t\t)}\n\t\t\t</Modal>\n\t\t);\n\t}\n\tonTypeChange = value => {\n\t\tthis.store.getSelectModel({ typeId: value });\n\t};\n\tonModelChange = value => {\n\t\tthis.setState({\n\t\t\tmodelId: value\n\t\t});\n\t};\n\thandleFileAdd = () => {\n\t\tthis.setState({\n\t\t\tvisible: true\n\t\t});\n\t};\n\tbeforeUpload = (file, fileList) => {\n\t\tthis.setState({ fileName: file.name })\n\t}\n\thandleFileExport = record => {\n\t\twindow.open(`/manage/base/file/download?fileType=${record.fileType}&type=${record.innertype}&businessId=${record.businessId}&businessType=1`)\n\t\t// this.store.downloadFile({\n\t\t// \tmodelId:record.modelId,\n\t\t// \ttype:record.type\n\t\t// })\n\t};\n\thandleFileDel = ({ type, value }) => {\n\t\tif (type === 'batch') {\n\t\t\tif (this.state.selectedRowKeys.length < 1) {\n\t\t\t\tModal.warn({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '请选择需要删除的文件'\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tModal.confirm({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent:\n\t\t\t\t\t\t'确定删除选中的' +\n\t\t\t\t\t\tthis.state.selectedRowKeys.length +\n\t\t\t\t\t\t'条文件内容？',\n\t\t\t\t\tokText: '确定',\n\t\t\t\t\tcancelText: '取消',\n\t\t\t\t\tonOk: () => {\n\t\t\t\t\t\tthis.store.delFile(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tids: this.state.selectedRowKeys\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'batch'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tModal.confirm({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '确定删除当前文件内容？',\n\t\t\t\tokText: '确定',\n\t\t\t\tcancelText: '取消',\n\t\t\t\tonOk: () => {\n\t\t\t\t\tthis.store.delFile(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: value\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'single'\n\t\t\t\t\t).then(() => {\n\t\t\t\t\t\tconst { currentMain } = this.store; //当前model\n\t\t\t\t\t\tthis.store.getDeviceFileList({\n\t\t\t\t\t\t\tbusinessType: 1,\n\t\t\t\t\t\t\tid: currentMain.id\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\thandleClose = () => {\n\t\tthis.setState({\n\t\t\tvisible: !this.state.visible\n\t\t});\n\t\tconst { currentMain } = this.store; //当前model\n\t\tthis.store.getDeviceFileList({\n\t\t\tbusinessType: 1,\n\t\t\tid: currentMain.id\n\t\t});\n\t};\n\thandleFileSelect = selectedRowKeys => {\n\t\tthis.setState({ selectedRowKeys });\n\t};\n\t/* modal - operate */\n\thandleVisible = () => {\n\t\tthis.store.visible = !this.store.visible;\n\t};\n\t/* 弹窗提交操作 */\n\thandleSubmit = values => {\n\t\tconst { currentMain } = this.store;\n\t\tlet params = {\n\t\t\t...values,\n\t\t\t...currentMain\n\t\t};\n\t\tthis.store.saveType(params);\n\t\tthis.handleVisible();\n\t};\n\t/* 编辑弹窗 */\n\thandleEdit = record => {\n\t\tthis.store.status = 'edit';\n\t\tthis.store.currentMain = record;\n\t\tthis.handleVisible();\n\t};\n\tcomponentDidMount() {\n\t\tconst { currentMain } = this.store; //当前model\n\t\tthis.store.getDeviceFileList({\n\t\t\tbusinessType: 1,\n\t\t\tid: currentMain.id\n\t\t});\n\t\tthis.store.getSelectType({})\n\t}\n}\nexport default FileModal;\n"]},"metadata":{},"sourceType":"module"}