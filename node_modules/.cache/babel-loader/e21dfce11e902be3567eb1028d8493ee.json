{"ast":null,"code":"import _defineProperty from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/src/layouts/WorkManage/OperatePage/Table.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport GlobalList from 'components/GlobalList';\nimport AddModal from './AddModal';\nimport { setWorkColumns } from '../methods';\nvar DefineTable = (_dec = inject('WorkStore', 'DeviceDefineStore'), _dec(_class = observer(_class = (_temp = /*#__PURE__*/function (_Component) {\n  _inherits(DefineTable, _Component);\n\n  var _super = _createSuper(DefineTable);\n\n  function DefineTable(props) {\n    var _this;\n\n    _classCallCheck(this, DefineTable);\n\n    _this = _super.call(this, props);\n\n    _this.handleDistribute = function (record) {\n      _this.store.currentMain = record;\n\n      _this.setState({\n        visible: true\n      });\n    };\n\n    _this.handleDetail = function (record) {\n      _this.store.currentMain = record;\n      _this.store.isDaily = true;\n    };\n\n    _this.onClose = function () {\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.handleVisible = function () {\n      _this.store.visible = !_this.store.visible;\n    };\n\n    _this.handleSubmit = function (values) {\n      var currentMain = _this.store.currentMain;\n\n      var params = _objectSpread({}, values, {}, currentMain);\n\n      _this.store.saveType(params);\n\n      _this.handleVisible();\n    };\n\n    _this.store = _this.props.WorkStore;\n    _this.state = {\n      visible: false,\n      selectedRowKeys: [],\n      fileVisible: false\n    };\n    return _this;\n  }\n\n  _createClass(DefineTable, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$store = this.store,\n          isLoading = _this$store.isLoading,\n          workList = _this$store.workList,\n          workPage = _this$store.workPage,\n          workCols = _this$store.workCols; // const { customerList,selectType } = this.props.DeviceDefineStore;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(GlobalList, {\n        table: {\n          rowKey: 'id',\n          columns: setWorkColumns({\n            cols: workCols,\n            handleDistribute: this.handleDistribute,\n            handleDetail: this.handleDetail\n          }),\n          dataSource: workList,\n          pagination: _objectSpread({}, workPage, {\n            onChange: function onChange(pageIndex, pageSize) {\n              _this2.store.getWork({\n                pageIndex: pageIndex,\n                pageSize: pageSize\n              });\n            }\n          }),\n          loading: isLoading\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 5\n        }\n      }), this.state.visible && /*#__PURE__*/React.createElement(AddModal, {\n        visible: this.state.visible,\n        onClose: this.onClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 28\n        }\n      }));\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {// this.store.workList = []\n      // this.store.workPage = {}\n    }\n  }]);\n\n  return DefineTable;\n}(Component), _temp)) || _class) || _class);\nexport default DefineTable;","map":{"version":3,"sources":["/Users/shoen/Desktop/设备运维前端/bl-device-manage/src/layouts/WorkManage/OperatePage/Table.js"],"names":["React","Component","inject","observer","GlobalList","AddModal","setWorkColumns","DefineTable","props","handleDistribute","record","store","currentMain","setState","visible","handleDetail","isDaily","onClose","handleVisible","handleSubmit","values","params","saveType","WorkStore","state","selectedRowKeys","fileVisible","isLoading","workList","workPage","workCols","rowKey","columns","cols","dataSource","pagination","onChange","pageIndex","pageSize","getWork","loading"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport GlobalList from 'components/GlobalList';\nimport AddModal from './AddModal'\nimport { setWorkColumns, } from '../methods';\n\n@inject('WorkStore', 'DeviceDefineStore')\n@observer\nclass DefineTable extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.store = this.props.WorkStore;\n\t\tthis.state = {\n\t\t\tvisible: false,\n\t\t\tselectedRowKeys: [],\n\t\t\tfileVisible: false\n\t\t}\n\t}\n\trender() {\n\t\tconst {\n\t\t\tisLoading, workList, workPage, workCols\n\t\t} = this.store;\n\t\t// const { customerList,selectType } = this.props.DeviceDefineStore;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<GlobalList\n\t\t\t\t\ttable={{\n\t\t\t\t\t\trowKey: 'id',\n\t\t\t\t\t\tcolumns: setWorkColumns({\n\t\t\t\t\t\t\tcols:workCols, handleDistribute: this.handleDistribute, handleDetail: this.handleDetail\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tdataSource: workList,\n\t\t\t\t\t\tpagination: {\n\t\t\t\t\t\t\t...workPage,\n\t\t\t\t\t\t\tonChange: (pageIndex, pageSize) => {\n\t\t\t\t\t\t\t\tthis.store.getWork({\n\t\t\t\t\t\t\t\t\tpageIndex,\n\t\t\t\t\t\t\t\t\tpageSize,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tloading: isLoading,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t{\n\t\t\t\t\tthis.state.visible && <AddModal\n\t\t\t\t\t\tvisible={this.state.visible}\n\t\t\t\t\t\tonClose={this.onClose}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n\thandleDistribute = record => {\n\t\tthis.store.currentMain = record;\n\t\tthis.setState({\n\t\t\tvisible: true\n\t\t});\n\t};\n\thandleDetail = record => {\n\t\tthis.store.currentMain = record;\n\t\tthis.store.isDaily = true;\n\t}\n\tonClose = () => {\n\t\tthis.setState({\n\t\t\tvisible: false\n\t\t})\n\t}\n\t/* modal - operate */\n\thandleVisible = () => {\n\t\tthis.store.visible = !this.store.visible;\n\t};\n\t/* 弹窗提交操作 */\n\thandleSubmit = values => {\n\t\tconst { currentMain } = this.store;\n\t\tlet params = {\n\t\t\t...values,\n\t\t\t...currentMain\n\t\t}\n\t\tthis.store.saveType(params);\n\t\tthis.handleVisible();\n\t};\n\tcomponentWillUnmount() {\n\t\t// this.store.workList = []\n\t\t// this.store.workPage = {}\n\t}\n}\nexport default DefineTable;\n"]},"metadata":{},"sourceType":"module"}