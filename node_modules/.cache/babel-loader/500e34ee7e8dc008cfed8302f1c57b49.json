{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/drawer/style\";\nimport _Drawer from \"antd/lib/drawer\";\nimport _objectSpread from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/layout/style\";\nimport _Layout from \"antd/lib/layout\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\layouts\\\\HomeLayout\\\\index.js\";\n\nimport React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { toJS } from 'mobx';\nimport { isEmpty } from 'lodash';\nimport { ContainerQuery } from 'react-container-query';\nimport classnames from 'classnames';\nimport { withRouter, NavLink } from 'react-router-dom';\nimport Menu from './Menu';\nimport GlobalHeader from 'components/GlobalHeader';\nimport GlobalCrumbs from 'components/GlobalCrumbs';\nimport Context from './AllContext';\nimport { Media_Query, s_size, m_size, l_size } from 'constants/configs';\nimport { judgeIsMobile } from 'utils/dataTools';\nimport ErrorNotFound from './ErrorNotFound';\nimport './index.less';\nvar Content = _Layout.Content;\nvar Option = _Select.Option;\nvar HomeLayout = (_dec = inject('HomeStore'), withRouter(_class = _dec(_class = observer(_class = (_temp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(HomeLayout, _Component);\n\n  function HomeLayout() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, HomeLayout);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(HomeLayout)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      collapsed: false,\n      firstMount: false\n    };\n\n    _this.getMediaQuery = function (params) {\n      var current;\n\n      for (var key in params) {\n        if (params[key]) {\n          current = key;\n        }\n      }\n\n      if (s_size.includes(current)) {\n        _this.props.HomeStore.changeValue('size_class', 's_size');\n      } else if (m_size.includes(current)) {\n        _this.props.HomeStore.changeValue('size_class', 'm_size');\n      } else if (l_size.includes(current)) {\n        _this.props.HomeStore.changeValue('size_class', 'l_size');\n      }\n    };\n\n    _this.getContext = function () {\n      var _this$props = _this.props,\n          location = _this$props.location,\n          breadcrumbNameMap = _this$props.breadcrumbNameMap;\n      return _objectSpread({\n        location: location,\n        breadcrumbNameMap: breadcrumbNameMap\n      }, _this.props);\n    };\n\n    _this.getLastMenu = function () {\n      var list = sessionStorage.getItem('menu') || [];\n      if (!isEmpty(list)) list = JSON.parse(list).reverse();\n      return list || [];\n    };\n\n    _this.toggle = function () {\n      _this.props.HomeStore.changeValue('collapsed', !_this.props.HomeStore.collapsed);\n\n      _this.props.HomeStore.changeValue('isClickCollapsed', true);\n    };\n\n    _this.toggleMenu = function (actionId) {\n      _this.props.HomeStore.toggleMenu({\n        actionId: actionId\n      }, function (url) {\n        if (url) {\n          _this.props.history.push(url);\n        } else {\n          alert('false');\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(HomeLayout, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var isHome = window.location.pathname === '/index'; // const isMobile = judgeIsMobile(this.props.type).toString();\n\n      var isMobile = false;\n\n      var _toJS = toJS(this.props.HomeStore),\n          size_class = _toJS.size_class;\n\n      var isAuth = true;\n      var layout = React.createElement(_Layout, {\n        className: \"home_layout\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, isAuth && !isHome && (size_class === 's_size' ? React.createElement(_Drawer, {\n        visible: this.state.firstMount ? false : !this.props.HomeStore.collapsed,\n        placement: \"left\",\n        onClose: this.toggle,\n        width: \"200px\",\n        style: {\n          padding: 0,\n          height: '100vh'\n        },\n        bodyStyle: {\n          height: '100%',\n          padding: '0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, React.createElement(Menu, {\n        sizetype: size_class,\n        mobile: isMobile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      })) : React.createElement(Menu, {\n        sizetype: size_class,\n        mobile: isMobile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      })), React.createElement(_Layout, {\n        className: \"right_layout\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(GlobalHeader, {\n        isAuth: isAuth,\n        sizetype: size_class,\n        mobile: isMobile,\n        ishome: isHome,\n        dataSource: toJS(this.props.HomeStore.crumbsList),\n        backToLogin: function backToLogin() {\n          _this2.props.history.push('/login');\n        },\n        visible: this.props.HomeStore.collapsed,\n        toggle: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }), React.createElement(Content, {\n        style: {\n          margin: '8px',\n          padding: 15,\n          background: '#fff',\n          minHeight: 280,\n          overflowY: 'auto',\n          position: 'relative'\n        },\n        id: \"home_content\",\n        mobile: isMobile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(_Select, {\n        defaultValue: \"lucy\",\n        style: {\n          width: 120,\n          float: 'left'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(Option, {\n        value: \"jack\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"\\u76F4\\u63A5\\u63D0\\u4EA4\\u6570\\u636E\"), React.createElement(Option, {\n        value: \"lucy\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"\\u63D0\\u4EA4\\u5E76\\u7BA1\\u7406\\u672C\\u4EBA\\u6570\\u636E\"), React.createElement(Option, {\n        value: \"disabled\",\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"\\u7BA1\\u7406\\u5168\\u90E8\\u6570\\u636E\"), React.createElement(Option, {\n        value: \"Yiminghe\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"\\u67E5\\u770B\\u5168\\u90E8\\u6570\\u636E\")), React.createElement(NavLink, {\n        to: \"/edit\",\n        style: {\n          float: 'right'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(_Button, {\n        type: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"\\u7F16\\u8F91\\u8868\\u5355\")), isAuth ? this.props.children : this.props.children)));\n      return React.createElement(\"div\", {\n        id: \"Assets\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(ContainerQuery, {\n        query: Media_Query,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, function (params) {\n        _this2.getMediaQuery(params);\n\n        return React.createElement(Context.Provider, {\n          value: _this2.getContext(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: classnames(params),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, layout));\n      }));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      this.setState({\n        firstMount: true\n      });\n      /* 进入即请求菜单 */\n\n      if (this.props.history.location.pathname !== '/login') {\n        this.props.HomeStore.getMenuList().then(function (url) {\n          if (_this3.props.history.location.pathname.indexOf('index') === -1) {\n            _this3.props.history.push(url);\n\n            _this3.props.HomeStore.initMenu(_this3.props.history.location.pathname);\n          }\n        });\n      }\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      return {\n        firstMount: false\n      };\n    }\n  }]);\n\n  return HomeLayout;\n}(Component), _temp)) || _class) || _class) || _class);\nexport default HomeLayout;","map":{"version":3,"sources":["F:\\documents\\bl-device-manage-test\\src\\layouts\\HomeLayout\\index.js"],"names":["React","Component","inject","observer","toJS","isEmpty","ContainerQuery","classnames","withRouter","NavLink","Menu","GlobalHeader","GlobalCrumbs","Context","Media_Query","s_size","m_size","l_size","judgeIsMobile","ErrorNotFound","Content","Option","HomeLayout","state","collapsed","firstMount","getMediaQuery","params","current","key","includes","props","HomeStore","changeValue","getContext","location","breadcrumbNameMap","getLastMenu","list","sessionStorage","getItem","JSON","parse","reverse","toggle","toggleMenu","actionId","url","history","push","alert","isHome","window","pathname","isMobile","size_class","isAuth","layout","padding","height","crumbsList","margin","background","minHeight","overflowY","position","width","float","children","setState","getMenuList","then","indexOf","initMenu"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { toJS } from 'mobx';\nimport { isEmpty } from 'lodash';\nimport { ContainerQuery } from 'react-container-query';\nimport classnames from 'classnames';\nimport { withRouter, NavLink } from 'react-router-dom';\nimport Menu from './Menu';\nimport GlobalHeader from 'components/GlobalHeader';\nimport GlobalCrumbs from 'components/GlobalCrumbs';\nimport Context from './AllContext';\nimport { Media_Query, s_size, m_size, l_size } from 'constants/configs';\nimport { Layout, Drawer, Button,Select } from 'antd';\n\n\nimport { judgeIsMobile } from 'utils/dataTools';\nimport ErrorNotFound from './ErrorNotFound';\nimport './index.less';\n\nconst { Content } = Layout;\nconst { Option } = Select;\n@withRouter\n@inject('HomeStore')\n@observer\nclass HomeLayout extends Component {\n  state = {\n    collapsed: false,\n    firstMount: false\n  };\n\n  render() {\n    const isHome = window.location.pathname === '/index';\n    // const isMobile = judgeIsMobile(this.props.type).toString();\n    const isMobile = false;\n    const { size_class, } = toJS(this.props.HomeStore);\n    const isAuth = true;\n    const layout = <Layout className='home_layout'>\n      {\n        isAuth && !isHome && (size_class === 's_size' ?\n          <Drawer\n            visible={this.state.firstMount ? false : !this.props.HomeStore.collapsed}\n            placement=\"left\"\n            onClose={this.toggle}\n            width='200px'\n            style={{\n              padding: 0,\n              height: '100vh',\n            }}\n            bodyStyle={{\n              height: '100%',\n              padding: '0'\n            }}\n          >\n            <Menu sizetype={size_class} mobile={isMobile} />\n          </Drawer>\n          : <Menu sizetype={size_class} mobile={isMobile} />)\n      }\n      <Layout className='right_layout'>\n        <GlobalHeader\n          isAuth={isAuth}\n          sizetype={size_class}\n          mobile={isMobile}\n          ishome={isHome}\n          dataSource={toJS(this.props.HomeStore.crumbsList)}\n          backToLogin={() => { this.props.history.push('/login') }}\n          visible={this.props.HomeStore.collapsed} toggle={this.toggle} />\n        <Content\n          style={{\n            margin: '8px', padding: 15, background: '#fff', minHeight: 280,\n            overflowY: 'auto', position: 'relative'\n          }}\n          id='home_content'\n          mobile={isMobile}\n        >\n          <Select defaultValue=\"lucy\" style={{ width: 120, float:'left' }}>\n            <Option value=\"jack\">直接提交数据</Option>\n            <Option value=\"lucy\">提交并管理本人数据</Option>\n            <Option value=\"disabled\" disabled>\n              管理全部数据\n            </Option>\n            <Option value=\"Yiminghe\">查看全部数据</Option>\n          </Select>\n          <NavLink to='/edit' style={{float: 'right'}}><Button type='primary'>编辑表单</Button></NavLink>\n          {(isAuth ? this.props.children : this.props.children)}\n          {/* {(isAuth ? this.props.children : <ErrorNotFound />)} */}\n        </Content>\n      </Layout>\n    </Layout>;\n    return (\n      <div id='Assets'>\n        <ContainerQuery query={Media_Query}>\n          {params => {\n            this.getMediaQuery(params);\n            return <Context.Provider value={this.getContext()}>\n              <div className={classnames(params)}>\n                {layout}\n              </div>\n            </Context.Provider>\n          }}\n        </ContainerQuery>\n\n      </div>\n    );\n  }\n  getMediaQuery = (params) => {\n    let current;\n    for (let key in params) {\n      if (params[key]) {\n        current = key;\n      }\n    }\n    if (s_size.includes(current)) {\n      this.props.HomeStore.changeValue('size_class', 's_size');\n    } else if (m_size.includes(current)) {\n      this.props.HomeStore.changeValue('size_class', 'm_size');\n    } else if (l_size.includes(current)) {\n      this.props.HomeStore.changeValue('size_class', 'l_size');\n    }\n  }\n  getContext = () => {\n    const { location, breadcrumbNameMap } = this.props;\n    return {\n      location,\n      breadcrumbNameMap,\n      ...this.props\n    };\n  }\n  getLastMenu = () => {\n    let list = sessionStorage.getItem('menu') || [];\n    if (!isEmpty(list))\n      list = JSON.parse(list).reverse();\n    return list || [];\n  }\n\n  toggle = () => {\n    this.props.HomeStore.changeValue('collapsed', !this.props.HomeStore.collapsed);\n    this.props.HomeStore.changeValue('isClickCollapsed', true);\n  }\n  toggleMenu = (actionId) => {\n    this.props.HomeStore.toggleMenu({ actionId }, (url) => {\n      if (url) {\n        this.props.history.push(url);\n      } else {\n        alert('false');\n      }\n    });\n  }\n  static getDerivedStateFromProps(props, state) {\n    return {\n      firstMount: false,\n    }\n  }\n  componentDidMount() {\n    this.setState({\n      firstMount: true\n    });\n    /* 进入即请求菜单 */\n    if (this.props.history.location.pathname !== '/login') {\n      this.props.HomeStore.getMenuList().then((url) => {\n        if (this.props.history.location.pathname.indexOf('index') === -1) {\n          this.props.history.push(url)\n          this.props.HomeStore.initMenu(this.props.history.location.pathname)\n        }\n      })\n    }\n  }\n}\nexport default HomeLayout;"]},"metadata":{},"sourceType":"module"}