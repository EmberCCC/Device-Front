{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nvar _jsxFileName = \"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\components\\\\GlobalForm\\\\index.js\";\n\n/*\r\n * @Author: your name\r\n * @Date: 2022-04-05 11:02:45\r\n * @LastEditTime: 2022-04-05 13:48:27\r\n * @LastEditors: Please set LastEditors\r\n * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n * @FilePath: \\bl-device-manage-test\\src\\components\\GlobalForm\\index.js\r\n */\nimport React, { useState } from 'react';\nimport { GlobalComponent } from 'layouts/TableEdit/config';\nvar Option = _Select.Option;\n\nfunction GlobalForm() {\n  var itemData = [{\n    \"name\": \"Input\",\n    \"attr\": {\n      \"style\": {\n        \"width\": \"60%\"\n      },\n      \"defaultValue\": \"\",\n      \"placeholder\": \"请输入\"\n    },\n    \"label\": \"设备名称\"\n  }, {\n    \"name\": \"TextArea\",\n    \"attr\": {\n      \"defaultValue\": \"\",\n      \"placeholder\": \"请输入\"\n    },\n    \"label\": \"文本域\"\n  }];\n\n  var _useState = useState(String),\n      _useState2 = _slicedToArray(_useState, 2),\n      curItemKey = _useState2[0],\n      setCurItemKey = _useState2[1]; // 当前选中组件的Key\n\n\n  var _useState3 = useState(String),\n      _useState4 = _slicedToArray(_useState3, 2),\n      curItemName = _useState4[0],\n      setCurItemName = _useState4[1]; // 当前选中组件的Name\n\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isChoose = _useState6[0],\n      setIsChoose = _useState6[1]; // 组件是否处于选中状态\n\n\n  var handleLabelChange = function handleLabelChange(e, v) {\n    console.log(e);\n    console.log(v); // itemData.map(item=>{\n    //     console.log(e[0]);\n    // })\n    // itemData[curItemKey].label = val;\n  };\n\n  var renderDiffComponents = function renderDiffComponents(item, indexs, ComponentInfo) {\n    switch (item.name) {\n      case 'Divider':\n        return React.createElement(ComponentInfo, Object.assign({\n          key: indexs\n        }, item.attr, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }));\n\n      case 'Select':\n        return React.createElement(ComponentInfo, {\n          key: indexs,\n          defaultValue: item.attr.defaultValue,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, item.attr.options.map(function (subItem) {\n          return React.createElement(Option, {\n            key: subItem.key,\n            value: subItem.value + '',\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 59\n            },\n            __self: this\n          }, subItem.label);\n        }));\n\n      default:\n        return React.createElement(ComponentInfo, Object.assign({\n          key: indexs\n        }, item.attr, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }));\n    }\n  }; // 递归函数\n\n\n  var loop = function loop(arr, index) {\n    return arr.map(function (item, i) {\n      var indexs = index === '' ? String(i) : \"\".concat(index, \"-\").concat(i);\n\n      if (item) {\n        if (item.children) {\n          return React.createElement(\"div\", Object.assign({}, item.attr, {\n            \"data-id\": indexs,\n            key: indexs,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 75\n            },\n            __self: this\n          }), loop(item.children, indexs));\n        }\n\n        var ComponentInfo = GlobalComponent[item.name];\n        return React.createElement(_Form.Item, {\n          key: indexs,\n          label: item.label,\n          name: item.label,\n          className: \"formItemStyle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, renderDiffComponents(item, indexs, ComponentInfo));\n      } else {\n        return null;\n      }\n    });\n  };\n\n  var sub = function sub(values) {\n    console.log(itemData);\n  };\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(_Form, {\n    layout: 'vertical',\n    onFinish: sub,\n    form: form,\n    onValuesChange: handleLabelChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, loop(itemData, ''), React.createElement(_Form.Item, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(_Button, {\n    type: \"primary\",\n    onClick: sub,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"Submit\"))));\n}\n\nexport default GlobalForm;","map":{"version":3,"sources":["F:\\documents\\bl-device-manage-test\\src\\components\\GlobalForm\\index.js"],"names":["React","useState","GlobalComponent","Option","GlobalForm","itemData","String","curItemKey","setCurItemKey","curItemName","setCurItemName","isChoose","setIsChoose","handleLabelChange","e","v","console","log","renderDiffComponents","item","indexs","ComponentInfo","name","attr","defaultValue","options","map","subItem","key","value","label","loop","arr","index","i","children","sub","values","useForm","form"],"mappings":"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","sourcesContent":["/*\r\n * @Author: your name\r\n * @Date: 2022-04-05 11:02:45\r\n * @LastEditTime: 2022-04-05 13:48:27\r\n * @LastEditors: Please set LastEditors\r\n * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n * @FilePath: \\bl-device-manage-test\\src\\components\\GlobalForm\\index.js\r\n */\r\n\r\nimport React, { useState } from 'react'\r\nimport { Form, Button, Select } from 'antd'\r\nimport { GlobalComponent } from 'layouts/TableEdit/config';\r\n\r\nconst { Option } = Select;\r\n\r\nfunction GlobalForm() {\r\n    const itemData = [\r\n        {\r\n            \"name\": \"Input\",\r\n            \"attr\": {\r\n                \"style\": {\r\n                    \"width\": \"60%\"\r\n                },\r\n                \"defaultValue\": \"\",\r\n                \"placeholder\": \"请输入\"\r\n            },\r\n            \"label\": \"设备名称\"\r\n        },\r\n        {\r\n            \"name\": \"TextArea\",\r\n            \"attr\": {\r\n                \"defaultValue\": \"\",\r\n                \"placeholder\": \"请输入\"\r\n            },\r\n            \"label\": \"文本域\"\r\n        }\r\n    ];\r\n    const [curItemKey, setCurItemKey] = useState(String);             // 当前选中组件的Key\r\n    const [curItemName, setCurItemName] = useState(String);           // 当前选中组件的Name\r\n    const [isChoose, setIsChoose] = useState(false);                  // 组件是否处于选中状态\r\n\r\n    const handleLabelChange = (e,v) => {\r\n        console.log(e);\r\n        console.log(v);\r\n        // itemData.map(item=>{\r\n        //     console.log(e[0]);\r\n        // })\r\n        // itemData[curItemKey].label = val;\r\n    }\r\n\r\n    const renderDiffComponents = (item, indexs, ComponentInfo) => {\r\n        switch (item.name) {\r\n            case 'Divider':\r\n                return <ComponentInfo key={indexs} {...item.attr}></ComponentInfo>\r\n            case 'Select':\r\n                return (\r\n                    <ComponentInfo key={indexs} defaultValue={item.attr.defaultValue}>\r\n                        {\r\n                            item.attr.options.map(subItem => <Option key={subItem.key} value={subItem.value + ''}>{subItem.label}</Option>)\r\n                        }\r\n                    </ComponentInfo>\r\n                )\r\n            default:\r\n                return <ComponentInfo key={indexs} {...item.attr} />\r\n        }\r\n    }\r\n    // 递归函数\r\n    const loop = (arr, index) => {\r\n        return (\r\n            arr.map((item, i) => {\r\n                const indexs = index === '' ? String(i) : `${index}-${i}`;\r\n                if (item) {\r\n                    if (item.children) {\r\n                        return (\r\n                            <div {...item.attr} data-id={indexs} key={indexs}>\r\n                                {loop(item.children, indexs)}\r\n                            </div>\r\n                        )\r\n                    }\r\n                    const ComponentInfo = GlobalComponent[item.name]\r\n                    return (\r\n                        <Form.Item\r\n                            key={indexs}\r\n                            label={item.label}\r\n                            name={item.label}\r\n                            className='formItemStyle'\r\n                        >\r\n                            {\r\n                                renderDiffComponents(item, indexs, ComponentInfo)\r\n                            }\r\n                        </Form.Item>\r\n                    )\r\n                } else {\r\n                    return null\r\n                }\r\n            })\r\n        )\r\n    };\r\n\r\n    const sub = (values) => {\r\n        console.log(itemData);\r\n    }\r\n    const [form] = Form.useForm();\r\n    return <div>\r\n        <Form layout={'vertical'} onFinish={sub} form={form} onValuesChange={handleLabelChange}>\r\n            {loop(itemData, '')}\r\n            <Form.Item>\r\n                <Button type=\"primary\" onClick={sub}>Submit</Button>\r\n            </Form.Item>\r\n        </Form>\r\n    </div>\r\n}\r\nexport default GlobalForm"]},"metadata":{},"sourceType":"module"}