{"ast":null,"code":"import _slicedToArray from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nvar _jsxFileName = \"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\components\\\\GlobalForm\\\\index.js\";\n\n/*\r\n * @Author: your name\r\n * @Date: 2022-04-05 11:02:45\r\n * @LastEditTime: 2022-04-05 11:48:01\r\n * @LastEditors: Please set LastEditors\r\n * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n * @FilePath: \\bl-device-manage-test\\src\\components\\GlobalForm\\index.js\r\n */\nimport React, { useState } from 'react';\nimport { GlobalComponent } from 'layouts/TableEdit/config';\nvar Option = _Select.Option;\n\nfunction GlobalForm() {\n  var _useState = useState(Array),\n      _useState2 = _slicedToArray(_useState, 2),\n      itemData = _useState2[0],\n      setItemData = _useState2[1]; // 组件数据\n\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isShowModal = _useState4[0],\n      setIsShowModal = _useState4[1]; // 弹框是否显示\n\n\n  var _useState5 = useState(String),\n      _useState6 = _slicedToArray(_useState5, 2),\n      curItemKey = _useState6[0],\n      setCurItemKey = _useState6[1]; // 当前选中组件的Key\n\n\n  var _useState7 = useState(String),\n      _useState8 = _slicedToArray(_useState7, 2),\n      curItemName = _useState8[0],\n      setCurItemName = _useState8[1]; // 当前选中组件的Name\n\n\n  var _useState9 = useState(String),\n      _useState10 = _slicedToArray(_useState9, 2),\n      curItemType = _useState10[0],\n      setCurItemType = _useState10[1]; // 当前选中组件的Type\n\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      isChoose = _useState12[0],\n      setIsChoose = _useState12[1]; // 组件是否处于选中状态\n\n\n  var renderDiffComponents = function renderDiffComponents(item, indexs, ComponentInfo) {\n    switch (item.name) {\n      case 'Divider':\n        return React.createElement(ComponentInfo, Object.assign({\n          key: indexs\n        }, item.attr, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 27\n          },\n          __self: this\n        }));\n\n      case 'Select':\n        return React.createElement(ComponentInfo, {\n          key: indexs,\n          defaultValue: item.attr.defaultValue,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 30\n          },\n          __self: this\n        }, item.attr.options.map(function (subItem) {\n          return React.createElement(Option, {\n            key: subItem.key,\n            value: subItem.value + '',\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 32\n            },\n            __self: this\n          }, subItem.label);\n        }));\n\n      default:\n        return React.createElement(ComponentInfo, Object.assign({\n          key: indexs\n        }, item.attr, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37\n          },\n          __self: this\n        }));\n    }\n  }; // 递归函数\n\n\n  var loop = function loop(arr, index) {\n    console.log(itemData);\n    return arr.map(function (item, i) {\n      var indexs = index === '' ? String(i) : \"\".concat(index, \"-\").concat(i);\n\n      if (item) {\n        if (item.children) {\n          return React.createElement(\"div\", Object.assign({}, item.attr, {\n            \"data-id\": indexs,\n            key: indexs,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 50\n            },\n            __self: this\n          }), loop(item.children, indexs));\n        }\n\n        var ComponentInfo = GlobalComponent[item.name];\n        return React.createElement(\"div\", {\n          \"data-id\": indexs,\n          key: indexs,\n          type: item.name,\n          className: \"formItemStyle\",\n          style: isChoose && indexs === curItemKey ? {\n            border: '1px solid #FF3333'\n          } : {},\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, item.name !== 'Divider' && React.createElement(\"div\", {\n          className: \"formItemLabel\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, isChoose ? indexs === curItemKey ? curItemName : item.label : item.label), renderDiffComponents(item, indexs, ComponentInfo));\n      } else {\n        return null;\n      }\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, loop(itemData, ''));\n}\n\nexport default GlobalForm;","map":{"version":3,"sources":["F:\\documents\\bl-device-manage-test\\src\\components\\GlobalForm\\index.js"],"names":["React","useState","GlobalComponent","Option","GlobalForm","Array","itemData","setItemData","isShowModal","setIsShowModal","String","curItemKey","setCurItemKey","curItemName","setCurItemName","curItemType","setCurItemType","isChoose","setIsChoose","renderDiffComponents","item","indexs","ComponentInfo","name","attr","defaultValue","options","map","subItem","key","value","label","loop","arr","index","console","log","i","children","border"],"mappings":"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","sourcesContent":["/*\r\n * @Author: your name\r\n * @Date: 2022-04-05 11:02:45\r\n * @LastEditTime: 2022-04-05 11:48:01\r\n * @LastEditors: Please set LastEditors\r\n * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n * @FilePath: \\bl-device-manage-test\\src\\components\\GlobalForm\\index.js\r\n */\r\n\r\nimport React, { useState } from 'react'\r\nimport { Form, Input, Button, Row, Col,Select } from 'antd'\r\nimport { GlobalComponent } from 'layouts/TableEdit/config';\r\n\r\nconst { Option } = Select;\r\n\r\nfunction GlobalForm() {\r\n    const [itemData, setItemData] = useState(Array);                  // 组件数据\r\n    const [isShowModal, setIsShowModal] = useState(false);            // 弹框是否显示\r\n    const [curItemKey, setCurItemKey] = useState(String);             // 当前选中组件的Key\r\n    const [curItemName, setCurItemName] = useState(String);           // 当前选中组件的Name\r\n    const [curItemType, setCurItemType] = useState(String);           // 当前选中组件的Type\r\n    const [isChoose, setIsChoose] = useState(false);                  // 组件是否处于选中状态\r\n\r\n    const renderDiffComponents = (item, indexs, ComponentInfo) => {\r\n        switch (item.name) {\r\n            case 'Divider':\r\n                return <ComponentInfo key={indexs} {...item.attr}></ComponentInfo>\r\n            case 'Select':\r\n                return (\r\n                    <ComponentInfo key={indexs} defaultValue={item.attr.defaultValue}>\r\n                        {\r\n                            item.attr.options.map(subItem => <Option key={subItem.key} value={subItem.value + ''}>{subItem.label}</Option>)\r\n                        }\r\n                    </ComponentInfo>\r\n                )\r\n            default:\r\n                return <ComponentInfo key={indexs} {...item.attr} />\r\n        }\r\n    }\r\n\r\n    // 递归函数\r\n  const loop = (arr, index) => {\r\n    console.log(itemData)\r\n    return (\r\n      arr.map((item, i) => {\r\n        const indexs = index === '' ? String(i) : `${index}-${i}`;\r\n        if (item) {\r\n          if (item.children) {\r\n            return (\r\n              <div {...item.attr} data-id={indexs} key={indexs}>\r\n                  {loop(item.children, indexs)}\r\n              </div>\r\n            )\r\n          }\r\n          const ComponentInfo = GlobalComponent[item.name]\r\n          return (\r\n            <div\r\n              data-id={indexs}\r\n              key={indexs}\r\n              type={item.name}\r\n              className='formItemStyle'\r\n              style={(isChoose && indexs === curItemKey) ? { border: '1px solid #FF3333' } : {}}\r\n            >\r\n              {\r\n                item.name !== 'Divider' &&\r\n                <div className='formItemLabel'>{isChoose ? (indexs === curItemKey ? curItemName : item.label) : item.label}</div>\r\n              }\r\n              {\r\n                renderDiffComponents(item, indexs, ComponentInfo)\r\n              }\r\n            </div>\r\n          )\r\n        } else {\r\n          return null\r\n        }\r\n      })\r\n    )\r\n  };\r\n    return <div>\r\n        {loop(itemData,'')}\r\n    </div>\r\n}\r\nexport default GlobalForm"]},"metadata":{},"sourceType":"module"}