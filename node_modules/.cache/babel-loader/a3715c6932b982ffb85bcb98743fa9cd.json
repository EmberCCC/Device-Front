{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nvar _jsxFileName = \"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\components\\\\GlobalForm\\\\index.js\";\n\n/*\r\n * @Author: your name\r\n * @Date: 2022-04-05 11:02:45\r\n * @LastEditTime: 2022-04-05 12:20:39\r\n * @LastEditors: Please set LastEditors\r\n * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n * @FilePath: \\bl-device-manage-test\\src\\components\\GlobalForm\\index.js\r\n */\nimport React, { useState } from 'react';\nimport { GlobalComponent } from 'layouts/TableEdit/config';\nvar Option = _Select.Option;\n\nfunction GlobalForm() {\n  var _this = this;\n\n  var itemData = [{\n    \"name\": \"Input\",\n    \"attr\": {\n      \"style\": {\n        \"width\": \"60%\"\n      },\n      \"defaultValue\": \"\",\n      \"placeholder\": \"请输入\"\n    },\n    \"label\": \"文本框\"\n  }, {\n    \"name\": \"TextArea\",\n    \"attr\": {\n      \"defaultValue\": \"\",\n      \"placeholder\": \"请输入\"\n    },\n    \"label\": \"文本域\"\n  }]; // 组件数据\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isShowModal = _useState2[0],\n      setIsShowModal = _useState2[1]; // 弹框是否显示\n\n\n  var _useState3 = useState(String),\n      _useState4 = _slicedToArray(_useState3, 2),\n      curItemKey = _useState4[0],\n      setCurItemKey = _useState4[1]; // 当前选中组件的Key\n\n\n  var _useState5 = useState(String),\n      _useState6 = _slicedToArray(_useState5, 2),\n      curItemName = _useState6[0],\n      setCurItemName = _useState6[1]; // 当前选中组件的Name\n\n\n  var _useState7 = useState(String),\n      _useState8 = _slicedToArray(_useState7, 2),\n      curItemType = _useState8[0],\n      setCurItemType = _useState8[1]; // 当前选中组件的Type\n\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isChoose = _useState10[0],\n      setIsChoose = _useState10[1]; // 组件是否处于选中状态\n\n\n  var renderDiffComponents = function renderDiffComponents(item, indexs, ComponentInfo) {\n    switch (item.name) {\n      case 'Divider':\n        return React.createElement(ComponentInfo, Object.assign({\n          key: indexs\n        }, item.attr, {\n          onClick: changeValue,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }));\n\n      case 'Select':\n        return React.createElement(ComponentInfo, {\n          key: indexs,\n          defaultValue: item.attr.defaultValue,\n          onClick: changeValue,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, item.attr.options.map(function (subItem) {\n          return React.createElement(Option, {\n            key: subItem.key,\n            value: subItem.value + '',\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 52\n            },\n            __self: this\n          }, subItem.label);\n        }));\n\n      default:\n        return React.createElement(ComponentInfo, Object.assign({\n          key: indexs\n        }, item.attr, {\n          onClick: changeValue,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }));\n    }\n  };\n\n  var changeValue = function changeValue() {\n    console.log(_this); // this.defaultValue = this;\n  }; // 递归函数\n\n\n  var loop = function loop(arr, index) {\n    return arr.map(function (item, i) {\n      var indexs = index === '' ? String(i) : \"\".concat(index, \"-\").concat(i);\n\n      if (item) {\n        if (item.children) {\n          return React.createElement(\"div\", Object.assign({}, item.attr, {\n            \"data-id\": indexs,\n            key: indexs,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 72\n            },\n            __self: this\n          }), loop(item.children, indexs));\n        }\n\n        var ComponentInfo = GlobalComponent[item.name];\n        return React.createElement(_Form.Item, {\n          key: indexs,\n          label: item.name,\n          className: \"formItemStyle\",\n          style: isChoose && indexs === curItemKey ? {\n            border: '1px solid #FF3333'\n          } : {},\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, item.name !== 'Divider' && React.createElement(\"div\", {\n          className: \"formItemLabel\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, isChoose ? indexs === curItemKey ? curItemName : item.label : item.label), renderDiffComponents(item, indexs, ComponentInfo));\n      } else {\n        return null;\n      }\n    });\n  };\n\n  var sub = function sub() {\n    console.log(111);\n    console.log(itemData);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(_Form, {\n    layout: 'vertical',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, loop(itemData, ''), React.createElement(_Form.Item, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(_Button, {\n    type: \"primary\",\n    onClick: sub,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \"Submit\"))));\n}\n\nexport default GlobalForm;","map":{"version":3,"sources":["F:\\documents\\bl-device-manage-test\\src\\components\\GlobalForm\\index.js"],"names":["React","useState","GlobalComponent","Option","GlobalForm","itemData","isShowModal","setIsShowModal","String","curItemKey","setCurItemKey","curItemName","setCurItemName","curItemType","setCurItemType","isChoose","setIsChoose","renderDiffComponents","item","indexs","ComponentInfo","name","attr","changeValue","defaultValue","options","map","subItem","key","value","label","console","log","loop","arr","index","i","children","border","sub"],"mappings":";;;;;;;;;AAAA;;;;;;;;AASA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AAEA,SAASC,eAAT,QAAgC,0BAAhC;IAEQC,M,WAAAA,M;;AAER,SAASC,UAAT,GAAsB;AAAA;;AAClB,MAAMC,QAAQ,GAAG,CACb;AACI,YAAQ,OADZ;AAEI,YAAQ;AACJ,eAAS;AACL,iBAAS;AADJ,OADL;AAIJ,sBAAgB,EAJZ;AAKJ,qBAAe;AALX,KAFZ;AASI,aAAS;AATb,GADa,EAYb;AACI,YAAQ,UADZ;AAEI,YAAQ;AACJ,sBAAgB,EADZ;AAEJ,qBAAe;AAFX,KAFZ;AAMI,aAAS;AANb,GAZa,CAAjB,CADkB,CAqBE;;AArBF,kBAsBoBJ,QAAQ,CAAC,KAAD,CAtB5B;AAAA;AAAA,MAsBXK,WAtBW;AAAA,MAsBEC,cAtBF,kBAsBgD;;;AAtBhD,mBAuBkBN,QAAQ,CAACO,MAAD,CAvB1B;AAAA;AAAA,MAuBXC,UAvBW;AAAA,MAuBCC,aAvBD,kBAuBgD;;;AAvBhD,mBAwBoBT,QAAQ,CAACO,MAAD,CAxB5B;AAAA;AAAA,MAwBXG,WAxBW;AAAA,MAwBEC,cAxBF,kBAwBgD;;;AAxBhD,mBAyBoBX,QAAQ,CAACO,MAAD,CAzB5B;AAAA;AAAA,MAyBXK,WAzBW;AAAA,MAyBEC,cAzBF,kBAyBgD;;;AAzBhD,mBA0Bcb,QAAQ,CAAC,KAAD,CA1BtB;AAAA;AAAA,MA0BXc,QA1BW;AAAA,MA0BDC,WA1BC,mBA0BgD;;;AAElE,MAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,IAAD,EAAOC,MAAP,EAAeC,aAAf,EAAiC;AAC1D,YAAQF,IAAI,CAACG,IAAb;AACI,WAAK,SAAL;AACI,eAAO,oBAAC,aAAD;AAAe,UAAA,GAAG,EAAEF;AAApB,WAAgCD,IAAI,CAACI,IAArC;AAA2C,UAAA,OAAO,EAAEC,WAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAP;;AACJ,WAAK,QAAL;AACI,eACI,oBAAC,aAAD;AAAe,UAAA,GAAG,EAAEJ,MAApB;AAA4B,UAAA,YAAY,EAAED,IAAI,CAACI,IAAL,CAAUE,YAApD;AAAkE,UAAA,OAAO,EAAED,WAA3E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAEQL,IAAI,CAACI,IAAL,CAAUG,OAAV,CAAkBC,GAAlB,CAAsB,UAAAC,OAAO;AAAA,iBAAI,oBAAC,MAAD;AAAQ,YAAA,GAAG,EAAEA,OAAO,CAACC,GAArB;AAA0B,YAAA,KAAK,EAAED,OAAO,CAACE,KAAR,GAAgB,EAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAsDF,OAAO,CAACG,KAA9D,CAAJ;AAAA,SAA7B,CAFR,CADJ;;AAOJ;AACI,eAAO,oBAAC,aAAD;AAAe,UAAA,GAAG,EAAEX;AAApB,WAAgCD,IAAI,CAACI,IAArC;AAA2C,UAAA,OAAO,EAAEC,WAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAP;AAZR;AAcH,GAfD;;AAgBA,MAAMA,WAAW,GAAG,SAAdA,WAAc,GAAI;AACpBQ,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EADoB,CAEpB;AACH,GAHD,CA5CkB,CAgDlB;;;AACA,MAAMC,IAAI,GAAG,SAAPA,IAAO,CAACC,GAAD,EAAMC,KAAN,EAAgB;AACzB,WACID,GAAG,CAACR,GAAJ,CAAQ,UAACR,IAAD,EAAOkB,CAAP,EAAa;AACjB,UAAMjB,MAAM,GAAGgB,KAAK,KAAK,EAAV,GAAe3B,MAAM,CAAC4B,CAAD,CAArB,aAA8BD,KAA9B,cAAuCC,CAAvC,CAAf;;AACA,UAAIlB,IAAJ,EAAU;AACN,YAAIA,IAAI,CAACmB,QAAT,EAAmB;AACf,iBACI,6CAASnB,IAAI,CAACI,IAAd;AAAoB,uBAASH,MAA7B;AAAqC,YAAA,GAAG,EAAEA,MAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cACKc,IAAI,CAACf,IAAI,CAACmB,QAAN,EAAgBlB,MAAhB,CADT,CADJ;AAKH;;AACD,YAAMC,aAAa,GAAGlB,eAAe,CAACgB,IAAI,CAACG,IAAN,CAArC;AACA,eACI,0BAAM,IAAN;AACI,UAAA,GAAG,EAAEF,MADT;AAEI,UAAA,KAAK,EAAED,IAAI,CAACG,IAFhB;AAGI,UAAA,SAAS,EAAC,eAHd;AAII,UAAA,KAAK,EAAGN,QAAQ,IAAII,MAAM,KAAKV,UAAxB,GAAsC;AAAE6B,YAAAA,MAAM,EAAE;AAAV,WAAtC,GAAwE,EAJnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAOQpB,IAAI,CAACG,IAAL,KAAc,SAAd,IACA;AAAK,UAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAgCN,QAAQ,GAAII,MAAM,KAAKV,UAAX,GAAwBE,WAAxB,GAAsCO,IAAI,CAACY,KAA/C,GAAwDZ,IAAI,CAACY,KAArG,CARR,EAWQb,oBAAoB,CAACC,IAAD,EAAOC,MAAP,EAAeC,aAAf,CAX5B,CADJ;AAgBH,OAzBD,MAyBO;AACH,eAAO,IAAP;AACH;AACJ,KA9BD,CADJ;AAiCH,GAlCD;;AAoCA,MAAMmB,GAAG,GAAG,SAANA,GAAM,GAAI;AACZR,IAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY3B,QAAZ;AACH,GAHD;;AAKA,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACH;AAAM,IAAA,MAAM,EAAE,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK4B,IAAI,CAAC5B,QAAD,EAAW,EAAX,CADT,EAEI,0BAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAQ,IAAA,IAAI,EAAC,SAAb;AAAuB,IAAA,OAAO,EAAEkC,GAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,CAFJ,CADG,CAAP;AAQH;;AACD,eAAenC,UAAf","sourcesContent":["/*\r\n * @Author: your name\r\n * @Date: 2022-04-05 11:02:45\r\n * @LastEditTime: 2022-04-05 12:20:39\r\n * @LastEditors: Please set LastEditors\r\n * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n * @FilePath: \\bl-device-manage-test\\src\\components\\GlobalForm\\index.js\r\n */\r\n\r\nimport React, { useState } from 'react'\r\nimport { Form, Input, Button, Row, Col, Select } from 'antd'\r\nimport { GlobalComponent } from 'layouts/TableEdit/config';\r\n\r\nconst { Option } = Select;\r\n\r\nfunction GlobalForm() {\r\n    const itemData = [\r\n        {\r\n            \"name\": \"Input\",\r\n            \"attr\": {\r\n                \"style\": {\r\n                    \"width\": \"60%\"\r\n                },\r\n                \"defaultValue\": \"\",\r\n                \"placeholder\": \"请输入\"\r\n            },\r\n            \"label\": \"文本框\"\r\n        },\r\n        {\r\n            \"name\": \"TextArea\",\r\n            \"attr\": {\r\n                \"defaultValue\": \"\",\r\n                \"placeholder\": \"请输入\"\r\n            },\r\n            \"label\": \"文本域\"\r\n        }\r\n    ];                  // 组件数据\r\n    const [isShowModal, setIsShowModal] = useState(false);            // 弹框是否显示\r\n    const [curItemKey, setCurItemKey] = useState(String);             // 当前选中组件的Key\r\n    const [curItemName, setCurItemName] = useState(String);           // 当前选中组件的Name\r\n    const [curItemType, setCurItemType] = useState(String);           // 当前选中组件的Type\r\n    const [isChoose, setIsChoose] = useState(false);                  // 组件是否处于选中状态\r\n\r\n    const renderDiffComponents = (item, indexs, ComponentInfo) => {\r\n        switch (item.name) {\r\n            case 'Divider':\r\n                return <ComponentInfo key={indexs} {...item.attr} onClick={changeValue}></ComponentInfo>\r\n            case 'Select':\r\n                return (\r\n                    <ComponentInfo key={indexs} defaultValue={item.attr.defaultValue} onClick={changeValue}>\r\n                        {\r\n                            item.attr.options.map(subItem => <Option key={subItem.key} value={subItem.value + ''}>{subItem.label}</Option>)\r\n                        }\r\n                    </ComponentInfo>\r\n                )\r\n            default:\r\n                return <ComponentInfo key={indexs} {...item.attr} onClick={changeValue}/>\r\n        }\r\n    }\r\n    const changeValue = ()=>{\r\n        console.log(this);\r\n        // this.defaultValue = this;\r\n    }\r\n    // 递归函数\r\n    const loop = (arr, index) => {\r\n        return (\r\n            arr.map((item, i) => {\r\n                const indexs = index === '' ? String(i) : `${index}-${i}`;\r\n                if (item) {\r\n                    if (item.children) {\r\n                        return (\r\n                            <div {...item.attr} data-id={indexs} key={indexs}>\r\n                                {loop(item.children, indexs)}\r\n                            </div>\r\n                        )\r\n                    }\r\n                    const ComponentInfo = GlobalComponent[item.name]\r\n                    return (\r\n                        <Form.Item\r\n                            key={indexs}\r\n                            label={item.name}\r\n                            className='formItemStyle'\r\n                            style={(isChoose && indexs === curItemKey) ? { border: '1px solid #FF3333' } : {}}\r\n                        >\r\n                            {\r\n                                item.name !== 'Divider' &&\r\n                                <div className='formItemLabel'>{isChoose ? (indexs === curItemKey ? curItemName : item.label) : item.label}</div>\r\n                            }\r\n                            {\r\n                                renderDiffComponents(item, indexs, ComponentInfo)\r\n                            }\r\n                        </Form.Item>\r\n                    )\r\n                } else {\r\n                    return null\r\n                }\r\n            })\r\n        )\r\n    };\r\n\r\n    const sub = ()=>{\r\n        console.log(111);\r\n        console.log(itemData);\r\n    }\r\n\r\n    return <div>\r\n        <Form layout={'vertical'}>\r\n            {loop(itemData, '')}\r\n            <Form.Item>\r\n                <Button type=\"primary\" onClick={sub}>Submit</Button>\r\n            </Form.Item>\r\n        </Form>\r\n    </div>\r\n}\r\nexport default GlobalForm"]},"metadata":{},"sourceType":"module"}