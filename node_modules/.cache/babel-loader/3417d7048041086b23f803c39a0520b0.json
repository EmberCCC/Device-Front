{"ast":null,"code":"import \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport _objectSpread from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport \"antd/lib/tree/style\";\nimport _Tree from \"antd/lib/tree\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"F:\\\\documents\\\\bl-device-manage\\\\src\\\\layouts\\\\SystemManager\\\\RoleManager\\\\RoleDialog.js\";\n\nimport React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { toJS } from 'mobx';\nimport { Form } from '@ant-design/compatible';\nimport '@ant-design/compatible/assets/index.css';\nimport GlobalModal from 'Components/GlobalModal';\nvar TreeNode = _Tree.TreeNode;\nvar RoleDialog = (_dec = inject('SystemStore'), _dec(_class = observer(_class = (_temp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RoleDialog, _Component);\n\n  function RoleDialog() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, RoleDialog);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(RoleDialog)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.renderTreeNodes = function (data) {\n      return data.map(function (item) {\n        if (item.children) {\n          return React.createElement(TreeNode, {\n            title: item.text,\n            key: item.id,\n            dataRef: item,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 17\n            },\n            __self: this\n          }, _this.renderTreeNodes(item.children));\n        }\n\n        return React.createElement(TreeNode, Object.assign({}, item, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 22\n          },\n          __self: this\n        }));\n      });\n    };\n\n    _this.onCheck = function (checkedKeys) {\n      console.log('onCheck', checkedKeys);\n      _this.props.SystemStore.formData.menuIds = checkedKeys;\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var _this$props$SystemSto = _this.props.SystemStore,\n          getData = _this$props$SystemSto.getData,\n          modalChange = _this$props$SystemSto.modalChange,\n          addNewRole = _this$props$SystemSto.addNewRole,\n          formData = _this$props$SystemSto.formData,\n          PageInfo = _this$props$SystemSto.PageInfo,\n          roleName = _this$props$SystemSto.roleName;\n\n      _this.props.form.validateFields(function (err, values) {\n        console.log(values, formData);\n\n        if (!err) {\n          if (formData.id) {\n            addNewRole(0, _objectSpread({}, formData, values)).then(function (res) {\n              _message.success('更新成功');\n\n              modalChange(0);\n              getData(2, {\n                pageIndex: PageInfo.pageIndex,\n                pageSize: PageInfo.pageSize,\n                roleName: roleName\n              });\n            });\n          } else {\n            // formData.menuIds = formData.menuIds.join(',')\n            addNewRole(1, _objectSpread({}, formData, values)).then(function (res) {\n              _message.success('添加成功');\n\n              modalChange(0);\n              getData(2, {\n                pageIndex: PageInfo.pageIndex,\n                pageSize: PageInfo.pageSize,\n                roleName: roleName\n              });\n            });\n          }\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(RoleDialog, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props$SystemSto2 = this.props.SystemStore,\n          modalVisible = _this$props$SystemSto2.modalVisible,\n          formData = _this$props$SystemSto2.formData,\n          treeData = _this$props$SystemSto2.treeData;\n      var formLabelCol = {\n        span: 4\n      };\n      var formWrapperCol = {\n        span: 18\n      };\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      console.log(formData.menuIds);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33\n        },\n        __self: this\n      }, modalVisible && React.createElement(GlobalModal, {\n        title: JSON.stringify(formData) === '{}' ? '新增' : '编辑',\n        visible: modalVisible,\n        width: '50%',\n        onOk: this.handleSubmit,\n        onCancel: function onCancel(e) {\n          return _this2.props.SystemStore.modalChange(0);\n        },\n        children: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        }, React.createElement(Form, {\n          onSubmit: this.handleSubmit,\n          layout: \"horizontal\",\n          labelCol: formLabelCol,\n          wrapperCol: formWrapperCol,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43\n          },\n          __self: this\n        }, React.createElement(Form.Item, {\n          label: \"\\u89D2\\u8272\\u540D\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, getFieldDecorator('roleName', {\n          rules: [{\n            required: true,\n            message: '请输入角色名称'\n          }],\n          initialValue: formData.roleName || ''\n        })(React.createElement(_Input, {\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u89D2\\u8272\\u540D\\u79F0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        }))), React.createElement(Form.Item, {\n          label: \"\\u5907\\u6CE8\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, getFieldDecorator('remark', {\n          initialValue: formData.remark || ''\n        })(React.createElement(_Input, {\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u5907\\u6CE8\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }))), React.createElement(Form.Item, {\n          label: \"\\u83DC\\u5355\\u6743\\u9650\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            height: 450,\n            overflowY: 'auto'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, React.createElement(_Tree, {\n          checkable: true,\n          onExpand: this.onExpand,\n          defaultExpandedKeys: ['-1'],\n          onCheck: this.onCheck,\n          checkedKeys: formData.menuIds,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, this.renderTreeNodes(treeData)))))),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return RoleDialog;\n}(Component), _temp)) || _class) || _class);\nvar RoleDialogForm = Form.create({\n  name: 'define'\n})(RoleDialog);\nexport default RoleDialogForm;","map":{"version":3,"sources":["F:\\documents\\bl-device-manage\\src\\layouts\\SystemManager\\RoleManager\\RoleDialog.js"],"names":["React","Component","inject","observer","toJS","Form","GlobalModal","TreeNode","RoleDialog","renderTreeNodes","data","map","item","children","text","id","onCheck","checkedKeys","console","log","props","SystemStore","formData","menuIds","handleSubmit","e","preventDefault","getData","modalChange","addNewRole","PageInfo","roleName","form","validateFields","err","values","then","res","success","pageIndex","pageSize","modalVisible","treeData","formLabelCol","span","formWrapperCol","getFieldDecorator","JSON","stringify","rules","required","message","initialValue","remark","height","overflowY","onExpand","RoleDialogForm","create","name"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { toJS } from 'mobx';\r\nimport { Form } from '@ant-design/compatible';\r\nimport '@ant-design/compatible/assets/index.css';\r\nimport { message, Input, Radio, Tree } from 'antd';\r\nimport GlobalModal from 'Components/GlobalModal';\r\nconst { TreeNode } = Tree;\r\n@inject('SystemStore')\r\n@observer\r\nclass RoleDialog extends Component {\r\n\r\n    renderTreeNodes = data =>\r\n        data.map(item => {\r\n            if (item.children) {\r\n                return (\r\n                    <TreeNode title={item.text} key={item.id} dataRef={item}>\r\n                        {this.renderTreeNodes(item.children)}\r\n                    </TreeNode>\r\n                );\r\n            }\r\n            return <TreeNode {...item} />;\r\n        });\r\n\r\n\r\n    render() {\r\n        const { modalVisible, formData, treeData } = this.props.SystemStore\r\n        const formLabelCol = { span: 4 }\r\n        const formWrapperCol = { span: 18 }\r\n        const { getFieldDecorator } = this.props.form;\r\n        console.log(formData.menuIds);\r\n\r\n        return <div>\r\n            {\r\n                modalVisible && <GlobalModal\r\n                    title={JSON.stringify(formData) === '{}' ? '新增' : '编辑'}\r\n                    visible={modalVisible}\r\n                    width={'50%'}\r\n                    onOk={this.handleSubmit}\r\n                    onCancel={e => this.props.SystemStore.modalChange(0)}\r\n                    children={\r\n                        <div>\r\n                            <Form onSubmit={this.handleSubmit} layout='horizontal' labelCol={formLabelCol} wrapperCol={formWrapperCol}>\r\n                                <Form.Item label=\"角色名\">\r\n                                    {getFieldDecorator('roleName', {\r\n                                        rules: [{ required: true, message: '请输入角色名称' }],\r\n                                        initialValue: formData.roleName || ''\r\n                                    })(\r\n                                        <Input placeholder=\"请输入角色名称\" />\r\n                                    )}\r\n                                </Form.Item>\r\n                                <Form.Item label=\"备注\">\r\n                                    {getFieldDecorator('remark', {\r\n                                        initialValue: formData.remark || ''\r\n                                    })(\r\n                                        <Input placeholder=\"请输入备注\" />\r\n                                    )}\r\n                                </Form.Item>\r\n                                <Form.Item label=\"菜单权限\">\r\n                                    <div style={{ height: 450, overflowY: 'auto' }}>\r\n                                        <Tree\r\n                                            checkable\r\n                                            onExpand={this.onExpand}\r\n                                            defaultExpandedKeys={['-1']}\r\n                                            onCheck={this.onCheck}\r\n                                            checkedKeys={formData.menuIds}\r\n                                        >\r\n                                            {this.renderTreeNodes(treeData)}\r\n                                        </Tree>\r\n                                    </div>\r\n                                </Form.Item>\r\n                            </Form>\r\n                        </div>\r\n                    }\r\n                />\r\n            }\r\n        </div>;\r\n    }\r\n\r\n    onCheck = checkedKeys => {\r\n        console.log('onCheck', checkedKeys);\r\n        this.props.SystemStore.formData.menuIds = checkedKeys\r\n    };\r\n    //提交表单\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n        const { getData, modalChange, addNewRole, formData, PageInfo, roleName } = this.props.SystemStore\r\n        this.props.form.validateFields((err, values) => {\r\n            console.log(values, formData)\r\n\r\n            if (!err) {\r\n                if (formData.id) {\r\n                    addNewRole(0, { ...formData, ...values }).then(res => {\r\n                        message.success('更新成功')\r\n                        modalChange(0)\r\n                        getData(2, { pageIndex: PageInfo.pageIndex, pageSize: PageInfo.pageSize, roleName })\r\n                    })\r\n                } else {\r\n                    // formData.menuIds = formData.menuIds.join(',')\r\n                    addNewRole(1, { ...formData, ...values }).then(res => {\r\n                        message.success('添加成功')\r\n                        modalChange(0)\r\n                        getData(2, { pageIndex: PageInfo.pageIndex, pageSize: PageInfo.pageSize, roleName })\r\n                    })\r\n                }\r\n            }\r\n        });\r\n    };\r\n}\r\nconst RoleDialogForm = Form.create({ name: 'define' })(RoleDialog);\r\nexport default RoleDialogForm;"]},"metadata":{},"sourceType":"module"}