{"ast":null,"code":"import \"antd/lib/upload/style\";\nimport _Upload from \"antd/lib/upload\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport _objectSpread from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/radio/style\";\nimport _Radio from \"antd/lib/radio\";\nimport \"antd/lib/checkbox/style\";\nimport _Checkbox from \"antd/lib/checkbox\";\nimport _classCallCheck from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"F:\\\\documents\\\\bl-device-manage\\\\src\\\\layouts\\\\BasicManage\\\\DefinePage\\\\DeviceList\\\\SearchBar.js\";\n\nimport React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { InfoCircleOutlined } from '@ant-design/icons';\nimport { Form } from '@ant-design/compatible';\nimport '@ant-design/compatible/assets/index.css';\nimport { DraggableArea } from 'react-draggable-tags';\n\nvar QRCode = require('qrcode.react');\n\nvar Option = _Select.Option;\nvar formItemLayout = {\n  labelCol: {\n    span: 0\n  },\n  wrapperCol: {\n    span: 6\n  }\n};\nvar propertyList = [{\n  id: 1,\n  title: '设备名称',\n  dataIndex: 'deviceName',\n  key: 'deviceName'\n}, {\n  id: 2,\n  title: '设备编号',\n  dataIndex: 'deviceCode',\n  key: 'deviceCode'\n}, {\n  id: 3,\n  title: '型号',\n  dataIndex: 'modelId',\n  key: 'modelId'\n}, {\n  id: 4,\n  title: '保修期',\n  dataIndex: 'guaranteePeriod',\n  key: 'guaranteePeriod'\n}, {\n  id: 5,\n  title: '计量单位',\n  dataIndex: 'unit',\n  key: 'unit'\n}, {\n  id: 6,\n  title: '创建时间',\n  dataIndex: 'deviceTime',\n  key: 'deviceTime'\n}];\nvar SearchBar = (_dec = inject('DeviceDefineStore'), _dec(_class = observer(_class = (_temp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchBar, _Component);\n\n  function SearchBar(props) {\n    var _this;\n\n    _classCallCheck(this, SearchBar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchBar).call(this, props));\n\n    _this.renderQRCode = function () {\n      var propsBtn = {\n        name: 'file',\n        // action: '/manage/base/device/import',\n        headers: {\n          authorization: 'authorization-text',\n          token: sessionStorage.getItem('selfToken')\n        },\n        showUploadList: false,\n        onChange: _this.modifyQrCodeBkg\n      };\n\n      var renderCodeModule = function renderCodeModule() {\n        var arr = [React.createElement(\"div\", {\n          style: {\n            width: 180,\n            height: 180,\n            padding: 10,\n            background: '#fff',\n            marginBottom: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212\n          },\n          __self: this\n        }, React.createElement(QRCode, {\n          size: 160,\n          value: _this.store.codeInfo.deviceCode || '-',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          style: {\n            flex: 1,\n            marginLeft: 20,\n            color: '#fff',\n            fontSize: 24,\n            marginTop: 0,\n            letterSpacing: 2\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215\n          },\n          __self: this\n        }, _this.codeInfo())];\n        return _this.state.codePosition === 'right' ? arr.reverse() : arr;\n      };\n\n      return React.createElement(_Modal, {\n        title: '铭牌设置',\n        width: 630,\n        visible: _this.state.visible,\n        onOk: _this.onCodeSubmit,\n        onCancel: function onCancel(e) {\n          return _this.setState({\n            visible: !_this.state.visible\n          });\n        },\n        okText: \"\\u786E\\u5B9A\",\n        cancelText: \"\\u53D6\\u6D88\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"CodeModalTitle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, \"\\u94ED\\u724C\\u5B57\\u6BB5\\uFF08\\u6700\\u591A4\\u4E2A\\uFF09\"), React.createElement(\"ul\", {\n        className: \"code_ul\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(InfoCircleOutlined, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }), \"\\u5C5E\\u6027\\u9009\\u62E9\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(_Checkbox.Group, {\n        style: {\n          width: '100%'\n        },\n        value: _this.state.checked,\n        onChange: _this.onPropertyChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, propertyList.map(function (item) {\n        var currentChecked = _this.state.tags.filter(function (tag) {\n          return item.id === tag.id;\n        }).length > 0;\n        return React.createElement(_Checkbox, {\n          disabled: _this.state.tags.length >= 4 && !currentChecked,\n          value: item.id,\n          key: item.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242\n          },\n          __self: this\n        }, item.title);\n      })))), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(InfoCircleOutlined, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }), \"\\u94ED\\u724C\\u6A21\\u677F\\u914D\\u7F6E\"), React.createElement(\"div\", {\n        style: {\n          marginTop: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, \"- \\u5C5E\\u6027\\u663E\\u793A\\u987A\\u5E8F(\\u53EF\\u62D6\\u62FD\\u5B9E\\u73B0\\u6392\\u5E8F)\"), React.createElement(\"div\", {\n        style: {\n          marginBottom: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, !!_this.state.tags.length && React.createElement(\"div\", {\n        className: \"Simple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, React.createElement(DraggableArea, {\n        tags: _this.state.tags,\n        render: function render(_ref) {\n          var tag = _ref.tag,\n              index = _ref.index;\n          return React.createElement(\"div\", {\n            className: \"tag\",\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 260\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: require('../../../../assets/delete.png'),\n            alt: \"delete\",\n            className: \"delete\",\n            onClick: function onClick() {\n              return _this.handleClickDelete(tag);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 261\n            },\n            __self: this\n          }), tag.title);\n        },\n        onChange: _this.changeTag,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        style: {\n          margin: '10px 0 0 '\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, \"- \\u6A21\\u677F\\u5E03\\u5C40\\u914D\\u7F6E\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          display: 'inline-block'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, \"\\u4E8C\\u7EF4\\u7801\\u4F4D\\u7F6E\\u8BBE\\u7F6E\\uFF1A\"), React.createElement(_Radio.Group, {\n        onChange: _this.handleCodePos,\n        value: _this.state.codePosition,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(_Radio, {\n        value: 'left',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, \"\\u5DE6\"), React.createElement(_Radio, {\n        value: 'right',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, \"\\u53F3\"))), React.createElement(\"div\", {\n        style: {\n          margin: '10px 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, \"- \\u6A21\\u677F\\u9884\\u89C8\"), _this.store.codeInfo && React.createElement(\"div\", {\n        className: \"qrcode-name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"my-node\",\n        style: {\n          background: \"url(\".concat(_this.state.QRBackImg || 'https://assets-boranet.oss-cn-hangzhou.aliyuncs.com/img/bg.png', \")\"),\n          backgroundSize: '100%',\n          backgroundRepeat: 'no-repeat',\n          padding: '20px 20px 0 40px',\n          borderRadius: '12px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, renderCodeModule()))))));\n    };\n\n    _this.codeInfo = function () {\n      var arr = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = _this.state.tags[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var tag = _step.value;\n          arr.push(React.createElement(\"p\", {\n            style: {\n              marginBottom: 10\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 304\n            },\n            __self: this\n          }, tag.title, \"\\uFF1A--\"));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return arr;\n    };\n\n    _this.handleCodePos = function (e) {\n      _this.setState({\n        codePosition: e.target.value\n      });\n    };\n\n    _this.modifyQrCodeBkg = function (_ref2) {\n      var file = _ref2.file;\n\n      if (file.status === 'done') {\n        _this.setState({\n          QRBackImg: 'http://file.boranet.cn/' + file.name\n        });\n      } else if (file.status === 'error') {\n        _message.error(\"\".concat(file.name, \" file upload failed.\"));\n      }\n    };\n\n    _this.changeTag = function (tags) {\n      _this.setState({\n        tags: tags\n      });\n    };\n\n    _this.handleClickDelete = function (tag) {\n      var tags = _this.state.tags.filter(function (t) {\n        return tag.id !== t.id;\n      });\n\n      var checked = [];\n      tags.map(function (item) {\n        checked.push(item.id);\n      });\n\n      _this.setState({\n        tags: tags,\n        checked: checked\n      });\n    };\n\n    _this.onPropertyChange = function (values) {\n      var tags = [],\n          codeInfo = {};\n\n      if (values.length > 4) {\n        _message.warn('最多可选4个');\n      } else {\n        values.map(function (value) {\n          propertyList.map(function (item) {\n            if (value === item.id) {\n              tags.push(item);\n              codeInfo[item.key] = '---';\n            }\n          });\n        });\n\n        _this.setState({\n          tags: tags,\n          codeInfo: codeInfo,\n          checked: values\n        });\n      }\n    };\n\n    _this.onCodeSubmit = function () {\n      var arr = [];\n\n      _this.state.tags.map(function (item, index) {\n        arr.push({\n          item: item.key,\n          sort: index\n        });\n      });\n\n      arr.push({\n        item: _this.state.codePosition,\n        sort: -100\n      });\n\n      _this.store.saveSortList({\n        qrcodeDOList: arr\n      });\n\n      _this.handleCode();\n    };\n\n    _this.handleCode = function () {\n      _this.props.DeviceDefineStore.getSortList().then(function () {\n        var arr = [];\n        var arr2 = [];\n\n        _this.props.DeviceDefineStore.sortList.map(function (item) {\n          propertyList.map(function (tag) {\n            if (item.item === tag.key) {\n              arr.push(tag);\n              arr2.push(tag.id);\n            }\n          });\n\n          if (item.sort === -100) {\n            _this.state.codePosition = item.item;\n          }\n        });\n\n        console.log('获取二维码信息：', _this.store.qrcodeInfo); // this.state.QRBackImg = 'http://file.boranet.cn' + this.store.qrcodeInfo.backgroundUrl\n\n        _this.setState({\n          tags: arr,\n          checked: arr2,\n          visible: !_this.state.visible\n        });\n      });\n    };\n\n    _this.handleSearch = function () {\n      _this.props.form.validateFieldsAndScroll(function (err, values) {\n        if (!err) {\n          _this.store.searchCondition = values;\n\n          _this.store.getDevList(_objectSpread({}, values));\n        }\n      });\n    };\n\n    _this.handleReset = function () {\n      _this.props.form.setFieldsValue({\n        deviceName: undefined,\n        modelId: undefined,\n        typeId: undefined\n      });\n    };\n\n    _this.handleAdd = function () {\n      _this.store.listVisible = true;\n      _this.store.listStatus = 'add';\n    };\n\n    _this.download = function () {\n      _this.store.downloadModule();\n    };\n\n    _this.handleImport = function (info) {\n      if (info.file.status !== 'uploading') {\n        // console.log(info.file, info.fileList);\n        _this.store.getDevList();\n      }\n\n      if (info.file.status === 'done') {\n        if (info.file.response.code) {\n          _message.error(info.file.response.msg);\n        } else {\n          _message.success(\"\".concat(info.file.name, \" file uploaded successfully\"));\n        }\n      } else if (info.file.status === 'error') {\n        _message.error(\"\".concat(info.file.name, \" file upload failed.\"));\n      }\n    };\n\n    _this.handleExport = function () {\n      var devListSelectedRowKeys = _this.props.DeviceDefineStore.devListSelectedRowKeys;\n\n      if (devListSelectedRowKeys.length) {\n        var url = \"/manage/base/device/export?ids=\".concat(devListSelectedRowKeys.join(','));\n        window.open(url);\n      } else {\n        _message.warning('请至少选择一条数据');\n      }\n    };\n\n    _this.downloadCode = function () {\n      console.log('下载二维码');\n    };\n\n    _this.onSelectType = function (value) {\n      if (value) _this.store.getSelectModel({\n        typeId: value\n      });\n\n      _this.props.form.setFieldsValue({\n        deviceName: undefined,\n        modelId: undefined\n      });\n\n      _this.store.selectModel = [];\n    };\n\n    _this.store = _this.props.DeviceDefineStore;\n    _this.state = {\n      visible: false,\n      status: false,\n      tags: [],\n      checked: [],\n      typeId: undefined,\n      moelId: undefined,\n      deviceName: \"\",\n      codeInfo: {},\n      QRBackImg: '',\n      codePosition: 'left'\n    };\n    return _this;\n  }\n\n  _createClass(SearchBar, [{\n    key: \"render\",\n    value: function render() {\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      var _this$store = this.store,\n          selectModel = _this$store.selectModel,\n          selectType = _this$store.selectType;\n      var props = {\n        name: 'file',\n        action: '/manage/base/device/import',\n        headers: {\n          authorization: 'authorization-text',\n          token: sessionStorage.getItem('selfToken')\n        },\n        showUploadList: false,\n        accept: '.xlsx',\n        onChange: this.handleImport\n      };\n      return React.createElement(\"div\", {\n        className: \"list_search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(_Row, {\n        gutter: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(_Col, {\n        span: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(Form, {\n        layout: \"inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(Form.Item, Object.assign({\n        label: null\n      }, formItemLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }), getFieldDecorator('typeId')(React.createElement(_Select, {\n        showSearch: true,\n        optionFilterProp: \"children\",\n        style: {\n          width: 230\n        },\n        placeholder: \"\\u8BF7\\u9009\\u62E9\\u8BBE\\u5907\\u7C7B\\u578B\",\n        onChange: this.onSelectType,\n        allowClear: true,\n        filterOption: function filterOption(input, option) {\n          return option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, selectType.length > 0 && selectType.map(function (item) {\n        return React.createElement(Option, {\n          key: item.id,\n          value: item.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, item.typeName);\n      })))), React.createElement(Form.Item, Object.assign({\n        label: \"\"\n      }, formItemLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), getFieldDecorator('modelId')(React.createElement(_Select, {\n        showSearch: true,\n        optionFilterProp: \"children\",\n        style: {\n          width: 230\n        },\n        placeholder: \"\\u8BF7\\u9009\\u62E9\\u8BBE\\u5907\\u578B\\u53F7\",\n        allowClear: true,\n        filterOption: function filterOption(input, option) {\n          return option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, selectModel.length > 0 && selectModel.map(function (item) {\n        return React.createElement(Option, {\n          key: item.id,\n          value: item.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, item.modelName);\n      })))), React.createElement(Form.Item, Object.assign({\n        label: \"\"\n      }, formItemLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), getFieldDecorator('deviceName')(React.createElement(_Input, {\n        style: {\n          width: 230\n        },\n        allowClear: true,\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u8BBE\\u5907\\u540D\\u79F0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        label: \"\",\n        wrapperCol: {\n          span: 24\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(_Button, {\n        // size='small'\n        className: \"btn-border-purple\",\n        style: {\n          fontSize: '14px'\n        },\n        type: \"primary\",\n        onClick: this.handleSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"\\u67E5\\u8BE2\"), React.createElement(_Button, {\n        // size='small'\n        className: \"btn-border-gray\",\n        style: {\n          marginLeft: 8,\n          fontSize: '14px'\n        },\n        onClick: this.handleReset,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"\\u91CD\\u7F6E\"))))), React.createElement(_Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(_Col, {\n        span: 24,\n        style: {\n          textAlign: 'left'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(_Button, {\n        type: \"primary\",\n        className: \"add-btn\",\n        style: {\n          fontSize: '14px'\n        },\n        onClick: this.handleAdd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"iconfont icon-add icon-spacing\",\n        style: {\n          fontSize: '12px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), \"\\u65B0\\u589E\"), React.createElement(_Button, {\n        // size='small'\n        type: \"primary\",\n        style: {\n          marginLeft: 8,\n          fontSize: '14px'\n        },\n        onClick: function onClick() {\n          window.open(\"//\".concat(window.location.host, \"/manage/base/device/download\"));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"\\u4E0B\\u8F7D\\u6A21\\u7248\"), React.createElement(_Upload, Object.assign({}, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(_Button, {\n        // size='small'\n        type: \"primary\",\n        style: {\n          marginLeft: 8,\n          fontSize: '14px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"iconfont icon-input icon-spacing\",\n        style: {\n          fontSize: '12px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), \"\\u5BFC\\u5165\")), React.createElement(_Button, {\n        // size='small'\n        type: \"primary\",\n        style: {\n          marginLeft: 8,\n          fontSize: '14px'\n        },\n        onClick: this.handleExport,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"iconfont icon-output icon-spacing\",\n        style: {\n          fontSize: '12px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }), \"\\u5BFC\\u51FA\"), React.createElement(_Button, {\n        // size='small'\n        type: \"primary\",\n        style: {\n          marginLeft: 8,\n          fontSize: '14px'\n        },\n        onClick: this.handleCode,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"\\u94ED\\u724C\\u8BBE\\u7F6E\"))), this.state.visible && this.renderQRCode());\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.store.getSelectType({});\n    }\n  }]);\n\n  return SearchBar;\n}(Component), _temp)) || _class) || _class);\nvar WrapperClass = Form.create({})(SearchBar);\nexport default WrapperClass;","map":{"version":3,"sources":["F:\\documents\\bl-device-manage\\src\\layouts\\BasicManage\\DefinePage\\DeviceList\\SearchBar.js"],"names":["React","Component","inject","observer","InfoCircleOutlined","Form","DraggableArea","QRCode","require","Option","formItemLayout","labelCol","span","wrapperCol","propertyList","id","title","dataIndex","key","SearchBar","props","renderQRCode","propsBtn","name","headers","authorization","token","sessionStorage","getItem","showUploadList","onChange","modifyQrCodeBkg","renderCodeModule","arr","width","height","padding","background","marginBottom","store","codeInfo","deviceCode","flex","marginLeft","color","fontSize","marginTop","letterSpacing","state","codePosition","reverse","visible","onCodeSubmit","e","setState","checked","onPropertyChange","map","item","currentChecked","tags","filter","tag","length","index","handleClickDelete","changeTag","margin","display","handleCodePos","QRBackImg","backgroundSize","backgroundRepeat","borderRadius","push","target","value","file","status","error","t","values","warn","sort","saveSortList","qrcodeDOList","handleCode","DeviceDefineStore","getSortList","then","arr2","sortList","console","log","qrcodeInfo","handleSearch","form","validateFieldsAndScroll","err","searchCondition","getDevList","handleReset","setFieldsValue","deviceName","undefined","modelId","typeId","handleAdd","listVisible","listStatus","download","downloadModule","handleImport","info","response","code","msg","success","handleExport","devListSelectedRowKeys","url","join","window","open","warning","downloadCode","onSelectType","getSelectModel","selectModel","moelId","getFieldDecorator","selectType","action","accept","input","option","children","toLowerCase","indexOf","typeName","modelName","textAlign","location","host","getSelectType","WrapperClass","create"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { InfoCircleOutlined } from '@ant-design/icons';\r\nimport { Form } from '@ant-design/compatible';\r\nimport '@ant-design/compatible/assets/index.css';\r\nimport { Input, Select, Row, Col, Button, Upload, message, Modal, Checkbox, Radio } from 'antd';\r\nimport { DraggableArea } from 'react-draggable-tags';\r\nvar QRCode = require('qrcode.react');\r\nconst { Option } = Select;\r\n\r\nconst formItemLayout = {\r\n\tlabelCol: { span: 0 },\r\n\twrapperCol: { span: 6 }\r\n};\r\nconst propertyList = [\r\n\t{ id: 1, title: '设备名称', dataIndex: 'deviceName', key: 'deviceName' },\r\n\t{ id: 2, title: '设备编号', dataIndex: 'deviceCode', key: 'deviceCode' },\r\n\t{ id: 3, title: '型号', dataIndex: 'modelId', key: 'modelId', },\r\n\t{ id: 4, title: '保修期', dataIndex: 'guaranteePeriod', key: 'guaranteePeriod', },\r\n\t{ id: 5, title: '计量单位', dataIndex: 'unit', key: 'unit', },\r\n\t{ id: 6, title: '创建时间', dataIndex: 'deviceTime', key: 'deviceTime', },\r\n]\r\n@inject('DeviceDefineStore')\r\n@observer\r\nclass SearchBar extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.DeviceDefineStore;\r\n\t\tthis.state = {\r\n\t\t\tvisible: false,\r\n\t\t\tstatus: false,\r\n\t\t\ttags: [],\r\n\t\t\tchecked: [],\r\n\t\t\ttypeId: undefined,\r\n\t\t\tmoelId: undefined,\r\n\t\t\tdeviceName: \"\",\r\n\t\t\tcodeInfo:{},\r\n\t\t\tQRBackImg:'',\r\n\t\t\tcodePosition:'left',\r\n\t\t};\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { getFieldDecorator } = this.props.form;\r\n\t\tconst { selectModel, selectType } = this.store;\r\n\t\tconst props = {\r\n\t\t\tname: 'file',\r\n\t\t\taction: '/manage/base/device/import',\r\n\t\t\theaders: {\r\n\t\t\t\tauthorization: 'authorization-text',\r\n\t\t\t\ttoken: sessionStorage.getItem('selfToken'),\r\n\t\t\t},\r\n\t\t\tshowUploadList: false,\r\n\t\t\taccept: '.xlsx',\r\n\t\t\tonChange: this.handleImport\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<div className='list_search'>\r\n\t\t\t\t<Row gutter={24}>\r\n\t\t\t\t\t<Col span={24}>\r\n\t\t\t\t\t\t<Form layout=\"inline\">\r\n\t\t\t\t\t\t\t<Form.Item label={null} {...formItemLayout}>\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('typeId')(\r\n\t\t\t\t\t\t\t\t\t<Select showSearch\r\n\t\t\t\t\t\t\t\t\t\toptionFilterProp='children'\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ width: 230 }}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='请选择设备类型'\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.onSelectType}\r\n\t\t\t\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\t\t\t\tfilterOption={(input, option) =>\r\n\t\t\t\t\t\t\t\t\t\t\toption.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n\t\t\t\t\t\t\t\t\t\t}>\r\n\r\n\t\t\t\t\t\t\t\t\t\t{selectType.length > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\tselectType.map(item => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Option key={item.id} value={item.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.typeName}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Option>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Form.Item label='' {...formItemLayout}>\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('modelId')(\r\n\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\tshowSearch\r\n\t\t\t\t\t\t\t\t\t\toptionFilterProp='children'\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ width: 230 }}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='请选择设备型号'\r\n\t\t\t\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\t\t\t\tfilterOption={(input, option) =>\r\n\t\t\t\t\t\t\t\t\t\t\toption.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t{selectModel.length > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\tselectModel.map(item => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Option key={item.id} value={item.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.modelName}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Option>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Form.Item label='' {...formItemLayout}>\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('deviceName')(\r\n\t\t\t\t\t\t\t\t\t<Input style={{ width: 230 }} allowClear placeholder='请输入设备名称' />\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Form.Item label='' wrapperCol={{ span: 24 }}>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t// size='small'\r\n\t\t\t\t\t\t\t\t\tclassName='btn-border-purple'\r\n\t\t\t\t\t\t\t\t\tstyle={{ fontSize: '14px' }}\r\n\t\t\t\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\t\t\t\tonClick={this.handleSearch}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t查询\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t// size='small'\r\n\t\t\t\t\t\t\t\t\tclassName='btn-border-gray'\r\n\t\t\t\t\t\t\t\t\tstyle={{ marginLeft: 8, fontSize: '14px' }}\r\n\t\t\t\t\t\t\t\t\tonClick={this.handleReset}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t重置\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col span={24} style={{ textAlign: 'left' }}>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\t\tclassName='add-btn'\r\n\t\t\t\t\t\t\tstyle={{ fontSize: '14px' }}\r\n\t\t\t\t\t\t\tonClick={this.handleAdd}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<i className='iconfont icon-add icon-spacing' style={{fontSize:'12px'}}></i>\r\n\t\t\t\t\t\t\t新增\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t{/* <Button\r\n\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\tstyle={{ marginLeft: 8, fontSize: '13px' }}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tthis.props.onDelete('batch');\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t批量删除\r\n\t\t\t\t\t\t\t</Button> */}\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t// size='small'\r\n\t\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\t\tstyle={{ marginLeft: 8, fontSize: '14px' }}\r\n\t\t\t\t\t\t\tonClick={() => { window.open(`//${window.location.host}/manage/base/device/download`) }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t下载模版\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Upload {...props}>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t// size='small'\r\n\t\t\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\t\t\tstyle={{ marginLeft: 8, fontSize: '14px' }}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<i className='iconfont icon-input icon-spacing' style={{fontSize:'12px'}}></i>\r\n\t\t\t\t\t\t\t\t导入\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Upload>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t// size='small'\r\n\t\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\t\tstyle={{ marginLeft: 8, fontSize: '14px' }}\r\n\t\t\t\t\t\t\tonClick={this.handleExport}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<i className='iconfont icon-output icon-spacing' style={{fontSize:'12px'}}></i>\r\n\t\t\t\t\t\t\t导出\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t// size='small'\r\n\t\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\t\tstyle={{ marginLeft: 8, fontSize: '14px' }}\r\n\t\t\t\t\t\t\tonClick={this.handleCode}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t铭牌设置\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t{/*<Button\r\n\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\tstyle={{ marginLeft: 8, fontSize: '13px' }}\r\n\t\t\t\t\t\t\t\tonClick={this.downloadCode}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t下载铭牌\r\n\t\t\t\t\t\t\t</Button>*/}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t{this.state.visible && this.renderQRCode()}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\trenderQRCode = ()=>{\r\n\t\tconst propsBtn = {\r\n\t\t\tname: 'file',\r\n\t\t\t// action: '/manage/base/device/import',\r\n\t\t\theaders: {\r\n\t\t\t\tauthorization: 'authorization-text',\r\n\t\t\t\ttoken: sessionStorage.getItem('selfToken'),\r\n\t\t\t},\r\n\t\t\tshowUploadList: false,\r\n\t\t\tonChange:this.modifyQrCodeBkg,\r\n\t\t};\r\n\t\tconst renderCodeModule = ()=>{\r\n\t\t\tconst arr = [\r\n\t\t\t\t<div style={{ width: 180, height: 180, padding: 10, background: '#fff', marginBottom: 20 }}>\r\n\t\t\t\t\t<QRCode size={160} value={this.store.codeInfo.deviceCode || '-'} />\r\n\t\t\t\t</div>,\r\n\t\t\t\t<div style={{ flex: 1, marginLeft: 20, color: '#fff', fontSize: 24, marginTop: 0, letterSpacing: 2 }}>\r\n\t\t\t\t\t{this.codeInfo()}\r\n\t\t\t\t</div>\r\n\t\t\t]\r\n\t\t\treturn this.state.codePosition === 'right' ? arr.reverse() : arr\r\n\t\t}\r\n\t\treturn (\r\n            <Modal\r\n                title={'铭牌设置'}\r\n                width={630}\r\n                visible={this.state.visible}\r\n                onOk={this.onCodeSubmit}\r\n                onCancel={e => this.setState({ visible: !this.state.visible })}\r\n                okText='确定'\r\n                cancelText='取消'\r\n            >\r\n                <div className='CodeModalTitle'>\r\n                    铭牌字段（最多4个）\r\n                </div>\r\n                <ul className='code_ul'>\r\n                    <li>\r\n                        <span><InfoCircleOutlined />属性选择</span>\r\n                        <div>\r\n                            <Checkbox.Group style={{ width: '100%' }} value={this.state.checked} onChange={this.onPropertyChange}>\r\n                                {\r\n                                    propertyList.map(item => {\r\n                                        let currentChecked = this.state.tags.filter(tag => item.id === tag.id).length > 0;\r\n                                        return <Checkbox disabled={this.state.tags.length >= 4 && !currentChecked} value={item.id} key={item.id} >\r\n                                            {item.title}\r\n                                        </Checkbox>\r\n                                    })\r\n                                }\r\n\r\n                            </Checkbox.Group>\r\n                        </div>\r\n                    </li>\r\n                    <li>\r\n                        <span><InfoCircleOutlined />铭牌模板配置</span>\r\n                        <div style={{marginTop:10}}>- 属性显示顺序(可拖拽实现排序)</div>\r\n                        <div style={{marginBottom:10}}>\r\n                            {!!this.state.tags.length && (\r\n                                <div className='Simple'>\r\n                                    <DraggableArea\r\n                                        tags={this.state.tags}\r\n                                        render={({ tag, index }) => (\r\n                                            <div className='tag' key={index}>\r\n                                                <img\r\n                                                    src={require('../../../../assets/delete.png')}\r\n                                                    alt='delete'\r\n                                                    className='delete'\r\n                                                    onClick={() => this.handleClickDelete(tag)}\r\n                                                />\r\n                                                {tag.title}\r\n                                            </div>\r\n                                        )}\r\n                                        onChange={this.changeTag}\r\n                                    />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <div style={{margin:'10px 0 0 '}}>- 模板布局配置</div>\r\n                        <div>\r\n                            <div style={{display:'inline-block'}}>二维码位置设置：</div>\r\n                            <Radio.Group onChange={this.handleCodePos} value={this.state.codePosition}>\r\n                                <Radio value={'left'}>左</Radio>\r\n                                <Radio value={'right'}>右</Radio>\r\n                            </Radio.Group>\r\n                        </div>\r\n                        <div style={{margin:'10px 0'}}>- 模板预览</div>\r\n                        {\t\r\n                            this.store.codeInfo && <div className='qrcode-name'>\r\n                                <div id=\"my-node\" style={{ background: `url(${this.state.QRBackImg || 'https://assets-boranet.oss-cn-hangzhou.aliyuncs.com/img/bg.png'})`, backgroundSize: '100%', backgroundRepeat: 'no-repeat', padding: '20px 20px 0 40px', borderRadius: '12px' }}>\r\n                                    <div style={{ display: 'flex', }}>\r\n                                        {renderCodeModule()}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        }\r\n                    </li>\r\n                </ul>\r\n\r\n            </Modal>\r\n        );\r\n\t}\r\n\r\n\t/* 铭牌设置模板 */\r\n\tcodeInfo = () => {\r\n\t\tlet arr = []\r\n    for (let tag of this.state.tags) {\r\n\t\t\tarr.push(<p style={{ marginBottom: 10 }}>{tag.title}：--</p>)\r\n    }\r\n    return arr\r\n\t}\r\n\t/* 修改二维码图片的位置 */\r\n\thandleCodePos = e =>{\r\n\t\tthis.setState({\r\n\t\t\tcodePosition:e.target.value\r\n\t\t})\r\n\t}\r\n\t/* 修改上传的二维码背景图片 */\r\n\tmodifyQrCodeBkg = ({file})=>{\r\n    if (file.status === 'done') {\r\n\t\t\tthis.setState({\r\n\t\t\t\tQRBackImg:'http://file.boranet.cn/'+file.name\r\n\t\t\t})\r\n    } else if (file.status === 'error') {\r\n      message.error(`${file.name} file upload failed.`);\r\n    }\r\n\t}\r\n\r\n\t//拖动tag\r\n\tchangeTag = tags => {\r\n\t\tthis.setState({ tags: tags });\r\n\t};\r\n\t//删除tag\r\n\thandleClickDelete = (tag) => {\r\n\t\tconst tags = this.state.tags.filter(t => tag.id !== t.id);\r\n\t\tlet checked = []\r\n\t\ttags.map(item=>{\r\n\t\t\tchecked.push(item.id)\r\n\t\t})\r\n\t\tthis.setState({ tags,checked });\r\n\t}\r\n\tonPropertyChange = values => {\r\n\t\tlet tags = [],codeInfo = {}\r\n\t\tif (values.length > 4) {\r\n\t\t\tmessage.warn('最多可选4个')\r\n\t\t} else {\r\n\t\t\tvalues.map(value => {\r\n\t\t\t\tpropertyList.map(item => {\r\n\t\t\t\t\tif (value === item.id) {\r\n\t\t\t\t\t\ttags.push(item)\r\n\t\t\t\t\t\tcodeInfo[item.key] = '---'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tthis.setState({\r\n\t\t\t\ttags,codeInfo,checked:values\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tonCodeSubmit = () => {\r\n\t\tlet arr = []\r\n\t\tthis.state.tags.map((item, index) => {\r\n\t\t\tarr.push({ item: item.key, sort: index })\r\n\t\t})\r\n\t\tarr.push({item:this.state.codePosition,sort:-100})\r\n\t\tthis.store.saveSortList({ qrcodeDOList: arr })\r\n\t\tthis.handleCode()\r\n\t}\r\n\thandleCode = () => {\r\n\t\tthis.props.DeviceDefineStore.getSortList().then(() => {\r\n\t\t\tlet arr = []\r\n\t\t\tlet arr2 = []\r\n\t\t\tthis.props.DeviceDefineStore.sortList.map(item => {\r\n\t\t\t\tpropertyList.map(tag => {\r\n\t\t\t\t\tif (item.item === tag.key) {\r\n\t\t\t\t\t\tarr.push(tag)\r\n\t\t\t\t\t\tarr2.push(tag.id)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif(item.sort === -100){\r\n\t\t\t\t\tthis.state.codePosition = item.item\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tconsole.log('获取二维码信息：', this.store.qrcodeInfo)\r\n\t\t\t// this.state.QRBackImg = 'http://file.boranet.cn' + this.store.qrcodeInfo.backgroundUrl\r\n\t\t\tthis.setState({ tags: arr, checked: arr2, visible: !this.state.visible })\r\n\t\t})\r\n\t};\r\n\thandleSearch = () => {\r\n\t\tthis.props.form.validateFieldsAndScroll((err, values) => {\r\n\t\t\tif (!err) {\r\n\t\t\t\tthis.store.searchCondition = values;\r\n\t\t\t\tthis.store.getDevList({\r\n\t\t\t\t\t...values\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\thandleReset = () => {\r\n\t\tthis.props.form.setFieldsValue({\r\n\t\t\tdeviceName: undefined,\r\n\t\t\tmodelId: undefined,\r\n\t\t\ttypeId: undefined\r\n\t\t});\r\n\t};\r\n\thandleAdd = () => {\r\n\t\tthis.store.listVisible = true;\r\n\t\tthis.store.listStatus = 'add';\r\n\t};\r\n\tdownload = () => {\r\n\t\tthis.store.downloadModule();\r\n\t};\r\n\thandleImport = info => {\r\n\t\tif (info.file.status !== 'uploading') {\r\n\t\t\t// console.log(info.file, info.fileList);\r\n\t\t\tthis.store.getDevList();\r\n\t\t}\r\n\t\tif (info.file.status === 'done') {\r\n\t\t\tif (info.file.response.code) {\r\n\t\t\t\tmessage.error(info.file.response.msg);\r\n\t\t\t} else {\r\n\t\t\t\tmessage.success(`${info.file.name} file uploaded successfully`);\r\n\t\t\t}\r\n\t\t} else if (info.file.status === 'error') {\r\n\t\t\tmessage.error(`${info.file.name} file upload failed.`);\r\n\t\t}\r\n\t};\r\n\thandleExport = () => {\r\n\t\tconst { devListSelectedRowKeys } = this.props.DeviceDefineStore\r\n\t\tif (devListSelectedRowKeys.length) {\r\n\t\t\tconst url = `/manage/base/device/export?ids=${devListSelectedRowKeys.join(',')}`\r\n\t\t\twindow.open(url)\r\n\t\t} else {\r\n\t\t\tmessage.warning('请至少选择一条数据')\r\n\t\t}\r\n\r\n\t};\r\n\tdownloadCode = () => {\r\n\t\tconsole.log('下载二维码');\r\n\t};\r\n\tonSelectType = value => {\r\n\t\tif (value) this.store.getSelectModel({ typeId: value });\r\n\t\tthis.props.form.setFieldsValue({\r\n\t\t\tdeviceName: undefined,\r\n\t\t\tmodelId: undefined\r\n\t\t});\r\n\t\tthis.store.selectModel = []\r\n\t};\r\n\tcomponentDidMount() {\r\n\t\tthis.store.getSelectType({});\r\n\t}\r\n}\r\nconst WrapperClass = Form.create({})(SearchBar);\r\nexport default WrapperClass;\r\n"]},"metadata":{},"sourceType":"module"}