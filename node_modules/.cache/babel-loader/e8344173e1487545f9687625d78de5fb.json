{"ast":null,"code":"import \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/switch/style\";\nimport _Switch from \"antd/lib/switch\";\nimport _toConsumableArray from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\layouts\\\\FormEdit\\\\self_item\\\\mul_tag.js\";\nvar _excluded = [\"FormStore\", \"value\", \"onChange\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n/*\r\n * @Author: EmberCCC 1810888456@qq.com\r\n * @Date: 2022-07-17 11:56:33\r\n * @LastEditors: EmberCCC 1810888456@qq.com\r\n * @LastEditTime: 2022-07-19 21:24:21\r\n * @FilePath: \\bl-device-manage-test\\src\\layouts\\FormEdit\\self_item\\mul_tag.js\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n */\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport { toJS } from \"mobx\";\nimport { inject, observer } from \"mobx-react\";\nimport React, { useEffect } from \"react\";\nimport './index.css';\nvar Mul_Tag = observer(function (_ref) {\n  var FormStore = _ref.FormStore,\n      value = _ref.value,\n      onChange = _ref.onChange,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var checked = FormStore.checked,\n      subFormName = FormStore.subFormName,\n      schemaList = FormStore.schemaList,\n      initSchema = FormStore.initSchema;\n  useEffect(function () {\n    console.log(value);\n    console.log(rest.addons);\n  }, []);\n\n  var handleChange = function handleChange(checked) {\n    FormStore.setValue('checked', checked);\n    console.log(value);\n\n    if (checked == false) {\n      FormStore.setValue('subFormList', []);\n      FormStore.setValue('schemaList', []);\n      onChange(true);\n    } else if (checked == true && schemaList.length <= 0) {\n      var iObj = {\n        'title': '',\n        'type': 'object',\n        'properties': {\n          \"object_kyJbn2\": {\n            \"title\": \"标签一\",\n            \"type\": \"object\",\n            \"properties\": {}\n          },\n          \"object_bC14YO\": {\n            \"title\": \"标签二\",\n            \"type\": \"object\",\n            \"properties\": {}\n          },\n          \"object_Yu3eT4\": {\n            \"title\": \"标签三\",\n            \"type\": \"object\",\n            \"properties\": {}\n          }\n        }\n      };\n      var iSchema = toJS(_objectSpread({}, toJS(initSchema)));\n      console.log(toJS(iSchema));\n      console.log();\n      iSchema['properties'].mul_tags = iObj;\n      var list = [{\n        name: '标签一',\n        fields: {}\n      }, {\n        name: '标签二',\n        fields: {}\n      }, {\n        name: '标签三',\n        fields: {}\n      }];\n      var list2 = ['标签一', '标签二', '标签三'];\n      FormStore.setValue('subFormList', list);\n      FormStore.setValue('subFormName', list2);\n      FormStore.setValue('schemaList', list);\n      FormStore.setValue('initSchema', iSchema);\n      onChange(false);\n    }\n  };\n\n  var titleChange = function titleChange(value, index) {\n    var iList = _toConsumableArray(subFormName);\n\n    iList.splice(index, 1, value);\n    FormStore.setValue('subFormName', iList);\n  };\n\n  var handleAdd = function handleAdd() {\n    var iObj = {\n      name: '标签页',\n      'fields': {}\n    };\n\n    var iList = _toConsumableArray(schemaList);\n\n    var iList2 = _toConsumableArray(subFormName);\n\n    iList2.push('标签页');\n    iList.push(iObj);\n    FormStore.setValue('subFormName', iList2);\n    FormStore.setValue('schemaList', iList);\n    onChange(iList);\n  };\n\n  var handleDel = function handleDel(index) {\n    var iList = _toConsumableArray(schemaList);\n\n    var iList2 = _toConsumableArray(subFormName);\n\n    iList.splice(index, 1);\n    iList2.splice(index, 1);\n    console.log(iList);\n    onChange(iList);\n    FormStore.setValue('subFormName', iList2);\n    FormStore.setValue('schemaList', iList);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"total_tags\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tags_title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"\\u591A\\u6807\\u7B7E\\u663E\\u793A\"), /*#__PURE__*/React.createElement(_Switch, {\n    onChange: handleChange,\n    style: {\n      width: '20px'\n    },\n    defaultChecked: value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"\\u591A\\u6807\\u7B7E\\u663E\\u793A\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"all_tags\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, checked && subFormName.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"one_tag\",\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, /*#__PURE__*/React.createElement(_Input, {\n      defaultValue: item,\n      className: \"one_title\",\n      onChange: function onChange(e) {\n        return titleChange(e.target.value, index);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), subFormName.length > 2 ? /*#__PURE__*/React.createElement(DeleteOutlined, {\n      onClick: function onClick() {\n        return handleDel(index);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }) : /*#__PURE__*/React.createElement(DeleteOutlined, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }));\n  })), schemaList.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"add_tag\",\n    onClick: handleAdd,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, \"+\\u6DFB\\u52A0\\u6807\\u7B7E\\u9875\"));\n});\nexport default inject(function (stores) {\n  return {\n    FormStore: stores.FormStore\n  };\n})(Mul_Tag);","map":{"version":3,"names":["DeleteOutlined","toJS","inject","observer","React","useEffect","Mul_Tag","FormStore","value","onChange","rest","checked","subFormName","schemaList","initSchema","console","log","addons","handleChange","setValue","length","iObj","iSchema","mul_tags","list","name","fields","list2","titleChange","index","iList","splice","handleAdd","iList2","push","handleDel","width","map","item","e","target","stores"],"sources":["F:/documents/bl-device-manage-test/src/layouts/FormEdit/self_item/mul_tag.js"],"sourcesContent":["/*\r\n * @Author: EmberCCC 1810888456@qq.com\r\n * @Date: 2022-07-17 11:56:33\r\n * @LastEditors: EmberCCC 1810888456@qq.com\r\n * @LastEditTime: 2022-07-19 21:24:21\r\n * @FilePath: \\bl-device-manage-test\\src\\layouts\\FormEdit\\self_item\\mul_tag.js\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n */\r\nimport { DeleteOutlined } from \"@ant-design/icons\";\r\nimport { Input, Switch } from \"antd\";\r\nimport { toJS } from \"mobx\";\r\nimport { inject, observer } from \"mobx-react\";\r\nimport React, { useEffect } from \"react\";\r\nimport './index.css'\r\nconst Mul_Tag = observer(({ FormStore, value, onChange, ...rest }) => {\r\n    const { checked, subFormName, schemaList, initSchema } = FormStore\r\n    useEffect(() => {\r\n        console.log(value);\r\n        console.log(rest.addons);\r\n    }, [])\r\n    const handleChange = (checked) => {\r\n        FormStore.setValue('checked', checked);\r\n        console.log(value);\r\n        if (checked == false) {\r\n            FormStore.setValue('subFormList', []);\r\n            FormStore.setValue('schemaList', []);\r\n            onChange(true);\r\n\r\n        } else if (checked == true && schemaList.length <= 0) {\r\n            let iObj = {\r\n                'title': '', 'type': 'object', 'properties': {\r\n                    \"object_kyJbn2\": {\r\n                        \"title\": \"标签一\",\r\n                        \"type\": \"object\",\r\n                        \"properties\": {}\r\n                    },\r\n                    \"object_bC14YO\": {\r\n                        \"title\": \"标签二\",\r\n                        \"type\": \"object\",\r\n                        \"properties\": {}\r\n                    },\r\n                    \"object_Yu3eT4\": {\r\n                        \"title\": \"标签三\",\r\n                        \"type\": \"object\",\r\n                        \"properties\": {}\r\n                    }\r\n                }\r\n            }\r\n            let iSchema = toJS({...toJS(initSchema)})\r\n            console.log(toJS(iSchema));\r\n            console.log();\r\n            iSchema['properties'].mul_tags = iObj;\r\n            let list = [{ name: '标签一', fields: {} }, { name: '标签二', fields: {} }, { name: '标签三', fields: {} }]\r\n            let list2 = ['标签一', '标签二', '标签三']\r\n            FormStore.setValue('subFormList', list);\r\n            FormStore.setValue('subFormName', list2);\r\n            FormStore.setValue('schemaList', list);\r\n            FormStore.setValue('initSchema', iSchema);\r\n            onChange(false);\r\n        }\r\n\r\n    }\r\n\r\n    const titleChange = (value, index) => {\r\n        let iList = [...subFormName]\r\n        iList.splice(index, 1, value)\r\n        FormStore.setValue('subFormName', iList);\r\n    }\r\n    const handleAdd = () => {\r\n        let iObj = { name: '标签页', 'fields': {} }\r\n        let iList = [...schemaList]\r\n        let iList2 = [...subFormName]\r\n        iList2.push('标签页');\r\n        iList.push(iObj)\r\n        FormStore.setValue('subFormName', iList2);\r\n        FormStore.setValue('schemaList', iList);\r\n        onChange(iList);\r\n    }\r\n    const handleDel = (index) => {\r\n        let iList = [...schemaList]\r\n        let iList2 = [...subFormName]\r\n        iList.splice(index, 1)\r\n        iList2.splice(index, 1)\r\n        console.log(iList);\r\n        onChange(iList);\r\n        FormStore.setValue('subFormName', iList2);\r\n        FormStore.setValue('schemaList', iList);\r\n    }\r\n    return (\r\n        <div className=\"total_tags\">\r\n            <div className=\"tags_title\">\r\n                <div>多标签显示</div>\r\n                <Switch onChange={handleChange} style={{ width: '20px' }} defaultChecked={value}>多标签显示</Switch>\r\n            </div>\r\n\r\n            <div className=\"all_tags\">\r\n                {checked && (\r\n                    subFormName.map((item, index) => {\r\n                        return (\r\n                            <div className=\"one_tag\" key={index}>\r\n                                <Input defaultValue={item} className=\"one_title\" onChange={(e) => titleChange(e.target.value, index)} />\r\n                                {\r\n                                    subFormName.length > 2 ? (\r\n                                        <DeleteOutlined onClick={() => handleDel(index)} />\r\n                                    ) : (\r\n                                        <DeleteOutlined />\r\n                                    )\r\n                                }\r\n                            </div>\r\n                        )\r\n                    })\r\n                )}\r\n            </div>\r\n            {\r\n                schemaList.length > 0 && (\r\n                    <div className=\"add_tag\" onClick={handleAdd}>\r\n                        +添加标签页\r\n                    </div>\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n})\r\nexport default inject((stores) => ({ FormStore: stores.FormStore }))(Mul_Tag)"],"mappings":"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"},"metadata":{},"sourceType":"module"}