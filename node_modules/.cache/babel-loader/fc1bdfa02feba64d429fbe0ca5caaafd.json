{"ast":null,"code":"import \"antd/lib/divider/style\";\nimport _Divider from \"antd/lib/divider\";\nimport \"antd/lib/tag/style\";\nimport _Tag from \"antd/lib/tag\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nvar _jsxFileName = \"D:\\\\GGdownload\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\src\\\\layouts\\\\WorkManage\\\\methods.js\";\nimport React from 'react';\nimport classnames from 'classnames';\nimport './index.less';\nimport { workStatus, workLevel } from 'constants/status_constant';\nimport { circleStatus } from 'components/StateLess';\nvar Option = _Select.Option;\nvar moment = window.GLOBAL_PARAMS.moment;\n/* 工单处理 modal-form-columns  */\n\nexport function setWorkModalForms(_ref) {\n  var currentMain = _ref.currentMain,\n      selectList = _ref.selectList,\n      description = _ref.description,\n      deviceList = _ref.deviceList,\n      customerList = _ref.customerList;\n  var columns = [{\n    key: 'workNo',\n    label: '工单编号',\n    value: React.createElement(_Input, {\n      disabled: true,\n      placeholder: \"\\u8BF7\\u8F93\\u5165\",\n      style: {\n        width: '330px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19\n      },\n      __self: this\n    }),\n    getFieldDecorator: {\n      initialValue: currentMain.workNo\n    }\n  }, {\n    key: 'typeId',\n    label: '设备类型',\n    value: React.createElement(_Select, {\n      optionFilterProp: \"children\",\n      showSearch: true,\n      allowClear: true,\n      disabled: true,\n      style: {\n        width: 330\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28\n      },\n      __self: this\n    }, selectList && selectList.map(function (item) {\n      return React.createElement(Option, {\n        key: item.id,\n        value: item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }, item.typeName);\n    })),\n    getFieldDecorator: {\n      initialValue: currentMain.typeId\n    }\n  }, {\n    key: 'deviceName',\n    label: '设备名称',\n    value: React.createElement(_Input, {\n      disabled: true,\n      style: {\n        width: 330\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }),\n    getFieldDecorator: {\n      initialValue: currentMain.deviceId\n    }\n  }, {\n    key: 'customerId',\n    label: '设备类型',\n    value: React.createElement(_Select, {\n      optionFilterProp: \"children\",\n      showSearch: true,\n      allowClear: true,\n      style: {\n        width: 330\n      },\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, customerList && customerList.map(function (item) {\n      return React.createElement(Option, {\n        key: item.id,\n        value: item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, item.customerName);\n    })),\n    getFieldDecorator: {\n      initialValue: currentMain.customerId\n    }\n  }, {\n    key: 'workType',\n    label: '工单类型',\n    value: React.createElement(_Select, {\n      optionFilterProp: \"children\",\n      showSearch: true,\n      allowClear: true,\n      disabled: true,\n      style: {\n        width: 330\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(Option, {\n      value: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"\\u70B9\\u68C0\"), React.createElement(Option, {\n      value: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"\\u5DE1\\u68C0\"), React.createElement(Option, {\n      value: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"\\u4FDD\\u517B\"), React.createElement(Option, {\n      value: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"\\u6545\\u969C\")),\n    getFieldDecorator: {\n      initialValue: currentMain.workType\n    }\n  }, {\n    key: 'workStatus',\n    label: '当前状态',\n    value: React.createElement(_Select, {\n      optionFilterProp: \"children\",\n      showSearch: true,\n      allowClear: true,\n      disabled: true,\n      style: {\n        width: 330\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, Object.keys(workStatus) && Object.keys(workStatus).map(function (item) {\n      return React.createElement(Option, {\n        key: item,\n        value: item,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, workStatus[item]);\n    })),\n    getFieldDecorator: {\n      initialValue: currentMain.workStatus\n    }\n  }, {\n    key: 'level',\n    label: '工单等级',\n    value: React.createElement(_Select, {\n      optionFilterProp: \"children\",\n      showSearch: true,\n      allowClear: true,\n      disabled: true,\n      style: {\n        width: 330\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, Object.keys(workLevel) && Object.keys(workLevel).map(function (item) {\n      return React.createElement(Option, {\n        key: item,\n        value: item,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, workLevel[item]);\n    })),\n    getFieldDecorator: {\n      initialValue: currentMain.typeId\n    }\n  }, {\n    key: 'expecteTime',\n    label: '期望完成时间',\n    value: React.createElement(_Input, {\n      disabled: true,\n      style: {\n        width: 330\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }),\n    getFieldDecorator: {\n      initialValue: currentMain.expecteTime\n    }\n  }, {\n    key: 'description',\n    label: '备注',\n    value: React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, description())\n  }];\n  return columns;\n}\n/* 工单处理  table-columns */\n\nexport function setWorkColumns(_ref2) {\n  var cols = _ref2.cols,\n      handleDistribute = _ref2.handleDistribute,\n      handleDetail = _ref2.handleDetail,\n      handleReceive = _ref2.handleReceive,\n      handleOver = _ref2.handleOver,\n      handleRecall = _ref2.handleRecall,\n      handleSubmit = _ref2.handleSubmit,\n      handleRefuse = _ref2.handleRefuse;\n  var userRole = {\n    admin: true,\n    repair: true\n  };\n  var columns = [];\n  cols.map(function (col) {\n    var item = {\n      title: col.titleValue,\n      dataIndex: col.titleKey,\n      key: col.titleKey,\n      render: function render(value) {\n        return value || '-';\n      }\n    };\n\n    if (col.titleKey === 'maintainType') {\n      item.render = function (value) {\n        return value ? React.createElement(\"span\", {\n          className: \"work_table\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: classnames({\n            red: value === 4,\n            green: value !== 4,\n            circle: true\n          }),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }), value === 1 ? '点检' : value === 2 ? '巡检' : value === 3 ? '保养' : value === 4 ? '故障' : '') : '-';\n      };\n    }\n\n    if (col.titleKey === 'level') {\n      item.render = function (value) {\n        return React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199\n          },\n          __self: this\n        }, value === 1 && React.createElement(_Tag, {\n          color: \"magenta\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }, \"\\u7D27\\u6025\"), value === 3 && React.createElement(_Tag, {\n          color: \"blue\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201\n          },\n          __self: this\n        }, \"\\u4E00\\u822C\"), value === 2 && React.createElement(_Tag, {\n          color: \"gold\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202\n          },\n          __self: this\n        }, \"\\u9AD8\\u7EA7\"));\n      };\n    }\n\n    if (col.titleKey === 'workStatus') {\n      item.render = function (value) {\n        return circleStatus(value, 'work');\n      };\n    }\n\n    if (col.titleKey === 'expecteTime') {\n      item.render = function (value) {\n        return value ? moment(value).format('YYYY-MM-DD') : '-';\n      };\n    }\n\n    columns.push(item);\n  });\n\n  if (userRole.admin && userRole.repair || userRole.admin || userRole.repair) {\n    var isSuper = userRole.admin && userRole.repair,\n        isAdmin = userRole.admin,\n        isRepair = userRole.repair;\n    columns = columns.concat([{\n      title: '操作',\n      dataIndex: 'id',\n      key: 'id',\n      align: 'right',\n      render: function render(value, record) {\n        var btn1 = React.createElement(\"span\", {\n          onClick: function onClick() {\n            return handleDetail(record);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225\n          },\n          __self: this\n        }, \"\\u8BE6\\u60C5\");\n        var btn2 = React.createElement(\"span\", {\n          onClick: function onClick() {\n            return handleDistribute(record);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226\n          },\n          __self: this\n        }, \"\\u6D3E\\u5355\");\n        var btn3 = React.createElement(\"span\", {\n          onClick: function onClick() {\n            return handleReceive(record, 'receive');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 227\n          },\n          __self: this\n        }, \"\\u63A5\\u5355\");\n        var btn7 = React.createElement(\"span\", {\n          onClick: function onClick() {\n            return handleRefuse(record, 'refuse');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228\n          },\n          __self: this\n        }, \"\\u62D2\\u7EDD\");\n        var btn4 = React.createElement(\"span\", {\n          onClick: function onClick() {\n            return handleOver(record, 'over');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229\n          },\n          __self: this\n        }, \"\\u5B8C\\u7ED3\");\n        var btn5 = React.createElement(\"span\", {\n          onClick: function onClick() {\n            return handleRecall(record);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230\n          },\n          __self: this\n        }, \"\\u91CD\\u6D3E\");\n        var btn6 = React.createElement(\"span\", {\n          onClick: function onClick() {\n            return handleSubmit(record, 'submit');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231\n          },\n          __self: this\n        }, \"\\u63D0\\u4EA4\\u5B8C\\u6210\");\n        return React.createElement(\"span\", {\n          style: {\n            color: '#6236FF',\n            cursor: 'pointer'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232\n          },\n          __self: this\n        }, btn1, (isSuper || isAdmin) && [0].includes(record.workStatus) && [React.createElement(_Divider, {\n          type: \"vertical\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237\n          },\n          __self: this\n        }), btn2], (isSuper || isRepair) && [1].includes(record.workStatus) && [React.createElement(_Divider, {\n          type: \"vertical\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243\n          },\n          __self: this\n        }), btn3, React.createElement(_Divider, {\n          type: \"vertical\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 245\n          },\n          __self: this\n        }), btn7], (isSuper || isAdmin) && [3, 6].includes(record.workStatus) && [React.createElement(_Divider, {\n          type: \"vertical\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 252\n          },\n          __self: this\n        }), btn5], (isSuper || isRepair) && [4].includes(record.workStatus) && [React.createElement(_Divider, {\n          type: \"vertical\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259\n          },\n          __self: this\n        }), btn6], (isSuper || isAdmin) && [5].includes(record.workStatus) && [React.createElement(_Divider, {\n          type: \"vertical\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266\n          },\n          __self: this\n        }), btn4]);\n      }\n    }]);\n  }\n\n  return columns;\n}","map":{"version":3,"sources":["D:\\GGdownload\\设备运维前端\\bl-device-manage\\src\\layouts\\WorkManage\\methods.js"],"names":["React","classnames","workStatus","workLevel","circleStatus","Option","moment","window","GLOBAL_PARAMS","setWorkModalForms","currentMain","selectList","description","deviceList","customerList","columns","key","label","value","width","getFieldDecorator","initialValue","workNo","map","item","id","typeName","typeId","deviceId","customerName","customerId","workType","Object","keys","expecteTime","setWorkColumns","cols","handleDistribute","handleDetail","handleReceive","handleOver","handleRecall","handleSubmit","handleRefuse","userRole","admin","repair","col","title","titleValue","dataIndex","titleKey","render","red","green","circle","format","push","isSuper","isAdmin","isRepair","concat","align","record","btn1","btn2","btn3","btn7","btn4","btn5","btn6","color","cursor","includes"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Input, Divider, Tag, Select, Button } from 'antd'\nimport classnames from 'classnames';\nimport './index.less'\nimport { workStatus, workLevel } from 'constants/status_constant'\nimport { circleStatus } from 'components/StateLess';\nconst { Option } = Select;\nconst { moment } = window.GLOBAL_PARAMS\n\n/* 工单处理 modal-form-columns  */\nexport function setWorkModalForms({\n  currentMain, selectList, description, deviceList, customerList\n}) {\n  let columns =\n    [\n      {\n        key: 'workNo',\n        label: '工单编号',\n        value: <Input disabled placeholder='请输入' style={{ width: '330px' }} />,\n        getFieldDecorator: {\n          initialValue: currentMain.workNo\n        }\n      },\n      {\n        key: 'typeId',\n        label: '设备类型',\n        value: (\n          <Select\n            optionFilterProp='children'\n            showSearch allowClear disabled\n            style={{ width: 330, }}\n          >\n            {\n              selectList && selectList.map(item => {\n                return <Option key={item.id} value={item.id}>\n                  {item.typeName}\n                </Option>\n              })\n            }\n          </Select>\n        ),\n        getFieldDecorator: {\n          initialValue: currentMain.typeId\n        }\n      },\n      {\n        key: 'deviceName',\n        label: '设备名称',\n        value: (\n          <Input disabled style={{ width: 330 }} />\n        ),\n        getFieldDecorator: {\n          initialValue: currentMain.deviceId\n        }\n      },\n      {\n        key: 'customerId',\n        label: '设备类型',\n        value: (\n          <Select\n            optionFilterProp='children'\n            showSearch allowClear\n            style={{ width: 330, }} disabled\n          >\n            {\n              customerList && customerList.map(item => {\n                return <Option key={item.id} value={item.id}>\n                  {item.customerName}\n                </Option>\n              })\n            }\n          </Select>\n        ),\n        getFieldDecorator: {\n          initialValue: currentMain.customerId\n        }\n      },\n      {\n        key: 'workType',\n        label: '工单类型',\n        value: (\n          <Select\n            optionFilterProp='children'\n            showSearch allowClear disabled\n            style={{ width: 330, }}\n          >\n            <Option value={1}>\n              点检\n            </Option>\n            <Option value={2}>\n              巡检\n            </Option>\n            <Option value={3}>\n              保养\n            </Option>\n            <Option value={4}>\n              故障\n            </Option>\n          </Select>\n        ),\n        getFieldDecorator: {\n          initialValue: currentMain.workType\n        }\n      },\n      {\n        key: 'workStatus',\n        label: '当前状态',\n        value: (\n          <Select\n            optionFilterProp='children'\n            showSearch allowClear disabled\n            style={{ width: 330, }}\n          >\n            {\n              Object.keys(workStatus) && Object.keys(workStatus).map(item => {\n                return <Option key={item} value={item}>\n                  {workStatus[item]}\n                </Option>\n              })\n            }\n          </Select>\n        ),\n        getFieldDecorator: {\n          initialValue: currentMain.workStatus\n        }\n      },\n      {\n        key: 'level',\n        label: '工单等级',\n        value: (\n          <Select\n            optionFilterProp='children'\n            showSearch allowClear disabled\n            style={{ width: 330, }}\n          >\n            {\n              Object.keys(workLevel) && Object.keys(workLevel).map(item => {\n                return <Option key={item} value={item}>\n                  {workLevel[item]}\n                </Option>\n              })\n            }\n          </Select>\n        ),\n        getFieldDecorator: {\n          initialValue: currentMain.typeId\n        }\n      },\n      {\n        key: 'expecteTime',\n        label: '期望完成时间',\n        value: (\n          <Input disabled style={{ width: 330 }} />\n        ),\n        getFieldDecorator: {\n          initialValue: currentMain.expecteTime\n        }\n      },\n      {\n        key: 'description',\n        label: '备注',\n        value: (<React.Fragment>\n          {description()}\n        </React.Fragment>\n        ),\n      },\n\n    ]\n  return columns;\n}\n/* 工单处理  table-columns */\nexport function setWorkColumns(\n  { cols, handleDistribute, handleDetail, handleReceive, handleOver, handleRecall, handleSubmit, handleRefuse }\n) {\n  const userRole = {\n    admin: true,\n    repair: true\n  };\n  let columns = []\n  cols.map(col=>{\n    let item = { title:col.titleValue,dataIndex:col.titleKey,key:col.titleKey,render:value=>value||'-'}\n    if(col.titleKey === 'maintainType'){\n      item.render = value => value ? <span className='work_table'>\n        <span\n          className={\n            classnames({\n              red: value === 4,\n              green: value !== 4,\n              circle: true\n            })\n          }\n        ></span>\n        {value === 1 ? '点检' : value === 2 ? '巡检' : value === 3 ? '保养' : value === 4 ? '故障' : ''}\n      </span> : '-'\n    }\n\n    if(col.titleKey === 'level'){\n      item.render = value => {\n        return <span>\n          {value === 1 && <Tag color=\"magenta\">紧急</Tag>}\n          {value === 3 && <Tag color=\"blue\">一般</Tag>}\n          {value === 2 && <Tag color=\"gold\">高级</Tag>}\n        </span>\n      }\n    }\n\n    if(col.titleKey === 'workStatus'){\n      item.render = value => circleStatus(value, 'work')\n    }\n\n    if(col.titleKey === 'expecteTime'){\n      item.render = value => value ? moment(value).format('YYYY-MM-DD') : '-'\n    }\n\n    columns.push(item)\n  })\n  if ((userRole.admin && userRole.repair) || userRole.admin || userRole.repair) {\n    let isSuper = userRole.admin && userRole.repair, isAdmin = userRole.admin, isRepair = userRole.repair;\n    columns = columns.concat([\n      {\n        title: '操作',\n        dataIndex: 'id',\n        key: 'id', align: 'right',\n        render: (value, record) => {\n          const btn1 = <span onClick={() => handleDetail(record)}>详情</span>;\n          const btn2 = <span onClick={() => handleDistribute(record)}>派单</span>;\n          const btn3 = <span onClick={() => handleReceive(record, 'receive')}>接单</span>;\n          const btn7 = <span onClick={() => handleRefuse(record, 'refuse')}>拒绝</span>;\n          const btn4 = <span onClick={() => handleOver(record, 'over')}>完结</span>;\n          const btn5 = <span onClick={() => handleRecall(record)}>重派</span>;\n          const btn6 = <span onClick={() => handleSubmit(record, 'submit')}>提交完成</span>;\n          return <span style={{ color: '#6236FF', cursor: 'pointer' }}>\n            {btn1}\n            {/* 未派单 */}\n            {\n              (isSuper || isAdmin) && [0].includes(record.workStatus) && [\n                <Divider type='vertical' />, btn2\n              ]\n            }\n            {/* 已派单 */}\n            {\n              (isSuper || isRepair) && [1].includes(record.workStatus) && [\n                <Divider type='vertical' />,\n                btn3,\n                <Divider type='vertical' />,\n                btn7\n              ]\n            }\n            {/* 已拒绝 && 未完成 */}\n            {\n              (isSuper || isAdmin) && [3, 6].includes(record.workStatus) && [\n                <Divider type='vertical' />,\n                btn5\n              ]\n            }\n            {/* 进行中 */}\n            {\n              (isSuper || isRepair) && [4].includes(record.workStatus) && [\n                <Divider type='vertical' />,\n                btn6\n              ]\n            }\n            {/* 已完成 */}\n            {\n              (isSuper || isAdmin) && [5].includes(record.workStatus) && [\n                <Divider type='vertical' />,\n                btn4\n              ]\n            }\n          </span>\n        }\n      }\n    ])\n  }\n  return columns;\n}"]},"metadata":{},"sourceType":"module"}