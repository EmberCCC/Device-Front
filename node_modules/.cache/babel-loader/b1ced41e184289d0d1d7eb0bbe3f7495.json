{"ast":null,"code":"import _objectSpread from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport \"antd/lib/badge/style\";\nimport _Badge from \"antd/lib/badge\";\nimport _classCallCheck from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport \"antd/lib/menu/style\";\nimport _Menu from \"antd/lib/menu\";\nimport \"antd/lib/layout/style\";\nimport _Layout from \"antd/lib/layout\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\layouts\\\\HomeLayout\\\\Menu.js\";\n\nimport React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { NavLink, withRouter } from 'react-router-dom';\nimport classnames from 'classnames';\nimport './index.less';\nimport { BellOutlined, BellTwoTone, CarryOutFilled, CarryOutOutlined, CarryOutTwoTone, CheckCircleTwoTone, FolderOutlined, HistoryOutlined, PlayCircleFilled, PlayCircleTwoTone, SendOutlined, SoundTwoTone } from '@ant-design/icons';\nimport { toJS } from 'mobx';\nvar Sider = _Layout.Sider;\nvar SubMenu = _Menu.SubMenu;\nvar firstMount = false;\nvar MenuLayout = (_dec = inject('HomeStore', 'MessageStore'), withRouter(_class = _dec(_class = observer(_class = (_temp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MenuLayout, _Component);\n\n  function MenuLayout(props) {\n    var _this;\n\n    _classCallCheck(this, MenuLayout);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MenuLayout).call(this, props));\n\n    _this.onMenuSelect = function (_ref) {\n      var selectedKeys = _ref.selectedKeys;\n      _this.store.selectedKeys = selectedKeys;\n    };\n\n    _this.onOpenChange = function (openKeys) {\n      _this.store.openKeys = openKeys;\n    };\n\n    _this.handleMenu = function (_ref2) {\n      var item = _ref2.item,\n          key = _ref2.key;\n\n      if (key.startsWith('my')) {\n        _this.props.HomeStore.changeViewModel(key);\n\n        console.log(toJS(_this.props.HomeStore.viewModel));\n      } else {\n        _this.props.HomeStore.toggleMenu({\n          actionItem: item,\n          actionId: key,\n          from: 'menu-click'\n        }, function (url) {\n          if (url) {\n            _this.props.history.push(url);\n          } else {\n            alert('false');\n          }\n        });\n      }\n    };\n\n    _this.handleRe = function (key) {\n      console.log(key);\n    };\n\n    _this.goBack = function () {\n      _this.props.history.push('/index');\n    };\n\n    _this.state = {\n      collapsed: false,\n      sizetype: '',\n      pathname: '',\n      isPath: false\n    };\n    _this.store = _this.props.HomeStore;\n    return _this;\n  }\n\n  _createClass(MenuLayout, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var isMobile = this.props.mobile === 'true';\n\n      var _toJS = toJS(this.store),\n          menuObj = _toJS.menuObj;\n\n      var _this$props$MessageSt = this.props.MessageStore,\n          todoCount = _this$props$MessageSt.todoCount,\n          createCount = _this$props$MessageSt.createCount,\n          handleCount = _this$props$MessageSt.handleCount,\n          copyCount = _this$props$MessageSt.copyCount,\n          todoList = _this$props$MessageSt.todoList,\n          createList = _this$props$MessageSt.createList,\n          handleList = _this$props$MessageSt.handleList,\n          copytList = _this$props$MessageSt.copytList;\n      return React.createElement(Sider, {\n        trigger: null,\n        theme: \"light\",\n        collapsible: true,\n        collapsed: this.props.sizetype === 's_size' ? false : this.state.collapsed,\n        className: classnames({\n          'ant-sider-menu-content': true,\n          'ant-sider-menu-none': isMobile\n        }),\n        style: {\n          overflowY: 'auto',\n          width: '35%',\n          height: this.props.sizetype === 's_size' && '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"manu_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: {\n          pathname: \"/message/todo\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"message_logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(BellTwoTone, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }), \"\\u6211\\u7684\\u5F85\\u529E\"), React.createElement(_Badge, {\n        count: todoCount,\n        style: {\n          float: 'right'\n        },\n        offset: [1, 5],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }))), React.createElement(NavLink, {\n        to: {\n          pathname: \"/message/create\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"message_logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(PlayCircleTwoTone, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }), \"\\u6211\\u53D1\\u8D77\\u7684\"), React.createElement(_Badge, {\n        count: createCount,\n        style: {\n          float: 'right'\n        },\n        offset: [1, 5],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }))), React.createElement(NavLink, {\n        to: {\n          pathname: \"/message/handle\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"message_logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(CarryOutTwoTone, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), \"\\u6211\\u5904\\u7406\\u7684\"), React.createElement(_Badge, {\n        count: handleCount,\n        style: {\n          float: 'right'\n        },\n        offset: [1, 5],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }))), React.createElement(NavLink, {\n        to: {\n          pathname: \"/message/copy\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"message_logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(SoundTwoTone, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), \"\\u6284\\u9001\\u6211\\u7684\"), React.createElement(_Badge, {\n        count: copyCount,\n        style: {\n          float: 'right'\n        },\n        offset: [1, 5],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), React.createElement(_Menu, {\n        theme: \"light\" // defaultOpenKeys={toJS(this.store.openKeys)}\n        ,\n        selectedKeys: toJS(this.store.selectedKeys) // openKeys={this.store.openKeys}\n        ,\n        mode: 'inline',\n        onClick: this.handleMenu,\n        onOpenChange: this.onOpenChange,\n        onSelect: this.onMenuSelect // inlineCollapsed={this.state.collapsed}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, menuObj.map(function (leaf) {\n        return !leaf.displayNone && React.createElement(SubMenu, {\n          key: leaf.id,\n          title: React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 102\n            },\n            __self: this\n          }, React.createElement(FolderOutlined, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 102\n            },\n            __self: this\n          }), React.createElement(\"span\", {\n            style: {\n              display: _this2.state.collapsed && 'none'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 102\n            },\n            __self: this\n          }, leaf.name)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, leaf.leafMenuModels.length > 0 && leaf.leafMenuModels.map(function (ele) {\n          return !ele.displayNone && React.createElement(_Menu.Item, {\n            key: ele.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 106\n            },\n            __self: this\n          }, ele.name);\n        }));\n      }))));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      firstMount = false; // this.props.HomeStore.getMenuList(this.props.location.pathname).then(() => {\n      //   this.props.HomeStore.initMenu(this.props.location.pathname);\n      // });\n\n      /* 初始化判断是否显示 */\n\n      if (this.props.sizetype !== 'l_size') {\n        this.state.collapsed = true;\n      } else {\n        this.state.collapsed = false;\n      }\n\n      this.setState({});\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var lo = this.props.location.pathname;\n\n      if (this.state.isPath && lo != \"/message/todo\" && lo != \"/message/create\" && lo != \"/message/handle\" && lo != \"/message/copy\") {\n        this.props.HomeStore.initMenu(this.state.pathname);\n      }\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var newState = _objectSpread({}, state);\n\n      if (props.sizetype === 'l_size') {\n        if (props.HomeStore.isClickCollapsed) {\n          if (props.sizetype !== state.sizetype) {\n            props.HomeStore.changeValue('collapsed', false);\n          }\n\n          Object.assign(newState, {\n            sizetype: props.sizetype,\n            collapsed: props.HomeStore.collapsed,\n            pathname: props.location.pathname\n          });\n        } else {\n          Object.assign(newState, {\n            sizetype: props.sizetype,\n            collapsed: false,\n            pathname: props.location.pathname\n          });\n        }\n      } else {\n        if (props.HomeStore.isClickCollapsed) {\n          if (props.sizetype !== state.sizetype) {\n            props.HomeStore.changeValue('collapsed', true);\n          }\n\n          Object.assign(newState, {\n            sizetype: props.sizetype,\n            collapsed: props.HomeStore.collapsed,\n            pathname: props.location.pathname\n          });\n        } else {\n          Object.assign(newState, {\n            sizetype: props.sizetype,\n            collapsed: true,\n            pathname: props.location.pathname\n          });\n        }\n      }\n\n      if (props.location.pathname !== state.pathname) {\n        Object.assign(newState, {\n          isPath: true\n        });\n      } else {\n        Object.assign(newState, {\n          isPath: false\n        });\n      }\n\n      return newState;\n    }\n  }]);\n\n  return MenuLayout;\n}(Component), _temp)) || _class) || _class) || _class);\nexport default MenuLayout;","map":{"version":3,"sources":["F:\\documents\\bl-device-manage-test\\src\\layouts\\HomeLayout\\Menu.js"],"names":["React","Component","inject","observer","NavLink","withRouter","classnames","BellOutlined","BellTwoTone","CarryOutFilled","CarryOutOutlined","CarryOutTwoTone","CheckCircleTwoTone","FolderOutlined","HistoryOutlined","PlayCircleFilled","PlayCircleTwoTone","SendOutlined","SoundTwoTone","toJS","Sider","SubMenu","firstMount","MenuLayout","props","onMenuSelect","selectedKeys","store","onOpenChange","openKeys","handleMenu","item","key","startsWith","HomeStore","changeViewModel","console","log","viewModel","toggleMenu","actionItem","actionId","from","url","history","push","alert","handleRe","goBack","state","collapsed","sizetype","pathname","isPath","isMobile","mobile","menuObj","MessageStore","todoCount","createCount","handleCount","copyCount","todoList","createList","handleList","copytList","overflowY","width","height","float","map","leaf","displayNone","id","display","name","leafMenuModels","length","ele","setState","lo","location","initMenu","newState","isClickCollapsed","changeValue","Object","assign"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { NavLink, withRouter } from 'react-router-dom';\r\nimport classnames from 'classnames';\r\nimport './index.less';\r\nimport { BellOutlined, BellTwoTone, CarryOutFilled, CarryOutOutlined, CarryOutTwoTone, CheckCircleTwoTone, FolderOutlined, HistoryOutlined, PlayCircleFilled, PlayCircleTwoTone, SendOutlined, SoundTwoTone } from '@ant-design/icons';\r\nimport { Menu, Layout, Badge } from 'antd';\r\nimport { toJS } from 'mobx';\r\nconst { Sider } = Layout;\r\nconst SubMenu = Menu.SubMenu;\r\n\r\nlet firstMount = false;\r\n@withRouter\r\n@inject('HomeStore', 'MessageStore')\r\n@observer\r\nclass MenuLayout extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      collapsed: false,\r\n      sizetype: '',\r\n      pathname: '',\r\n      isPath: false\r\n    }\r\n    this.store = this.props.HomeStore;\r\n  }\r\n  render() {\r\n    const isMobile = this.props.mobile === 'true';\r\n    const { menuObj } = toJS(this.store);\r\n    const { todoCount, createCount, handleCount, copyCount, todoList, createList, handleList, copytList } = this.props.MessageStore;\r\n    return (\r\n      <Sider\r\n        trigger={null}\r\n        theme='light'\r\n        collapsible\r\n        collapsed={\r\n          this.props.sizetype === 's_size' ? false : this.state.collapsed\r\n        }\r\n        className={\r\n          classnames({\r\n            'ant-sider-menu-content': true,\r\n            'ant-sider-menu-none': isMobile\r\n          })\r\n        }\r\n        style={{\r\n          overflowY: 'auto',\r\n          width: '35%',\r\n          height: this.props.sizetype === 's_size' && '100%'\r\n        }}\r\n      >\r\n        <div id='manu_container'>\r\n          <NavLink to={{ pathname: \"/message/todo\" }}>\r\n            <div className='message_logo'>\r\n              <div>\r\n                <BellTwoTone />\r\n                我的待办\r\n              </div>\r\n              <Badge count={todoCount} style={{ float: 'right' }} offset={[1,5]}></Badge>\r\n            </div>\r\n          </NavLink>\r\n          <NavLink to={{ pathname: \"/message/create\" }}>\r\n            <div className='message_logo'>\r\n              <div>\r\n                <PlayCircleTwoTone />\r\n                我发起的\r\n              </div>\r\n              <Badge count={createCount} style={{ float: 'right' }} offset={[1,5]}></Badge>\r\n            </div>\r\n          </NavLink>\r\n          <NavLink to={{ pathname: \"/message/handle\" }}>\r\n            <div className='message_logo'>\r\n              <div>\r\n                <CarryOutTwoTone />\r\n                我处理的\r\n              </div>\r\n              <Badge count={handleCount} style={{ float: 'right' }} offset={[1,5]}></Badge>\r\n            </div>\r\n          </NavLink>\r\n          <NavLink to={{ pathname: \"/message/copy\" }}>\r\n            <div className='message_logo'>\r\n              <div>\r\n                <SoundTwoTone />\r\n                抄送我的\r\n              </div>\r\n              <Badge count={copyCount} style={{ float: 'right' }} offset={[1,5]}></Badge>\r\n            </div>\r\n          </NavLink>\r\n          <hr></hr>\r\n          <Menu theme=\"light\"\r\n            // defaultOpenKeys={toJS(this.store.openKeys)}\r\n            selectedKeys={toJS(this.store.selectedKeys)}\r\n            // openKeys={this.store.openKeys}\r\n            mode={'inline'}\r\n            onClick={this.handleMenu}\r\n            onOpenChange={this.onOpenChange}\r\n            onSelect={this.onMenuSelect}\r\n          // inlineCollapsed={this.state.collapsed}\r\n          >\r\n            {\r\n              menuObj.map(leaf => !leaf.displayNone && <SubMenu\r\n                key={leaf.id}\r\n                title={<span><FolderOutlined /><span style={{ display: this.state.collapsed && 'none' }}>{leaf.name}</span></span>}\r\n              >\r\n                {\r\n                  leaf.leafMenuModels.length > 0 && leaf.leafMenuModels.map(ele =>\r\n                    !ele.displayNone && <Menu.Item key={ele.id}>{ele.name}</Menu.Item>)\r\n                }\r\n              </SubMenu>)\r\n            }\r\n          </Menu>\r\n        </div>\r\n\r\n      </Sider>\r\n    );\r\n  }\r\n  onMenuSelect = ({ selectedKeys }) => {\r\n    this.store.selectedKeys = selectedKeys;\r\n  }\r\n  onOpenChange = (openKeys) => {\r\n    this.store.openKeys = openKeys;\r\n  }\r\n  handleMenu = ({ item, key, }) => {\r\n    if (key.startsWith('my')) {\r\n      this.props.HomeStore.changeViewModel(key)\r\n      console.log(toJS(this.props.HomeStore.viewModel));\r\n    } else {\r\n      this.props.HomeStore.toggleMenu({ actionItem: item, actionId: key, from: 'menu-click' }, (url) => {\r\n        if (url) {\r\n          this.props.history.push(url);\r\n        } else {\r\n          alert('false');\r\n        }\r\n      });\r\n    }\r\n  }\r\n  handleRe = (key) => {\r\n    console.log(key);\r\n  }\r\n  goBack = () => {\r\n    this.props.history.push('/index');\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    firstMount = false;\r\n    // this.props.HomeStore.getMenuList(this.props.location.pathname).then(() => {\r\n    //   this.props.HomeStore.initMenu(this.props.location.pathname);\r\n    // });\r\n\r\n    /* 初始化判断是否显示 */\r\n    if (this.props.sizetype !== 'l_size') {\r\n      this.state.collapsed = true;\r\n    } else {\r\n      this.state.collapsed = false;\r\n    }\r\n    this.setState({});\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    let newState = { ...state };\r\n    if (props.sizetype === 'l_size') {\r\n      if (props.HomeStore.isClickCollapsed) {\r\n        if (props.sizetype !== state.sizetype) {\r\n          props.HomeStore.changeValue('collapsed', false)\r\n        }\r\n        Object.assign(newState, {\r\n          sizetype: props.sizetype,\r\n          collapsed: props.HomeStore.collapsed,\r\n          pathname: props.location.pathname\r\n        })\r\n      } else {\r\n        Object.assign(newState, {\r\n          sizetype: props.sizetype,\r\n          collapsed: false,\r\n          pathname: props.location.pathname\r\n        })\r\n      }\r\n    } else {\r\n      if (props.HomeStore.isClickCollapsed) {\r\n        if (props.sizetype !== state.sizetype) {\r\n          props.HomeStore.changeValue('collapsed', true)\r\n        }\r\n        Object.assign(newState, {\r\n          sizetype: props.sizetype,\r\n          collapsed: props.HomeStore.collapsed,\r\n          pathname: props.location.pathname\r\n        })\r\n      } else {\r\n        Object.assign(newState, {\r\n          sizetype: props.sizetype,\r\n          collapsed: true,\r\n          pathname: props.location.pathname\r\n        })\r\n      }\r\n    }\r\n    if (props.location.pathname !== state.pathname) {\r\n      Object.assign(newState, {\r\n        isPath: true\r\n      })\r\n    } else {\r\n      Object.assign(newState, {\r\n        isPath: false\r\n      })\r\n    }\r\n    return newState;\r\n  }\r\n  componentDidUpdate() {\r\n    let lo = this.props.location.pathname\r\n    if (this.state.isPath && lo != \"/message/todo\" && \r\n    lo != \"/message/create\" &&\r\n    lo != \"/message/handle\" &&\r\n    lo != \"/message/copy\")  {\r\n      this.props.HomeStore.initMenu(this.state.pathname)\r\n    }\r\n  }\r\n}\r\nexport default MenuLayout;"]},"metadata":{},"sourceType":"module"}