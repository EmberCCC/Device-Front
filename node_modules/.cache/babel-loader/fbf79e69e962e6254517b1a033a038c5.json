{"ast":null,"code":"import _defineProperty from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport \"antd/lib/icon/style\";\nimport _Icon from \"antd/lib/icon\";\nimport _classCallCheck from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport \"antd/lib/menu/style\";\nimport _Menu from \"antd/lib/menu\";\nimport \"antd/lib/layout/style\";\nimport _Layout from \"antd/lib/layout\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/Users/shoen/Desktop/\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF/bl-device-manage/src/layouts/HomeLayout/Menu.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { withRouter } from 'react-router-dom';\nimport wholeUrl from '../../assets/index_logo.png';\nimport partUrl from '../../assets/min_logo.png';\nimport classnames from 'classnames';\nimport './index.less';\nimport { toJS } from 'mobx';\nvar Sider = _Layout.Sider;\nvar SubMenu = _Menu.SubMenu;\nvar firstMount = false;\nvar MenuLayout = (_dec = inject('HomeStore'), withRouter(_class = _dec(_class = observer(_class = (_temp = /*#__PURE__*/function (_Component) {\n  _inherits(MenuLayout, _Component);\n\n  var _super = _createSuper(MenuLayout);\n\n  function MenuLayout(props) {\n    var _this;\n\n    _classCallCheck(this, MenuLayout);\n\n    _this = _super.call(this, props);\n\n    _this.onMenuSelect = function (_ref) {\n      var selectedKeys = _ref.selectedKeys;\n      _this.store.selectedKeys = selectedKeys;\n    };\n\n    _this.onOpenChange = function (openKeys) {\n      _this.store.openKeys = openKeys;\n    };\n\n    _this.handleMenu = function (_ref2) {\n      var item = _ref2.item,\n          key = _ref2.key;\n\n      _this.props.HomeStore.toggleMenu({\n        actionItem: item,\n        actionId: key,\n        from: 'menu-click'\n      }, function (url) {\n        if (url) {\n          _this.props.history.push(url);\n        } else {\n          alert('false');\n        }\n      });\n    };\n\n    _this.goBack = function () {\n      _this.props.history.push('/index');\n    };\n\n    _this.state = {\n      collapsed: false,\n      sizetype: '',\n      pathname: '',\n      isPath: false\n    };\n    _this.store = _this.props.HomeStore;\n    return _this;\n  }\n\n  _createClass(MenuLayout, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var isMobile = this.props.mobile === 'true';\n\n      var _toJS = toJS(this.store),\n          menuObj = _toJS.menuObj;\n\n      return /*#__PURE__*/React.createElement(Sider, {\n        trigger: null,\n        collapsible: true,\n        collapsed: this.props.sizetype === 's_size' ? false : this.state.collapsed,\n        className: classnames({\n          'ant-sider-menu-content': true,\n          'ant-sider-menu-none': isMobile\n        }),\n        style: {\n          overflowY: 'auto',\n          height: this.props.sizetype === 's_size' && '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 12\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"manu_container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"menu_logo\",\n        onClick: this.goBack,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 9\n        }\n      }, this.props.sizetype !== 's_size' && this.state.collapsed ? /*#__PURE__*/React.createElement(\"img\", {\n        style: {\n          paddingLeft: '7px'\n        },\n        alt: \"logo\",\n        src: partUrl,\n        width: \"55%\",\n        height: \"50%\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 71\n        }\n      }) : /*#__PURE__*/React.createElement(\"img\", {\n        alt: \"logo\",\n        src: wholeUrl,\n        width: \"60%\",\n        height: \"55%\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(_Menu, {\n        theme: \"dark\" // defaultOpenKeys={toJS(this.store.openKeys)}\n        ,\n        selectedKeys: toJS(this.store.selectedKeys) // openKeys={this.store.openKeys}\n        ,\n        mode: 'inline',\n        onClick: this.handleMenu,\n        onOpenChange: this.onOpenChange,\n        onSelect: this.onMenuSelect // inlineCollapsed={this.state.collapsed}\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 9\n        }\n      }, menuObj.map(function (leaf) {\n        return !leaf.displayNone && /*#__PURE__*/React.createElement(SubMenu, {\n          key: leaf.id,\n          title: /*#__PURE__*/React.createElement(\"span\", {\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 22\n            }\n          }, leaf.icon ? /*#__PURE__*/React.createElement(_Icon, {\n            type: leaf.icon,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 29\n            }\n          }) : leaf.iconfont && /*#__PURE__*/React.createElement(\"i\", {\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 74\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            style: {\n              marginRight: '10px',\n              verticalAlign: 'middle'\n            },\n            className: \"iconfont \".concat(leaf.iconfont),\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 19\n            }\n          })), /*#__PURE__*/React.createElement(\"span\", {\n            style: {\n              display: _this2.state.collapsed && 'none'\n            },\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 16\n            }\n          }, leaf.name)),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 54\n          }\n        }, leaf.leafMenuModels.length > 0 && leaf.leafMenuModels.map(function (ele) {\n          return !ele.displayNone && /*#__PURE__*/React.createElement(_Menu.Item, {\n            key: ele.id,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 39\n            }\n          }, ele.name);\n        }));\n      }))));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      firstMount = false; // this.props.HomeStore.getMenuList(this.props.location.pathname).then(() => {\n      //   this.props.HomeStore.initMenu(this.props.location.pathname);\n      // });\n\n      /* 初始化判断是否显示 */\n\n      if (this.props.sizetype !== 'l_size') {\n        this.state.collapsed = true;\n      } else {\n        this.state.collapsed = false;\n      }\n\n      this.setState({});\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.state.isPath) {\n        this.props.HomeStore.initMenu(this.state.pathname);\n      }\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var newState = _objectSpread({}, state);\n\n      if (props.sizetype === 'l_size') {\n        if (props.HomeStore.isClickCollapsed) {\n          if (props.sizetype !== state.sizetype) {\n            props.HomeStore.changeValue('collapsed', false);\n          }\n\n          Object.assign(newState, {\n            sizetype: props.sizetype,\n            collapsed: props.HomeStore.collapsed,\n            pathname: props.location.pathname\n          });\n        } else {\n          Object.assign(newState, {\n            sizetype: props.sizetype,\n            collapsed: false,\n            pathname: props.location.pathname\n          });\n        }\n      } else {\n        if (props.HomeStore.isClickCollapsed) {\n          if (props.sizetype !== state.sizetype) {\n            props.HomeStore.changeValue('collapsed', true);\n          }\n\n          Object.assign(newState, {\n            sizetype: props.sizetype,\n            collapsed: props.HomeStore.collapsed,\n            pathname: props.location.pathname\n          });\n        } else {\n          Object.assign(newState, {\n            sizetype: props.sizetype,\n            collapsed: true,\n            pathname: props.location.pathname\n          });\n        }\n      }\n\n      if (props.location.pathname !== state.pathname) {\n        Object.assign(newState, {\n          isPath: true\n        });\n      } else {\n        Object.assign(newState, {\n          isPath: false\n        });\n      }\n\n      return newState;\n    }\n  }]);\n\n  return MenuLayout;\n}(Component), _temp)) || _class) || _class) || _class);\nexport default MenuLayout;","map":{"version":3,"sources":["/Users/shoen/Desktop/设备运维前端/bl-device-manage/src/layouts/HomeLayout/Menu.js"],"names":["React","Component","inject","observer","withRouter","wholeUrl","partUrl","classnames","toJS","Sider","SubMenu","firstMount","MenuLayout","props","onMenuSelect","selectedKeys","store","onOpenChange","openKeys","handleMenu","item","key","HomeStore","toggleMenu","actionItem","actionId","from","url","history","push","alert","goBack","state","collapsed","sizetype","pathname","isPath","isMobile","mobile","menuObj","overflowY","height","paddingLeft","map","leaf","displayNone","id","icon","iconfont","marginRight","verticalAlign","display","name","leafMenuModels","length","ele","setState","initMenu","newState","isClickCollapsed","changeValue","Object","assign","location"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { withRouter } from 'react-router-dom';\nimport wholeUrl from '../../assets/index_logo.png';\nimport partUrl from '../../assets/min_logo.png';\nimport classnames from 'classnames';\nimport './index.less';\nimport { Menu, Layout, Icon, } from 'antd';\nimport { toJS } from 'mobx';\nconst { Sider } = Layout;\nconst SubMenu = Menu.SubMenu;\n\nlet firstMount = false;\n@withRouter\n@inject('HomeStore')\n@observer\nclass MenuLayout extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      collapsed: false,\n      sizetype: '',\n      pathname: '',\n      isPath: false,\n    }\n    this.store = this.props.HomeStore;\n  }\n  render() {\n    const isMobile = this.props.mobile === 'true';\n    const { menuObj } = toJS(this.store);\n    return <Sider\n      trigger={null}\n      collapsible\n      collapsed={\n        this.props.sizetype === 's_size' ? false : this.state.collapsed\n      }\n      className={\n        classnames({\n          'ant-sider-menu-content': true,\n          'ant-sider-menu-none': isMobile\n        })\n      }\n      style={{\n        overflowY: 'auto',\n        height: this.props.sizetype === 's_size' && '100%'\n      }}\n    >\n      <div id='manu_container'>\n        <div className='menu_logo' onClick={this.goBack}>\n          {this.props.sizetype !== 's_size' && this.state.collapsed ? <img\n            style={{\n              paddingLeft: '7px'\n            }}\n            alt='logo' src={partUrl} width='55%' height='50%' />\n            : <img alt='logo' src={wholeUrl} width='60%' height='55%' />}\n        </div>\n        <Menu theme=\"dark\"\n          // defaultOpenKeys={toJS(this.store.openKeys)}\n          selectedKeys={toJS(this.store.selectedKeys)}\n          // openKeys={this.store.openKeys}\n          mode={'inline'}\n          onClick={this.handleMenu}\n          onOpenChange={this.onOpenChange}\n          onSelect={this.onMenuSelect}\n        // inlineCollapsed={this.state.collapsed}\n        >\n          {\n            menuObj.map(leaf => !leaf.displayNone && <SubMenu\n              key={leaf.id}\n              title={<span>{\n                leaf.icon ? <Icon type={leaf.icon} /> : leaf.iconfont && <i>\n                  <span\n                    style={{ marginRight: '10px', verticalAlign: 'middle' }}\n                    className={`iconfont ${leaf.iconfont}`}></span>\n                </i>\n              }<span style={{ display: this.state.collapsed && 'none' }}>{leaf.name}</span></span>}\n            >\n              {\n                leaf.leafMenuModels.length > 0 && leaf.leafMenuModels.map(ele =>\n                  !ele.displayNone && <Menu.Item key={ele.id}>{ele.name}</Menu.Item>)\n              }\n            </SubMenu>)\n          }\n        </Menu>\n      </div>\n\n    </Sider>;\n  }\n  onMenuSelect = ({ selectedKeys }) => {\n    this.store.selectedKeys = selectedKeys;\n  }\n  onOpenChange = (openKeys) => {\n    this.store.openKeys = openKeys;\n  }\n  handleMenu = ({ item, key, }) => {\n    this.props.HomeStore.toggleMenu({ actionItem: item, actionId: key, from: 'menu-click' }, (url) => {\n      if (url) {\n        this.props.history.push(url);\n      } else {\n        alert('false');\n      }\n    });\n  }\n  goBack = () => {\n    this.props.history.push('/index');\n  }\n  componentDidMount() {\n    firstMount = false;\n    // this.props.HomeStore.getMenuList(this.props.location.pathname).then(() => {\n    //   this.props.HomeStore.initMenu(this.props.location.pathname);\n    // });\n\n    /* 初始化判断是否显示 */\n    if (this.props.sizetype !== 'l_size') {\n      this.state.collapsed = true;\n    } else {\n      this.state.collapsed = false;\n    }\n    this.setState({});\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    let newState = { ...state };\n    if (props.sizetype === 'l_size') {\n      if (props.HomeStore.isClickCollapsed) {\n        if (props.sizetype !== state.sizetype) {\n          props.HomeStore.changeValue('collapsed', false)\n        }\n        Object.assign(newState, {\n          sizetype: props.sizetype,\n          collapsed: props.HomeStore.collapsed,\n          pathname: props.location.pathname\n        })\n      } else {\n        Object.assign(newState, {\n          sizetype: props.sizetype,\n          collapsed: false,\n          pathname: props.location.pathname\n        })\n      }\n    } else {\n      if (props.HomeStore.isClickCollapsed) {\n        if (props.sizetype !== state.sizetype) {\n          props.HomeStore.changeValue('collapsed', true)\n        }\n        Object.assign(newState, {\n          sizetype: props.sizetype,\n          collapsed: props.HomeStore.collapsed,\n          pathname: props.location.pathname\n        })\n      } else {\n        Object.assign(newState, {\n          sizetype: props.sizetype,\n          collapsed: true,\n          pathname: props.location.pathname\n        })\n      }\n    }\n    if (props.location.pathname !== state.pathname) {\n      Object.assign(newState, {\n        isPath: true\n      })\n    } else {\n      Object.assign(newState, {\n        isPath: false\n      })\n    }\n    return newState;\n  }\n  componentDidUpdate() {\n    if (this.state.isPath) {\n      this.props.HomeStore.initMenu(this.state.pathname)\n    }\n  }\n}\nexport default MenuLayout;"]},"metadata":{},"sourceType":"module"}