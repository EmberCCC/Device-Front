{"ast":null,"code":"import \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/date-picker/style\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport _objectSpread from \"D:\\\\GGdownload\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"D:\\\\GGdownload\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\GGdownload\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\GGdownload\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\GGdownload\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\GGdownload\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"D:\\\\GGdownload\\\\\\u8BBE\\u5907\\u8FD0\\u7EF4\\u524D\\u7AEF\\\\bl-device-manage\\\\src\\\\layouts\\\\BasicManage\\\\DefinePage\\\\DeviceList\\\\AddModal.js\";\n\nimport React, { Component } from 'react';\nimport { Form } from '@ant-design/compatible';\nimport '@ant-design/compatible/assets/index.css';\nimport { inject, observer } from 'mobx-react';\nimport { toJS } from 'mobx';\nvar Option = _Select.Option;\nvar formItemLayout = {\n  labelCol: {\n    span: 6\n  },\n  wrapperCol: {\n    span: 12\n  }\n};\nvar moment = window.GLOBAL_PARAMS.moment;\nvar AddModal = (_dec = inject('DeviceDefineStore'), _dec(_class = observer(_class = (_temp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddModal, _Component);\n\n  function AddModal(props) {\n    var _this;\n\n    _classCallCheck(this, AddModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddModal).call(this, props));\n\n    _this.onOk = function () {\n      var _this$store = _this.store,\n          listStatus = _this$store.listStatus,\n          devCurrent = _this$store.devCurrent;\n\n      _this.props.form.validateFieldsAndScroll(function (err, values) {\n        if (!err) {\n          var params = _objectSpread({\n            deviceStatus: devCurrent.deviceStatus\n          }, values, {\n            deviceTime: values.deviceTime.format('YYYY-MM-DD HH:MM:SS')\n          });\n\n          if (listStatus === 'edit') params.id = devCurrent.id;\n\n          _this.store.saveDevice(params);\n\n          _this.props.onClose();\n        }\n      });\n    };\n\n    _this.selectTypeChange = function (value) {\n      _this.store.getSelectModel({\n        typeId: value\n      });\n    };\n\n    _this.state = {\n      value: '',\n      radio: 1,\n      showMore: false\n    };\n    _this.store = _this.props.DeviceDefineStore;\n    return _this;\n  }\n\n  _createClass(AddModal, [{\n    key: \"render\",\n    value: function render() {\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      var status = this.props.status;\n\n      var _toJS = toJS(this.store),\n          listVisible = _toJS.listVisible,\n          devCurrent = _toJS.devCurrent,\n          selectModel = _toJS.selectModel,\n          selectType = _toJS.selectType,\n          employeeList = _toJS.employeeList;\n\n      return React.createElement(_Modal, {\n        // width = {950}\n        title: \"\".concat(status === 'query' ? '查看' : status === 'add' ? \"新增\" : '编辑'),\n        visible: listVisible,\n        onCancel: this.props.onClose,\n        footer: status !== 'query' ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37\n          },\n          __self: this\n        }, React.createElement(_Button, {\n          onClick: this.props.onClose,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        }, \"\\u53D6\\u6D88\"), React.createElement(_Button, {\n          type: \"primary\",\n          onClick: this.onOk,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39\n          },\n          __self: this\n        }, \"\\u786E\\u5B9A\")) : React.createElement(_Button, {\n          type: \"primary\",\n          onClick: this.props.onClose,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        }, \"\\u5173\\u95ED\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, \"\\u57FA\\u672C\\u4FE1\\u606F\"), React.createElement(Form.Item, Object.assign({}, formItemLayout, {\n        label: \"\\u8BBE\\u5907\\u540D\\u79F0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }), getFieldDecorator('deviceName', {\n        initialValue: status !== 'add' ? devCurrent.deviceName : undefined,\n        rules: [{\n          required: true,\n          message: '请填写设备名称'\n        }]\n      })(React.createElement(_Input, {\n        disabled: status === 'query',\n        placeholder: \"\\u8BF7\\u8F93\\u5165\",\n        style: {\n          width: '200px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }))), React.createElement(Form.Item, Object.assign({}, formItemLayout, {\n        label: \"\\u8BBE\\u5907\\u7F16\\u53F7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }), getFieldDecorator('deviceCode', {\n        initialValue: status !== 'add' ? devCurrent.deviceCode : undefined,\n        rules: [{\n          required: true,\n          message: '请填写设备编号'\n        }]\n      })(React.createElement(_Input, {\n        disabled: status === 'query',\n        placeholder: \"\\u8BF7\\u8F93\\u5165\",\n        style: {\n          width: '200px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }))), React.createElement(Form.Item, Object.assign({}, formItemLayout, {\n        label: \"\\u8BBE\\u5907\\u7C7B\\u578B\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }), getFieldDecorator('typeId', {\n        initialValue: status !== 'add' ? devCurrent.typeId : undefined,\n        rules: [{\n          required: true,\n          message: '请选择设备类型'\n        }]\n      })(React.createElement(_Select, {\n        showSearch: true,\n        optionFilterProp: \"children\",\n        placeholder: \"\\u8BF7\\u9009\\u62E9\",\n        style: {\n          width: 200\n        },\n        onChange: this.selectTypeChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, selectType.length > 0 && selectType.map(function (mas) {\n        return React.createElement(Option, {\n          key: mas.id,\n          value: mas.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, mas.typeName);\n      })))), React.createElement(Form.Item, Object.assign({}, formItemLayout, {\n        label: \"\\u8BBE\\u5907\\u578B\\u53F7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }), getFieldDecorator('modelId', {\n        initialValue: status !== 'add' ? devCurrent.modelId : undefined,\n        rules: [{\n          required: true,\n          message: '请选择设备型号'\n        }]\n      })(React.createElement(_Select, {\n        showSearch: true,\n        optionFilterProp: \"children\",\n        placeholder: \"\\u8BF7\\u9009\\u62E9\",\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, selectModel.length > 0 && selectModel.map(function (mas) {\n        return React.createElement(Option, {\n          key: mas.id,\n          value: mas.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, mas.modelName);\n      })))), React.createElement(Form.Item, Object.assign({}, formItemLayout, {\n        label: \"\\u521B\\u5EFA\\u65F6\\u95F4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }), getFieldDecorator('deviceTime', {\n        initialValue: status !== 'add' ? moment(devCurrent.deviceTime) : moment(new Date()) // rules: [{ type: 'object', required: true, message: '请选择时间!' }]\n\n      })(React.createElement(_DatePicker, {\n        showTime: true,\n        format: \"YYYY-MM-DD HH:MM:SS\",\n        locale: window.GLOBAL_PARAMS.locale,\n        placeholder: \"\\u8BF7\\u9009\\u62E9\\u65E5\\u671F\",\n        style: {\n          width: '200px',\n          display: 'inline-block'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }))), React.createElement(Form.Item, Object.assign({}, formItemLayout, {\n        label: \"\\u4FDD\\u4FEE\\u671F\\uFF08\\u5929\\uFF09\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }), getFieldDecorator('guaranteePeriod', {\n        initialValue: status !== 'add' ? devCurrent.guaranteePeriod : undefined\n      })(React.createElement(_Input, {\n        disabled: status === 'query',\n        placeholder: \"\\u8BF7\\u8F93\\u5165\",\n        style: {\n          width: '200px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }))), React.createElement(Form.Item, Object.assign({}, formItemLayout, {\n        label: \"\\u70B9\\u68C0\\u4EBA\\u5458\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), getFieldDecorator('checkId', {\n        initialValue: status !== 'add' ? devCurrent.checkId : undefined\n      })(React.createElement(_Select, {\n        showSearch: true,\n        optionFilterProp: \"children\",\n        placeholder: \"\\u8BF7\\u9009\\u62E9\",\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, employeeList.length > 0 && employeeList.map(function (mas) {\n        return React.createElement(Option, {\n          key: mas.id,\n          value: mas.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, mas.name);\n      })))), React.createElement(Form.Item, Object.assign({}, formItemLayout, {\n        label: \"\\u5DE1\\u68C0\\u4EBA\\u5458\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), getFieldDecorator('inspectionId', {\n        initialValue: status !== 'add' ? devCurrent.inspectionId : undefined\n      })(React.createElement(_Select, {\n        showSearch: true,\n        optionFilterProp: \"children\",\n        placeholder: \"\\u8BF7\\u9009\\u62E9\",\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, employeeList.length > 0 && employeeList.map(function (mas) {\n        return React.createElement(Option, {\n          key: mas.id,\n          value: mas.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, mas.name);\n      })))), React.createElement(Form.Item, Object.assign({}, formItemLayout, {\n        label: \"\\u7EF4\\u4FEE\\u4EBA\\u5458\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }), getFieldDecorator('repairId', {\n        initialValue: status !== 'add' ? devCurrent.repairId : undefined\n      })(React.createElement(_Select, {\n        showSearch: true,\n        optionFilterProp: \"children\",\n        placeholder: \"\\u8BF7\\u9009\\u62E9\",\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, employeeList.length > 0 && employeeList.map(function (mas) {\n        return React.createElement(Option, {\n          key: mas.id,\n          value: mas.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }, mas.name);\n      })))), React.createElement(Form.Item, Object.assign({}, formItemLayout, {\n        label: \"\\u4FDD\\u517B\\u4EBA\\u5458\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }), getFieldDecorator('maintainId', {\n        initialValue: status !== 'add' ? devCurrent.maintainId : undefined\n      })(React.createElement(_Select, {\n        showSearch: true,\n        optionFilterProp: \"children\",\n        placeholder: \"\\u8BF7\\u9009\\u62E9\",\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, employeeList.length > 0 && employeeList.map(function (mas) {\n        return React.createElement(Option, {\n          key: mas.id,\n          value: mas.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }, mas.name);\n      }))))));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.store.getSelectType();\n      this.store.getUsersByRoles();\n\n      if (this.store.listStatus === 'edit') {\n        this.store.getSelectModel({\n          typeId: this.store.devCurrent.typeId\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.store.selectModel = [];\n    }\n  }]);\n\n  return AddModal;\n}(Component), _temp)) || _class) || _class);\nvar WrappedDynamicRule = Form.create({})(AddModal);\nexport default WrappedDynamicRule;","map":{"version":3,"sources":["D:\\GGdownload\\设备运维前端\\bl-device-manage\\src\\layouts\\BasicManage\\DefinePage\\DeviceList\\AddModal.js"],"names":["React","Component","Form","inject","observer","toJS","Option","formItemLayout","labelCol","span","wrapperCol","moment","window","GLOBAL_PARAMS","AddModal","props","onOk","store","listStatus","devCurrent","form","validateFieldsAndScroll","err","values","params","deviceStatus","deviceTime","format","id","saveDevice","onClose","selectTypeChange","value","getSelectModel","typeId","state","radio","showMore","DeviceDefineStore","getFieldDecorator","status","listVisible","selectModel","selectType","employeeList","initialValue","deviceName","undefined","rules","required","message","width","deviceCode","length","map","mas","typeName","modelId","modelName","Date","locale","display","guaranteePeriod","checkId","name","inspectionId","repairId","maintainId","getSelectType","getUsersByRoles","WrappedDynamicRule","create"],"mappings":"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","sourcesContent":["import React,{ Component } from 'react';\r\nimport { Form } from '@ant-design/compatible';\r\nimport '@ant-design/compatible/assets/index.css';\r\nimport { Input, Button, DatePicker, Select, Modal } from 'antd';\r\nimport { inject,observer } from 'mobx-react';\r\nimport { toJS } from 'mobx';\r\nconst { Option } = Select;\r\n\r\nconst formItemLayout = {\r\n  labelCol: { span: 6 },\r\n  wrapperCol: { span: 12 },\r\n};\r\nconst { moment } = window.GLOBAL_PARAMS;\r\n\r\n@inject('DeviceDefineStore')\r\n@observer\r\nclass AddModal extends Component{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      value:'',\r\n      radio:1,\r\n      showMore : false\r\n    }\r\n    this.store = this.props.DeviceDefineStore;\r\n  }\r\n  render(){\r\n    const { getFieldDecorator } = this.props.form;\r\n    const { status } = this.props;\r\n    const { listVisible,devCurrent,selectModel,selectType,employeeList } = toJS(this.store);\r\n    return <Modal\r\n      // width = {950}\r\n      title={`${status === 'query' ? '查看' : status === 'add' ? \"新增\" : '编辑'}`}\r\n      visible={listVisible}\r\n      onCancel={this.props.onClose}\r\n      footer={\r\n        status !== 'query' ? <div>\r\n          <Button onClick={this.props.onClose}>取消</Button>\r\n          <Button type='primary' onClick={this.onOk}>确定</Button>\r\n        </div> : <Button type='primary' onClick={this.props.onClose}>关闭</Button>\r\n      }\r\n    >\r\n      <Form>\r\n        <h4>基本信息</h4>\r\n        <Form.Item {...formItemLayout} label=\"设备名称\">\r\n          {getFieldDecorator('deviceName', {\r\n            initialValue:status !== 'add' ? devCurrent.deviceName : undefined,\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: '请填写设备名称',\r\n              },\r\n            ],\r\n          })(\r\n            <Input disabled={status === 'query'} placeholder='请输入' style={{width:'200px'}} />\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item {...formItemLayout} label=\"设备编号\">\r\n          {getFieldDecorator('deviceCode', {\r\n            initialValue:status !== 'add' ? devCurrent.deviceCode : undefined,\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: '请填写设备编号',\r\n              },\r\n            ],\r\n          })(\r\n            <Input disabled={status === 'query'} placeholder='请输入' style={{width:'200px'}} />\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item {...formItemLayout} label=\"设备类型\">\r\n          {getFieldDecorator('typeId', {\r\n            initialValue: status !== 'add' ? devCurrent.typeId : undefined,\r\n            rules: [{ required: true, message: '请选择设备类型' }]\r\n          })(\r\n            <Select \r\n              showSearch\r\n              optionFilterProp='children'\r\n              placeholder=\"请选择\"\r\n              style={{ width: 200 }} \r\n              onChange={this.selectTypeChange}\r\n            > \r\n              {\r\n                selectType.length > 0 && selectType.map(mas =><Option key={mas.id} value={mas.id}>{mas.typeName}</Option>)\r\n              }\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item {...formItemLayout} label=\"设备型号\">\r\n          {getFieldDecorator('modelId', {\r\n            initialValue: status !== 'add' ? devCurrent.modelId : undefined,\r\n            rules: [{ required: true, message: '请选择设备型号' }]\r\n          })(\r\n            <Select \r\n              showSearch\r\n              optionFilterProp='children'\r\n              placeholder=\"请选择\"\r\n              style={{ width: 200 }} \r\n            > \r\n              {\r\n                selectModel.length > 0 && selectModel.map(mas =><Option key={mas.id} value={mas.id}>{mas.modelName}</Option>)\r\n              }\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item {...formItemLayout} label=\"创建时间\">\r\n          {getFieldDecorator('deviceTime', {\r\n            initialValue: status !== 'add' ? moment(devCurrent.deviceTime) : moment(new Date()) ,\r\n            // rules: [{ type: 'object', required: true, message: '请选择时间!' }]\r\n          })(\r\n            <DatePicker \r\n              showTime \r\n              format=\"YYYY-MM-DD HH:MM:SS\" \r\n              locale={window.GLOBAL_PARAMS.locale} \r\n              placeholder=\"请选择日期\" \r\n              style={{ width: '200px',display:'inline-block' }} \r\n            />\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item {...formItemLayout} label=\"保修期（天）\">\r\n          {getFieldDecorator('guaranteePeriod', {\r\n            initialValue: status !== 'add' ? devCurrent.guaranteePeriod : undefined,\r\n            \r\n          })(\r\n            <Input disabled={status === 'query'} placeholder='请输入' style={{width:'200px'}} />\r\n          )}\r\n        </Form.Item>\r\n        {/* <Form.Item {...formItemLayout} label=\"计量单位\">\r\n          {getFieldDecorator('unit', {\r\n            initialValue:status !== 'add' ? devCurrent.unit : undefined,\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: '请填写计量单位',\r\n              },\r\n            ],\r\n          })(\r\n            <Input disabled={status === 'query'} placeholder='请输入' style={{width:'200px'}} />\r\n          )}\r\n        </Form.Item> */}\r\n        <Form.Item {...formItemLayout} label=\"点检人员\">\r\n          {getFieldDecorator('checkId', {\r\n            initialValue:status !== 'add' ? devCurrent.checkId : undefined,\r\n          })(\r\n            <Select \r\n              showSearch\r\n              optionFilterProp='children'\r\n              placeholder=\"请选择\"\r\n              style={{ width: 200 }} \r\n            > \r\n              {\r\n                employeeList.length > 0 && employeeList.map(mas =><Option key={mas.id} value={mas.id}>{mas.name}</Option>)\r\n              }\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item {...formItemLayout} label=\"巡检人员\">\r\n          {getFieldDecorator('inspectionId', {\r\n            initialValue:status !== 'add' ? devCurrent.inspectionId : undefined,\r\n          })(\r\n            <Select \r\n              showSearch\r\n              optionFilterProp='children'\r\n              placeholder=\"请选择\"\r\n              style={{ width: 200 }} \r\n            > \r\n              {\r\n                employeeList.length > 0 && employeeList.map(mas =><Option key={mas.id} value={mas.id}>{mas.name}</Option>)\r\n              }\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item {...formItemLayout} label=\"维修人员\">\r\n          {getFieldDecorator('repairId', {\r\n            initialValue:status !== 'add' ? devCurrent.repairId : undefined,\r\n          })(\r\n            <Select \r\n              showSearch\r\n              optionFilterProp='children'\r\n              placeholder=\"请选择\"\r\n              style={{ width: 200 }} \r\n            > \r\n              {\r\n                employeeList.length > 0 && employeeList.map(mas =><Option key={mas.id} value={mas.id}>{mas.name}</Option>)\r\n              }\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item {...formItemLayout} label=\"保养人员\">\r\n          {getFieldDecorator('maintainId', {\r\n            initialValue:status !== 'add' ? devCurrent.maintainId : undefined,\r\n          })(\r\n            <Select \r\n              showSearch\r\n              optionFilterProp='children'\r\n              placeholder=\"请选择\"\r\n              style={{ width: 200 }} \r\n            > \r\n              {\r\n                employeeList.length > 0 && employeeList.map(mas =><Option key={mas.id} value={mas.id}>{mas.name}</Option>)\r\n              }\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  }\r\n  \r\n  \r\n  onOk = ()=>{\r\n    const { listStatus,devCurrent } = this.store;\r\n    this.props.form.validateFieldsAndScroll((err, values) => {\r\n      if (!err) {\r\n        let params = {\r\n          deviceStatus:devCurrent.deviceStatus,\r\n          ...values,\r\n          deviceTime:values.deviceTime.format('YYYY-MM-DD HH:MM:SS') \r\n        }\r\n        if(listStatus === 'edit')\r\n          params.id = devCurrent.id;\r\n        this.store.saveDevice(params);\r\n        this.props.onClose();\r\n      }\r\n    });\r\n  }\r\n  selectTypeChange = value =>{\r\n    this.store.getSelectModel({typeId:value})\r\n  }\r\n  componentDidMount(){\r\n    this.store.getSelectType()\r\n    this.store.getUsersByRoles()\r\n    if(this.store.listStatus === 'edit'){\r\n      this.store.getSelectModel({typeId:this.store.devCurrent.typeId})\r\n    }\r\n  }\r\n  componentWillUnmount(){\r\n    this.store.selectModel = []\r\n  }\r\n}\r\nconst WrappedDynamicRule = Form.create({})(AddModal);\r\nexport default WrappedDynamicRule;"]},"metadata":{},"sourceType":"module"}