{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _initializerDefineProperty from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/initializerDefineProperty\";\nimport _classCallCheck from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _applyDecoratedDescriptor from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/initializerWarningHelper\";\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _class, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8, _descriptor9, _descriptor10, _descriptor11, _descriptor12, _descriptor13, _descriptor14, _descriptor15, _descriptor16, _descriptor17, _descriptor18, _descriptor19, _descriptor20, _temp;\n\nimport { observable, action, toJS } from 'mobx';\nimport { isDataExist } from 'Utils/dataTools';\nimport * as services from '../services/home';\nimport { isEmpty, uniqBy } from 'lodash';\nimport { checkCurrentMenu } from 'utils/dataTools';\nimport { MenuObj } from '../constants/configs';\n\nvar uuid = require('uuid/v1');\n\nvar Home = (_dec = action.bound, _dec2 = action.bound, _dec3 = action.bound, _dec4 = action.bound, _dec5 = action.bound, _dec6 = action.bound, _dec7 = action.bound, _dec8 = action.bound, (_class = (_temp =\n/*#__PURE__*/\nfunction () {\n  function Home() {\n    _classCallCheck(this, Home);\n\n    _initializerDefineProperty(this, \"contentScrollHeight\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"collapsed\", _descriptor2, this);\n\n    _initializerDefineProperty(this, \"menuObj\", _descriptor3, this);\n\n    _initializerDefineProperty(this, \"openKeys\", _descriptor4, this);\n\n    _initializerDefineProperty(this, \"selectedKeys\", _descriptor5, this);\n\n    _initializerDefineProperty(this, \"crumbsList\", _descriptor6, this);\n\n    _initializerDefineProperty(this, \"size_class\", _descriptor7, this);\n\n    _initializerDefineProperty(this, \"isClickCollapsed\", _descriptor8, this);\n\n    _initializerDefineProperty(this, \"isRecommend\", _descriptor9, this);\n\n    _initializerDefineProperty(this, \"customMenu\", _descriptor10, this);\n\n    _initializerDefineProperty(this, \"isLoading\", _descriptor11, this);\n\n    _initializerDefineProperty(this, \"toggledActionId\", _descriptor12, this);\n\n    _initializerDefineProperty(this, \"isAuth\", _descriptor13, this);\n\n    _initializerDefineProperty(this, \"model\", _descriptor14, this);\n\n    _initializerDefineProperty(this, \"firstFormId\", _descriptor15, this);\n\n    _initializerDefineProperty(this, \"secondFormId\", _descriptor16, this);\n\n    _initializerDefineProperty(this, \"columns\", _descriptor17, this);\n\n    _initializerDefineProperty(this, \"dataSource\", _descriptor18, this);\n\n    _initializerDefineProperty(this, \"itemDataT\", _descriptor19, this);\n\n    _initializerDefineProperty(this, \"PageInfo\", _descriptor20, this);\n\n    this.setLastMenuHistory = function (actionItem, actionId) {\n      var history = sessionStorage.getItem('menu') || [];\n      var index = -1;\n      if (!isEmpty(history)) history = JSON.parse(history);\n\n      for (var i = 0; i < history.length; i++) {\n        if (history[i].id === actionId) {\n          index = i;\n        }\n      }\n\n      if (index > -1) {\n        history.splice(index, 1);\n      }\n\n      history.push(actionItem);\n\n      if (history.length >= 4) {\n        history.splice(0, 1);\n      }\n\n      history = uniqBy(history, 'id');\n      sessionStorage.setItem('menu', JSON.stringify(history));\n    };\n  }\n\n  _createClass(Home, [{\n    key: \"setLogin\",\n    value: function () {\n      var _setLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(params, finished) {\n        var result, res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.isLoading = true;\n                result = {\n                  success: false,\n                  token: null\n                };\n                _context.prev = 2;\n                _context.next = 5;\n                return services.posts('setLogin')(params);\n\n              case 5:\n                res = _context.sent;\n                this.isLoading = false;\n\n                if (isDataExist(res)) {\n                  console.log(res);\n                  result.success = true;\n                  result.token = res.data.value;\n                }\n\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](2);\n                console.log(_context.t0);\n\n              case 13:\n                if (finished) finished(result);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 10]]);\n      }));\n\n      function setLogin(_x, _x2) {\n        return _setLogin.apply(this, arguments);\n      }\n\n      return setLogin;\n    }()\n    /* 首页初始化获取菜单信息 */\n\n  }, {\n    key: \"getMenuList\",\n    value: function () {\n      var _getMenuList = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var menuObj;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                menuObj = toJS(this.menuObj); // try {\n                //   let res = await services.gets('getMenuList')();\n                //   if (isDataExist(res)) {\n                //     let data = res.data.data.children;\n                //     /* 一级菜单 */\n                //     menuObj.map(lv => {\n                //       Object.assign(lv, {\n                //         id: uuid(),\n                //         displayNone: true\n                //       });\n                //       data.map(item => {\n                //         if (lv.name === item.text) {\n                //           if (item.children) {\n                //             lv.children = item.children;\n                //           }\n                //           Object.assign(lv, {\n                //             id: item.id,\n                //             displayNone: false\n                //           });\n                //         }\n                //       })\n                //     })\n                //     /* 二级菜单 */\n                //     menuObj.map(lv => {\n                //       if (!lv.displayNone) {\n                //         lv.leafMenuModels.map(lv2 => {\n                //           Object.assign(lv2, {\n                //             id: uuid(),\n                //             displayNone: false\n                //           });\n                //           lv.children.map(item => {\n                //             if (item.parentId === lv.id) {\n                //               if (item.text === lv2.name) {\n                //                 Object.assign(lv2, {\n                //                   id: item.id,\n                //                   displayNone: false\n                //                 })\n                //               }\n                //             }\n                //           })\n                //         })\n                //       }\n                //     })\n                //     this.isAuth = !isEmpty(data);\n                //     this.menuObj = menuObj;\n                //     /* 设置当前登录页面 */\n                //     let current = {\n                //       id: -1, parentId: -1\n                //     }\n                //     data.map(item => {\n                //       if (current.id > 0) return;\n                //       if (!isEmpty(item.children)) {\n                //         current = item.children[0]\n                //       }\n                //     })\n                //     menuObj.map(lv => {\n                //       if (lv.id === current.parentId) {\n                //         current.url = lv.leafMenuModels.filter(lv2 => lv2.id === current.id)[0].path\n                //       }\n                //     })\n                //     return current.url\n                //   }\n                // } catch (error) {\n                //   console.log(error);\n                // }\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getMenuList() {\n        return _getMenuList.apply(this, arguments);\n      }\n\n      return getMenuList;\n    }()\n    /* 菜单加载的初始化 */\n\n  }, {\n    key: \"initMenu\",\n    value: function initMenu(pathname) {\n      var _this = this;\n\n      // pathname=['/device']\n      try {\n        var menuObj = toJS(this.menuObj);\n        var currentMenu = [],\n            crumbsList = [];\n        /* 菜单查询 */\n\n        currentMenu = menuObj.filter(function (leaf) {\n          return leaf.path === pathname;\n        })[0];\n\n        if (isEmpty(currentMenu)) {\n          menuObj.map(function (lv) {\n            if (!isEmpty(currentMenu)) return lv.id;\n            currentMenu = pathname.indexOf(lv.path) > -1 ? lv : {};\n          });\n        }\n\n        if (!isEmpty(currentMenu)) {\n          crumbsList.push({\n            id: currentMenu.id,\n            name: currentMenu.name,\n            path: currentMenu.path\n          });\n        }\n        /**\n         * \n         */\n\n\n        if (currentMenu.path === pathname) {\n          this.selectedKeys = [\"\".concat(currentMenu.id)];\n          this.openKeys = [\"\".concat(currentMenu.parentId)];\n        } else {\n          /* 判断二级 */\n          currentMenu.leafMenuModels.map(function (lv2) {\n            if (lv2.path === pathname) {\n              _this.selectedKeys = [\"\".concat(lv2.id)];\n              _this.openKeys = [\"\".concat(lv2.parentId)];\n              crumbsList.push({\n                id: lv2.id,\n                name: lv2.name,\n                path: lv2.path\n              });\n            } else {\n              if (lv2.activeRouter) {\n                if (lv2.activeRouter.indexOf(pathname) > -1) {\n                  _this.selectedKeys = [\"\".concat(lv2.id)];\n                  _this.openKeys = [\"\".concat(lv2.parentId)];\n                }\n              } else {\n                /* 判断三级 */\n                if (!isEmpty(lv2.leafMenuModels)) {\n                  lv2.leafMenuModels.map(function (lv3) {\n                    if (lv3.path === pathname) {\n                      _this.selectedKeys = [\"\".concat(lv3.id)];\n                      _this.openKeys = [\"\".concat(lv2.parentId)];\n                    }\n                  });\n                }\n              }\n            }\n          });\n        }\n\n        var history = sessionStorage.getItem('menu') || [];\n\n        if (!isEmpty(history)) {\n          history = JSON.parse(history);\n          history = uniqBy(history, 'id');\n        }\n\n        sessionStorage.setItem('menu', JSON.stringify(history));\n        this.crumbsList = crumbsList;\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }, {\n    key: \"toggleMenu\",\n    value: function toggleMenu(_ref, finished) {\n      var actionItem = _ref.actionItem,\n          actionId = _ref.actionId;\n\n      try {\n        var menuObj = toJS(this.menuObj); // 根菜单节点\n        // actionId = actionId;\n\n        /* 查询当前菜单item */\n\n        var current = checkCurrentMenu({\n          menuObj: menuObj,\n          actionId: actionId\n        });\n        var currentMenu = current.currentMenu,\n            crumbsList = current.crumbsList;\n        finished(currentMenu[0].path);\n        this.crumbsList = crumbsList;\n        /* 记录历史-浏览记录 */\n\n        this.setLastMenuHistory(currentMenu[0], actionId);\n        this.toggledActionId = currentMenu[0].id;\n        this.selectedKeys = [\"\".concat(currentMenu[0].id)];\n        this.openKeys = [\"\".concat(currentMenu[0].parentId)];\n        this.model = 'submit';\n        this.firstFormId = currentMenu[0].id;\n        this.secondFormId = 0;\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }, {\n    key: \"getModel\",\n    value: function getModel() {\n      return this.model;\n    }\n  }, {\n    key: \"addCrumbs\",\n    value: function addCrumbs(obj) {\n      this.crumbsList.push(obj);\n    }\n  }, {\n    key: \"changeValue\",\n    value: function changeValue(key, value) {\n      this[key] = value;\n    }\n  }, {\n    key: \"changeModel\",\n    value: function changeModel(value) {\n      this.model = value;\n    }\n  }, {\n    key: \"queryAll\",\n    value: function () {\n      var _queryAll = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(params) {\n        var res, dataColumns, dataDataSource, columns, dataSource, i, obj;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.isLoading = true;\n                console.log(params.pageIndex);\n                params.pageIndex = params.pageIndex - 1;\n                _context3.prev = 3;\n                _context3.next = 6;\n                return services.getRequest(services.requestList.getFieldNameAndType, params);\n\n              case 6:\n                res = _context3.sent;\n                this.isLoading = false;\n\n                if (isDataExist(res)) {\n                  dataColumns = res.data.data.columns;\n                  dataDataSource = res.data.data.dataSource;\n                  columns = [];\n                  dataSource = [];\n\n                  for (i = 0; i < dataColumns.length; i++) {\n                    obj = {};\n                    obj.title = dataColumns[i].name;\n                    obj.dataIndex = dataColumns[i].propertyId;\n                    obj.key = dataColumns[i].propertyId;\n                    columns.push(obj);\n                  }\n\n                  this.columns = columns;\n\n                  for (i = 0; i < dataDataSource.length; i++) {\n                    obj = {};\n                    obj = dataDataSource[i].data;\n                    obj.id = dataDataSource[i].dataId;\n                    obj.key = (i + 1).toString();\n                    dataSource.push(obj);\n                  }\n\n                  this.dataSource = dataSource;\n                  console.log(this.dataSource);\n                }\n\n                _context3.next = 14;\n                break;\n\n              case 11:\n                _context3.prev = 11;\n                _context3.t0 = _context3[\"catch\"](3);\n                console.log(_context3.t0);\n\n              case 14:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[3, 11]]);\n      }));\n\n      function queryAll(_x3) {\n        return _queryAll.apply(this, arguments);\n      }\n\n      return queryAll;\n    }()\n  }, {\n    key: \"addNew\",\n    value: function () {\n      var _addNew = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(params) {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.isLoading = true;\n                _context4.prev = 1;\n                _context4.next = 4;\n                return services.putRequest(services.requestList.saveDatabase, params);\n\n              case 4:\n                res = _context4.sent;\n                this.isLoading = false;\n                console.log(params);\n\n                if (!isDataExist(res)) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", res);\n\n              case 9:\n                _context4.next = 14;\n                break;\n\n              case 11:\n                _context4.prev = 11;\n                _context4.t0 = _context4[\"catch\"](1);\n                console.log(_context4.t0);\n\n              case 14:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[1, 11]]);\n      }));\n\n      function addNew(_x4) {\n        return _addNew.apply(this, arguments);\n      }\n\n      return addNew;\n    }()\n  }, {\n    key: \"queryField\",\n    value: function () {\n      var _queryField = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(params) {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                this.isLoading = true;\n                _context5.prev = 1;\n                _context5.next = 4;\n                return services.getRequest(services.requestList.getAllForm, params);\n\n              case 4:\n                res = _context5.sent;\n                //   let res = {}\n                //   res.code = 0\n                //   res.data = []\n                //   res.data.data = [\n                //     {\n                //         \"secondFormId\":0,\n                //         \"properties\":[\n                //             {\n                //                 \"propertyId\":\"tenement_1_form1_1_form2_0_id_1\",\n                //                 \"typeId\":\"1\",\n                //                 \"name\":\"车间\",\n                //                 \"order\":1,\n                //                 \"others\":{\n                //                     // ........\n                //                 }\n                //             },\n                //             {\n                //               \"propertyId\":\"tenement_1_form1_1_form2_0_id_2\",\n                //               \"typeId\":\"1\",\n                //               \"name\":\"车间2\",\n                //               \"order\":2,\n                //               \"others\":{\n                //                   // ........\n                //               }\n                //           }\n                //         ]\n                //     }\n                // ]\n                this.isLoading = false;\n\n                if (isDataExist(res)) {\n                  this.itemDataT = res.data.data;\n                  console.log(toJS(this.itemDataT));\n                }\n\n                _context5.next = 12;\n                break;\n\n              case 9:\n                _context5.prev = 9;\n                _context5.t0 = _context5[\"catch\"](1);\n                console.log(_context5.t0);\n\n              case 12:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[1, 9]]);\n      }));\n\n      function queryField(_x5) {\n        return _queryField.apply(this, arguments);\n      }\n\n      return queryField;\n    }()\n  }, {\n    key: \"deleteObj\",\n    value: function () {\n      var _deleteObj = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6(params) {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                this.isLoading = true;\n                _context6.prev = 1;\n                _context6.next = 4;\n                return services.putRequest(services.requestList.deleteForm, params);\n\n              case 4:\n                res = _context6.sent;\n                this.isLoading = false;\n\n                if (!isDataExist(res)) {\n                  _context6.next = 8;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", res);\n\n              case 8:\n                _context6.next = 13;\n                break;\n\n              case 10:\n                _context6.prev = 10;\n                _context6.t0 = _context6[\"catch\"](1);\n                console.log(_context6.t0);\n\n              case 13:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[1, 10]]);\n      }));\n\n      function deleteObj(_x6) {\n        return _deleteObj.apply(this, arguments);\n      }\n\n      return deleteObj;\n    }()\n  }, {\n    key: \"updateField\",\n    value: function () {\n      var _updateField = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7(params) {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                this.isLoading = true;\n                _context7.prev = 1;\n                _context7.next = 4;\n                return services.putRequest(services.requestList.updataField, params);\n\n              case 4:\n                res = _context7.sent;\n                this.isLoading = false;\n\n                if (!isDataExist(res)) {\n                  _context7.next = 8;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", res);\n\n              case 8:\n                _context7.next = 13;\n                break;\n\n              case 10:\n                _context7.prev = 10;\n                _context7.t0 = _context7[\"catch\"](1);\n                console.log(_context7.t0);\n\n              case 13:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[1, 10]]);\n      }));\n\n      function updateField(_x7) {\n        return _updateField.apply(this, arguments);\n      }\n\n      return updateField;\n    }()\n  }, {\n    key: \"updataObj\",\n    value: function () {\n      var _updataObj = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee8(params) {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                console.log(params);\n                this.isLoading = true;\n                _context8.prev = 2;\n                _context8.next = 5;\n                return services.putRequest(services.requestList.updataObj, params);\n\n              case 5:\n                res = _context8.sent;\n                this.isLoading = false;\n\n                if (!isDataExist(res)) {\n                  _context8.next = 9;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", res);\n\n              case 9:\n                _context8.next = 14;\n                break;\n\n              case 11:\n                _context8.prev = 11;\n                _context8.t0 = _context8[\"catch\"](2);\n                console.log(_context8.t0);\n\n              case 14:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[2, 11]]);\n      }));\n\n      function updataObj(_x8) {\n        return _updataObj.apply(this, arguments);\n      }\n\n      return updataObj;\n    }()\n  }, {\n    key: \"countObj\",\n    value: function () {\n      var _countObj = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee9(params) {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                this.isLoading = true;\n                _context9.prev = 1;\n                console.log(params);\n                _context9.next = 5;\n                return services.getRequest(services.requestList.countObj, params);\n\n              case 5:\n                res = _context9.sent;\n                this.isLoading = false;\n\n                if (!isDataExist(res)) {\n                  _context9.next = 10;\n                  break;\n                }\n\n                this.PageInfo.total = res.data.data;\n                return _context9.abrupt(\"return\", res);\n\n              case 10:\n                _context9.next = 15;\n                break;\n\n              case 12:\n                _context9.prev = 12;\n                _context9.t0 = _context9[\"catch\"](1);\n                console.log(_context9.t0);\n\n              case 15:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[1, 12]]);\n      }));\n\n      function countObj(_x9) {\n        return _countObj.apply(this, arguments);\n      }\n\n      return countObj;\n    }()\n  }]);\n\n  return Home;\n}(), _temp), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"contentScrollHeight\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"collapsed\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"menuObj\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return MenuObj.leafMenuModels;\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class.prototype, \"openKeys\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return ['1'];\n  }\n}), _descriptor5 = _applyDecoratedDescriptor(_class.prototype, \"selectedKeys\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return ['101'];\n  }\n}), _descriptor6 = _applyDecoratedDescriptor(_class.prototype, \"crumbsList\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), _descriptor7 = _applyDecoratedDescriptor(_class.prototype, \"size_class\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), _descriptor8 = _applyDecoratedDescriptor(_class.prototype, \"isClickCollapsed\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor9 = _applyDecoratedDescriptor(_class.prototype, \"isRecommend\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return true;\n  }\n}), _descriptor10 = _applyDecoratedDescriptor(_class.prototype, \"customMenu\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), _descriptor11 = _applyDecoratedDescriptor(_class.prototype, \"isLoading\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor12 = _applyDecoratedDescriptor(_class.prototype, \"toggledActionId\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), _descriptor13 = _applyDecoratedDescriptor(_class.prototype, \"isAuth\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor14 = _applyDecoratedDescriptor(_class.prototype, \"model\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return \"submit\";\n  }\n}), _descriptor15 = _applyDecoratedDescriptor(_class.prototype, \"firstFormId\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 1;\n  }\n}), _descriptor16 = _applyDecoratedDescriptor(_class.prototype, \"secondFormId\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), _descriptor17 = _applyDecoratedDescriptor(_class.prototype, \"columns\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), _descriptor18 = _applyDecoratedDescriptor(_class.prototype, \"dataSource\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), _descriptor19 = _applyDecoratedDescriptor(_class.prototype, \"itemDataT\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), _descriptor20 = _applyDecoratedDescriptor(_class.prototype, \"PageInfo\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {\n      pageIndex: 0,\n      pageSize: 2,\n      total: 0\n      /* 设置登陆信息 */\n\n    };\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"setLogin\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"setLogin\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"getMenuList\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"getMenuList\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"initMenu\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"initMenu\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"toggleMenu\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"toggleMenu\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"getModel\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"getModel\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"addCrumbs\", [_dec], Object.getOwnPropertyDescriptor(_class.prototype, \"addCrumbs\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"changeValue\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"changeValue\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"changeModel\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"changeModel\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"queryAll\", [_dec2], Object.getOwnPropertyDescriptor(_class.prototype, \"queryAll\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"addNew\", [_dec3], Object.getOwnPropertyDescriptor(_class.prototype, \"addNew\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"queryField\", [_dec4], Object.getOwnPropertyDescriptor(_class.prototype, \"queryField\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"deleteObj\", [_dec5], Object.getOwnPropertyDescriptor(_class.prototype, \"deleteObj\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"updateField\", [_dec6], Object.getOwnPropertyDescriptor(_class.prototype, \"updateField\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"updataObj\", [_dec7], Object.getOwnPropertyDescriptor(_class.prototype, \"updataObj\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"countObj\", [_dec8], Object.getOwnPropertyDescriptor(_class.prototype, \"countObj\"), _class.prototype)), _class));\nvar HomeStore = new Home();\nexport default HomeStore;","map":{"version":3,"sources":["F:\\documents\\bl-device-manage-test\\src\\stores\\HomeStore.js"],"names":["observable","action","toJS","isDataExist","services","isEmpty","uniqBy","checkCurrentMenu","MenuObj","uuid","require","Home","bound","setLastMenuHistory","actionItem","actionId","history","sessionStorage","getItem","index","JSON","parse","i","length","id","splice","push","setItem","stringify","params","finished","isLoading","result","success","token","posts","res","console","log","data","value","menuObj","pathname","currentMenu","crumbsList","filter","leaf","path","map","lv","indexOf","name","selectedKeys","openKeys","parentId","leafMenuModels","lv2","activeRouter","lv3","error","current","toggledActionId","model","firstFormId","secondFormId","obj","key","pageIndex","getRequest","requestList","getFieldNameAndType","dataColumns","columns","dataDataSource","dataSource","title","dataIndex","propertyId","dataId","toString","putRequest","saveDatabase","getAllForm","itemDataT","deleteForm","updataField","updataObj","countObj","PageInfo","total","pageSize","HomeStore"],"mappings":"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","sourcesContent":["import { observable, action, toJS, } from 'mobx';\nimport { isDataExist } from 'Utils/dataTools';\nimport * as services from '../services/home';\nimport { isEmpty, uniqBy, } from 'lodash';\nimport { checkCurrentMenu } from 'utils/dataTools';\nimport { MenuObj } from '../constants/configs';\nconst uuid = require('uuid/v1');\n\nclass Home {\n  @observable contentScrollHeight = 0; //当前content滚动高度\n  @observable collapsed = false;\n  @observable menuObj = MenuObj.leafMenuModels;\n  @observable openKeys = ['1']; // 菜单初始化默认打开的key数组\n  @observable selectedKeys = ['101']; // 菜单初始化默认选中的key数组\n  @observable crumbsList = []; // 全局crumbs需求\n  @observable size_class = '';\n  @observable isClickCollapsed = false;\n  @observable isRecommend = true; // 是否需要推荐菜单\n  @observable customMenu = [];// 首页自定义菜单\n  @observable isLoading = false;\n  @observable toggledActionId = 0;\n  @observable isAuth = false;\n  @observable model = \"submit\"; //模式控制;\n  @observable firstFormId = 1\n  @observable secondFormId = 0\n  @observable columns = [];\n  @observable dataSource = [];\n  @observable itemDataT = []\n  @observable PageInfo = { pageIndex: 0, pageSize: 2 ,total:0}\n\n  /* 设置登陆信息 */\n  @action async setLogin(params, finished) {\n    this.isLoading = true;\n    let result = { success: false, token: null };\n    try {\n      let res = await services.posts('setLogin')(params);\n      this.isLoading = false;\n      if (isDataExist(res)) {\n        console.log(res);\n        result.success = true;\n        result.token = res.data.value;\n      }\n\n    } catch (error) {\n      console.log(error)\n    }\n    if (finished)\n      finished(result);\n  }\n\n  /* 首页初始化获取菜单信息 */\n  @action async getMenuList() {\n    let menuObj = toJS(this.menuObj);\n    // try {\n    //   let res = await services.gets('getMenuList')();\n    //   if (isDataExist(res)) {\n    //     let data = res.data.data.children;\n    //     /* 一级菜单 */\n    //     menuObj.map(lv => {\n    //       Object.assign(lv, {\n    //         id: uuid(),\n    //         displayNone: true\n    //       });\n    //       data.map(item => {\n    //         if (lv.name === item.text) {\n    //           if (item.children) {\n    //             lv.children = item.children;\n    //           }\n    //           Object.assign(lv, {\n    //             id: item.id,\n    //             displayNone: false\n    //           });\n    //         }\n    //       })\n    //     })\n    //     /* 二级菜单 */\n    //     menuObj.map(lv => {\n    //       if (!lv.displayNone) {\n    //         lv.leafMenuModels.map(lv2 => {\n    //           Object.assign(lv2, {\n    //             id: uuid(),\n    //             displayNone: false\n    //           });\n    //           lv.children.map(item => {\n    //             if (item.parentId === lv.id) {\n    //               if (item.text === lv2.name) {\n    //                 Object.assign(lv2, {\n    //                   id: item.id,\n    //                   displayNone: false\n    //                 })\n    //               }\n    //             }\n    //           })\n    //         })\n    //       }\n\n    //     })\n    //     this.isAuth = !isEmpty(data);\n    //     this.menuObj = menuObj;\n    //     /* 设置当前登录页面 */\n    //     let current = {\n    //       id: -1, parentId: -1\n    //     }\n    //     data.map(item => {\n    //       if (current.id > 0) return;\n    //       if (!isEmpty(item.children)) {\n    //         current = item.children[0]\n    //       }\n    //     })\n    //     menuObj.map(lv => {\n    //       if (lv.id === current.parentId) {\n    //         current.url = lv.leafMenuModels.filter(lv2 => lv2.id === current.id)[0].path\n    //       }\n    //     })\n    //     return current.url\n    //   }\n    // } catch (error) {\n    //   console.log(error);\n    // }\n  }\n\n  /* 菜单加载的初始化 */\n  @action initMenu(pathname) {\n    // pathname=['/device']\n\n    try {\n      let menuObj = toJS(this.menuObj);\n      let currentMenu = [], crumbsList = [];\n      /* 菜单查询 */\n      currentMenu = menuObj.filter(leaf => leaf.path === pathname)[0];\n      if (isEmpty(currentMenu)) {\n        menuObj.map(lv => {\n          if (!isEmpty(currentMenu)) return lv.id;\n          currentMenu = (pathname.indexOf(lv.path) > -1) ? lv : {};\n        });\n      }\n      if (!isEmpty(currentMenu)) {\n        crumbsList.push({\n          id: currentMenu.id, name: currentMenu.name, path: currentMenu.path\n        });\n      }\n      /**\n       * \n       */\n      if (currentMenu.path === pathname) {\n        this.selectedKeys = [`${currentMenu.id}`];\n        this.openKeys = [`${currentMenu.parentId}`];\n      } else {\n        /* 判断二级 */\n        currentMenu.leafMenuModels.map(lv2 => {\n\n          if (lv2.path === pathname) {\n            this.selectedKeys = [`${lv2.id}`];\n            this.openKeys = [`${lv2.parentId}`];\n            crumbsList.push({\n              id: lv2.id, name: lv2.name, path: lv2.path\n            });\n          } else {\n            if (lv2.activeRouter) {\n              if (lv2.activeRouter.indexOf(pathname) > -1) {\n                this.selectedKeys = [`${lv2.id}`];\n                this.openKeys = [`${lv2.parentId}`];\n              }\n            } else {\n              /* 判断三级 */\n              if (!isEmpty(lv2.leafMenuModels)) {\n                lv2.leafMenuModels.map(lv3 => {\n                  if (lv3.path === pathname) {\n                    this.selectedKeys = [`${lv3.id}`];\n                    this.openKeys = [`${lv2.parentId}`];\n                  }\n                })\n              }\n            }\n          }\n        })\n      }\n      let history = sessionStorage.getItem('menu') || [];\n      if (!isEmpty(history)) {\n        history = JSON.parse(history);\n        history = uniqBy(history, 'id');\n      }\n      sessionStorage.setItem('menu', JSON.stringify(history));\n      this.crumbsList = crumbsList;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  @action toggleMenu({ actionItem, actionId }, finished) {\n    try {\n      let menuObj = toJS(this.menuObj); // 根菜单节点\n      // actionId = actionId;\n      /* 查询当前菜单item */\n      let current = checkCurrentMenu({ menuObj, actionId });\n      let currentMenu = current.currentMenu, crumbsList = current.crumbsList;\n      finished(currentMenu[0].path);\n      this.crumbsList = crumbsList;\n      /* 记录历史-浏览记录 */\n      this.setLastMenuHistory(currentMenu[0], actionId);\n      this.toggledActionId = currentMenu[0].id;\n      this.selectedKeys = [`${currentMenu[0].id}`];\n      this.openKeys = [`${currentMenu[0].parentId}`];\n      this.model = 'submit'\n      this.firstFormId = currentMenu[0].id;\n      this.secondFormId = 0\n    } catch (error) {\n      console.log(error)\n    }\n  }\n  setLastMenuHistory = (actionItem, actionId) => {\n    let history = sessionStorage.getItem('menu') || [];\n    let index = -1;\n    if (!isEmpty(history)) history = JSON.parse(history);\n    for (let i = 0; i < history.length; i++) {\n      if (history[i].id === actionId) {\n        index = i;\n      }\n    }\n    if (index > -1) {\n      history.splice(index, 1);\n    }\n    history.push(actionItem);\n    if (history.length >= 4) {\n      history.splice(0, 1);\n    }\n    history = uniqBy(history, 'id');\n    sessionStorage.setItem('menu', JSON.stringify(history));\n  }\n  @action getModel() {\n    return this.model;\n  }\n  @action.bound addCrumbs(obj) {\n    this.crumbsList.push(obj);\n  }\n\n  @action changeValue(key, value) {\n    this[key] = value;\n  }\n\n  @action changeModel(value) {\n    this.model = value;\n  }\n\n  @action.bound async queryAll(params) {\n    this.isLoading = true;\n    console.log(params.pageIndex);\n    params.pageIndex = params.pageIndex - 1;\n    try {\n      let res = await services.getRequest(services.requestList.getFieldNameAndType, params);\n      this.isLoading = false;\n      if (isDataExist(res)) {\n        const dataColumns = res.data.data.columns\n        const dataDataSource = res.data.data.dataSource\n        const columns = [];\n        const dataSource = [];\n        for (var i = 0; i < dataColumns.length; i++) {\n          var obj = {}\n          obj.title = dataColumns[i].name\n          obj.dataIndex = dataColumns[i].propertyId\n          obj.key = dataColumns[i].propertyId\n          columns.push(obj)\n        }\n        this.columns = columns\n        for (var i = 0; i < dataDataSource.length; i++) {\n          var obj = {}\n          obj = dataDataSource[i].data;\n          obj.id = dataDataSource[i].dataId\n          obj.key = (i + 1).toString()\n          dataSource.push(obj)\n        }\n        this.dataSource = dataSource;\n        console.log(this.dataSource);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  @action.bound async addNew(params) {\n    this.isLoading = true;\n    try {\n      let res = await services.putRequest(services.requestList.saveDatabase, params);\n      this.isLoading = false\n      console.log(params);\n      if (isDataExist(res)) {\n        return res;\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  @action.bound async queryField(params) {\n    this.isLoading = true;\n    try {\n      let res = await services.getRequest(services.requestList.getAllForm, params);\n    //   let res = {}\n    //   res.code = 0\n    //   res.data = []\n    //   res.data.data = [\n    //     {\n    //         \"secondFormId\":0,\n    //         \"properties\":[\n    //             {\n    //                 \"propertyId\":\"tenement_1_form1_1_form2_0_id_1\",\n    //                 \"typeId\":\"1\",\n    //                 \"name\":\"车间\",\n    //                 \"order\":1,\n    //                 \"others\":{\n    //                     // ........\n    //                 }\n    //             },\n    //             {\n    //               \"propertyId\":\"tenement_1_form1_1_form2_0_id_2\",\n    //               \"typeId\":\"1\",\n    //               \"name\":\"车间2\",\n    //               \"order\":2,\n    //               \"others\":{\n    //                   // ........\n    //               }\n    //           }\n    //         ]\n    //     }\n    // ]\n      this.isLoading = false\n      if (isDataExist(res)) {\n        this.itemDataT = res.data.data;\n        console.log(toJS(this.itemDataT));\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  @action.bound async deleteObj(params) {\n    this.isLoading = true;\n    try {\n      let res = await services.putRequest(services.requestList.deleteForm, params);\n      this.isLoading = false\n      if (isDataExist(res)) {\n        return res\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  @action.bound async updateField(params) {\n    this.isLoading = true;\n    try {\n      let res = await services.putRequest(services.requestList.updataField, params);\n      this.isLoading = false\n      if (isDataExist(res)) {\n        return res\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  @action.bound async updataObj(params) {\n    console.log(params);\n    this.isLoading = true;\n    try {\n      let res = await services.putRequest(services.requestList.updataObj, params);\n      this.isLoading = false\n      if (isDataExist(res)) {\n        return res\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  @action.bound async countObj(params){\n    this.isLoading = true;\n    try {\n      console.log(params);\n      let res = await services.getRequest(services.requestList.countObj, params);\n      this.isLoading = false\n      if (isDataExist(res)) {\n        this.PageInfo.total = res.data.data\n        return res\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\nlet HomeStore = new Home();\nexport default HomeStore;"]},"metadata":{},"sourceType":"module"}