{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport _slicedToArray from \"F:\\\\documents\\\\bl-device-manage-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\layouts\\\\FormLayout\\\\index.js\";\n\n/*\r\n * @Author: EmberCCC 1810888456@qq.com\r\n * @Date: 2022-07-02 03:21:54\r\n * @LastEditors: EmberCCC 1810888456@qq.com\r\n * @LastEditTime: 2022-07-08 06:49:33\r\n * @FilePath: \\bl-device-manage-test\\src\\layouts\\FormLayout\\index.js\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n */\nimport React, { useEffect, useState } from 'react';\nimport FormRender, { useForm } from 'form-render';\nimport { inject, observer } from 'mobx-react';\nimport { toJS } from 'mobx';\nimport { restore } from 'layouts/FormEdit/changeTool';\nimport { getCheckArr } from './formUtil';\nvar FormLayout = observer(function (_ref) {\n  var HomeStore = _ref.HomeStore,\n      FormStore = _ref.FormStore;\n\n  var _useState = useState({\n    \"type\": \"object\",\n    \"properties\": {\n      \"inputName\": {\n        \"title\": \"简单输入框\",\n        \"type\": \"string\"\n      },\n      \"list2_19At1u\": {\n        \"title\": \"数组\",\n        \"type\": \"array\",\n        \"widget\": \"list2\",\n        \"items\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"input_qgBa5C\": {\n              \"title\": \"输入框\",\n              \"type\": \"string\",\n              \"props\": {}\n            },\n            \"input_hitFWe\": {\n              \"title\": \"输入框\",\n              \"type\": \"string\",\n              \"props\": {}\n            }\n          }\n        },\n        \"props\": {}\n      }\n    },\n    \"labelWidth\": 120,\n    \"displayType\": \"row\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      schema = _useState2[0],\n      setSchema = _useState2[1];\n\n  var form = useForm();\n\n  var onFinish = function onFinish(formData) {\n    var firstFormId = HomeStore.firstFormId; // FormStore.submitData({ 'formId': firstFormId, 'data': formData })\n\n    var checkArr = getCheckArr(form.schema);\n    console.log(form.schema.properties);\n    console.log({\n      'formId': firstFormId,\n      'data': formData,\n      'checkFieldIds': checkArr\n    }); // if (checkArr.length > 0) {\n    //   FormStore.submitDataCheck({ 'formId': firstFormId, 'data': formData, 'checkFieldIds': checkArr });\n    // } else {\n    //   FormStore.submitData({ 'formId': firstFormId, 'data': formData })\n    // }\n\n    console.log(checkArr);\n    form.resetFields();\n  };\n\n  useEffect(function () {// const { firstFormId } = HomeStore\n    // FormStore.getFormField({ formId: firstFormId }).then(() => {\n    //   setSchema(restore(toJS(FormStore.formField)))\n    //   console.log(schema);\n    // });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form_layout\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(FormRender, {\n    schema: schema['root'],\n    form: form,\n    onFinish: onFinish,\n    style: {\n      overflowY: 'auto'\n    },\n    debug: \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  })), /*#__PURE__*/React.createElement(_Button, {\n    onClick: form.submit,\n    type: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"\\u63D0\\u4EA4\"));\n});\nexport default inject(function (stores) {\n  return {\n    HomeStore: stores.HomeStore,\n    FormStore: stores.FormStore\n  };\n})(FormLayout);","map":{"version":3,"names":["React","useEffect","useState","FormRender","useForm","inject","observer","toJS","restore","getCheckArr","FormLayout","HomeStore","FormStore","schema","setSchema","form","onFinish","formData","firstFormId","checkArr","console","log","properties","resetFields","overflowY","submit","stores"],"sources":["F:/documents/bl-device-manage-test/src/layouts/FormLayout/index.js"],"sourcesContent":["/*\r\n * @Author: EmberCCC 1810888456@qq.com\r\n * @Date: 2022-07-02 03:21:54\r\n * @LastEditors: EmberCCC 1810888456@qq.com\r\n * @LastEditTime: 2022-07-08 06:49:33\r\n * @FilePath: \\bl-device-manage-test\\src\\layouts\\FormLayout\\index.js\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n */\r\nimport React, { useEffect, useState } from 'react';\r\nimport FormRender, { useForm } from 'form-render';\r\nimport { Button } from 'antd';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { toJS } from 'mobx';\r\nimport { restore } from 'layouts/FormEdit/changeTool';\r\nimport { getCheckArr } from './formUtil';\r\n\r\n\r\nconst FormLayout = observer(({ HomeStore, FormStore }) => {\r\n  const [schema, setSchema] = useState({\r\n    \"type\": \"object\",\r\n    \"properties\": {\r\n      \"inputName\": {\r\n        \"title\": \"简单输入框\",\r\n        \"type\": \"string\"\r\n      },\r\n      \"list2_19At1u\": {\r\n        \"title\": \"数组\",\r\n        \"type\": \"array\",\r\n        \"widget\": \"list2\",\r\n        \"items\": {\r\n          \"type\": \"object\",\r\n          \"properties\": {\r\n            \"input_qgBa5C\": {\r\n              \"title\": \"输入框\",\r\n              \"type\": \"string\",\r\n              \"props\": {}\r\n            },\r\n            \"input_hitFWe\": {\r\n              \"title\": \"输入框\",\r\n              \"type\": \"string\",\r\n              \"props\": {}\r\n            }\r\n          }\r\n        },\r\n        \"props\": {}\r\n      }\r\n    },\r\n    \"labelWidth\": 120,\r\n    \"displayType\": \"row\"\r\n  });\r\n  const form = useForm();\r\n  const onFinish = (formData) => {\r\n    const { firstFormId } = HomeStore;\r\n    // FormStore.submitData({ 'formId': firstFormId, 'data': formData })\r\n    let checkArr = getCheckArr(form.schema)\r\n    console.log(form.schema.properties);\r\n    console.log(({'formId': firstFormId, 'data': formData, 'checkFieldIds': checkArr}));\r\n    // if (checkArr.length > 0) {\r\n    //   FormStore.submitDataCheck({ 'formId': firstFormId, 'data': formData, 'checkFieldIds': checkArr });\r\n    // } else {\r\n    //   FormStore.submitData({ 'formId': firstFormId, 'data': formData })\r\n    // }\r\n    console.log(checkArr);\r\n    form.resetFields();\r\n  }\r\n  useEffect(() => {\r\n    // const { firstFormId } = HomeStore\r\n    // FormStore.getFormField({ formId: firstFormId }).then(() => {\r\n    //   setSchema(restore(toJS(FormStore.formField)))\r\n    //   console.log(schema);\r\n    // });\r\n  }, [])\r\n  return (\r\n    <div>\r\n      <div className='form_layout'>\r\n        <FormRender schema={schema['root']} form={form} onFinish={onFinish} style={{ overflowY: 'auto' }} debug='true' />\r\n      </div>\r\n      <Button onClick={form.submit} type=\"primary\">提交</Button>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default inject((stores) => ({ HomeStore: stores.HomeStore, FormStore: stores.FormStore }))(FormLayout);"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,UAAP,IAAqBC,OAArB,QAAoC,aAApC;AAEA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,YAAjC;AACA,SAASC,IAAT,QAAqB,MAArB;AACA,SAASC,OAAT,QAAwB,6BAAxB;AACA,SAASC,WAAT,QAA4B,YAA5B;AAGA,IAAMC,UAAU,GAAGJ,QAAQ,CAAC,gBAA8B;EAAA,IAA3BK,SAA2B,QAA3BA,SAA2B;EAAA,IAAhBC,SAAgB,QAAhBA,SAAgB;;EACxD,gBAA4BV,QAAQ,CAAC;IACnC,QAAQ,QAD2B;IAEnC,cAAc;MACZ,aAAa;QACX,SAAS,OADE;QAEX,QAAQ;MAFG,CADD;MAKZ,gBAAgB;QACd,SAAS,IADK;QAEd,QAAQ,OAFM;QAGd,UAAU,OAHI;QAId,SAAS;UACP,QAAQ,QADD;UAEP,cAAc;YACZ,gBAAgB;cACd,SAAS,KADK;cAEd,QAAQ,QAFM;cAGd,SAAS;YAHK,CADJ;YAMZ,gBAAgB;cACd,SAAS,KADK;cAEd,QAAQ,QAFM;cAGd,SAAS;YAHK;UANJ;QAFP,CAJK;QAmBd,SAAS;MAnBK;IALJ,CAFqB;IA6BnC,cAAc,GA7BqB;IA8BnC,eAAe;EA9BoB,CAAD,CAApC;EAAA;EAAA,IAAOW,MAAP;EAAA,IAAeC,SAAf;;EAgCA,IAAMC,IAAI,GAAGX,OAAO,EAApB;;EACA,IAAMY,QAAQ,GAAG,SAAXA,QAAW,CAACC,QAAD,EAAc;IAC7B,IAAQC,WAAR,GAAwBP,SAAxB,CAAQO,WAAR,CAD6B,CAE7B;;IACA,IAAIC,QAAQ,GAAGV,WAAW,CAACM,IAAI,CAACF,MAAN,CAA1B;IACAO,OAAO,CAACC,GAAR,CAAYN,IAAI,CAACF,MAAL,CAAYS,UAAxB;IACAF,OAAO,CAACC,GAAR,CAAa;MAAC,UAAUH,WAAX;MAAwB,QAAQD,QAAhC;MAA0C,iBAAiBE;IAA3D,CAAb,EAL6B,CAM7B;IACA;IACA;IACA;IACA;;IACAC,OAAO,CAACC,GAAR,CAAYF,QAAZ;IACAJ,IAAI,CAACQ,WAAL;EACD,CAbD;;EAcAtB,SAAS,CAAC,YAAM,CACd;IACA;IACA;IACA;IACA;EACD,CANQ,EAMN,EANM,CAAT;EAOA,oBACE;IAAA;MAAA;MAAA;IAAA;IAAA;EAAA,gBACE;IAAK,SAAS,EAAC,aAAf;IAAA;MAAA;MAAA;IAAA;IAAA;EAAA,gBACE,oBAAC,UAAD;IAAY,MAAM,EAAEY,MAAM,CAAC,MAAD,CAA1B;IAAoC,IAAI,EAAEE,IAA1C;IAAgD,QAAQ,EAAEC,QAA1D;IAAoE,KAAK,EAAE;MAAEQ,SAAS,EAAE;IAAb,CAA3E;IAAkG,KAAK,EAAC,MAAxG;IAAA;MAAA;MAAA;IAAA;IAAA;EAAA,EADF,CADF,eAIE;IAAQ,OAAO,EAAET,IAAI,CAACU,MAAtB;IAA8B,IAAI,EAAC,SAAnC;IAAA;MAAA;MAAA;IAAA;IAAA;EAAA,kBAJF,CADF;AAQD,CA/D0B,CAA3B;AAiEA,eAAepB,MAAM,CAAC,UAACqB,MAAD;EAAA,OAAa;IAAEf,SAAS,EAAEe,MAAM,CAACf,SAApB;IAA+BC,SAAS,EAAEc,MAAM,CAACd;EAAjD,CAAb;AAAA,CAAD,CAAN,CAAmFF,UAAnF,CAAf"},"metadata":{},"sourceType":"module"}