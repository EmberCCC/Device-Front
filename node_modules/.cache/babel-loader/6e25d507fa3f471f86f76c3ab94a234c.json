{"ast":null,"code":"import _defineProperty from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport \"antd/lib/tag/style\";\nimport _Tag from \"antd/lib/tag\";\nimport _classCallCheck from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\documents\\\\bl-device-manage\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"F:\\\\documents\\\\bl-device-manage\\\\src\\\\layouts\\\\ZDeviceMonitor\\\\index.js\";\n\nimport React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport LineCharts from './LineCharts';\nimport AreaCharts from './AreaCharts';\nimport PieCharts from './PieCharts';\nimport GroupColumn from './GroupColumn';\nimport './index.less';\nvar ZDeviceMonitor = (_dec = inject('ZCloudDeviceStore'), _dec(_class = observer(_class = (_temp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ZDeviceMonitor, _Component);\n\n  function ZDeviceMonitor() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ZDeviceMonitor);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ZDeviceMonitor)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      data1: [],\n      data2: [],\n      data3: [],\n      data4: [],\n      dataValue: []\n    };\n\n    _this.getNowFormatDate = function (index) {\n      var date = new Date();\n      var seperator2 = ':'; //前十分钟时间\n\n      var interTimes = parseInt(index) * 60 * 1000;\n      interTimes = parseInt(interTimes);\n      date = new Date(Date.parse(date) - interTimes);\n      var hour = date.getHours(),\n          minutes = date.getMinutes(),\n          seconds = date.getSeconds();\n\n      if (hour >= 0 && hour <= 9) {\n        hour = '0' + hour;\n      }\n\n      if (minutes >= 0 && minutes <= 9) {\n        minutes = '0' + minutes;\n      }\n\n      if (seconds >= 0 && seconds <= 9) {\n        seconds = '0' + seconds;\n      }\n\n      var currentdate = hour + seperator2 + minutes + seperator2 + seconds;\n      return currentdate;\n    };\n\n    _this.getDay = function (day) {\n      var today = new Date();\n      var targetday_milliseconds = today.getTime() + 1000 * 60 * 60 * 24 * day;\n      today.setTime(targetday_milliseconds); //注意，这行是关键代码\n\n      var tYear = today.getFullYear();\n      var tMonth = today.getMonth();\n      var tDate = today.getDate();\n\n      var doHandleMonth = function doHandleMonth(month) {\n        var m = month;\n\n        if (month.toString().length == 1) {\n          m = '0' + month;\n        }\n\n        return m;\n      };\n\n      tMonth = doHandleMonth(tMonth + 1);\n      tDate = doHandleMonth(tDate);\n      return tYear + '' + tMonth + '' + tDate;\n    };\n\n    _this.getRandomIntInclusive = function (min, max) {\n      min = Math.ceil(min);\n      max = Math.floor(max);\n      return Math.floor(Math.random() * (max - min + 1)) + min; //含最大值，含最小值\n    };\n\n    return _this;\n  }\n\n  _createClass(ZDeviceMonitor, [{\n    key: \"render\",\n    value: function render() {\n      var monitorList = this.props.ZCloudDeviceStore.monitorList;\n      return React.createElement(\"div\", {\n        style: {\n          background: '#fff',\n          paddingBottom: '10px',\n          height: '100%',\n          width: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"title-all-device\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23\n        },\n        __self: this\n      }, monitorList.map(function (item) {\n        return React.createElement(\"li\", {\n          key: item.devId,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 26\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"image\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 27\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          alt: \"\\u56FE\\u7247\",\n          src: \"https://assets-boranet.oss-cn-hangzhou.aliyuncs.com/applet/device01.jpg\",\n          width: \"100%\",\n          height: \"100%\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 28\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"content-div\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 35\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            position: 'relative'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36\n          },\n          __self: this\n        }, React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37\n          },\n          __self: this\n        }, item.devId), React.createElement(\"div\", {\n          style: {\n            position: 'absolute',\n            top: 0,\n            right: 0\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        }, item.devStatus == 2 ? React.createElement(_Tag, {\n          color: \"#f50\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        }, \"\\u544A\\u8B66\") : item.devStatus == 1 ? React.createElement(_Tag, {\n          color: \"#2db7f5\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        }, \"\\u8FD0\\u884C\") : item.devStatus == 0 ? React.createElement(_Tag, {\n          color: \"#B3B3B3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, \"\\u79BB\\u7EBF\") : React.createElement(_Tag, {\n          color: \"#FFBF00\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }, \"\\u5F85\\u673A\")), React.createElement(\"ul\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        }, React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        }, \"\\u8BBE\\u5907\\u7F16\\u53F7\\uFF1A\"), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, item.devId)), React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, \"\\u4E0A\\u4F20\\u65F6\\u95F4\\uFF1A\"), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, item.updateTime))))));\n      })), React.createElement(\"ul\", {\n        className: \"device-second1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        style: {\n          width: '50%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"\\u8BBE\\u5907\\u8F6C\\u901F\"), React.createElement(LineCharts, {\n        data: this.state.data1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      })), React.createElement(\"li\", {\n        style: {\n          width: '50%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \"\\u8BBE\\u5907\\u5229\\u7528\\u7387\"), React.createElement(GroupColumn, {\n        fields: this.state.dataValue,\n        data: this.state.data2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }))), React.createElement(\"ul\", {\n        className: \"device-second1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"\\u8BBE\\u5907OEE\"), React.createElement(AreaCharts, {\n        data: this.state.data4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      })), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"\\u8BBE\\u5907\\u500D\\u7387\"), React.createElement(LineCharts, {\n        data: this.state.data3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }))));\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.timer = null;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.ZCloudDeviceStore.getMonitor(); // this.timer = setInterval(()=>{\n      // \tthis.props.ZCloudDeviceStore.getMonitor()\n      // },10000)\n\n      /* 设置所有列表的动态数据 */\n\n      var data1 = [],\n          data2 = [],\n          data3 = [],\n          data4 = [];\n      /* 利用率 */\n\n      var dataValue = [];\n\n      for (var key = -1; key > -6; key--) {\n        dataValue.push(\"\".concat(this.getDay(key)));\n      }\n\n      for (var idx = 1; idx < 7; idx++) {\n        var _item;\n\n        var item = (_item = {\n          index: idx,\n          name: 'OP' + idx + '0'\n        }, _defineProperty(_item, dataValue[0], this.getRandomIntInclusive(50, 80)), _defineProperty(_item, dataValue[1], this.getRandomIntInclusive(50, 80)), _defineProperty(_item, dataValue[2], this.getRandomIntInclusive(50, 80)), _defineProperty(_item, dataValue[3], this.getRandomIntInclusive(50, 80)), _defineProperty(_item, dataValue[4], this.getRandomIntInclusive(50, 80)), _item);\n        data2.push(item);\n      } // data2 = data2.reverse();\n\n      /* 设备转速 */\n\n\n      for (var i = 1; i < 7; i++) {\n        var list = [];\n\n        for (var _key2 = 60; _key2 >= 0; _key2 -= 10) {\n          var _item2 = {\n            month: this.getNowFormatDate(_key2),\n            city: 'OP' + i + '0',\n            temperature: this.getRandomIntInclusive(30, 100)\n          };\n          list.push(_item2);\n        }\n\n        data1.push.apply(data1, list);\n      }\n      /* 设备倍率 */\n\n\n      for (var _i = 1; _i < 7; _i++) {\n        var _list = [];\n\n        for (var _key3 = 60; _key3 >= 0; _key3 -= 10) {\n          var _item3 = {\n            month: this.getNowFormatDate(_key3),\n            city: 'OP' + _i + '0',\n            temperature: this.getRandomIntInclusive(30, 100)\n          };\n\n          _list.push(_item3);\n        }\n\n        data3.push.apply(data3, _list);\n      }\n      /* 设备OEE */\n\n\n      for (var _i2 = 1; _i2 < 7; _i2++) {\n        var _data;\n\n        var _list2 = [];\n\n        for (var _key4 = -1; _key4 > -6; _key4--) {\n          var _item4 = {\n            country: 'OP' + _i2 + '0',\n            year: this.getDay(_key4),\n            value: this.getRandomIntInclusive(50, 80)\n          };\n\n          _list2.push(_item4);\n        }\n\n        (_data = data4).push.apply(_data, _list2);\n      }\n\n      data4 = data4.reverse();\n      this.setState({\n        data1: data1,\n        data2: data2,\n        data3: data3,\n        data4: data4,\n        dataValue: dataValue\n      });\n    }\n  }]);\n\n  return ZDeviceMonitor;\n}(Component), _temp)) || _class) || _class);\nexport default ZDeviceMonitor;","map":{"version":3,"sources":["F:\\documents\\bl-device-manage\\src\\layouts\\ZDeviceMonitor\\index.js"],"names":["React","Component","inject","observer","LineCharts","AreaCharts","PieCharts","GroupColumn","ZDeviceMonitor","state","data1","data2","data3","data4","dataValue","getNowFormatDate","index","date","Date","seperator2","interTimes","parseInt","parse","hour","getHours","minutes","getMinutes","seconds","getSeconds","currentdate","getDay","day","today","targetday_milliseconds","getTime","setTime","tYear","getFullYear","tMonth","getMonth","tDate","getDate","doHandleMonth","month","m","toString","length","getRandomIntInclusive","min","max","Math","ceil","floor","random","monitorList","props","ZCloudDeviceStore","background","paddingBottom","height","width","map","item","devId","position","top","right","devStatus","updateTime","timer","getMonitor","key","push","idx","name","i","list","city","temperature","country","year","value","reverse","setState"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { Button, Tag, Divider } from 'antd';\nimport LineCharts from './LineCharts';\nimport AreaCharts from './AreaCharts';\nimport PieCharts from './PieCharts';\nimport GroupColumn from './GroupColumn'\nimport './index.less';\n\n@inject('ZCloudDeviceStore')\n@observer\nclass ZDeviceMonitor extends Component {\n\tstate = {\n\t\tdata1: [],\n\t\tdata2: [],\n\t\tdata3: [],\n\t\tdata4: [],dataValue:[]\n\t};\n\trender() {\n\t\tconst { monitorList } = this.props.ZCloudDeviceStore;\n\t\treturn (\n\t\t\t<div style={{ background: '#fff',paddingBottom:'10px',height:'100%',width:'100%' }}>\n\t\t\t\t<ul className='title-all-device'>\n\t\t\t\t\t{monitorList.map(item => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li key={item.devId}>\n\t\t\t\t\t\t\t\t<div className='image'>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\talt='图片'\n\t\t\t\t\t\t\t\t\t\tsrc='https://assets-boranet.oss-cn-hangzhou.aliyuncs.com/applet/device01.jpg'\n\t\t\t\t\t\t\t\t\t\twidth='100%'\n\t\t\t\t\t\t\t\t\t\theight='100%'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className='content-div'>\n\t\t\t\t\t\t\t\t\t<div style={{ position: 'relative' }}>\n\t\t\t\t\t\t\t\t\t\t<h4>{item.devId}</h4>\n\t\t\t\t\t\t\t\t\t\t<div style={{ position: 'absolute', top: 0, right: 0 }}>\n\t\t\t\t\t\t\t\t\t\t\t{item.devStatus == 2 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<Tag color='#f50'>告警</Tag>\n\t\t\t\t\t\t\t\t\t\t\t) : item.devStatus == 1 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<Tag color='#2db7f5'>运行</Tag>\n\t\t\t\t\t\t\t\t\t\t\t) : item.devStatus == 0 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<Tag color='#B3B3B3'>离线</Tag>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<Tag color='#FFBF00'>待机</Tag>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>设备编号：</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{item.devId}</span>\n\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>上传时间：</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{item.updateTime}</span>\n\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t\t<ul className='device-second1'>\n\t\t\t\t\t<li style={{ width: '50%' }}>\n\t\t\t\t\t\t<h3>设备转速</h3>\n\t\t\t\t\t\t{/* 近1小时 */}\n\t\t\t\t\t\t<LineCharts data={this.state.data1} />\n\t\t\t\t\t</li>\n\t\t\t\t\t<li style={{ width: '50%' }}>\n\t\t\t\t\t\t<h3>设备利用率</h3>\n\t\t\t\t\t\t<GroupColumn fields={this.state.dataValue} data={this.state.data2} />\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<ul className='device-second1'>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<h3>设备OEE</h3>\n\t\t\t\t\t\t<AreaCharts data={this.state.data4} />\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<h3>设备倍率</h3>\n\t\t\t\t\t\t<LineCharts data={this.state.data3} />\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n\tcomponentWillUnmount() {\n\t\tthis.timer = null;\n\t}\n\tcomponentDidMount() {\n\t\tthis.props.ZCloudDeviceStore.getMonitor()\n\t\t// this.timer = setInterval(()=>{\n\t\t// \tthis.props.ZCloudDeviceStore.getMonitor()\n\t\t// },10000)\n\t\t/* 设置所有列表的动态数据 */\n\t\tlet data1 = [],\n\t\t\tdata2 = [],\n\t\t\tdata3 = [],\n\t\t\tdata4 = [];\n\t\t/* 利用率 */\n\t\tlet dataValue = []\n\t\tfor (let key = -1; key > -6; key--) {\n\t\t\tdataValue.push(`${this.getDay(key)}`);\n\t\t}\n\t\tfor (let idx = 1; idx < 7; idx++) {\n\t\t\tlet item = {\n\t\t\t\tindex:idx,\n\t\t\t\tname: 'OP' + (idx) + '0',\n\t\t\t\t[dataValue[0]]: this.getRandomIntInclusive(50, 80),\n\t\t\t\t[dataValue[1]]: this.getRandomIntInclusive(50, 80),\n\t\t\t\t[dataValue[2]]: this.getRandomIntInclusive(50, 80),\n\t\t\t\t[dataValue[3]]: this.getRandomIntInclusive(50, 80),\n\t\t\t\t[dataValue[4]]: this.getRandomIntInclusive(50, 80),\n\t\t\t};\n\t\t\tdata2.push(item);\n\t\t}\n\t\t// data2 = data2.reverse();\n\t\t/* 设备转速 */\n\t\tfor (let i = 1; i < 7; i++) {\n\t\t\tlet list = [];\n\t\t\tfor (let key = 60; key >= 0; key -= 10) {\n\t\t\t\tlet item = {\n\t\t\t\t\tmonth: this.getNowFormatDate(key),\n\t\t\t\t\tcity: 'OP' + i + '0',\n\t\t\t\t\ttemperature: this.getRandomIntInclusive(30, 100)\n\t\t\t\t};\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t\tdata1.push(...list);\n\t\t}\n\n\t\t/* 设备倍率 */\n\t\tfor (let i = 1; i < 7; i++) {\n\t\t\tlet list = [];\n\t\t\tfor (let key = 60; key >= 0; key -= 10) {\n\t\t\t\tlet item = {\n\t\t\t\t\tmonth: this.getNowFormatDate(key),\n\t\t\t\t\tcity: 'OP' + i + '0',\n\t\t\t\t\ttemperature: this.getRandomIntInclusive(30, 100)\n\t\t\t\t};\n\t\t\t\tlist.push(item);\n\t\t\t}\n\n\t\t\tdata3.push(...list);\n\t\t\t\n\t\t}\n\n\t\t/* 设备OEE */\n\t\tfor (let i = 1; i < 7; i++) {\n\t\t\tlet list = [];\n\t\t\tfor (let key = -1; key > -6; key--) {\n\t\t\t\tlet item = {\n\t\t\t\t\tcountry: 'OP' + i + '0',\n\t\t\t\t\tyear: this.getDay(key),\n\t\t\t\t\tvalue: this.getRandomIntInclusive(50, 80)\n\t\t\t\t};\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t\tdata4.push(...list);\n\t\t}\n\t\tdata4 = data4.reverse();\n\t\tthis.setState({\n\t\t\tdata1,\n\t\t\tdata2,\n\t\t\tdata3,\n\t\t\tdata4,\n\t\t\tdataValue\n\t\t});\n\t}\n\tgetNowFormatDate = index => {\n\t\tlet date = new Date();\n\t\tlet seperator2 = ':';\n\t\t//前十分钟时间\n\t\tlet interTimes = parseInt(index) * 60 * 1000;\n\n\t\tinterTimes = parseInt(interTimes);\n\t\tdate = new Date(Date.parse(date) - interTimes);\n\t\tlet hour = date.getHours(),minutes = date.getMinutes(),seconds = date.getSeconds();\n\n\t\tif (hour >= 0 && hour <= 9) {\n\t\t\thour = '0' + hour;\n\t\t}\n\t\tif (minutes >= 0 && minutes <= 9) {\n\t\t\tminutes = '0' + minutes;\n\t\t}\n\t\tif (seconds >= 0 && seconds <= 9) {\n\t\t\tseconds = '0' + seconds;\n\t\t}\n\t\tlet currentdate = hour + seperator2 + minutes + seperator2 + seconds;\n\t\treturn currentdate;\n\t};\n\tgetDay = day => {\n\t\tlet today = new Date();\n\t\tlet targetday_milliseconds = today.getTime() + 1000 * 60 * 60 * 24 * day;\n\t\ttoday.setTime(targetday_milliseconds); //注意，这行是关键代码\n\t\tlet tYear = today.getFullYear();\n\t\tlet tMonth = today.getMonth();\n\t\tlet tDate = today.getDate();\n\t\tconst doHandleMonth = month => {\n\t\t\tlet m = month;\n\t\t\tif (month.toString().length == 1) {\n\t\t\t\tm = '0' + month;\n\t\t\t}\n\t\t\treturn m;\n\t\t};\n\t\ttMonth = doHandleMonth(tMonth + 1);\n\t\ttDate = doHandleMonth(tDate);\n\t\treturn tYear + '' + tMonth + '' + tDate;\n\t};\n\tgetRandomIntInclusive = (min, max) => {\n\t\tmin = Math.ceil(min);\n\t\tmax = Math.floor(max);\n\t\treturn Math.floor(Math.random() * (max - min + 1)) + min; //含最大值，含最小值\n\t};\n}\nexport default ZDeviceMonitor;\n"]},"metadata":{},"sourceType":"module"}