{"map":"{\"version\":3,\"sources\":[\"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\layouts\\\\FlowManage\\\\Sidebar.js\",\"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\layouts\\\\FlowManage\\\\Node\\\\FlowNode.js\",\"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\layouts\\\\FlowManage\\\\Node\\\\CopyNode.js\",\"F:\\\\documents\\\\bl-device-manage-test\\\\src\\\\layouts\\\\FlowManage\\\\index.js\"],\"names\":[\"Sidebar\",\"onDragStart\",\"event\",\"nodeType\",\"dataTransfer\",\"setData\",\"effectAllowed\",\"react_default\",\"a\",\"createElement\",\"tag_default\",\"icon\",\"FormOutlined\",\"color\",\"draggable\",\"TwitterOutlined\",\"divider_default\",\"type\",\"TextUpdaterNode\",\"_ref\",\"data\",\"className\",\"esm\",\"position\",\"Position\",\"Top\",\"id\",\"EditOutlined\",\"htmlFor\",\"label\",\"Bottom\",\"Left\",\"Right\",\"SendOutlined\",\"Header\",\"Sider\",\"Content\",\"initialNodes\",\"x\",\"y\",\"positionAbsolute\",\"initialEdges\",\"source\",\"sourceHandle\",\"target\",\"targetHandle\",\"markerEnd\",\"nodeTypes\",\"FlowNode\",\"CopyNode\",\"getId\",\"concat\",\"DnDFlow\",\"props\",\"reactFlowWrapper\",\"useRef\",\"_useNodesState\",\"useNodesState\",\"_useNodesState2\",\"Object\",\"slicedToArray\",\"nodes\",\"setNodes\",\"onNodesChange\",\"_useEdgesState\",\"useEdgesState\",\"_useEdgesState2\",\"edges\",\"setEdges\",\"onEdgesChange\",\"_useState\",\"useState\",\"_useState2\",\"reactFlowInstance\",\"setReactFlowInstance\",\"_useState3\",\"_useState4\",\"nodeName\",\"setNodeName\",\"_useState5\",\"_useState6\",\"nodeId\",\"setNodeId\",\"useEffect\",\"nds\",\"map\",\"node\",\"objectSpread\",\"onConnect\",\"useCallback\",\"params\",\"obj\",\"MarkerType\",\"Arrow\",\"eds\",\"addEdge\",\"onDragOver\",\"preventDefault\",\"dropEffect\",\"onDrop\",\"reactFlowBounds\",\"current\",\"getBoundingClientRect\",\"getData\",\"project\",\"clientX\",\"left\",\"clientY\",\"top\",\"newNode\",\"onSave\",\"flow\",\"toObject\",\"item\",\"push\",\"res\",\"services\",\"addFlow\",\"isDataExist\",\"error\",\"onNodeClick\",\"layout_default\",\"button_default\",\"onClick\",\"ref\",\"onInit\",\"fitView\",\"style\",\"backgroundColor\",\"value\",\"onChange\",\"evt\"],\"mappings\":\"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\",\"sourcesContent\":[\"/*\\r\\n * @Author: your name\\r\\n * @Date: 2022-04-11 16:13:26\\r\\n * @LastEditTime: 2022-04-17 11:07:00\\r\\n * @LastEditors: Please set LastEditors\\r\\n * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\\r\\n * @FilePath: \\\\bl-device-manage-test\\\\src\\\\layouts\\\\FlowManage\\\\Sidebar.js\\r\\n */\\r\\nimport React from 'react';\\r\\nimport { Divider, Tag } from 'antd';\\r\\nimport {\\r\\n  TwitterOutlined,\\r\\n  FormOutlined,\\r\\n  FacebookOutlined,\\r\\n  LinkedinOutlined,\\r\\n} from '@ant-design/icons';\\r\\n\\r\\nexport default () => {\\r\\n  const onDragStart = (event, nodeType) => {\\r\\n    event.dataTransfer.setData('application/reactflow', nodeType);\\r\\n    event.dataTransfer.effectAllowed = 'move';\\r\\n  };\\r\\n\\r\\n  return (\\r\\n    <div>\\r\\n      <Tag icon={<FormOutlined />} color=\\\"#55acee\\\">\\r\\n        <div  onDragStart={(event) => onDragStart(event, 'FlowNode')} draggable>\\r\\n          流程节点\\r\\n        </div>\\r\\n      </Tag>\\r\\n      <Tag icon={<TwitterOutlined />} color=\\\"#55acee\\\">\\r\\n        <div  onDragStart={(event) => onDragStart(event, 'CopyNode')} draggable>\\r\\n          抄送节点\\r\\n        </div>\\r\\n      </Tag>\\r\\n      <Divider type=\\\"vertical\\\" />\\r\\n      <Tag icon={<FormOutlined />} color=\\\"#55acee\\\">\\r\\n        水平等距\\r\\n      </Tag>\\r\\n      <Tag icon={<TwitterOutlined />} color=\\\"#55acee\\\">\\r\\n        垂直等距\\r\\n      </Tag>\\r\\n      <Divider type=\\\"vertical\\\" />\\r\\n      <Tag icon={<FormOutlined />} color=\\\"#55acee\\\">\\r\\n        -\\r\\n      </Tag>\\r\\n      <Tag icon={<TwitterOutlined />} color=\\\"#55acee\\\">\\r\\n        100%\\r\\n      </Tag>\\r\\n      <Tag icon={<TwitterOutlined />} color=\\\"#55acee\\\">\\r\\n        +\\r\\n      </Tag>\\r\\n      <Divider type=\\\"vertical\\\" />\\r\\n    </div>\\r\\n  );\\r\\n};\\r\\n\",\"/*\\r\\n * @Author: your name\\r\\n * @Date: 2022-04-16 16:12:59\\r\\n * @LastEditTime: 2022-04-17 11:58:16\\r\\n * @LastEditors: Please set LastEditors\\r\\n * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\\r\\n * @FilePath: \\\\bl-device-manage-test\\\\src\\\\layouts\\\\FlowManage\\\\Node\\\\Node1.js\\r\\n */\\r\\nimport React, { memo, useCallback } from 'react';\\r\\nimport {\\r\\n  EditOutlined\\r\\n} from '@ant-design/icons';\\r\\n\\r\\nimport { Handle, Position } from 'react-flow-renderer';\\r\\n\\r\\nconst handleStyle = { left: 10 };\\r\\n\\r\\nfunction TextUpdaterNode({ data }) {\\r\\n  return (\\r\\n    <div className=\\\"dndnode\\\">\\r\\n      <Handle type='target' position={Position.Top} id={'top'} />\\r\\n      <div>\\r\\n        <EditOutlined />\\r\\n        <label htmlFor=\\\"text\\\">{data.label}</label>\\r\\n      </div>\\r\\n      <Handle position={Position.Bottom} id={'bottom'} />\\r\\n      <Handle position={Position.Left} id={'left'} />\\r\\n      <Handle position={Position.Right} id={'right'} />\\r\\n    </div>\\r\\n  );\\r\\n}\\r\\n\\r\\nexport default TextUpdaterNode;\\r\\n\",\"/*\\r\\n * @Author: your name\\r\\n * @Date: 2022-04-16 16:12:59\\r\\n * @LastEditTime: 2022-04-17 11:58:19\\r\\n * @LastEditors: Please set LastEditors\\r\\n * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\\r\\n * @FilePath: \\\\bl-device-manage-test\\\\src\\\\layouts\\\\FlowManage\\\\Node\\\\Node1.js\\r\\n */\\r\\nimport React, { memo, useCallback } from 'react';\\r\\nimport {\\r\\n  SendOutlined\\r\\n} from '@ant-design/icons';\\r\\n\\r\\n\\r\\nimport { Handle, Position } from 'react-flow-renderer';\\r\\n\\r\\nconst handleStyle = { left: 10 };\\r\\n\\r\\nfunction TextUpdaterNode({ data }) {\\r\\n\\r\\n  return (\\r\\n    <div className=\\\"dndnode\\\">\\r\\n      <Handle type='target' position={Position.Top} id={'top'} />\\r\\n      <div>\\r\\n        <SendOutlined />\\r\\n        <label htmlFor=\\\"text\\\">{data.label}</label>\\r\\n      </div>\\r\\n      <Handle type='target' position={Position.Bottom} id={'bottom'} />\\r\\n      <Handle type='target' position={Position.Left} id={'left'} />\\r\\n      <Handle type='target' position={Position.Right} id={'right'} />\\r\\n    </div>\\r\\n  );\\r\\n}\\r\\n\\r\\nexport default TextUpdaterNode;\\r\\n\",\"import React, { useState, useRef, useCallback, useMemo, useEffect } from 'react';\\r\\nimport { Layout, Button, Menu, Dropdown, Divider } from 'antd';\\r\\nimport ReactFlow, {\\r\\n  ReactFlowProvider,\\r\\n  addEdge,\\r\\n  useNodesState,\\r\\n  useEdgesState,\\r\\n  Controls,\\r\\n  MiniMap,\\r\\n  MarkerType\\r\\n} from 'react-flow-renderer';\\r\\nimport * as services from '../../services/design';\\r\\nimport Sidebar from './Sidebar';\\r\\nimport FlowNode from './Node/FlowNode'\\r\\nimport CopyNode from './Node/CopyNode'\\r\\n\\r\\nimport './index.css';\\r\\nimport { isDataExist } from 'utils/dataTools';\\r\\n\\r\\nconst { Header, Sider, Content } = Layout;\\r\\nconst initialNodes = [\\r\\n  {\\r\\n    \\\"id\\\": \\\"0\\\",\\r\\n    \\\"type\\\": \\\"input\\\",\\r\\n    \\\"data\\\": {\\r\\n      \\\"label\\\": \\\"开始流程\\\"\\r\\n    },\\r\\n    \\\"position\\\": {\\r\\n      \\\"x\\\": 254,\\r\\n      \\\"y\\\": -76\\r\\n    },\\r\\n    \\\"positionAbsolute\\\": {\\r\\n      \\\"x\\\": 254,\\r\\n      \\\"y\\\": -76\\r\\n    }\\r\\n  },\\r\\n  {\\r\\n    \\\"id\\\": \\\"-1\\\",\\r\\n    \\\"type\\\": \\\"output\\\",\\r\\n    \\\"data\\\": {\\r\\n      \\\"label\\\": \\\"结束流程\\\"\\r\\n    },\\r\\n    \\\"position\\\": {\\r\\n      \\\"x\\\": 198,\\r\\n      \\\"y\\\": 112\\r\\n    },\\r\\n    \\\"positionAbsolute\\\": {\\r\\n      \\\"x\\\": 198,\\r\\n      \\\"y\\\": 112\\r\\n    }\\r\\n  },\\r\\n  {\\r\\n    \\\"id\\\": \\\"node_1\\\",\\r\\n    \\\"type\\\": \\\"FlowNode\\\",\\r\\n    \\\"position\\\": {\\r\\n      \\\"x\\\": 236.25,\\r\\n      \\\"y\\\": 32.5\\r\\n    },\\r\\n    \\\"data\\\": {\\r\\n      \\\"label\\\": \\\"FlowNode node\\\"\\r\\n    },\\r\\n    \\\"positionAbsolute\\\": {\\r\\n      \\\"x\\\": 236.25,\\r\\n      \\\"y\\\": 32.5\\r\\n    }\\r\\n  }\\r\\n];\\r\\nconst initialEdges = [\\r\\n  {\\r\\n    \\\"source\\\": \\\"0\\\",\\r\\n    \\\"sourceHandle\\\": null,\\r\\n    \\\"target\\\": \\\"node_1\\\",\\r\\n    \\\"targetHandle\\\": \\\"top\\\",\\r\\n    \\\"markerEnd\\\": {\\r\\n      \\\"type\\\": \\\"arrow\\\"\\r\\n    },\\r\\n    \\\"id\\\": \\\"reactflow__edge-0-node_1top\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"source\\\": \\\"node_1\\\",\\r\\n    \\\"sourceHandle\\\": \\\"bottom\\\",\\r\\n    \\\"target\\\": \\\"-1\\\",\\r\\n    \\\"targetHandle\\\": null,\\r\\n    \\\"markerEnd\\\": {\\r\\n      \\\"type\\\": \\\"arrow\\\"\\r\\n    },\\r\\n    \\\"id\\\": \\\"reactflow__edge-node_1bottom--1\\\"\\r\\n  }\\r\\n]\\r\\nconst nodeTypes = { FlowNode: FlowNode, CopyNode: CopyNode };\\r\\n\\r\\nlet id = 0;\\r\\nconst getId = () => `node_${++id}`;\\r\\n\\r\\nfunction DnDFlow(props) {\\r\\n  const reactFlowWrapper = useRef(null);\\r\\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\\r\\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\\r\\n  const [reactFlowInstance, setReactFlowInstance] = useState(null);\\r\\n  const [nodeName, setNodeName] = useState('');\\r\\n  const [nodeId, setNodeId] = useState('');\\r\\n\\r\\n\\r\\n  useEffect(() => {\\r\\n    setNodes((nds) =>\\r\\n      nds.map((node) => {\\r\\n        if (node.id === nodeId) {\\r\\n          // it's important that you create a new object here\\r\\n          // in order to notify react flow about the change\\r\\n          node.data = {\\r\\n            ...node.data,\\r\\n            label: nodeName,\\r\\n          };\\r\\n        }\\r\\n        return node;\\r\\n      })\\r\\n    );\\r\\n  }, [nodeName, setNodes]);\\r\\n\\r\\n  const onConnect = useCallback((params) => {\\r\\n    let obj = {\\r\\n      type: MarkerType.Arrow,\\r\\n    }\\r\\n    params.markerEnd = obj\\r\\n    setEdges((eds) => addEdge(params, eds))\\r\\n  }, []);\\r\\n\\r\\n  const onDragOver = useCallback((event) => {\\r\\n    event.preventDefault();\\r\\n    event.dataTransfer.dropEffect = 'move';\\r\\n  }, []);\\r\\n\\r\\n  const onDrop = useCallback(\\r\\n    (event) => {\\r\\n      event.preventDefault();\\r\\n\\r\\n      const reactFlowBounds = reactFlowWrapper.current.getBoundingClientRect();\\r\\n      const type = event.dataTransfer.getData('application/reactflow');\\r\\n\\r\\n      // check if the dropped element is valid\\r\\n      if (typeof type === 'undefined' || !type) {\\r\\n        return;\\r\\n      }\\r\\n\\r\\n      const position = reactFlowInstance.project({\\r\\n        x: event.clientX - reactFlowBounds.left,\\r\\n        y: event.clientY - reactFlowBounds.top,\\r\\n      });\\r\\n      const newNode = {\\r\\n        id: getId(),\\r\\n        type,\\r\\n        position,\\r\\n        data: { label: `${type} node` },\\r\\n      };\\r\\n\\r\\n      setNodes((nds) => nds.concat(newNode));\\r\\n    },\\r\\n    [reactFlowInstance]\\r\\n  );\\r\\n\\r\\n  const onSave = useCallback(() => {\\r\\n    console.log(props);\\r\\n    if (reactFlowInstance) {\\r\\n      const flow = reactFlowInstance.toObject();\\r\\n      let params = {}\\r\\n      params.firstFormId = 1;\\r\\n      params.edges = flow.edges\\r\\n      params.nodes = []\\r\\n      flow.nodes.map((item) => {\\r\\n        let obj = {}\\r\\n        obj.id = item.id\\r\\n        obj.type = item.type\\r\\n        obj.position = item.position\\r\\n        obj.data = item.data\\r\\n        obj.positionAbsolute = item.positionAbsolute\\r\\n        params.nodes.push(obj)\\r\\n      })\\r\\n      console.log(params);\\r\\n      try {\\r\\n        let res = services.putRequest(services.requestList.addFlow, params);\\r\\n        if (isDataExist(res)) {\\r\\n          return res;\\r\\n        }\\r\\n      } catch (error) {\\r\\n        console.log(error);\\r\\n      }\\r\\n      console.log(params);\\r\\n    }\\r\\n  }, [reactFlowInstance]);\\r\\n\\r\\n  const onNodeClick = useCallback((event, node) => {\\r\\n    setNodeId(node.id)\\r\\n    setNodeName(node.data.label)\\r\\n\\r\\n  }, [nodeName], [nodeId])\\r\\n\\r\\n  return (\\r\\n    <Layout>\\r\\n      <Header className='header'>\\r\\n        <Button type=\\\"primary\\\" className='save' onClick={onSave}>保存</Button>\\r\\n      </Header>\\r\\n      <Layout>\\r\\n        <Content>\\r\\n          <Layout>\\r\\n            <Header className='title'>\\r\\n              <Sidebar />\\r\\n            </Header>\\r\\n            <Content>\\r\\n              <div className=\\\"dndflow\\\">\\r\\n                <ReactFlowProvider>\\r\\n                  <Content>\\r\\n                    <div className=\\\"reactflow-wrapper\\\" ref={reactFlowWrapper}>\\r\\n                      <ReactFlow\\r\\n                        nodes={nodes}\\r\\n                        edges={edges}\\r\\n                        onNodesChange={onNodesChange}\\r\\n                        onEdgesChange={onEdgesChange}\\r\\n                        onConnect={onConnect}\\r\\n                        onInit={setReactFlowInstance}\\r\\n                        onDrop={onDrop}\\r\\n                        onDragOver={onDragOver}\\r\\n                        nodeTypes={nodeTypes}\\r\\n                        onNodeClick={onNodeClick}\\r\\n                        fitView\\r\\n                      >\\r\\n                        <Controls />\\r\\n                        <MiniMap />\\r\\n                      </ReactFlow>\\r\\n                    </div>\\r\\n                  </Content>\\r\\n                </ReactFlowProvider>\\r\\n              </div>\\r\\n            </Content>\\r\\n          </Layout>\\r\\n        </Content>\\r\\n        <Sider style={{ backgroundColor: 'white' }}>\\r\\n          <div className=\\\"updatenode__controls\\\">\\r\\n            <label>label:</label>\\r\\n            <input value={nodeName} onChange={(evt) => setNodeName(evt.target.value)} />\\r\\n          </div>\\r\\n        </Sider>\\r\\n      </Layout>\\r\\n\\r\\n    </Layout>\\r\\n\\r\\n  );\\r\\n};\\r\\n\\r\\nexport default DnDFlow;\\r\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1415:function(e,t,a){},1589:function(e,t,a){\"use strict\";a.r(t);a(138);var n=a(90),l=a.n(n),o=a(26),r=a(1400),c=(a(1359),a(1360)),i=a.n(c),d=a(0),u=a.n(d),m=a(1379),s=a(146),p=(a(1361),a(1362)),E=a.n(p),b=(a(1071),a(184)),f=a.n(b),g=a(566),v=a(947),y=function(){var e=function(e,t){e.dataTransfer.setData(\"application/reactflow\",t),e.dataTransfer.effectAllowed=\"move\"};return u.a.createElement(\"div\",null,u.a.createElement(f.a,{icon:u.a.createElement(g.a,null),color:\"#55acee\"},u.a.createElement(\"div\",{onDragStart:function(t){return e(t,\"FlowNode\")},draggable:!0},\"\\u6d41\\u7a0b\\u8282\\u70b9\")),u.a.createElement(f.a,{icon:u.a.createElement(v.a,null),color:\"#55acee\"},u.a.createElement(\"div\",{onDragStart:function(t){return e(t,\"CopyNode\")},draggable:!0},\"\\u6284\\u9001\\u8282\\u70b9\")),u.a.createElement(E.a,{type:\"vertical\"}),u.a.createElement(f.a,{icon:u.a.createElement(g.a,null),color:\"#55acee\"},\"\\u6c34\\u5e73\\u7b49\\u8ddd\"),u.a.createElement(f.a,{icon:u.a.createElement(v.a,null),color:\"#55acee\"},\"\\u5782\\u76f4\\u7b49\\u8ddd\"),u.a.createElement(E.a,{type:\"vertical\"}),u.a.createElement(f.a,{icon:u.a.createElement(g.a,null),color:\"#55acee\"},\"-\"),u.a.createElement(f.a,{icon:u.a.createElement(v.a,null),color:\"#55acee\"},\"100%\"),u.a.createElement(f.a,{icon:u.a.createElement(v.a,null),color:\"#55acee\"},\"+\"),u.a.createElement(E.a,{type:\"vertical\"}))},w=a(461);var j=function(e){var t=e.data;return u.a.createElement(\"div\",{className:\"dndnode\"},u.a.createElement(m.b,{type:\"target\",position:m.e.Top,id:\"top\"}),u.a.createElement(\"div\",null,u.a.createElement(w.a,null),u.a.createElement(\"label\",{htmlFor:\"text\"},t.label)),u.a.createElement(m.b,{position:m.e.Bottom,id:\"bottom\"}),u.a.createElement(m.b,{position:m.e.Left,id:\"left\"}),u.a.createElement(m.b,{position:m.e.Right,id:\"right\"}))},O=a(849);var C=function(e){var t=e.data;return u.a.createElement(\"div\",{className:\"dndnode\"},u.a.createElement(m.b,{type:\"target\",position:m.e.Top,id:\"top\"}),u.a.createElement(\"div\",null,u.a.createElement(O.a,null),u.a.createElement(\"label\",{htmlFor:\"text\"},t.label)),u.a.createElement(m.b,{type:\"target\",position:m.e.Bottom,id:\"bottom\"}),u.a.createElement(m.b,{type:\"target\",position:m.e.Left,id:\"left\"}),u.a.createElement(m.b,{type:\"target\",position:m.e.Right,id:\"right\"}))},N=(a(1415),a(40)),h=i.a.Header,k=i.a.Sider,_=i.a.Content,x=[{id:\"0\",type:\"input\",data:{label:\"\\u5f00\\u59cb\\u6d41\\u7a0b\"},position:{x:254,y:-76},positionAbsolute:{x:254,y:-76}},{id:\"-1\",type:\"output\",data:{label:\"\\u7ed3\\u675f\\u6d41\\u7a0b\"},position:{x:198,y:112},positionAbsolute:{x:198,y:112}},{id:\"node_1\",type:\"FlowNode\",position:{x:236.25,y:32.5},data:{label:\"FlowNode node\"},positionAbsolute:{x:236.25,y:32.5}}],D=[{source:\"0\",sourceHandle:null,target:\"node_1\",targetHandle:\"top\",markerEnd:{type:\"arrow\"},id:\"reactflow__edge-0-node_1top\"},{source:\"node_1\",sourceHandle:\"bottom\",target:\"-1\",targetHandle:null,markerEnd:{type:\"arrow\"},id:\"reactflow__edge-node_1bottom--1\"}],F={FlowNode:j,CopyNode:C},A=0,T=function(){return\"node_\".concat(++A)};t.default=function(e){var t=Object(d.useRef)(null),a=Object(m.j)(x),n=Object(r.a)(a,3),c=n[0],p=n[1],E=n[2],b=Object(m.i)(D),f=Object(r.a)(b,3),g=f[0],v=f[1],w=f[2],j=Object(d.useState)(null),O=Object(r.a)(j,2),C=O[0],A=O[1],S=Object(d.useState)(\"\"),H=Object(r.a)(S,2),R=H[0],B=H[1],I=Object(d.useState)(\"\"),J=Object(r.a)(I,2),L=J[0],V=J[1];Object(d.useEffect)(function(){p(function(e){return e.map(function(e){return e.id===L&&(e.data=Object(o.a)({},e.data,{label:R})),e})})},[R,p]);var X=Object(d.useCallback)(function(e){var t={type:m.c.Arrow};e.markerEnd=t,v(function(t){return Object(m.g)(e,t)})},[]),Y=Object(d.useCallback)(function(e){e.preventDefault(),e.dataTransfer.dropEffect=\"move\"},[]),q=Object(d.useCallback)(function(e){e.preventDefault();var a=t.current.getBoundingClientRect(),n=e.dataTransfer.getData(\"application/reactflow\");if(\"undefined\"!==typeof n&&n){var l=C.project({x:e.clientX-a.left,y:e.clientY-a.top}),o={id:T(),type:n,position:l,data:{label:\"\".concat(n,\" node\")}};p(function(e){return e.concat(o)})}},[C]),z=Object(d.useCallback)(function(){if(C){var e=C.toObject(),t={firstFormId:1};t.edges=e.edges,t.nodes=[],e.nodes.map(function(e){var a={};a.id=e.id,a.type=e.type,a.position=e.position,a.data=e.data,a.positionAbsolute=e.positionAbsolute,t.nodes.push(a)});try{var a=s.a(s.b.addFlow,t);if(Object(N.d)(a))return a}catch(n){}}},[C]),G=Object(d.useCallback)(function(e,t){V(t.id),B(t.data.label)},[R],[L]);return u.a.createElement(i.a,null,u.a.createElement(h,{className:\"header\"},u.a.createElement(l.a,{type:\"primary\",className:\"save\",onClick:z},\"\\u4fdd\\u5b58\")),u.a.createElement(i.a,null,u.a.createElement(_,null,u.a.createElement(i.a,null,u.a.createElement(h,{className:\"title\"},u.a.createElement(y,null)),u.a.createElement(_,null,u.a.createElement(\"div\",{className:\"dndflow\"},u.a.createElement(m.f,null,u.a.createElement(_,null,u.a.createElement(\"div\",{className:\"reactflow-wrapper\",ref:t},u.a.createElement(m.h,{nodes:c,edges:g,onNodesChange:E,onEdgesChange:w,onConnect:X,onInit:A,onDrop:q,onDragOver:Y,nodeTypes:F,onNodeClick:G,fitView:!0},u.a.createElement(m.a,null),u.a.createElement(m.d,null))))))))),u.a.createElement(k,{style:{backgroundColor:\"white\"}},u.a.createElement(\"div\",{className:\"updatenode__controls\"},u.a.createElement(\"label\",null,\"label:\"),u.a.createElement(\"input\",{value:R,onChange:function(e){return B(e.target.value)}})))))}}}]);","extractedComments":[]}